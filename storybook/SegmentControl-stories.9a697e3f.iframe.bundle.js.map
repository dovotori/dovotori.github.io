{"version":3,"file":"SegmentControl-stories.9a697e3f.iframe.bundle.js","mappings":";;;;;;;AAUA;AAGA;;;;;;;;;AAaA;AAUA;;AAEA;AAGA;;;;AAIA;AACA;;AAEA;;;;AAMA","sources":["webpack://dovotori/./src/components/SegmentControl.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrap = styled.div`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 0;\n  height: 40px;\n  border-radius: 20px;\n  background: ${(p) => p.theme.backgroundSubtleGradient};\n`;\n\nconst Segment = styled.button<{\n  $selected: boolean;\n  $hovered: boolean;\n  $hasHover: boolean;\n}>`\n  position: relative;\n  z-index: 1;\n  padding: 0 20px;\n  height: 100%;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  white-space: nowrap;\n  color: ${(p) => {\n    // When hovered, show dark text (marker is behind)\n    if (p.$hovered) return p.theme.background;\n    // When selected but another item is hovered, show light text (marker moved away)\n    if (p.$selected && p.$hasHover) return p.theme.text;\n    // When selected and nothing else hovered, show dark text (marker is behind)\n    if (p.$selected) return p.theme.background;\n    // Default: light text\n    return p.theme.text;\n  }};\n  font-weight: ${(p) => (p.$selected ? 600 : 400)};\n  transition: color 300ms ease-out;\n  ${(p) => p.theme.monospace}\n`;\n\nconst Marker = styled.div<{ $left: number; $width: number }>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ${(p) => p.$left}px;\n  width: ${(p) => p.$width}px;\n  border-radius: 20px;\n  background-color: ${(p) => p.theme.primary};\n  transition:\n    left 300ms cubic-bezier(0.4, 0, 0.2, 1),\n    width 300ms cubic-bezier(0.4, 0, 0.2, 1);\n`;\n\nexport const SegmentControl = ({\n  className,\n  items,\n  selectedId,\n  onClick,\n}: {\n  className?: string;\n  items: { label: string; id: string }[];\n  selectedId: string;\n  onClick: (id: string) => void;\n}) => {\n  const wrapRef = useRef<HTMLDivElement>(null);\n  const segmentRefs = useRef<Map<string, HTMLButtonElement>>(new Map());\n  const [markerStyle, setMarkerStyle] = useState({ left: 0, width: 0 });\n  const [hoveredId, setHoveredId] = useState<string | null>(null);\n\n  const activeId = hoveredId ?? selectedId;\n\n  useEffect(() => {\n    const selectedElement = segmentRefs.current.get(activeId);\n    const wrapElement = wrapRef.current;\n\n    if (selectedElement && wrapElement) {\n      const wrapRect = wrapElement.getBoundingClientRect();\n      const selectedRect = selectedElement.getBoundingClientRect();\n\n      setMarkerStyle({\n        left: selectedRect.left - wrapRect.left,\n        width: selectedRect.width,\n      });\n    }\n  }, [activeId]);\n\n  return (\n    <Wrap className={className} ref={wrapRef}>\n      <Marker $left={markerStyle.left} $width={markerStyle.width} />\n      {items.map((item) => (\n        <Segment\n          key={item.id}\n          ref={(el) => {\n            if (el) segmentRefs.current.set(item.id, el);\n          }}\n          $selected={item.id === selectedId}\n          $hovered={item.id === hoveredId}\n          $hasHover={hoveredId !== null}\n          onClick={() => onClick(item.id)}\n          onMouseEnter={() => setHoveredId(item.id)}\n          onMouseLeave={() => setHoveredId(null)}\n        >\n          {item.label}\n        </Segment>\n      ))}\n    </Wrap>\n  );\n};\n\nexport default SegmentControl;\n"],"names":[],"ignoreList":[],"sourceRoot":""}