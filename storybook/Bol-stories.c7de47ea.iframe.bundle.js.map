{"version":3,"file":"Bol-stories.c7de47ea.iframe.bundle.js","mappings":";;;;;;;;;AAkBA;;;;;;;;;;AAYA;;;;;;;;;;;;;;;;;;;;;;AAwBA;;;;AAMA;;;;AAMA;;;;;;;;;;AAYA;;;;;;;AASA;;;;;;;AASA;;;;;;;AASA;;;;;;;;;;AAYA;;;;;;AAMA;;AAIA;;;;;;;;;;;;;AAaA;;;;;AAKA;;;;;AAKA;;;;;AAKA;;;;AAIA;AACA;;;;AAIA;;;;AAIA;;;;AAIA;;;;AAIA;;;;AAIA;;AAIA;;;ACvKA","sources":["webpack://dovotori/./src/components/Bol.jsx","webpack://dovotori/./src/components/stories/Bol.stories.jsx"],"sourcesContent":["import { ReactComponent as BolSvg } from \"Assets/svg/bol2.svg\";\nimport { ReactComponent as BonzaiSvg } from \"Assets/svg/bonzai2.svg\";\nimport { useCallback, useEffect, useRef } from \"react\";\nimport styled, { createGlobalStyle, keyframes } from \"styled-components\";\nimport usePrevious from \"../hooks/usePrevious\";\nimport { timeout } from \"../utils\";\n\nconst GlobalStyle = createGlobalStyle`\nbody[theme='light'] {\n  .hair {\n    fill: #444;\n  }   \n  .mode {\n    fill: #eee;\n  }\n}\n`;\n\nconst revolution = keyframes`\n0% {\n  transform: none;\n}\n30% {\n  transform: rotate3d(0, 1, 0, 15deg);\n}\n70% {\n  transform: rotate3d(0, 1, 0, -25deg);\n}\n`;\n\nconst Div = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  svg {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 100%;\n    height: 100%;\n    transform: translate3d(-50%, -50%, 0);\n  }\n\n  svg path {\n    transition: opacity 100ms ease-out;\n    opacity: 0;\n  }\n\n  svg path.anim {\n    opacity: 1;\n  }\n`;\n\nconst dash = keyframes`\n  to {\n    stroke-dashoffset: -100;\n  }\n`;\n\nconst blink = keyframes`\n  to {\n    visibility: hidden;\n  }\n`;\n\nconst move = keyframes`\n0%, 100% {\n  transform: none;\n}\n35% {\n  transform: translate3d(0.2%, -0.1%, 0);\n}\n75% {\n  transform: translate3d(-0.1%, 0.2%, 0);\n}\n`;\n\nconst evaporate = keyframes`\n0%, 100% {\n  ransform: none;\n}\n50% {\n  transform: translate3d(0, 0.2%, 0) scale(0.8);\n}\n`;\n\nconst hashi = keyframes`\n0%, 10%, 20%, 100% {\n  transform: translate3d(0, -2%, 0);\n}\n5%, 15% {\n  transform: translate3d(0, -2%, 0) rotate(2deg);\n}\n`;\n\nconst hashi2 = keyframes`\n0%, 10%, 20%, 100% {\n  transform: translate3d(0, 2%, 0);\n}\n5%, 15% {\n  transform: translate3d(0, 2%, 0) rotate(-2deg);\n}\n`;\n\nconst noding = keyframes`\n0%, 100% {\n  transform: none;\n}\n30% {\n  transform: translate3d(-0.05%, 0.1%, 0);\n}\n75% {\n  transform: translate3d(0.03%, -0.05%, 0);\n}\n`;\n\nconst StyledBonzai = styled(BonzaiSvg)`\n  z-index: 1;\n\n  g {\n    transform-box: fill-box;\n    transform-origin: center;\n    animation: ${revolution} 10s linear infinite;\n  }\n`;\n\nconst StyledBol = styled(BolSvg)`\n  z-index: 2;\n  position: relative;\n  .mode {\n    fill: #333;\n  }\n\n  .hair {\n    fill: #444;\n  }\n\n  .hashi {\n    transform-origin: center;\n    animation: ${hashi} 10s linear infinite;\n  }\n\n  .hashi2 {\n    transform-origin: center;\n    animation: ${hashi2} 10s linear infinite;\n  }\n\n  .motif {\n    transform-origin: center;\n    animation: ${evaporate} 10s linear infinite;\n  }\n\n  .smoke {\n    stroke-dasharray: 5;\n    animation: ${dash} 10s linear infinite;\n  }\n\n  .glasses {\n    fill: ${(p) => p.theme.getColor};\n    animation: ${blink} 4s steps(5, start) infinite;\n  }\n\n  .blinked {\n    animation: ${blink} 4s steps(5, start) infinite;\n  }\n\n  .egg {\n    animation: ${move} 4s linear infinite;\n  }\n\n  .roll {\n    animation: ${move} 4s linear 1s infinite;\n  }\n\n  .hand {\n    animation: ${move} 4s linear 1s infinite;\n  }\n\n  .face {\n    animation: ${noding} 4s linear 2s infinite;\n  }\n`;\n\nconst Bol = ({ className, isSwitched = false }) => {\n  const ref = useRef(null);\n  const svgs = useRef(null);\n  const previousIsSwitched = usePrevious(isSwitched);\n\n  const animSvg = useCallback(async (svg, isAppear = true) => {\n    const paths = svg.querySelectorAll(\"path\");\n    for (const p of paths) {\n      if (isAppear) {\n        p.classList.add(\"anim\");\n      } else {\n        p.classList.remove(\"anim\");\n      }\n      await timeout(20);\n    }\n  }, []);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: previousIsSwitched\n  useEffect(() => {\n    if (ref.current) {\n      const isFirstMount = previousIsSwitched === undefined;\n      svgs.current = ref.current.querySelectorAll(\"svg\");\n      const cpt = isSwitched ? 1 : 0;\n      const asyncExec = async () => {\n        if (!isFirstMount) {\n          await animSvg(svgs.current[!isSwitched ? 1 : 0], false);\n        }\n        await animSvg(svgs.current[cpt]);\n      };\n      asyncExec();\n    }\n  }, [isSwitched, animSvg]);\n\n  return (\n    <Div ref={ref} className={className}>\n      <GlobalStyle />\n      <StyledBol $colorType={0} />\n      <StyledBonzai />\n    </Div>\n  );\n};\n\nexport default Bol;\n","import styled from \"styled-components\";\nimport Bol from \"../Bol\";\n\nexport default {\n  title: \"Components/Bol\",\n  component: Bol,\n  parameters: {\n    layout: \"centered\",\n  },\n};\n\nconst StyledBol = styled(Bol)`\n  width: 10em;\n  height: 10em;\n`;\n\nconst Template = (args) => <StyledBol {...args} />;\nexport const Primary = Template.bind({});\nPrimary.args = {\n  isSwitched: false,\n};\n"],"names":[],"ignoreList":[],"sourceRoot":""}