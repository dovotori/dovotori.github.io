(window.webpackJsonp=window.webpackJsonp||[]).push([[150,146,154],{116:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(73),u=n(118),c=function(){function t(e){r()(this,t),this.gl=e,this.objet=new a.a(e,u.a)}return s()(t,[{key:"render",value:function(t){this.gl.disable(this.gl.CULL_FACE),this.objet.render(t),this.gl.enable(this.gl.CULL_FACE)}}]),t}()},130:function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var i=n(43),r=n.n(i),o=n(61),s=n.n(o),a=n(1),u=n.n(a),c=n(2),l=n.n(c),h=n(0),f=n.n(h),g=n(139),p=n(151),v=n(140),d=n(152),m=n(141),y=n(153),b=n(142),k=n(54);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=function(){function t(){var e=this;u()(this,t),f()(this,"render",(function(t){e.keyboard&&(e.keyboard.start(),e.scene.setKeyboardInteraction(e.keyboard)),e.scene.update(t),e.scene.render(),e.keyboard&&e.keyboard.end()})),f()(this,"revealAfterLoaded",(function(t){t&&t.querySelectorAll("[style]").forEach((function(t){return t.removeAttribute("style")}))})),this.keyboard=null,this.mouse=null,this.scene=null,this.loop=null}var e;return l()(t,[{key:"setup",value:(e=s()(r.a.mark((function t(e,n){var i,o,s,a,u,c,l,h,w,R,E,P,x=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=document.body.offsetWidth,o=window.innerHeight,s={},!n){t.next=16;break}if(i=n.canvas.width,o=n.canvas.height,!n.assets){t.next=11;break}return a=new p.a,t.next=10,a.get(n.assets.map((function(t){return Object(k.getEnvPath)(t)})));case 10:s=t.sent;case 11:if(!n.shaders){t.next=16;break}return u=new v.a,t.next=15,u.get(n.shaders);case 15:s.shaders=t.sent;case 16:this.canvas=new d.a,this.canvas.resize({width:i,height:o}),c=A(A({},n),{},{support:this.canvas.getSupport()}),this.scene=new e(this.canvas.getContext(),c,s),l=document.querySelector("#".concat(n.slug)),n&&(n.keyboard&&(this.keyboard=new m.a(n.keyboard)),n.mouse&&(h=n.mouse,w=h.events,R=h.domId,E=w.reduce((function(t,e){return A(A({},t),{},f()({},"callback".concat(Object(k.capitalize)(e)),x.scene["onMouse".concat(Object(k.capitalize)(e))]))}),{}),P=R?document.querySelector("#".concat(R)):l,this.mouse=new b.a(P,E)),n.controls&&(this.controls=new y.a(l,n.controls),l.appendChild(this.controls.getDomItem()),n.controls.ranges&&this.scene.setupControls&&this.scene.setupControls({ranges:this.controls.getRanges()}))),this.revealAfterLoaded(l),this.loop=new g.a,this.loop.setCallback(this.render),this.loop.start();case 26:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"stop",value:function(){this.loop&&this.loop.stop(),this.mouse&&this.mouse.cancel()}},{key:"getCanvas",value:function(){return this.canvas&&this.canvas.get()}},{key:"destroy",value:function(){this.stop(),this.scene&&this.scene.destroy&&this.scene.destroy(),this.controls&&this.controls.destroy()}}]),t}()},137:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(22),u=n.n(a),c=n(7),l=n.n(c),h=n(8),f=n.n(h),g=n(3),p=n.n(g),v=n(25),d=n(19);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var y=function(t){l()(n,t);var e=m(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).target=new v.a(t.target.x,t.target.y,t.target.z),i.matIdentity=new d.a,i.projection=new d.a,i.projection.identity(),i.near=t.near||1,i.far=t.far||100,i.angle=t.angle||50,i.matIdentity.identity(),i.lookAt(),i}return s()(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}}]),n}(n(85).a),b=n(135);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var w=function(t){l()(n,t);var e=k(n);function n(){return r()(this,n),e.apply(this,arguments)}return s()(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),i=t.getZ(),r=new b.a(e,n,i,1),o=new d.a;o.equal(this.view).multiply(this.projection),r.multiplyMatrix(o);var s=r.getX()/r.getW(),a=r.getY()/r.getW();return[s=.5*(s+1),a=.5*(a+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(y),A=n(52);function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var E=function(t){l()(n,t);var e=R(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).options=t,i.rotationX=new A.a,i.targetX=new A.a,i.zoomZ=new A.a(.7,.1),i}return s()(n,[{key:"update",value:function(){u()(p()(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(w)},143:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r=n.n(i),o=n(48),s=n.n(o),a=n(1),u=n.n(a),c=n(2),l=n.n(c);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={ambiant:[0,0,0],diffuse:[.5,.5,.5],specular:[1,1,1],emissive:[0,0,0],specDensity:[1],opacity:1},p=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=this.gl.STATIC_DRAW,this.materialProps={},this.steps=this.getSteps(n,r);var o=this.getPoints(n,r);this.stride=0,Object.entries(this.steps).forEach((function(t){null!==t[1]&&(i.stride+=t[1])})),this.vbo=this.gl.createBuffer(),this.count=o.length/this.stride,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(o),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}return l()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo);var n=0;Object.entries(this.steps).forEach((function(i){var r=s()(i,2),o=r[0],a=r[1];void 0!==t.locations[o]&&-1!==t.locations[o]&&(e.gl.enableVertexAttribArray(t.locations[o]),e.gl.vertexAttribPointer(t.locations[o],a,e.gl.FLOAT,!1,4*e.stride,4*n)),null!==e.steps[o]&&(n+=e.steps[o])}))}},{key:"render",value:function(t){this.enable(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.drawArrays(this.modeDessin,0,this.count),this.end()}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}},{key:"getSteps",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={position:3};return t.vt.indices.length>0&&(i.texture=2),t.vn.indices.length>0&&(i.normale=3),n&&t.mat&&Object.keys(t.mat).forEach((function(i){var r=t.mat[i],o=n[r];o&&Object.keys(o).forEach((function(t){void 0===e.materialProps[t]&&(e.materialProps[t]=o[t].length)}))})),f(f({},i),this.materialProps)}},{key:"getPoints",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];return t.v.indices.forEach((function(r,o){var s=3*r;if(i.push(t.v.points[s]),i.push(t.v.points[s+1]),i.push(t.v.points[s+2]),t.vt.indices.length>0){var a=2*t.vt.indices[o];i.push(t.vt.points[a]),i.push(t.vt.points[a+1])}if(t.vn.indices.length>0){var u=3*t.vn.indices[o];i.push(t.vn.points[u]),i.push(t.vn.points[u+1]),i.push(t.vn.points[u+2])}if(n&&t.mat){var c=Object.keys(t.mat).findIndex((function(e,n){var i=Object.keys(t.mat)[n+1];return!i||o>=e&&o<i})),l=t.mat[Object.keys(t.mat)[c]];Object.keys(e.materialProps).forEach((function(t){(n[l]&&n[l][t]||g[t]).forEach((function(t){return i.push(t)}))}))}})),i}}]),t}()},144:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=function(){function t(e,n){r()(this,t),this.gl=e,this.program=this.gl.createProgram(),this.setup(n)}return s()(t,[{key:"setup",value:function(t){this.creerShader("vertex",t.vertex),this.creerShader("fragment",t.fragment),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.createLocations(t),this.gl.useProgram(null)):this.gl.deleteProgram(this.program)}},{key:"creerShader",value:function(t,e){var n=this.gl.createShader("vertex"===t?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?(this.gl.attachShader(this.program,n),this.gl.deleteShader(n)):this.gl.deleteShader(n)}},{key:"createLocations",value:function(t){var e=this;this.program.locations={},t.uniforms.forEach((function(t){e.program.locations[t]=e.gl.getUniformLocation(e.program,t)})),t.attributes.forEach((function(t){e.program.locations[t]=e.gl.getAttribLocation(e.program,t)}))}},{key:"setProjectionView",value:function(t){this.setMatrix("projection",t.getProjection().get()),this.setMatrix("view",t.getView().get())}},{key:"setMatrix",value:function(t,e){this.gl.useProgram(this.program),16===e.length?this.gl.uniformMatrix4fv(this.program.locations[t],!1,e):this.gl.uniformMatrix3fv(this.program.locations[t],!1,e),this.gl.useProgram(null)}},{key:"setInt",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1i(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setTexture",value:function(t,e,n){this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.program.locations[n],t),this.gl.useProgram(null)}},{key:"setFloat",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1f(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setVector",value:function(t,e){switch(this.gl.useProgram(this.program),e.length){default:case 2:this.gl.uniform2fv(this.program.locations[t],e);break;case 3:this.gl.uniform3fv(this.program.locations[t],e);break;case 4:this.gl.uniform4fv(this.program.locations[t],e)}this.gl.useProgram(null)}},{key:"enable",value:function(){this.gl.useProgram(this.program)}},{key:"disable",value:function(){this.gl.useProgram(null)}},{key:"get",value:function(){return this.program}},{key:"getLocations",value:function(){return this.program.locations}}]),t}()},146:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(10),u=n.n(a),c=n(22),l=n.n(c),h=n(7),f=n.n(h),g=n(8),p=n.n(g),v=n(3),d=n.n(v),m=n(0),y=n.n(m),b=n(86),k=n(19);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d()(t);if(e){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var A=function(t){f()(n,t);var e=w(n);function n(t,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r()(this,n),o=e.call(this,t,i),y()(u()(o),"removeAnimations",(function(t){return t.map((function(t){var e=t;return e.children&&(e.children=o.removeAnimations(e.children)),o.removeAnim(e)}))})),y()(u()(o),"addJointsAnimations",(function(t,e){t.forEach((function(t){var n=t.animations,i=t.name,r=t.children;n&&(o.animations[i]=o.addAnimations(n,e)),r&&o.addJointsAnimations(r,e)}))})),y()(u()(o),"setProgramSkin",(function(t,e){if(void 0!==t){var n=new k.a;n.identity();var i=o.skins[t].joints;o.setProgramJoints(i,e,n)}})),y()(u()(o),"setProgramJoints",(function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach((function(t){var r=t.invMatrix,s=t.children,a=o.handleLocalTransform(t);a.multiply(n);var u=new k.a;u.identity();var c=new k.a;c.setFromArray(r),c.resetScale(),u.multiply(c),u.multiply(a),e.setMatrix("jointMat[".concat(i,"]"),u.get()),s&&o.setProgramJoints(s,e,a,i+1)}))}));var a=i.skins;return a&&(a.forEach((function(t){var e=t.joints;o.addJointsAnimations(e,s)})),o.skins=a.map((function(t){var e=t.joints;return{joints:o.removeAnimations(e)}}))),o}return s()(n,[{key:"renderNode",value:function(t,e,i){var r=this.nodes[t].skin;void 0!==r&&this.setProgramSkin(r,e),l()(d()(n.prototype),"renderNode",this).call(this,t,e,i)}}]),n}(b.a)},149:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(7),u=n.n(a),c=n(8),l=n.n(c),h=n(3),f=n.n(h),g=n(85),p=n(65),v=n(150),d=n(25);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f()(t);if(e){var r=f()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l()(this,n)}}var y=function(t){u()(n,t);var e=m(n);function n(t,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return r()(this,n),(o=e.call(this,i)).gl=t,o.fbo=new p.a(o.gl,s,a,u),o.sizeRepere=new d.a(.05,.05,.05),o.repere=new v.a(o.gl),o.repere.update(o.position,o.sizeRepere),o.lookAt(),o}return s()(n,[{key:"start",value:function(){this.fbo.start()}},{key:"end",value:function(){this.fbo.end()}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}},{key:"renderRepere",value:function(t){this.repere.render(t)}},{key:"getDepthTexture",value:function(){return this.fbo.getDepthTexture()}}]),n}(g.a)},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(0),u=n.n(a),c=function(){function t(e){r()(this,t),this.gl=t.checkWebGl(e),this.support={webgl:!1,depthTexture:!1},this.gl&&(this.support.webgl=!0,this.gl.enable(this.gl.DEPTH_TEST),this.gl.clearDepth(1),this.gl.depthFunc(this.gl.LESS),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor(0,0,0,0),this.support.depthTexture=!!this.gl.getExtension("WEBGL_depth_texture"),this.support.drawBuffers=!!this.gl.getExtension("WEBGL_draw_buffers")||!!this.gl.getExtension("GL_EXT_draw_buffers")||!!this.gl.getExtension("EXT_draw_buffers"))}return s()(t,null,[{key:"checkWebGl",value:function(t){for(var e,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<n.length;i+=1){try{e=t.getContext(n[i],{preserveDrawingBuffer:!0})}catch(t){}if(e)break}return e}}]),s()(t,[{key:"get",value:function(){return this.gl}},{key:"getSupport",value:function(){return this.support}}]),t}(),l=function(){function t(){var e=this;r()(this,t),u()(this,"resize",(function(t){e.canvas.setAttribute("width",t.width),e.canvas.setAttribute("height",t.height)})),this.canvas=document.createElement("canvas"),this.context=new c(this.canvas)}return s()(t,[{key:"get",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context.get()}},{key:"getSupport",value:function(){return this.context.getSupport()}}]),t}()},53:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=1e-6},65:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(147),u=n(148),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r()(this,t),this.gl=e,this.buffer=this.gl.createFramebuffer(),this.buffer.width=n,this.buffer.height=i,this.clearColor=[0,0,0,0],this.setup(o,s,a)}return s()(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer);var i=null!==e?e.COLOR_ATTACHMENT0_WEBGL+n:this.gl.COLOR_ATTACHMENT0;this.texture=new a.a(this.gl,this.buffer.width,this.buffer.height),this.texture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,i,this.gl.TEXTURE_2D,this.texture.get(),0),t&&(this.depthTexture=new u.a(this.gl,this.buffer.width,this.buffer.height),this.depthTexture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.get(),0)),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"resize",value:function(t){this.buffer.width=t.width,this.buffer.height=t.height,this.setup()}},{key:"start",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this.gl.viewport(0,0,this.buffer.width,this.buffer.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"end",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"get",value:function(){return this.buffer}},{key:"getTexture",value:function(){return this.texture}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setClearColor",value:function(t,e,n,i){this.clearColor=[t,e,n,i]}}]),t}()},73:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(1),r=n.n(i),o=n(7),s=n.n(o),a=n(8),u=n.n(a),c=n(3),l=n.n(c),h=n(88);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l()(t);if(e){var r=l()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var g=function(t,e){return Object.keys(e).reduce((function(n,i){var r,o,s,a,u=e[i];switch(i){default:case"position":case"next":case"previous":case"normale":case"color":o="VEC3",s=3,r=t.FLOAT,a=new Float32Array(u);break;case"texture":o="VEC2",s=2,r=t.FLOAT,a=new Float32Array(u);break;case"indices":o="SCALAR",s=1,r=t.UNSIGNED_SHORT,a=new Uint16Array(u);break;case"side":o="FLOAT",s=1,r=t.FLOAT,a=new Float32Array(u)}return n[i]={locationKey:i,type:o,values:a,count:u.length/s,componentType:r,size:s},n}),{})},p=function(t){s()(n,t);var e=f(n);function n(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r()(this,n);var s=g(t,i);return e.call(this,t,s,o)}return n}(h.a)},85:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(25),u=n(19),c=function(){function t(e){if(r()(this,t),this.position=new a.a(e.position.x,e.position.y,e.position.z),this.target=new a.a(0,0,0),this.view=new u.a,e.ortho){var n=e.ortho,i=n.left,o=n.right,s=n.bottom,c=n.top,l=e.near,h=e.far;this.ortho=new u.a,this.ortho.ortho(i,o,s,c,l,h)}}return s()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==t?t:this.position.getX(),r=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(i,r,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},86:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var i=n(48),r=n.n(i),o=n(46),s=n.n(o),a=n(27),u=n.n(a),c=n(49),l=n.n(c),h=n(1),f=n.n(h),g=n(10),p=n.n(g),v=n(7),d=n.n(v),m=n(8),y=n.n(m),b=n(3),k=n.n(b),w=n(0),A=n.n(w),R=n(89),E=n(35),P=n(19),x=n(145),O=n(87),j=n(29);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=k()(t);if(e){var r=k()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var F=function(t){d()(n,t);var e=T(n);function n(t,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f()(this,n),o=e.call(this,t,i),A()(p()(o),"removeAnim",(function(t){t.animations;return l()(t,["animations"])})),A()(p()(o),"addAnimations",(function(t,e){var n={};return t.forEach((function(t){var i=t.path,r=t.times,a=t.output,c=t.interpolation,l=null!==e?a[e]:a[0];"rotation"===i&&(l=s()(E.a,u()(l)).toMatrix4()),o.animationInterval[1]=Math.max.apply(Math,u()(r).concat([o.animationInterval[1]])),n[i]={output:a,sample:new x.a(r,c,o.speedAnimation),customStep:e,value:l}})),n})),A()(p()(o),"getAnimationInterval",(function(t){var e=0;return t.forEach((function(t){var n=t.animations;n&&n.forEach((function(t){var n=t.times;e=Math.max.apply(Math,u()(n).concat([e]))}))})),[0,e]})),A()(p()(o),"update",(function(t){var e=t-o.lastFrame;e>o.animationInterval[1]*o.speedAnimation&&(o.lastFrame=t),o.updateAnimations(e)})),A()(p()(o),"updateAnimations",(function(t){Object.keys(o.animations).forEach((function(e){var n=o.animations[e];Object.keys(n).forEach((function(e){n[e]="rotation"===e?o.updateQuat(n[e],t):o.updateVector(n[e],t)}))}))})),A()(p()(o),"updateVector",(function(t,e){var n=t,i=n.sample,o=n.customStep,s=n.output;if(null===o){i.update(e);var a=i.getIndex();if(0===a){var u=r()(s,1);n.value=u[0]}else if(a>s.length-1)n.value=s[s.length-1];else{var c=s[a-1],l=s[a],h=i.get();n.value=c.map((function(t,e){return Object(O.a)(h,t,l[e])}))}}else n.value=s[o];return n})),A()(p()(o),"updateQuat",(function(t,e){var n=t,i=n.sample,r=n.customStep,o=n.output;if(null===r){i.update(e);var a=i.getIndex();if(0===a)n.value=s()(E.a,u()(o[0])).toMatrix4();else if(a>o.length-1)n.value=s()(E.a,u()(o[o.length-1])).toMatrix4();else{var c=o[a-1],l=o[a],h=i.get();n.value=E.a.slerpArray(c,l,h).toMatrix4()}}else n.value=s()(E.a,u()(o[r])).toMatrix4();return n})),A()(p()(o),"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,i=t.scale,r=t.matrix,s=t.name,a=o.animations[s],c=a&&a.rotation||null,l=a&&a.translation||null,h=a&&a.scale||null,f=new P.a;return f.identity(),(i||h)&&f.scale.apply(f,u()(o.getVector(i,h))),(n||c)&&f.multiply(o.getRotationMat(n,c)),(e||l)&&f.translate.apply(f,u()(o.getVector(e,l))),r&&f.multiplyArray(r),f})),A()(p()(o),"setAnimationStep",(function(t,e,n){var i=o.animations[t][e],r=i.output.length,s=Object(j.b)(n,0,1,0,r-1);i.customStep=Math.round(s)})),A()(p()(o),"setAnimationSpeed",(function(t,e,n){o.animations[t][e].sample.setSpeed(n)})),A()(p()(o),"getVector",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:t})),A()(p()(o),"getRotationMat",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:s()(E.a,u()(t)).toMatrix4()}));var c=i.nodes;return o.speedAnimation=2e3,o.animationInterval=[0,0],o.animations=c.reduce((function(t,e){var n=e.animations,i=e.name;return n&&(t[i]=o.addAnimations(n,a)),t}),{}),o.nodes=c.reduce((function(t,e){return t[e.name]=o.removeAnim(e),t}),{}),o.lastFrame=0,o}return n}(R.a)},89:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n(46),r=n.n(i),o=n(27),s=n.n(o),a=n(1),u=n.n(a),c=n(2),l=n.n(c),h=n(0),f=n.n(h),g=n(88),p=n(138),v=function(){function t(e,n){var i=n.vbos,r=n.material,o=void 0===r?{}:r;u()(this,t),this.material=o,this.objet=new g.a(e,i),o.normalMap&&(this.normalMap=new p.a(e,o.normalMap.data))}return l()(t,[{key:"render",value:function(t){var e=this.material,n=e.color,i=e.metal,r=e.rough,o=e.ao;t.setVector("color",n||[1,1,1,1]),t.setFloat("metal",void 0!==i?i:0),t.setFloat("rough",void 0!==r?r:.5),t.setFloat("ao",void 0!==o?o:1),this.objet.render(t.get())}},{key:"setModeDessin",value:function(t){this.objet.setModeDessin(t)}},{key:"setModeCalcul",value:function(t){this.objet.setModeCalcul(t)}}]),t}(),d=n(35),m=n(19);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=function(){function t(e,n){var i=this;u()(this,t),f()(this,"formatPrimitives",(function(t,e){return e.map((function(e){var n=e.vbos,i=e.material;return new v(t,{vbos:n,material:i})}))})),f()(this,"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,i=t.scale,o=t.matrix,a=new m.a;return a.identity(),i&&a.scale.apply(a,s()(i)),n&&a.multiply(r()(d.a,s()(n)).toMatrix4()),e&&a.translate.apply(a,s()(e)),o&&a.multiplyArray(o),a}));var o=n.nodes,a=n.meshes,c=n.materials;this.meshes=a.map((function(t){var n=t.primitives,r=t.name,o=void 0===r?"":r,s=t.weights,a=n.map((function(t){return void 0!==t.material?b(b({},t),{},{material:c[t.material]}):t}));return{name:o,primitives:i.formatPrimitives(e,a),weights:s}})),this.nodes=o}return l()(t,[{key:"render",value:function(t,e){var n=this;Object.keys(this.nodes).forEach((function(i){n.renderNode(i,t,e)}))}},{key:"renderNode",value:function(t,e,n){var i=this.nodes[t],r=i.mesh,o=this.handleLocalTransform(i);o.multiply(n),e.setMatrix("model",o.get()),o.resetTranslate();var s=o.getMatrice3x3();s.inverse(),s.transpose(),e.setMatrix("normalMatrix",s.get()),this.meshes[r].primitives.forEach((function(t){return t.render(e)}))}}]),t}()}}]);