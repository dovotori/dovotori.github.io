"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[5272],{85272(n,t,o){o.r(t),o.d(t,{default:()=>i});const i="\nstruct CameraUniform {\n  projection: mat4x4<f32>,\n  view: mat4x4<f32>,\n  model: mat4x4<f32>,\n  position: vec3<f32>,\n};\n@group(0) @binding(0) var<uniform> camera: CameraUniform;\n\n\nstruct TransformUniform {\n  model: mat4x4<f32>,\n  normal_matrix: mat3x3<f32>,\n};\n\n@group(1) @binding(0) var<uniform> transform: TransformUniform;\n\nstruct JointMatrices {\n  mats: array<mat4x4<f32>, 25>,\n};\n\n@group(1) @binding(1) var<uniform> jointMat: JointMatrices;\n\nstruct VertexInput {\n  @location(0) position: vec3<f32>,\n  @location(1) normale: vec3<f32>,\n  @location(2) texture: vec2<f32>,\n  @location(4) joint: vec4<f32>,\n  @location(5) weight: vec4<f32>,\n  // @location(3) tangent: vec4<f32>,\n  // @location(3) faceColor: f32,\n}\n\nstruct VertexOutput {\n  @builtin(position) clip_position: vec4<f32>,\n  @location(0) world_position: vec3f,\n  @location(1) world_normal: vec3f,\n  @location(2) texture: vec2f,\n  @location(3) camera_position: vec3f,\n  @location(4) debug_color: vec4f,\n}\n\n@vertex fn v_main(\n  in: VertexInput,\n) -> VertexOutput {\n  let skinMat: mat4x4<f32> =\n    in.weight.x * jointMat.mats[u32(in.joint.x)] +\n    in.weight.y * jointMat.mats[u32(in.joint.y)] +\n    in.weight.z * jointMat.mats[u32(in.joint.z)] +\n    in.weight.w * jointMat.mats[u32(in.joint.w)];\n\n  var out: VertexOutput;\n  let world_position: vec4<f32> = transform.model * skinMat * vec4<f32>(in.position, 1.0);\n\n  out.world_position = world_position.xyz;\n  out.world_normal = normalize(transform.normal_matrix * in.normale); // normalize is important to have correct normal\n\n  out.clip_position = camera.projection * camera.view * camera.model * world_position;\n  out.texture = in.texture;\n  out.camera_position = camera.position;\n\n  out.debug_color = vec4<f32>(\n    skinMat[1].x,\n    skinMat[1].y,\n    skinMat[1].z,\n    skinMat[1].w\n  );\n\n  return out;\n}\n"}}]);