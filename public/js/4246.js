(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[4246],{54246:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>I,destroy:()=>N});var r=n(87757),i=n.n(r),o=n(48926),s=n.n(o),u=n(67328),a=n(63038),h=n.n(a),c=n(34575),l=n.n(c),f=n(93913),v=n.n(f),d=n(16525),x=n.n(d),p=n(2205),y=n.n(p),g=n(78585),m=n.n(g),k=n(29754),Z=n.n(k),w=n(9187),z=n.n(w),M={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},b=/([astvzqmhlc])([^astvzqmhlc]*)/gi,R=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,P=function(t){var e=[];return t.replace(b,(function(t,n,r){var i=n,o=n.toLowerCase(),s=function(t){var e=t.match(R);return e?e.map(Number):[]}(r);for("m"===o&&s.length>2&&(e.push([i].concat(s.splice(0,2))),o="l",i="m"===i?"l":"L");;){if(s.length===M[o])return s.unshift(i),e.push(s);if(s.length<M[o])throw new Error("malformed path data");e.push([i].concat(s.splice(0,M[o])))}})),e};var X=n(3022),S=n(80602),D=n(21969),A=n(77505);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z()(t);if(e){var i=Z()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var j=function(t){y()(n,t);var e=Y(n);function n(t,r,i){var o;l()(this,n),o=e.call(this,t,r,i);var s=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={x:0,y:0},r=P(t),i=e?-1:1;return r.reduce((function(t,e){return"L"!==e[0]&&"M"!==e[0]||3!==e.length?"m"!==e[0]&&"l"!==e[0]||3!==e.length?"v"===e[0]&&2===e.length?(n.y+=e[1]*i,t.push([n.x,n.y])):"h"===e[0]&&2===e.length?(n.x+=e[1],t.push([n.x,n.y])):"z"===e[0]&&(n.x=0,n.y=0):(n.x+=e[1],n.y+=e[2]*i,t.push([n.x,n.y])):t.push([e[1],e[2]*i]),t}),[])}("m-10-20-2 2 8 12-18 18v5l7 7v-10l5-5 5 5h10l5-5 5 5v10l7-7v-5l-18-18 8-12-2-2-10 10z",!0),u=z()(s.flat()),a=u.reduce((function(t,e){var n=h()(s[e],2),r=[n[0],n[1],5*Math.random()];return t.concat(r)}),[]),c=u.length/3,f=Array.from({length:c},(function(){var t=(0,A.ve)(150+100*Math.random(),50,60);return[t.r/255,t.g/255,t.b/255,1]})),v=u.reduce((function(t,e,n){var r=Math.floor(n/3);return t.concat(f[r])}),[]);return o.vbo=new S.Z(t,{position:a,color:v}),o.model=new D.Z,o}return v()(n,[{key:"render",value:function(){x()(Z()(n.prototype),"render",this).call(this),this.model.identity(),this.model.rotate(50*Math.cos(.001*this.time),0,1,0),this.mngProg.get("vertexColor").setMatrix("model",this.model.get()),this.bloom.start(),this.vbo.render(this.mngProg.get("vertexColor").get()),this.bloom.end(),this.bloom.render()}}]),n}(X.Z);const q={slug:"fragment",shaders:["/camera/vertexColor.js","/screen/blurOnePass.js","/screen/bloom.js","/screen/screen.js"],postprocess:{bloom:{scale:.7,threshold:.1,blur:{size:.1,intensity:1.2}}},useDepthTexture:!0,canvas:{width:1024,height:1024},camera:{position:{x:0,y:0,z:100},target:{x:0,y:0,z:0},near:1,far:200,angle:60},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};var C=null;const I=s()(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C=new u.Z,t.next=3,C.setup(j,q);case 3:document.querySelector("#".concat(q.slug)).appendChild(C.getCanvas());case 5:case"end":return t.stop()}}),t)})));var N=function(){C&&C.destroy&&C.destroy()}},66160:(t,e,n)=>{"use strict";n.d(e,{Z:()=>M});var r=n(34575),i=n.n(r),o=n(93913),s=n.n(o),u=n(16525),a=n.n(u),h=n(2205),c=n.n(h),l=n(78585),f=n.n(l),v=n(29754),d=n.n(v),x=n(25773),p=n(21969);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var g=function(t){c()(n,t);var e=y(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).target=new x.Z(t.target.x,t.target.y,t.target.z),r.matIdentity=new p.Z,r.projection=new p.Z,r.projection.identity(),r.near=t.near||1,r.far=t.far||100,r.angle=t.angle||50,r.matIdentity.identity(),r.lookAt(),r}return s()(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new p.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),n}(n(44254).Z),m=n(66605);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Z=function(t){c()(n,t);var e=k(n);function n(){return i()(this,n),e.apply(this,arguments)}return s()(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),r=t.getZ(),i=new m.Z(e,n,r,1),o=new p.Z;o.equal(this.view).multiply(this.projection),i.multiplyMatrix(o);var s=i.getX()/i.getW(),u=i.getY()/i.getW();return[s=.5*(s+1),u=.5*(u+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(g),w=n(47313);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var M=function(t){c()(n,t);var e=z(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).options=t,r.rotationX=new w.Z,r.targetX=new w.Z,r.zoomZ=new w.Z(.7,.1),r}return s()(n,[{key:"update",value:function(){a()(d()(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(Z)},44254:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(34575),i=n.n(r),o=n(93913),s=n.n(o),u=n(25773),a=n(21969),h=function(){function t(e){if(i()(this,t),this.position=new u.Z(e.position.x,e.position.y,e.position.z),this.target=new u.Z(0,0,0),this.view=new a.Z,e.ortho){var n=e.ortho,r=n.left,o=n.right,s=n.bottom,h=n.top,c=e.near,l=e.far;this.ortho=new a.Z,this.ortho.ortho(r,o,s,h,c,l)}}return s()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==t?t:this.position.getX(),i=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(r,i,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},47313:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(34575),i=n.n(r),o=n(93913),s=n.n(o),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;i()(this,t),this.value=e,this.target=e,this.sampling=n,this.threshold=1e-6}return s()(t,[{key:"update",value:function(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.target=t}},{key:"setDirect",value:function(t){this.value=t}}]),t}()},66605:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(34575),i=n.n(r),o=n(93913),s=n.n(o);const u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i()(this,t),this.d=[0,0,0,0],this.set(e,n,r,o)}return s()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"getW",value:function(){return this.d[3]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}},{key:"set",value:function(t,e,n,r){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=n?this.d[2]=n:null!=t&&(this.d[2]=t),null!=r?this.d[3]=r:null!=t&&(this.d[3]=t),this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}},{key:"multiplyMatrix",value:function(t){var e=this.d[0],n=this.d[1],r=this.d[2],i=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*n+t.d[8]*r+t.d[12]*i,this.d[1]=t.d[1]*e+t.d[5]*n+t.d[9]*r+t.d[13]*i,this.d[2]=t.d[2]*e+t.d[6]*n+t.d[10]*r+t.d[14]*i,this.d[3]=t.d[3]*e+t.d[7]*n+t.d[11]*r+t.d[15]*i,this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}]),t}()},3022:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g});var r=n(34575),i=n.n(r),o=n(93913),s=n.n(o),u=n(16525),a=n.n(u),h=n(2205),c=n.n(h),l=n(78585),f=n.n(l),v=n(29754),d=n.n(v),x=n(20748),p=n(66160);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d()(t);if(e){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var g=function(t){c()(n,t);var e=y(n);function n(t,r,o){var s;return i()(this,n),(s=e.call(this,t,r,o)).camera=new p.Z(r.camera),s.camera.perspective(s.containerSize.width,s.containerSize.height),s}return s()(n,[{key:"resize",value:function(t){a()(d()(n.prototype),"resize",this).call(this,t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}},{key:"update",value:function(t){a()(d()(n.prototype),"update",this).call(this,t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}]),n}(x.Z)},77505:(t,e,n)=>{"use strict";n.d(e,{ve:()=>i,oo:()=>o});var r=function(t,e,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},i=function(t,e,n){var i,o,s,u=t/360,a=e/100,h=n/100;if(0===a)i=h,o=h,s=h;else{var c=h<.5?h*(1+a):h+a-h*a,l=2*h-c;i=r(l,c,u+1/3),o=r(l,c,u),s=r(l,c,u-1/3)}return{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*s)}},o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},9187:t=>{"use strict";function e(t,e,o){o=o||2;var s,u,a,l,f,d,x,p=e&&e.length,y=p?e[0]*o:t.length,g=n(t,0,y,o,!0),m=[];if(!g||g.next===g.prev)return m;if(p&&(g=function(t,e,i,o){var s,u,a,l=[];for(s=0,u=e.length;s<u;s++)(a=n(t,e[s]*o,s<u-1?e[s+1]*o:t.length,o,!1))===a.next&&(a.steiner=!0),l.push(v(a));for(l.sort(h),s=0;s<l.length;s++)c(l[s],i),i=r(i,i.next);return i}(t,e,g,o)),t.length>80*o){s=a=t[0],u=l=t[1];for(var k=o;k<y;k+=o)(f=t[k])<s&&(s=f),(d=t[k+1])<u&&(u=d),f>a&&(a=f),d>l&&(l=d);x=0!==(x=Math.max(a-s,l-u))?1/x:0}return i(g,m,o,s,u,x),m}function n(t,e,n,r,i){var o,s;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)s=z(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=z(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(M(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==p(r.prev,r,r.next))r=r.next;else{if(M(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,h,c,l,v){if(t){!v&&l&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,u,a,h=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,u=0,e=0;e<h&&(u++,r=r.nextZ);e++);for(a=h;u>0||a>0&&r;)0!==u&&(0===a||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,h*=2}while(s>1)}(i)}(t,h,c,l);for(var d,x,p=t;t.prev!==t.next;)if(d=t.prev,x=t.next,l?s(t,h,c,l):o(t))e.push(d.i/n),e.push(t.i/n),e.push(x.i/n),M(t),t=x.next,p=x.next;else if((t=x)===p){v?1===v?i(t=u(r(t),e,n),e,n,h,c,l,2):2===v&&a(t,e,n,h,c,l):i(r(t),e,n,h,c,l,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(p(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(d(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&p(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(p(i,o,s)>=0)return!1;for(var u=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,a=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=f(u,a,e,n,r),v=f(h,c,e,n,r),x=t.prevZ,y=t.nextZ;x&&x.z>=l&&y&&y.z<=v;){if(x!==t.prev&&x!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,x.x,x.y)&&p(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&p(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;x&&x.z>=l;){if(x!==t.prev&&x!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,x.x,x.y)&&p(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;y&&y.z<=v;){if(y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,s.x,s.y,y.x,y.y)&&p(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function u(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&g(o,i,i.next,s)&&Z(o,s)&&Z(s,o)&&(e.push(o.i/n),e.push(i.i/n),e.push(s.i/n),M(i),M(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function a(t,e,n,o,s,u){var a=t;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&x(a,h)){var c=w(a,h);return a=r(a,a.next),c=r(c,c.next),i(a,e,n,o,s,u),void i(c,e,n,o,s,u)}h=h.next}a=a.next}while(a!==t)}function h(t,e){return t.x-e.x}function c(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>s){if(s=u,u===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var a,h=n,c=n.x,f=n.y,v=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&d(o<f?i:s,o,c,f,o<f?s:i,o,r.x,r.y)&&(a=Math.abs(o-r.y)/(i-r.x),Z(r,t)&&(a<v||a===v&&(r.x>n.x||r.x===n.x&&l(n,r)))&&(n=r,v=a)),r=r.next}while(r!==h);return n}(t,e)){var n=w(e,t);r(e,e.next),r(n,n.next)}}function l(t,e){return p(t.prev,t,e.prev)<0&&p(e.next,t,t.next)<0}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,s,u){return(i-s)*(e-u)-(t-s)*(o-u)>=0&&(t-s)*(r-u)-(n-s)*(e-u)>=0&&(n-s)*(o-u)-(i-s)*(r-u)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&g(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Z(t,e)&&Z(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(p(t.prev,t,e.prev)||p(t,e.prev,e))||y(t,e)&&p(t.prev,t,t.next)>0&&p(e.prev,e,e.next)>0)}function p(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,n,r){var i=k(p(t,e,n)),o=k(p(t,e,r)),s=k(p(n,r,t)),u=k(p(n,r,e));return i!==o&&s!==u||(!(0!==i||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==s||!m(n,t,r))||!(0!==u||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function k(t){return t>0?1:t<0?-1:0}function Z(t,e){return p(t.prev,t,t.next)<0?p(t,e,t.next)>=0&&p(t,t.prev,e)>=0:p(t,e,t.prev)<0||p(t,t.next,e)<0}function w(t,e){var n=new b(t.i,t.x,t.y),r=new b(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){var i=new b(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function b(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(R(t,0,o,n));if(i)for(var u=0,a=e.length;u<a;u++){var h=e[u]*n,c=u<a-1?e[u+1]*n:t.length;s-=Math.abs(R(t,h,c,n))}var l=0;for(u=0;u<r.length;u+=3){var f=r[u]*n,v=r[u+1]*n,d=r[u+2]*n;l+=Math.abs((t[f]-t[d])*(t[v+1]-t[f+1])-(t[f]-t[v])*(t[d+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}}}]);