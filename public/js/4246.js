"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[4246],{54246:(t,e,n)=>{n.r(e),n.d(e,{default:()=>X,destroy:()=>A});var r=n(15861),i=n(87757),o=n.n(i),u=n(35466),s=n(93324),a=n(15671),h=n(43144),l=n(11752),c=n(60136),f=n(6215),v=n(61120),d=n(9187),x=n.n(d),y={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},p=/([astvzqmhlc])([^astvzqmhlc]*)/gi,g=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Z=function(t){var e=[];return t.replace(p,(function(t,n,r){var i=n,o=n.toLowerCase(),u=function(t){var e=t.match(g);return e?e.map(Number):[]}(r);for("m"===o&&u.length>2&&(e.push([i].concat(u.splice(0,2))),o="l",i="m"===i?"l":"L");;){if(u.length===y[o])return u.unshift(i),e.push(u);if(u.length<y[o])throw new Error("malformed path data");e.push([i].concat(u.splice(0,y[o])))}})),e};var m=n(40487),k=n(80602),w=n(21969),z=n(77505);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,v.Z)(t);if(e){var i=(0,v.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var b=function(t){(0,c.Z)(n,t);var e=M(n);function n(t,r,i){var o;(0,a.Z)(this,n),o=e.call(this,t,r,i);var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={x:0,y:0},r=Z(t),i=e?-1:1;return r.reduce((function(t,e){return"L"!==e[0]&&"M"!==e[0]||3!==e.length?"m"!==e[0]&&"l"!==e[0]||3!==e.length?"v"===e[0]&&2===e.length?(n.y+=e[1]*i,t.push([n.x,n.y])):"h"===e[0]&&2===e.length?(n.x+=e[1],t.push([n.x,n.y])):"z"===e[0]&&(n.x=0,n.y=0):(n.x+=e[1],n.y+=e[2]*i,t.push([n.x,n.y])):t.push([e[1],e[2]*i]),t}),[])}("m-10-20-2 2 8 12-18 18v5l7 7v-10l5-5 5 5h10l5-5 5 5v10l7-7v-5l-18-18 8-12-2-2-10 10z",!0),h=x()(u.flat()),l=h.reduce((function(t,e){var n=(0,s.Z)(u[e],2),r=[n[0],n[1],5*Math.random()];return t.concat(r)}),[]),c=h.length/3,f=Array.from({length:c},(function(){var t=(0,z.ve)(150+100*Math.random(),50,60);return[t.r/255,t.g/255,t.b/255,1]})),v=h.reduce((function(t,e,n){var r=Math.floor(n/3);return t.concat(f[r])}),[]);return o.vbo=new k.Z(t,{position:l,color:v}),o.model=new w.Z,o}return(0,h.Z)(n,[{key:"render",value:function(){(0,l.Z)((0,v.Z)(n.prototype),"render",this).call(this),this.model.identity(),this.model.rotate(50*Math.cos(.001*this.time),0,1,0),this.mngProg.get("vertexColor").setMatrix("model",this.model.get()),this.bloom.start(),this.vbo.render(this.mngProg.get("vertexColor").get()),this.bloom.end(),this.bloom.render()}}]),n}(m.Z);const R={slug:"fragment",shaders:["/camera/vertexColor.js","/screen/blurOnePass.js","/screen/bloom.js","/screen/screen.js"],postprocess:{bloom:{scale:.7,threshold:.1,blur:{size:.1,intensity:1.2}}},useDepthTexture:!0,canvas:{width:1024,height:1024},camera:{position:{x:0,y:0,z:100},target:{x:0,y:0,z:0},near:1,far:200,angle:60},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};var P=null;const X=(0,r.Z)(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P=new u.Z,t.next=3,P.setup(b,R);case 3:e=document.querySelector("#".concat(R.slug)),(n=P.getCanvas())&&e&&e.appendChild(n);case 6:case"end":return t.stop()}}),t)})));var A=function(){P&&P.destroy&&P.destroy()}},44254:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(15671),i=n(43144),o=n(25773),u=n(21969),s=function(){function t(e){if((0,r.Z)(this,t),this.position=new o.Z(e.position.x,e.position.y,e.position.z),this.target=new o.Z(0,0,0),this.view=new u.Z,e.ortho){var n=e.ortho,i=n.left,s=n.right,a=n.bottom,h=n.top,l=e.near,c=e.far;this.ortho=new u.Z,this.ortho.ortho(i,s,a,h,l,c)}}return(0,i.Z)(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==t?t:this.position.getX(),i=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(r,i,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},47313:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(15671),i=n(43144),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;(0,r.Z)(this,t),this.value=e,this.target=e,this.sampling=n,this.threshold=1e-6}return(0,i.Z)(t,[{key:"update",value:function(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.target=t}},{key:"setDirect",value:function(t){this.value=t}}]),t}()},40487:(t,e,n)=>{n.d(e,{Z:()=>k});var r=n(15671),i=n(43144),o=n(11752),u=n(60136),s=n(6215),a=n(61120),h=n(35551),l=n(25773),c=n(21969);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(t){(0,u.Z)(n,t);var e=f(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).target=new l.Z(t.target.x,t.target.y,t.target.z),i.matIdentity=new c.Z,i.projection=new c.Z,i.projection.identity(),i.near=t.near||1,i.far=t.far||100,i.angle=t.angle||50,i.matIdentity.identity(),i.lookAt(),i}return(0,i.Z)(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new c.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),n}(n(44254).Z);const d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,t),this.d=[0,0,0,0],this.set(e,n,i,o)}return(0,i.Z)(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"getW",value:function(){return this.d[3]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}},{key:"set",value:function(t,e,n,r){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=n?this.d[2]=n:null!=t&&(this.d[2]=t),null!=r?this.d[3]=r:null!=t&&(this.d[3]=t),this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}},{key:"multiplyMatrix",value:function(t){var e=this.d[0],n=this.d[1],r=this.d[2],i=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*n+t.d[8]*r+t.d[12]*i,this.d[1]=t.d[1]*e+t.d[5]*n+t.d[9]*r+t.d[13]*i,this.d[2]=t.d[2]*e+t.d[6]*n+t.d[10]*r+t.d[14]*i,this.d[3]=t.d[3]*e+t.d[7]*n+t.d[11]*r+t.d[15]*i,this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}]),t}();function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var y=function(t){(0,u.Z)(n,t);var e=x(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),r=t.getZ(),i=new d(e,n,r,1),o=new c.Z;o.equal(this.view).multiply(this.projection),i.multiplyMatrix(o);var u=i.getX()/i.getW(),s=i.getY()/i.getW();return[u=.5*(u+1),s=.5*(s+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(v),p=n(47313);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var Z=function(t){(0,u.Z)(n,t);var e=g(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).options=t,i.rotationX=new p.Z,i.targetX=new p.Z,i.zoomZ=new p.Z(.7,.1),i}return(0,i.Z)(n,[{key:"update",value:function(){(0,o.Z)((0,a.Z)(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(y);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var k=function(t){(0,u.Z)(n,t);var e=m(n);function n(t,i,o){var u;return(0,r.Z)(this,n),(u=e.call(this,t,i,o)).camera=new Z(i.camera),u.camera.perspective(u.containerSize.width,u.containerSize.height),u}return(0,i.Z)(n,[{key:"resize",value:function(t){(0,o.Z)((0,a.Z)(n.prototype),"resize",this).call(this,t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}},{key:"update",value:function(t){(0,o.Z)((0,a.Z)(n.prototype),"update",this).call(this,t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}]),n}(h.Z)},77505:(t,e,n)=>{n.d(e,{oo:()=>o,ve:()=>i});var r=function(t,e,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},i=function(t,e,n){var i,o,u,s=t/360,a=e/100,h=n/100;if(0===a)i=h,o=h,u=h;else{var l=h<.5?h*(1+a):h+a-h*a,c=2*h-l;i=r(c,l,s+1/3),o=r(c,l,s),u=r(c,l,s-1/3)}return{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*u)}},o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},9187:t=>{function e(t,e,o){o=o||2;var u,s,a,c,f,d,x,y=e&&e.length,p=y?e[0]*o:t.length,g=n(t,0,p,o,!0),Z=[];if(!g||g.next===g.prev)return Z;if(y&&(g=function(t,e,i,o){var u,s,a,c=[];for(u=0,s=e.length;u<s;u++)(a=n(t,e[u]*o,u<s-1?e[u+1]*o:t.length,o,!1))===a.next&&(a.steiner=!0),c.push(v(a));for(c.sort(h),u=0;u<c.length;u++)i=r(i=l(c[u],i),i.next);return i}(t,e,g,o)),t.length>80*o){u=a=t[0],s=c=t[1];for(var m=o;m<p;m+=o)(f=t[m])<u&&(u=f),(d=t[m+1])<s&&(s=d),f>a&&(a=f),d>c&&(c=d);x=0!==(x=Math.max(a-u,c-s))?1/x:0}return i(g,Z,o,u,s,x),Z}function n(t,e,n,r,i){var o,u;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)u=z(o,t[o],t[o+1],u);else for(o=n-r;o>=e;o-=r)u=z(o,t[o],t[o+1],u);return u&&p(u,u.next)&&(M(u),u=u.next),u}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!p(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(M(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,h,l,c,v){if(t){!v&&c&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,u,s,a,h=1;do{for(n=t,t=null,o=null,u=0;n;){for(u++,r=n,s=0,e=0;e<h&&(s++,r=r.nextZ);e++);for(a=h;s>0||a>0&&r;)0!==s&&(0===a||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,h*=2}while(u>1)}(i)}(t,h,l,c);for(var d,x,y=t;t.prev!==t.next;)if(d=t.prev,x=t.next,c?u(t,h,l,c):o(t))e.push(d.i/n),e.push(t.i/n),e.push(x.i/n),M(t),t=x.next,y=x.next;else if((t=x)===y){v?1===v?i(t=s(r(t),e,n),e,n,h,l,c,2):2===v&&a(t,e,n,h,l,c):i(r(t),e,n,h,l,c,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(d(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,u=t.next;if(y(i,o,u)>=0)return!1;for(var s=i.x<o.x?i.x<u.x?i.x:u.x:o.x<u.x?o.x:u.x,a=i.y<o.y?i.y<u.y?i.y:u.y:o.y<u.y?o.y:u.y,h=i.x>o.x?i.x>u.x?i.x:u.x:o.x>u.x?o.x:u.x,l=i.y>o.y?i.y>u.y?i.y:u.y:o.y>u.y?o.y:u.y,c=f(s,a,e,n,r),v=f(h,l,e,n,r),x=t.prevZ,p=t.nextZ;x&&x.z>=c&&p&&p.z<=v;){if(x!==t.prev&&x!==t.next&&d(i.x,i.y,o.x,o.y,u.x,u.y,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,p!==t.prev&&p!==t.next&&d(i.x,i.y,o.x,o.y,u.x,u.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;x&&x.z>=c;){if(x!==t.prev&&x!==t.next&&d(i.x,i.y,o.x,o.y,u.x,u.y,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;p&&p.z<=v;){if(p!==t.prev&&p!==t.next&&d(i.x,i.y,o.x,o.y,u.x,u.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,u=i.next.next;!p(o,u)&&g(o,i,i.next,u)&&k(o,u)&&k(u,o)&&(e.push(o.i/n),e.push(i.i/n),e.push(u.i/n),M(i),M(i.next),i=t=u),i=i.next}while(i!==t);return r(i)}function a(t,e,n,o,u,s){var a=t;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&x(a,h)){var l=w(a,h);return a=r(a,a.next),l=r(l,l.next),i(a,e,n,o,u,s),void i(l,e,n,o,u,s)}h=h.next}a=a.next}while(a!==t)}function h(t,e){return t.x-e.x}function l(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,u=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>u){if(u=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===u)return n;var a,h=n,l=n.x,f=n.y,v=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&d(o<f?i:u,o,l,f,o<f?u:i,o,r.x,r.y)&&(a=Math.abs(o-r.y)/(i-r.x),k(r,t)&&(a<v||a===v&&(r.x>n.x||r.x===n.x&&c(n,r)))&&(n=r,v=a)),r=r.next}while(r!==h);return n}(t,e);if(!n)return e;var i=w(n,t),o=r(n,n.next);return r(i,i.next),e===n?o:e}function c(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,u,s){return(i-u)*(e-s)-(t-u)*(o-s)>=0&&(t-u)*(r-s)-(n-u)*(e-s)>=0&&(n-u)*(o-s)-(i-u)*(r-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&g(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(k(t,e)&&k(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||p(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function p(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,n,r){var i=m(y(t,e,n)),o=m(y(t,e,r)),u=m(y(n,r,t)),s=m(y(n,r,e));return i!==o&&u!==s||(!(0!==i||!Z(t,n,e))||(!(0!==o||!Z(t,r,e))||(!(0!==u||!Z(n,t,r))||!(0!==s||!Z(n,e,r)))))}function Z(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function m(t){return t>0?1:t<0?-1:0}function k(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function w(t,e){var n=new b(t.i,t.x,t.y),r=new b(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){var i=new b(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function b(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,u=n-r;o<n;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,u=Math.abs(R(t,0,o,n));if(i)for(var s=0,a=e.length;s<a;s++){var h=e[s]*n,l=s<a-1?e[s+1]*n:t.length;u-=Math.abs(R(t,h,l,n))}var c=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,v=r[s+1]*n,d=r[s+2]*n;c+=Math.abs((t[f]-t[d])*(t[v+1]-t[f+1])-(t[f]-t[v])*(t[d+1]-t[f+1]))}return 0===u&&0===c?0:Math.abs((c-u)/u)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var u=0;u<e;u++)n.vertices.push(t[i][o][u]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}}}]);