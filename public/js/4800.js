"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[4800],{49917:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(90025),n=r(74238),o=r(4087),s=r(9703),a=r(70915),l=r(82241),d=r(60764),c=r(6933);class h extends i.A{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){(0,o.b0)()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;(0,s.Zz)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,s.T9)(i,r)}forEachFeatureAtCoordinate(e,t,r,i,n,o,s,l){let h;const g=t.viewState;function u(e,t,r,i){return n.call(o,t,e?r:null,i)}const p=g.projection,f=(0,c.Li)(e.slice(),p),x=[[0,0]];if(p.canWrapX()&&i){const e=p.getExtent(),t=(0,a.RG)(e);x.push([-t,0],[t,0])}const T=t.layerStatesArray,_=T.length,y=[],m=[];for(let i=0;i<x.length;i++)for(let n=_-1;n>=0;--n){const o=T[n],a=o.layer;if(a.hasRenderer()&&(0,d.l)(o,g)&&s.call(l,a)){const n=a.getRenderer(),s=a.getSource();if(n&&s){const a=s.getWrapX()?f:e,l=u.bind(null,o.managed);m[0]=a[0]+x[i][0],m[1]=a[1]+x[i][1],h=n.forEachFeatureAtCoordinate(m,t,r,l,y)}if(h)return h}}if(0===y.length)return;const R=1/y.length;return y.forEach(((e,t)=>e.distanceSq+=t*R)),y.sort(((e,t)=>e.distanceSq-t.distanceSq)),y.some((e=>h=e.callback(e.feature,e.layer,e.geometry))),h}hasFeatureAtCoordinate(e,t,r,i,o,s){return void 0!==this.forEachFeatureAtCoordinate(e,t,r,i,n.rT,this,o,s)}getMap(){return this.map_}renderFrame(e){(0,o.b0)()}scheduleExpireIconCache(e){l.ue.canExpireCache()&&e.postRenderFunctions.push(g)}}function g(e,t){l.ue.expire()}const u=h},96769:(e,t,r)=>{r.d(t,{A:()=>f,B:()=>g});var i=r(5986),n=r(9960),o=r(83984),s=r(40808),a=r(9703),l=r(89352),d=r(68711),c=r(66514),h=r(70915);const g=[];let u=null;class p extends i.A{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=(0,a.vt)(),this.pixelTransform=(0,a.vt)(),this.inversePixelTransform=(0,a.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){let i;u||(u=(0,d.Y)(1,1,void 0,{willReadFrequently:!0})),u.clearRect(0,0,1,1);try{u.drawImage(e,t,r,1,1,0,0,1,1),i=u.getImageData(0,0,1,1).data}catch(e){return u=null,null}return i}getBackground(e){let t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let n,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&(0,c.aI)((0,l._j)(e.style.backgroundColor),(0,l._j)(r)))){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(o=t.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){n=document.createElement("div"),n.className=i;let e=n.style;e.position="absolute",e.width="100%",e.height="100%",o=(0,d.Y)();const t=o.canvas;n.appendChild(t),e=t.style,e.position="absolute",e.left="0",e.transformOrigin="top left",this.container=n,this.context=o}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=(0,h.Py)(r),n=(0,h.WU)(r),o=(0,h.k_)(r),s=(0,h.R)(r);(0,a.Bb)(t.coordinateToPixelTransform,i),(0,a.Bb)(t.coordinateToPixelTransform,n),(0,a.Bb)(t.coordinateToPixelTransform,o),(0,a.Bb)(t.coordinateToPixelTransform,s);const l=this.inversePixelTransform;(0,a.Bb)(l,i),(0,a.Bb)(l,n),(0,a.Bb)(l,o),(0,a.Bb)(l,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,n=e.viewState.rotation,o=e.pixelRatio,s=Math.round((0,h.RG)(r)/i*o),l=Math.round((0,h.Oq)(r)/i*o);(0,a.Zz)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,n,-s/2,-l/2),(0,a.T9)(this.inversePixelTransform,this.pixelTransform);const d=(0,a.dI)(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const e=this.context.canvas;e.width!=s||e.height!=l?(e.width=s,e.height=l):this.context.clearRect(0,0,s,l),d!==e.style.transform&&(e.style.transform=d)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const o=new n.A(e,this.inversePixelTransform,r,t);i.dispatchEvent(o)}}preRender(e,t){this.frameState=t,t.declutter||this.dispatchRenderEvent_(o.A.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(o.A.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new s.A),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(o.A.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(o.A.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,n,o,s){const l=n/2,d=o/2,c=i/t,h=-c,g=-e[0]+s,u=-e[1];return(0,a.Zz)(this.tempTransform,l,d,c,h,-r,g,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const f=p},32348:(e,t,r)=>{r.d(t,{A:()=>T});var i=r(70136),n=r(96769),o=r(41401),s=r(83984),a=r(62703),l=r(13663),d=r(70915),c=r(68711),h=r(73608),g=r(66514),u=r(9687),p=r(4087),f=r(6933);class x extends n.A{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,d.S5)(),this.wrappedRenderedExtent_=(0,d.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,n=t.viewState,s=n.center,l=n.resolution,c=n.projection,h=n.rotation,g=c.getExtent(),u=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),f=t.pixelRatio,x=t.viewHints,T=!(x[a.A.ANIMATING]||x[a.A.INTERACTING]),_=this.context,y=Math.round((0,d.RG)(i)/l*f),m=Math.round((0,d.Oq)(i)/l*f),R=u.getWrapX()&&c.canWrapX(),S=R?(0,d.RG)(g):null,C=R?Math.ceil((i[2]-g[2])/S)+1:1;let v=R?Math.floor((i[0]-g[0])/S):0;do{let i=this.getRenderTransform(s,l,0,f,y,m,v*S);t.declutter&&(i=i.slice(0)),e.execute(_,[_.canvas.width,_.canvas.height],i,h,T,void 0===r?o.y2:r?o.$i:o.x$,r?p&&t.declutter[p]:void 0)}while(++v<C)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,c.Y)(this.context.canvas.width,this.context.canvas.height,n.B))}resetDrawContext_(){if(1!==this.opacity_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,(0,c.Yg)(this.context),n.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const n=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a){if(!(this.getLayer().hasListener(s.A.PRERENDER)||this.getLayer().hasListener(s.A.POSTRENDER)))return null}this.setDrawContext_(),this.preRender(n,e);const l=i.projection;if(this.clipped_=!1,a&&r.extent&&this.clipping){const t=(0,u.SD)(r.extent,l);a=(0,d.HY)(t,e.extent),this.clipped_=a&&!(0,d.ms)(t,e.extent),this.clipped_&&this.clipUnrotated(n,e,t)}return a&&this.renderWorlds(o,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&n.restore(),this.postRender(n,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise((t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=this.frameState.size.slice(),t=this.renderedCenter_,r=this.renderedResolution_,i=this.renderedRotation_,n=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],c=e[0]*l.tF,g=e[1]*l.tF;a.push(this.getRenderTransform(t,r,i,l.tF,c,g,0).slice());const p=s.getSource(),f=n.getExtent();if(p.getWrapX()&&n.canWrapX()&&!(0,d.ms)(f,o)){let e=o[0];const n=(0,d.RG)(f);let s,h=0;for(;e<f[0];)--h,s=n*h,a.push(this.getRenderTransform(t,r,i,l.tF,c,g,s).slice()),e+=n;for(h=0,e=o[2];e>f[2];)++h,s=n*h,a.push(this.getRenderTransform(t,r,i,l.tF,c,g,s).slice()),e-=n}const x=(0,u.Tf)();this.hitDetectionImageData_=(0,l._7)(e,a,this.renderedFeatures_,s.getStyleFunction(),o,r,i,(0,h.j)(r,this.renderedPixelRatio_),x?n:null)}t((0,l.F8)(e,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(e,t,r,i,n){if(!this.replayGroup_)return;const o=t.viewState.resolution,s=t.viewState.rotation,a=this.getLayer(),l={},d=function(e,t,r){const o=(0,p.v6)(e),s=l[o];if(s){if(!0!==s&&r<s.distanceSq){if(0===r)return l[o]=!0,n.splice(n.lastIndexOf(s),1),i(e,a,t);s.geometry=t,s.distanceSq=r}}else{if(0===r)return l[o]=!0,i(e,a,t);n.push(l[o]={feature:e,layer:a,geometry:t,distanceSq:r,callback:i})}};let c;const h=[this.replayGroup_],g=this.getLayer().getDeclutter();return h.some((i=>c=i.forEachFeatureAtCoordinate(e,o,s,r,d,g&&t.declutter[g]?t.declutter[g].all().map((e=>e.value)):null))),c}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const n=e.viewHints[a.A.ANIMATING],s=e.viewHints[a.A.INTERACTING],l=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!l&&n||!c&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,x=e.viewState,T=x.projection,_=x.resolution,y=e.pixelRatio,m=t.getRevision(),R=t.getRenderBuffer();let S=t.getRenderOrder();void 0===S&&(S=h.Eo);const C=x.center.slice(),v=(0,d.r)(p,R*_),A=v.slice(),E=[v.slice()],w=T.getExtent();if(r.getWrapX()&&T.canWrapX()&&!(0,d.ms)(w,e.extent)){const e=(0,d.RG)(w),t=Math.max((0,d.RG)(v)/2,e);v[0]=w[0]-t,v[2]=w[2]+t,(0,f.Li)(C,T);const r=(0,d.Li)(E[0],T);r[0]<w[0]&&r[2]<w[2]?E.push([r[0]+e,r[1],r[2]+e,r[3]]):r[0]>w[0]&&r[2]>w[2]&&E.push([r[0]-e,r[1],r[2]-e,r[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==m&&this.renderedRenderOrder_==S&&this.renderedFrameDeclutter_===!!e.declutter&&(0,d.ms)(this.wrappedRenderedExtent_,v))return(0,g.aI)(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const I=new i.A((0,h.gY)(_,y),v,_,y),D=(0,u.Tf)();let F;if(D){for(let e=0,t=E.length;e<t;++e){const t=E[e],i=(0,u.JR)(t,T);r.loadFeatures(i,(0,u.vN)(_,T),D)}F=(0,u.FO)(D,T)}else for(let e=0,t=E.length;e<t;++e)r.loadFeatures(E[e],_,T);const P=(0,h.j)(_,y);let G=!0;const L=(e,r)=>{let i;const n=e.getStyleFunction()||t.getStyleFunction();if(n&&(i=n(e,_)),i){const t=this.renderFeature(e,P,i,I,F,this.getLayer().getDeclutter(),r);G=G&&!t}},b=(0,u.JR)(v,T),M=r.getFeaturesInExtent(b);S&&M.sort(S);for(let e=0,t=M.length;e<t;++e)L(M[e],e);this.renderedFeatures_=M,this.ready=G;const j=I.finish(),O=new o.Ay(v,_,y,r.getOverlaps(),j,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=m,this.renderedRenderOrder_=S,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=v,this.renderedCenter_=C,this.renderedProjection_=T,this.renderedPixelRatio_=y,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,n,o,s){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,d=r.length;l<d;++l)a=(0,h.nl)(i,e,r[l],t,this.boundHandleStyleImageChange_,n,o,s)||a;else a=(0,h.nl)(i,e,r,t,this.boundHandleStyleImageChange_,n,o,s);return a}}const T=x},88559:(e,t,r)=>{r.d(t,{A:()=>k});var i=r(70136),n=r(41401),o=r(96769),s=r(27607),a=r(40190),l=r(14969),d=r(93101),c=r(6837),h=r(11078),g=r(52913),u=r(33513),p=r(61597),f=r(68711),x=r(70915),T=r(9438);class _ extends s.Ay{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?(0,x._N)(r,i):r:i;const n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const a=o?(0,x._N)(n,o):n;if(0===(0,x.UG)(a))return void(this.state=h.A.EMPTY);r&&(s=s?(0,x._N)(s,r):r);const l=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,f=(0,u.aY)(t,c,a,l);if(!isFinite(f)||f<=0)return void(this.state=h.A.EMPTY);const T=void 0!==e.errorThreshold?e.errorThreshold:d.l;if(this.triangulation_=new g.A(t,c,a,s,f*T,l),0===this.triangulation_.getTriangles().length)return void(this.state=h.A.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(f);let _=this.triangulation_.calculateSourceExtent();if(s&&(t.canWrapX()?(_[1]=(0,p.qE)(_[1],s[1],s[3]),_[3]=(0,p.qE)(_[3],s[1],s[3])):_=(0,x._N)(_,s)),(0,x.UG)(_)){let i=0,n=0;t.canWrapX()&&(i=(0,x.RG)(r),n=Math.floor((_[0]-r[0])/i));(0,x.QJ)(_.slice(),t,!0).forEach((t=>{const r=this.sourceTileGrid_.getTileRangeForExtentAndZ(t,this.sourceZ_),o=e.getTileFunction;for(let e=r.minX;e<=r.maxX;e++)for(let t=r.minY;t<=r.maxY;t++){const r=o(this.sourceZ_,e,t,this.pixelRatio_);if(r){const e=n*i;this.sourceTiles_.push({tile:r,offset:e})}}++n})),0===this.sourceTiles_.length&&(this.state=h.A.EMPTY)}else this.state=h.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach((r=>{const i=r.tile;if(!i||i.getState()!==h.A.LOADED)return;const n=i.getSize(),o=this.gutter_;let a;const l=(0,s.bL)(i.getData());l?a=l:(t=!0,a=(0,s.$r)((0,s.xo)(i.getData())));const d=[n[0]+2*o,n[1]+2*o],c=a instanceof Float32Array,g=d[0]*d[1],u=c?Float32Array:Uint8ClampedArray,p=new u(a.buffer),f=u.BYTES_PER_ELEMENT,x=f*p.length/g,T=p.byteLength/d[1],_=Math.floor(T/f/d[0]),y=g*_;let m=p;if(p.length!==y){m=new u(y);let e=0,t=0;const r=d[0]*_;for(let i=0;i<d[1];++i){for(let i=0;i<r;++i)m[e++]=p[t+i];t+=T/f}}const R=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);R[0]+=r.offset,R[2]+=r.offset;const S=this.clipExtent_?.slice();S&&(S[0]+=r.offset,S[2]+=r.offset),e.push({extent:R,clipExtent:S,data:new Uint8ClampedArray(m.buffer),dataType:u,bytesPerPixel:x,pixelSize:d})})),this.sourceTiles_.length=0,0===e.length)return this.state=h.A.ERROR,void this.changed();const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(r),l=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let c,g;const p=e[0].bytesPerPixel;for(let t=Math.ceil(p/3)-1;t>=0;--t){const r=[];for(let i=0,n=e.length;i<n;++i){const n=e[i],o=n.data,s=n.pixelSize,a=s[0],l=s[1],d=(0,f.Y)(a,l,u.BV),c=d.createImageData(a,l),h=c.data;let g=3*t;for(let e=0,t=h.length;e<t;e+=4)h[e]=o[g],h[e+1]=o[g+1],h[e+2]=o[g+2],h[e+3]=255,g+=p;d.putImageData(c,0,0),r.push({extent:n.extent,clipExtent:n.clipExtent,image:d.canvas})}const i=(0,u.XX)(n,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,d,this.triangulation_,r,this.gutter_,!1,!1,!1);for(let e=0,t=r.length;e<t;++e){const t=r[e].image.getContext("2d");(0,f.Yg)(t),u.BV.push(t.canvas)}const s=i.getContext("2d"),h=s.getImageData(0,0,i.width,i.height);(0,f.Yg)(s),u.BV.push(i),c||(g=new Uint8ClampedArray(p*h.width*h.height),c=new e[0].dataType(g.buffer));const x=h.data;let T=3*t;for(let e=0,t=x.length;e<t;e+=4)255===x[e+3]?(g[T]=x[e],g[T+1]=x[e+1],g[T+2]=x[e+2]):(g[T]=0,g[T+1]=0,g[T+2]=0),T+=p}if(t){const e=(0,f.Y)(n,o),t=new ImageData(c,n);e.putImageData(t,0,0),this.reprojData_=e.canvas}else this.reprojData_=c;this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(o*this.pixelRatio_)],this.state=h.A.LOADED,this.changed()}load(){if(this.state!==h.A.IDLE&&this.state!==h.A.ERROR)return;this.state=h.A.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:t})=>{const r=t.getState();if(r!==h.A.IDLE&&r!==h.A.LOADING)return;e++;const i=(0,T.KT)(t,c.A.CHANGE,(()=>{const r=t.getState();r!=h.A.LOADED&&r!=h.A.ERROR&&r!=h.A.EMPTY||((0,T.JH)(i),e--,0===e&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(i)})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:e}){e.getState()==h.A.IDLE&&e.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(T.JH),this.sourcesListenerKeys_=null}}const y=_;var m=r(97404),R=r(91110),S=r(9703),C=r(66514),v=r(40186),A=r(9687),E=r(4087),w=r(6782);function I(e,t,r,i){return`${e},${(0,v.dp)(t,r,i)}`}function D(e,t,r){if(!(r in e))return e[r]=new Set([t]),!0;const i=e[r],n=i.has(t);return n||i.add(t),!n}function F(e,t,r){const i=e[r];return!!i&&i.delete(t)}function P(e,t){const r=e.layerStatesArray[e.layerIndex];r.extent&&(t=(0,x._N)(t,(0,A.SD)(r.extent,e.viewState.projection)));const i=r.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(e.viewState.projection).getExtent();r&&(t=(0,x._N)(t,r))}return t}class G extends o.A{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=(0,x.S5)(),this.tempTileRange_=new R.A(0,0,0,0),this.tempTileCoord_=(0,v.N)(0,0,0);const r=void 0!==t.cacheSize?t.cacheSize:512;this.tileCache_=new l.A(r),this.renderedProjection_=void 0,this.maxStaleKeys=.5*r}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const n=this.tileCache_,o=this.getLayer().getSource(),s=I(o.getKey(),e,t,r);let a;if(n.containsKey(s))a=n.get(s);else{if(a=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!a)return null;n.set(s,a)}return a}getTile(e,t,r,i){const n=this.getOrCreateTile(e,t,r,i);return n||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=(0,S.Bb)(t.pixelToCoordinateTransform,e.slice()),n=r.getExtent();if(n&&!(0,x.Ym)(n,i))return null;const o=t.viewState,l=r.getRenderSource(),d=l.getTileGridForProjection(o.projection),c=l.getTilePixelRatio(t.pixelRatio);for(let e=d.getZForResolution(o.resolution);e>=d.getMinZoom();--e){const r=d.getTileCoordForCoordAndZ(i,e),n=this.getTile(e,r[1],r[2],t);if(!n||n.getState()!==h.A.LOADED)continue;const g=d.getOrigin(e),u=(0,w.xq)(d.getTileSize(e)),p=d.getResolution(e);let f;if(n instanceof a.A||n instanceof m.A)f=n.getImage();else{if(!(n instanceof s.Ay))continue;if(f=(0,s.xo)(n.getData()),!f)continue}const x=Math.floor(c*((i[0]-g[0])/p-r[1]*u[0])),T=Math.floor(c*((g[1]-i[1])/p-r[2]*u[1])),_=Math.round(c*l.getGutterForProjection(o.projection));return this.getImageData(f,x+_,T+_)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,n){const o=e.viewState,s=this.getLayer(),a=s.getRenderSource(),l=a.getTileGridForProjection(o.projection),d=(0,E.v6)(a);d in e.wantedTiles||(e.wantedTiles[d]={});const c=e.wantedTiles[d],g=s.getMapInternal(),u=Math.max(r-n,l.getMinZoom(),l.getZForResolution(Math.min(s.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):l.getResolution(0)),a.zDirection));for(let n=r;n>=u;--n){const r=l.getTileRangeForExtentAndZ(t,n,this.tempTileRange_),o=l.getResolution(n);for(let t=r.minX;t<=r.maxX;++t)for(let s=r.minY;s<=r.maxY;++s){const r=this.getTile(n,t,s,e);if(!r)continue;if(!D(i,r,n))continue;const a=r.getKey();if(c[a]=!0,r.getState()===h.A.IDLE&&!e.tileQueue.isKeyQueued(a)){const i=(0,v.N)(n,t,s,this.tempTileCoord_);e.tileQueue.enqueue([r,d,l.getTileCoordCenter(i),o])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],n=e[1],o=e[2],s=this.getStaleKeys();for(let e=0;e<s.length;++e){const a=I(s[e],i,n,o);if(r.containsKey(a)){const e=r.get(a);if(e.getState()===h.A.LOADED)return e.endTransition((0,E.v6)(this)),D(t,e,i),!0}}return!1}findAltTiles_(e,t,r,i){const n=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!n)return!1;let o=!0;const s=this.tileCache_,a=this.getLayer().getRenderSource().getKey();for(let e=n.minX;e<=n.maxX;++e)for(let t=n.minY;t<=n.maxY;++t){const n=I(a,r,e,t);let l=!1;if(s.containsKey(n)){const e=s.get(n);e.getState()===h.A.LOADED&&(D(i,e,r),l=!0)}l||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,n=i.projection,o=i.resolution,s=i.center,a=e.pixelRatio,l=this.getLayer(),d=l.getSource(),c=d.getRevision(),g=d.getTileGridForProjection(n),u=g.getZForResolution(o,d.zDirection),p=g.getResolution(u),f=d.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==f&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=f):this.renderedSourceKey_=f;let T=e.extent;const _=d.getTilePixelRatio(a);this.prepareContainer(e,t);const R=this.context.canvas.width,v=this.context.canvas.height,w=r.extent&&(0,A.SD)(r.extent,n);w&&(T=(0,x._N)(T,(0,A.SD)(r.extent,n)));const I=p*R/2/_,D=p*v/2/_,G=[s[0]-I,s[1]-D,s[0]+I,s[1]+D],L={};this.renderedTiles.length=0;const b=l.getPreload();if(e.nextExtent){const t=g.getZForResolution(i.nextResolution,d.zDirection),r=P(e,e.nextExtent);this.enqueueTiles(e,r,t,L,b)}const M=P(e,T);if(this.enqueueTiles(e,M,u,L,0),b>0&&setTimeout((()=>{this.enqueueTiles(e,M,u-1,L,b-1)}),0),!(u in L))return this.container;const j=(0,E.v6)(this),O=e.time;for(const t of L[u]){const r=t.getState();if((t instanceof m.A||t instanceof y)&&r===h.A.EMPTY)continue;const i=t.tileCoord;if(r===h.A.LOADED){if(1===t.getAlpha(j,O)){t.endTransition(j);continue}}this.renderComplete=!1;if(this.findStaleTile_(i,L)){F(L,t,u),e.animate=!0;continue}if(this.findAltTiles_(g,i,u+1,L))continue;const n=g.getMinZoom();for(let e=u-1;e>=n;--e){if(this.findAltTiles_(g,i,e,L))break}}const N=p/o*a/_,Z=this.getRenderContext(e);(0,S.Zz)(this.tempTransform,R/2,v/2,N,N,0,-R/2,-v/2),r.extent&&this.clipUnrotated(Z,e,w),d.getInterpolate()||(Z.imageSmoothingEnabled=!1),this.preRender(Z,e);const B=Object.keys(L).map(Number);let k;B.sort(C.V_);const Y=[],z=[];for(let t=B.length-1;t>=0;--t){const r=B[t],i=d.getTilePixelSize(r,a,n),o=g.getResolution(r)/p,s=i[0]*o*N,l=i[1]*o*N,c=g.getTileCoordForCoordAndZ((0,x.Py)(G),r),u=g.getTileCoordExtent(c),f=(0,S.Bb)(this.tempTransform,[_*(u[0]-G[0])/p,_*(G[3]-u[3])/p]),T=_*d.getGutterForProjection(n);for(const t of L[r]){if(t.getState()!==h.A.LOADED)continue;const i=t.tileCoord,n=c[1]-i[1],o=Math.round(f[0]-(n-1)*s),a=c[2]-i[2],g=Math.round(f[1]-(a-1)*l),u=Math.round(f[0]-n*s),p=Math.round(f[1]-a*l),_=o-u,y=g-p,m=1===B.length;let R=!1;k=[u,p,u+_,p,u+_,p+y,u,p+y];for(let e=0,t=Y.length;e<t;++e)if(!m&&r<z[e]){const t=Y[e];(0,x.HY)([u,p,u+_,p+y],[t[0],t[3],t[4],t[7]])&&(R||(Z.save(),R=!0),Z.beginPath(),Z.moveTo(k[0],k[1]),Z.lineTo(k[2],k[3]),Z.lineTo(k[4],k[5]),Z.lineTo(k[6],k[7]),Z.moveTo(t[6],t[7]),Z.lineTo(t[4],t[5]),Z.lineTo(t[2],t[3]),Z.lineTo(t[0],t[1]),Z.clip())}Y.push(k),z.push(r),this.drawTile(t,e,u,p,_,y,T,m),R&&Z.restore(),this.renderedTiles.unshift(t),this.updateUsedTiles(e.usedTiles,d,t)}}this.renderedRevision=c,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!(0,x.aI)(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=a,this.renderedProjection=n,this.postRender(this.context,e),r.extent&&Z.restore(),Z.imageSmoothingEnabled=!0;return e.postRenderFunctions.push(((e,t)=>{const r=(0,E.v6)(d),i=t.wantedTiles[r],n=i?Object.keys(i).length:0;this.updateCacheSize(n),this.tileCache_.expireCache()})),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,t,r,i,n,o,a,l){let d;if(e instanceof s.Ay){if(d=(0,s.xo)(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const c=this.getRenderContext(t),h=(0,E.v6)(this),g=t.layerStatesArray[t.layerIndex],u=g.opacity*(l?e.getAlpha(h,t.time):1),p=u!==c.globalAlpha;p&&(c.save(),c.globalAlpha=u),c.drawImage(d,a,a,d.width-2*a,d.height-2*a,r,i,n,o),p&&c.restore(),u!==g.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=(0,E.v6)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const L=G;var b=r(62703),M=r(40808),j=r(13663),O=r(73608),N=r(6933);const Z={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},B={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};const k=class extends L{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=(0,S.vt)(),this.tileClipContexts_=null}drawTile(e,t,r,i,n,o,s,a){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,n,o,s,a)}getTile(e,t,r,i){const n=this.getOrCreateTile(e,t,r,i);if(!n)return null;const o=i.viewState.resolution,s=i.viewHints;return!!(s[b.A.ANIMATING]||s[b.A.INTERACTING])&&n.wantedResolution||(n.wantedResolution=o),n}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const o=this.getLayer(),s=o.getRevision(),a=o.getRenderOrder()||null,l=e.wantedResolution,d=e.getReplayState(o);if(!d.dirty&&d.renderedResolution===l&&d.renderedRevision==s&&d.renderedRenderOrder==a)return;const c=o.getSource(),g=!!o.getDeclutter(),u=c.getTileGrid(),p=c.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),f=c.getSourceTiles(t,r,e),T=(0,E.v6)(o);delete e.hitDetectionImageData[T],e.executorGroups[T]=[],d.dirty=!1;for(let r=0,s=f.length;r<s;++r){const s=f[r];if(s.getState()!=h.A.LOADED)continue;const _=s.tileCoord,y=u.getTileCoordExtent(_),m=(0,x._N)(p,y),R=(0,x.r)(m,o.getRenderBuffer()*l,this.tempExtent),S=(0,x.aI)(y,m)?null:R,C=new i.A(0,m,l,t),v=(0,O.j)(l,t),A=function(e,t){let r;const i=e.getStyleFunction()||o.getStyleFunction();if(i&&(r=i(e,l)),r){const i=this.renderFeature(e,v,r,C,g,t);d.dirty=d.dirty||i}},E=s.getFeatures();a&&a!==d.renderedRenderOrder&&E.sort(a);for(let e=0,t=E.length;e<t;++e){const t=E[e];S&&!(0,x.HY)(S,t.getGeometry().getExtent())||A.call(this,t,e)}const w=C.finish(),I="vector"!==o.getRenderMode()&&g&&1===f.length?null:m,D=new n.Ay(I,l,t,c.getOverlaps(),w,o.getRenderBuffer(),!0);e.executorGroups[T].push(D)}d.renderedRevision=s,d.renderedRenderOrder=a,d.renderedResolution=l}forEachFeatureAtCoordinate(e,t,r,i,n){const o=t.viewState.resolution,s=t.viewState.rotation;r=null==r?0:r;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),d=(0,x.Tr)([e]);(0,x.r)(d,o*r,d);const c={},h=function(e,t,r){let o=e.getId();void 0===o&&(o=(0,E.v6)(e));const s=c[o];if(s){if(!0!==s&&r<s.distanceSq){if(0===r)return c[o]=!0,n.splice(n.lastIndexOf(s),1),i(e,a,t);s.geometry=t,s.distanceSq=r}}else{if(0===r)return c[o]=!0,i(e,a,t);n.push(c[o]={feature:e,layer:a,geometry:t,distanceSq:r,callback:i})}},g=this.renderedTiles;let u;for(let i=0,n=g.length;!u&&i<n;++i){const n=g[i],c=l.getTileCoordExtent(n.wrappedTileCoord);if(!(0,x.HY)(c,d))continue;const p=(0,E.v6)(a),f=[n.executorGroups[p]],T=a.getDeclutter();f.some((i=>{const n=T?t.declutter[T].all().map((e=>e.value)):null;for(let t=0,a=i.length;t<a;++t){const a=i[t];if(u=a.forEachFeatureAtCoordinate(e,o,s,r,h,n),u)return!0}}))}return u}getFeatures(e){return new Promise(((t,r)=>{const i=this.getLayer(),n=(0,E.v6)(i),o=i.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,d=o.getTileGridForProjection(s),c=(0,S.Bb)(this.renderedPixelToCoordinateTransform_,e.slice()),g=d.getTileCoordForCoordAndResolution(c,l);let u;for(let e=0,t=this.renderedTiles.length;e<t;++e)if(g.toString()===this.renderedTiles[e].tileCoord.toString()){if(u=this.renderedTiles[e],u.getState()===h.A.LOADED){const e=d.getTileCoordExtent(u.tileCoord);o.getWrapX()&&s.canWrapX()&&!(0,x.ms)(a,e)&&(0,N.Li)(c,s);break}u=void 0}if(!u||u.loadingSourceTiles>0)return void t([]);const p=d.getTileCoordExtent(u.wrappedTileCoord),f=(0,x.Py)(p),T=[(c[0]-f[0])/l,(f[1]-c[1])/l],_=u.getSourceTiles().reduce((function(e,t){return e.concat(t.getFeatures())}),[]);let y=u.hitDetectionImageData[n];if(!y){const e=(0,w.xq)(d.getTileSize(d.getZForResolution(l,o.zDirection))),t=this.renderedRotation_,r=[this.getRenderTransform(d.getTileCoordCenter(u.wrappedTileCoord),l,0,j.tF,e[0]*j.tF,e[1]*j.tF,0)];y=(0,j._7)(e,r,_,i.getStyleFunction(),d.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(i).renderedResolution,t),u.hitDetectionImageData[n]=y}t((0,j.F8)(T,_,y))}))}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(0===r.getCount())return t;const i=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),n=i.getZForResolution(this.renderedResolution),o={};return r.forEach((r=>{if(r.tileCoord[0]!==n||r.getState()!==h.A.LOADED)return;const s=r.getSourceTiles();for(let r=0,n=s.length;r<n;++r){const n=s[r],a=n.getKey();if(a in o)continue;o[a]=!0;const l=n.tileCoord;if((0,x.HY)(e,i.getTileCoordExtent(l))){const r=n.getFeatures();if(r)for(let i=0,n=r.length;i<n;++i){const n=r[i],o=n.getGeometry();(0,x.HY)(e,o.getExtent())&&t.push(n)}}}})),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[b.A.ANIMATING]||o[b.A.INTERACTING]),a=this.renderedTiles;for(let t=0,r=a.length;t<r;++t){const r=a[t],i=r.executorGroups[(0,E.v6)(this.getLayer())],o=this.getLayer().getDeclutter();if(i)for(let t=i.length-1;t>=0;--t)i[t].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(r,e),e.viewState.rotation,s,n.$i,o?e.declutter[o]:void 0)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles.reduce(((e,t,r)=>(t.executorGroups[(0,E.v6)(this.getLayer())].forEach((t=>e.push({executorGroup:t,index:r}))),e)),[]),r=t.map((({executorGroup:e})=>e.getDeferredZIndexContexts())),i={};for(let e=0,r=t.length;e<r;++e){const r=t[e].executorGroup.getDeferredZIndexContexts();for(const e in r)i[e]=!0}Object.keys(i).sort(C.V_).map(Number).forEach((e=>{r.forEach(((r,i)=>{r[e]&&(r[e].forEach((e=>{const{executorGroup:r,index:n}=t[i],o=r.getRenderedContext(),s=o.globalAlpha;o.globalAlpha=this.renderedOpacity_;const a=this.tileClipContexts_[n];a&&a.draw(o),e.draw(o),a&&o.restore(),o.globalAlpha=s,e.clear()})),r[e].length=0)}))}))}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,n=i.center,o=i.resolution,s=i.rotation,a=t.size,l=Math.round(a[0]*r),d=Math.round(a[1]*r),c=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),h=e.tileCoord,g=c.getTileCoordExtent(e.wrappedTileCoord),u=c.getTileCoordExtent(h,this.tempExtent)[0]-g[0];return(0,S.lw)((0,S.hs)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(n,o,s,r,l,d,u))}postRender(e,t){const r=t.viewHints,i=!(r[b.A.ANIMATING]||r[b.A.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),d=l?B[s].filter((e=>!n.$i.includes(e))):B[s],c=t.viewState,h=c.rotation,g=o.getSource(),u=g.getTileGridForProjection(c.projection).getZForResolution(c.resolution,g.zDirection),p=this.renderedTiles,f=[],T=[],_=[];let y=!0;for(let r=p.length-1;r>=0;--r){const n=p[r];y=y&&!n.getReplayState(o).dirty;const s=n.executorGroups[(0,E.v6)(o)].filter((e=>e.hasExecutors(d)));if(0===s.length)continue;const a=this.getTileRenderTransform(n,t),c=n.tileCoord[0];let g=!1;const m=s[0].getClipCoords(a);let R,S=e;if(m){R=new M.A,S=R.getContext();for(let e=0,t=f.length;e<t;++e)if(u!==c&&c<T[e]){const t=f[e];(0,x.HY)([m[0],m[3],m[4],m[7]],[t[0],t[3],t[4],t[7]])&&(g||(S.save(),g=!0),S.beginPath(),S.moveTo(m[0],m[1]),S.lineTo(m[2],m[3]),S.lineTo(m[4],m[5]),S.lineTo(m[6],m[7]),S.moveTo(t[6],t[7]),S.lineTo(t[4],t[5]),S.lineTo(t[2],t[3]),S.lineTo(t[0],t[1]),S.clip())}f.push(m),T.push(c)}for(let r=0,n=s.length;r<n;++r){s[r].execute(e,[e.canvas.width,e.canvas.height],a,h,i,d,t.declutter?.[l])}g&&(S===e?S.restore():_[r]=R)}e.globalAlpha=a,this.ready=y,this.tileClipContexts_=_,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,n,o){if(!r)return!1;let s=!1;if(Array.isArray(r))for(let a=0,l=r.length;a<l;++a)s=(0,O.nl)(i,e,r[a],t,this.boundHandleStyleImageChange_,void 0,n,o)||s;else s=(0,O.nl)(i,e,r,t,this.boundHandleStyleImageChange_,void 0,n,o);return s}tileImageNeedsRender_(e){const t=this.getLayer();if("vector"===t.getRenderMode())return!1;const r=e.getReplayState(t),i=t.getRevision(),n=e.wantedResolution;return r.renderedTileResolution!==n||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),n=r.getRevision(),o=e.executorGroups[(0,E.v6)(r)];i.renderedTileRevision=n;const s=e.wrappedTileCoord,a=s[0],l=r.getSource();let d=t.pixelRatio;const c=t.viewState.projection,h=l.getTileGridForProjection(c),g=h.getResolution(e.tileCoord[0]),u=t.pixelRatio/e.wantedResolution*g,p=h.getResolution(a),f=e.getContext();d=Math.round(Math.max(d,u/d));const x=l.getTilePixelSize(a,d,c);f.canvas.width=x[0],f.canvas.height=x[1];const T=d/u;if(1!==T){const e=(0,S.cL)(this.tmpTransform_);(0,S.hs)(e,T,T),f.setTransform.apply(f,e)}const _=h.getTileCoordExtent(s,this.tempExtent),y=u/p,m=(0,S.cL)(this.tmpTransform_);(0,S.hs)(m,y,-y),(0,S.Tl)(m,-_[0],-_[3]);for(let e=0,t=o.length;e<t;++e){o[e].execute(f,[f.canvas.width*T,f.canvas.height*T],m,0,!0,Z[r.getRenderMode()],null)}i.renderedTileResolution=e.wantedResolution}}},73608:(e,t,r)=>{r.d(t,{Eo:()=>a,gY:()=>d,j:()=>l,nl:()=>c});var i=r(6141),n=r(4087);const o=.5,s={Point:function(e,t,r,n,o,s){const a=r.getImage(),l=r.getText(),d=l&&l.getText(),c=s&&a&&d?{}:void 0;if(a){if(a.getImageState()!=i.A.LOADED)return;const s=e.getBuilder(r.getZIndex(),"Image");s.setImageStyle(a,c),s.drawPoint(t,n,o)}if(d){const i=e.getBuilder(r.getZIndex(),"Text");i.setTextStyle(l,c),i.drawText(t,n,o)}},LineString:function(e,t,r,i,n){const o=r.getStroke();if(o){const s=e.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(t,i,n)}const s=r.getText();if(s&&s.getText()){const o=e.getBuilder(r.getZIndex(),"Text");o.setTextStyle(s),o.drawText(t,i,n)}},Polygon:function(e,t,r,i,n){const o=r.getFill(),s=r.getStroke();if(o||s){const a=e.getBuilder(r.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawPolygon(t,i,n)}const a=r.getText();if(a&&a.getText()){const o=e.getBuilder(r.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i,n)}},MultiPoint:function(e,t,r,n,o,s){const a=r.getImage(),l=a&&0!==a.getOpacity(),d=r.getText(),c=d&&d.getText(),h=s&&l&&c?{}:void 0;if(l){if(a.getImageState()!=i.A.LOADED)return;const s=e.getBuilder(r.getZIndex(),"Image");s.setImageStyle(a,h),s.drawMultiPoint(t,n,o)}if(c){const i=e.getBuilder(r.getZIndex(),"Text");i.setTextStyle(d,h),i.drawText(t,n,o)}},MultiLineString:function(e,t,r,i,n){const o=r.getStroke();if(o){const s=e.getBuilder(r.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(t,i,n)}const s=r.getText();if(s&&s.getText()){const o=e.getBuilder(r.getZIndex(),"Text");o.setTextStyle(s),o.drawText(t,i,n)}},MultiPolygon:function(e,t,r,i,n){const o=r.getFill(),s=r.getStroke();if(s||o){const a=e.getBuilder(r.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawMultiPolygon(t,i,n)}const a=r.getText();if(a&&a.getText()){const o=e.getBuilder(r.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i,n)}},GeometryCollection:function(e,t,r,i,n,o){const a=t.getGeometriesArray();let l,d;for(l=0,d=a.length;l<d;++l){(0,s[a[l].getType()])(e,a[l],r,i,n,o)}},Circle:function(e,t,r,i,n){const o=r.getFill(),s=r.getStroke();if(o||s){const a=e.getBuilder(r.getZIndex(),"Circle");a.setFillStrokeStyle(o,s),a.drawCircle(t,i,n)}const a=r.getText();if(a&&a.getText()){const n=e.getBuilder(r.getZIndex(),"Text");n.setTextStyle(a),n.drawText(t,i)}}};function a(e,t){return parseInt((0,n.v6)(e),10)-parseInt((0,n.v6)(t),10)}function l(e,t){const r=d(e,t);return r*r}function d(e,t){return o*e/t}function c(e,t,r,n,o,a,l,d){const c=[],g=r.getImage();if(g){let e=!0;const t=g.getImageState();t==i.A.LOADED||t==i.A.ERROR?e=!1:t==i.A.IDLE&&g.load(),e&&c.push(g.ready())}const u=r.getFill();u&&u.loading()&&c.push(u.ready());const p=c.length>0;return p&&Promise.all(c).then((()=>o(null))),function(e,t,r,i,n,o,a){const l=r.getGeometryFunction()(t);if(!l)return;const d=l.simplifyTransformed(i,n),c=r.getRenderer();if(c)h(e,d,r,t,a);else{(0,s[d.getType()])(e,d,r,t,a,o)}}(e,t,r,n,a,l,d),p}function h(e,t,r,i,n){if("GeometryCollection"==t.getType()){const o=t.getGeometries();for(let t=0,s=o.length;t<s;++t)h(e,o[t],r,i,n);return}e.getBuilder(r.getZIndex(),"Default").drawCustom(t,i,r.getRenderer(),r.getHitDetectionRenderer(),n)}}}]);