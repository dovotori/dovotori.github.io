"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[9616],{89616:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x,destroy:()=>w});var s=n(16853),r=n(54705),i=n(15333),o=n(27853),a=n(35566),l=n(91106),h=n(20769),g=n(50583),d=n(10334),c=n(82669);const u=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.gl=e,this.fboColorDepth=new c.A(e,t,n,s),this.fboNormal=new c.A(e,t,n,s),this.fboPosition=new c.A(e,t,n,s),this.width=t,this.height=n}generateTextures(e,t){t.setInt("type",0),this.fboColorDepth.start(),e(t),this.fboColorDepth.end(),t.setInt("type",1),this.fboNormal.start(),e(t),this.fboNormal.end(),t.setInt("type",2),this.fboPosition.start(),e(t),this.fboPosition.end()}getColorTexture(){return this.fboColorDepth.getTexture()}getDepthTexture(){return this.fboColorDepth.getDepthTexture()}getNormalTexture(){return this.fboNormal.getTexture()}getPositionTexture(){return this.fboPosition.getTexture()}};var p=n(27128);const m=class extends i.A{constructor(e,t){super(e,t),(0,r.A)(this,"mainRender",(e=>{this.renderFakeShadow(this.mngProg.get("color")),this.mngGltf.get(this.config.MAIN_OBJ).render(e,this.model)})),(0,r.A)(this,"renderBasiqueForLampeDepth",(()=>{const e=this.getLampe(0),t=this.mngProg.get("basique3d");e.setDepthProgram(t),e.start(),this.mainRender(t),e.end()})),(0,r.A)(this,"onMouseDrag",(e=>{this.targetX.set(.1*e.relPrevious.x)})),(0,r.A)(this,"onMouseWheel",(e=>{let t=-e.deltaY;t=Math.min(t,1.2),t=Math.max(t,.8),this.targetZ.set(t)})),this.config.MAIN_PROG=t.MAIN_PROG,this.config.MAIN_OBJ=t.MAIN_OBJ,this.model=new o.A,this.model.identity(),this.targetX=new a.A(0),this.targetZ=new l.A(0,.05),this.fakeShadow=new d.A(e,p.A),this.targetZ.set(1.2),this.buffers=new u(this.gl,t.width,t.height,this.canUseDepth())}update(e){super.update(e),this.targetX.update(),this.targetZ.update(),this.model.identity(),this.model.scale(this.targetZ.get());const t=(0,g.pu)(this.targetX.get())+1e-4*e,n=new h.A;n.rotateY(-t),this.model.multiply(n.toMatrix4());const s=this.mngProg.get(this.config.MAIN_PROG),r=new o.A;r.equal(this.camera.getView()).multiply(this.model).inverse(),s.setMatrix("inverseModel",r.get()),this.mngGltf.get(this.config.MAIN_OBJ).update(e)}render(){super.render(),this.mainRender(this.mngProg.get(this.config.MAIN_PROG))}renderFakeShadow(e){const t=new o.A;t.identity(),t.rotate(-90,1,0,0),t.translate(.2,-7,0),t.scale(8.1,1,6),t.multiply(this.model),e.setMatrix("model",t.get()),e.setVector("color",[0,0,0,.9]),this.fakeShadow.render(e.get())}},f="paysage",b="paysage",A={slug:"paysage",MAIN_PROG:f,MAIN_OBJ:b,shaders:["/camera/basique3d.js","/camera/color.js",`/camera/${f}.js`,"/screen/fxaa.js","/screen/fxaa2.js","/screen/screen.js","/camera/buffers.js","/screen/brightcontrast.js","/screen/ssao.js","/screen/blurOnePass.js","/screen/compose.js","/screen/bloom.js","/camera/shadow.js"],postprocess:{ssao:{radius:2,strength:1,blur:{size:1e-6,intensity:.6}},shadow:{epsilon:1e-4,lighten:.1,blur:{size:.1,intensity:1}}},useDepthTexture:!0,assets:[`/gltf/${b}.gltf`],camera:{position:{x:-14,y:8,z:14},target:{x:0,y:-2,z:0},near:1,far:40,angle:90},lampes:[{type:0,position:{x:10,y:20,z:10},ambiant:[1,.8,.6],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:2e3,ortho:{left:-17,right:17,bottom:-15,top:15},near:10,far:50},{type:0,position:{x:-14,y:20,z:-14},ambiant:[.8,.6,1],diffuse:[.6,.5,.8],specular:[.8,.7,1],brillance:10,radius:10,direction:[0,0,1],strength:2e3}],mouse:{events:["drag","wheel"]},canvas:{width:1024,height:1024},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};n(19513),n(807);let y=null;const x=async()=>{y=new s.A,await y.setup(m,A);const e=document.querySelector(`#${A.slug}`),t=y.getCanvas();t&&e&&e.appendChild(t)},w=()=>{y&&y.destroy&&y.destroy()}},77314:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(31601),r=n.n(s),i=n(76314),o=n.n(i)()(r());o.push([e.id,"#controls {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: stretch;\n  z-index: 10;\n  background-color: rgba(34, 34, 34, .8);\n  margin: .5em;\n  padding: .5em;\n}\n\n#controls div {\n  display: flex;\n  align-items: stretch;\n}\n\n#controls div input[type=range] {\n  width: 100%;\n}\n\n#controls div input[type=checkbox] {\n  margin-right: 0.5em;\n}\n\n#controls label {\n  display: flex;\n  align-items: center;\n}\n\n#controls label,\n#controls a {\n  font-size: .8em;\n}\n\n@media (max-width: 570px) {\n  #controls.responsive {\n    position: relative;\n    width: 100%;\n    margin: 0;\n  }\n}",""]);const a=o},55420:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(31601),r=n.n(s),i=n(76314),o=n.n(i)()(r());o.push([e.id,"#fullscreen-toggle-btn {\n  border-radius: 0;\n  margin: 0;\n  padding: 4px;\n  border: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n  transform: scale(0.8);\n  opacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n  display: block;\n  width: 2em;\n  fill: #fff;\n  opacity: 0.8;\n  transform: scale(0.6);\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\n}\n\n[data-fullscreen] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const a=o},19513:(e,t,n)=>{var s=n(85072),r=n.n(s),i=n(97825),o=n.n(i),a=n(77659),l=n.n(a),h=n(55056),g=n.n(h),d=n(10540),c=n.n(d),u=n(41113),p=n.n(u),m=n(77314),f={};f.styleTagTransform=p(),f.setAttributes=g(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=c();r()(m.A,f),m.A&&m.A.locals&&m.A.locals},807:(e,t,n)=>{var s=n(85072),r=n.n(s),i=n(97825),o=n.n(i),a=n(77659),l=n.n(a),h=n(55056),g=n.n(h),d=n(10540),c=n.n(d),u=n(41113),p=n.n(u),m=n(55420),f={};f.styleTagTransform=p(),f.setAttributes=g(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=c();r()(m.A,f),m.A&&m.A.locals&&m.A.locals}}]);