"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[9616],{57381:(t,e,s)=>{s.d(e,{A:()=>h});var i=s(27853),n=s(50730);const h=class extends n.A{constructor(t){super(t),this.matIdentity=new i.A,this.projection=new i.A,this.projection.identity(),this.near=t.near??1,this.far=t.far??100,this.angle=t.angle??50,this.matIdentity.identity(),this.lookAt()}update(){this.lookAt()}perspective(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}setNearFar(t,e){this.near=t,this.far=e}setAngle(t){this.angle=t}getModeProjection(){return this.ortho??this.projection}getProjection(){return this.projection}getIdentity(){return this.matIdentity}getNearFar(){return[this.near,this.far]}getNear(){return this.near}getFar(){return this.far}getAngle(){return this.angle}getReflectViewMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=2*(this.position.getY()-t);return(new i.A).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}},50730:(t,e,s)=>{s.d(e,{A:()=>h});var i=s(75112),n=s(27853);const h=class{constructor(t){if(this.position=new i.A(t.position.x,t.position.y,t.position.z),this.target=new i.A(0,0,0),this.view=new n.A,t.ortho){const{left:e,right:s,bottom:i,top:h}=t.ortho,{near:r,far:o}=t;this.ortho=new n.A,this.ortho.ortho(e,s,i,h,r,o)}}lookAt(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}getView(){return this.view}getPosition(){return this.position.get()}getPositionVec3(){return this.position}getTarget(){return this.target.get()}getModel(){return this.repere.getModel()}getOrtho(){return this.ortho}addToPosition(t,e,s){this.position.addXYZ(t,e,s),this.lookAt()}setPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=null!==t?t:this.position.getX(),n=null!==e?e:this.position.getY(),h=null!==s?s:this.position.getZ();this.position.set(i,n,h),this.lookAt()}setTarget(t,e,s){this.target.set(t,e,s)}setTargetVec3(t){this.target.equal(t)}}},20769:(t,e,s)=>{s.d(e,{A:()=>r});var i=s(79678),n=s(2823),h=s(27853);const r=class{constructor(){this.d=new Float32Array(8),this.identity()}identity(){return this.d[0]=0,this.d[1]=0,this.d[2]=0,this.d[3]=1,this.d[4]=0,this.d[5]=0,this.d[6]=0,this.d[7]=0,this}set(t,e,s,i,n,h,r,o){return this.d[0]=t,this.d[1]=e,this.d[2]=s,this.d[3]=i,this.d[4]=n,this.d[5]=h,this.d[6]=r,this.d[7]=o,this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this.d[4]+=t.d[4],this.d[5]+=t.d[5],this.d[6]+=t.d[6],this.d[7]+=t.d[7],this}translate(t){const e=this.d[0],s=this.d[1],i=this.d[2],n=this.d[3],h=.5*t[0],r=.5*t[1],o=.5*t[2],d=this.d[4],a=this.d[5],l=this.d[6],g=this.d[7];return this.d[0]=e,this.d[1]=s,this.d[2]=i,this.d[3]=n,this.d[4]=n*h+s*o-i*r+d,this.d[5]=n*r+i*h-e*o+a,this.d[6]=n*o+e*r-s*h+l,this.d[7]=-e*h-s*r-i*o+g,this}multiply(t){const e=this.d[0],s=this.d[1],i=this.d[2],n=this.d[3],h=t.d[4],r=t.d[5],o=t.d[6],d=t.d[7],a=this.d[4],l=this.d[5],g=this.d[6],c=this.d[7],u=t.d[0],p=t.d[1],m=t.d[2],f=t.d[3];return this.d[0]=e*f+n*u+s*m-i*p,this.d[1]=s*f+n*p+i*u-e*m,this.d[2]=i*f+n*m+e*p-s*u,this.d[3]=n*f-e*u-s*p-i*m,this.d[4]=e*d+n*h+s*o-i*r+a*f+c*u+l*m-g*p,this.d[5]=s*d+n*r+i*h-e*o+l*f+c*p+g*u-a*m,this.d[6]=i*d+n*o+e*r-s*h+g*f+c*m+a*p-l*u,this.d[7]=n*d-e*h-s*r-i*o+c*f-a*u-l*p-g*m,this}scale(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this.d[4]*=t,this.d[5]*=t,this.d[6]*=t,this.d[7]*=t,this}rotateX(t){let e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3];const r=this.d[4],o=this.d[5],d=this.d[6],a=this.d[7],l=r*h+a*e+o*i-d*s,g=o*h+a*s+d*e-r*i,c=d*h+a*i+r*s-o*e,u=a*h-r*e-o*s-d*i,p=new n.A(this.d[0],this.d[1],this.d[2],this.d[3]);return p.rotateX(t),this.d[0]=p.getX(),this.d[1]=p.getY(),this.d[2]=p.getZ(),this.d[3]=p.getW(),e=p.getX(),s=p.getY(),i=p.getZ(),h=p.getW(),this.d[4]=l*h+u*e+g*i-c*s,this.d[5]=g*h+u*s+c*e-l*i,this.d[6]=c*h+u*i+l*s-g*e,this.d[7]=u*h-l*e-g*s-c*i,this}rotateY(t){let e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3];const r=this.d[4],o=this.d[5],d=this.d[6],a=this.d[7],l=r*h+a*e+o*i-d*s,g=o*h+a*s+d*e-r*i,c=d*h+a*i+r*s-o*e,u=a*h-r*e-o*s-d*i,p=new n.A(this.d[0],this.d[1],this.d[2],this.d[3]);return p.rotateY(t),this.d[0]=p.getX(),this.d[1]=p.getY(),this.d[2]=p.getZ(),this.d[3]=p.getW(),e=p.getX(),s=p.getY(),i=p.getZ(),h=p.getW(),this.d[4]=l*h+u*e+g*i-c*s,this.d[5]=g*h+u*s+c*e-l*i,this.d[6]=c*h+u*i+l*s-g*e,this.d[7]=u*h-l*e-g*s-c*i,this}rotateZ(t){let e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3];const r=this.d[4],o=this.d[5],d=this.d[6],a=this.d[7],l=r*h+a*e+o*i-d*s,g=o*h+a*s+d*e-r*i,c=d*h+a*i+r*s-o*e,u=a*h-r*e-o*s-d*i,p=new n.A(this.d[0],this.d[1],this.d[2],this.d[3]);return p.rotateZ(t),this.d[0]=p.getX(),this.d[1]=p.getY(),this.d[2]=p.getZ(),this.d[3]=p.getW(),e=p.getX(),s=p.getY(),i=p.getZ(),h=p.getW(),this.d[4]=l*h+u*e+g*i-c*s,this.d[5]=g*h+u*s+c*e-l*i,this.d[6]=c*h+u*i+l*s-g*e,this.d[7]=u*h-l*e-g*s-c*i,this}rotateAroundAxis(t,e){if(Math.abs(e)<i.p)return this;const s=Math.hypot(t[0],t[1],t[2]),n=.5*e,h=Math.sin(n),r=h*t[0]/s,o=h*t[1]/s,d=h*t[2]/s,a=Math.cos(n),l=this.d[0],g=this.d[1],c=this.d[2],u=this.d[3];this.d[0]=l*a+u*r+g*d-c*o,this.d[1]=g*a+u*o+c*r-l*d,this.d[2]=c*a+u*d+l*o-g*r,this.d[3]=u*a-l*r-g*o-c*d;const p=this.d[4],m=this.d[5],f=this.d[6],v=this.d[7];return this.d[4]=p*a+v*r+m*d-f*o,this.d[5]=m*a+v*o+f*r-p*d,this.d[6]=f*a+v*d+p*o-m*r,this.d[7]=v*a-p*r-m*o-f*d,this}getTranslation(){const t=this.d[4],e=this.d[5],s=this.d[6],i=this.d[7],n=-this.d[0],h=-this.d[1],r=-this.d[2],o=this.d[3],d=[3];return d[0]=2*(t*o+i*n+e*r-s*h),d[1]=2*(e*o+i*h+s*n-t*r),d[2]=2*(s*o+i*r+t*h-e*n),d}toMatrix4(){const t=[16];t[0]=1-2*this.d[1]*this.d[1]-2*this.d[2]*this.d[2],t[1]=2*this.d[0]*this.d[1]+2*this.d[3]*this.d[2],t[2]=2*this.d[0]*this.d[2]-2*this.d[3]*this.d[1],t[3]=0,t[4]=2*this.d[0]*this.d[1]-2*this.d[3]*this.d[2],t[5]=1-2*this.d[0]*this.d[0]-2*this.d[2]*this.d[2],t[6]=2*this.d[1]*this.d[2]+2*this.d[3]*this.d[0],t[7]=0,t[8]=2*this.d[0]*this.d[2]+2*this.d[3]*this.d[1],t[9]=2*this.d[1]*this.d[2]-2*this.d[3]*this.d[0],t[10]=1-2*this.d[0]*this.d[0]-2*this.d[1]*this.d[1],t[11]=0,t[12]=2*(-this.d[7]*this.d[0]+this.d[4]*this.d[3]-this.d[5]*this.d[2]+this.d[6]*this.d[1]),t[13]=2*(-this.d[7]*this.d[1]+this.d[4]*this.d[2]+this.d[5]*this.d[3]-this.d[6]*this.d[0]),t[14]=2*(-this.d[7]*this.d[2]-this.d[4]*this.d[1]+this.d[5]*this.d[0]+this.d[6]*this.d[3]),t[15]=1;return(new h.A).setFromArray(t)}get(){return this.d}}},35566:(t,e,s)=>{s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=t,this.speed=0,this.sampling=e.sampling||.7}update(){this.value+=this.speed,this.speed*=this.sampling}get(){return this.value}set(t){this.speed+=t}}},91106:(t,e,s)=>{s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;this.value=t,this.target=t,this.sampling=e,this.threshold=1e-6}update(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}get(){return this.value}set(t){this.target=t}setDirect(t){this.value=t}}},55325:(t,e,s)=>{s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.d=[0,0,0,0],this.set(t,e,s,i)}normalise(){const t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}get(){return this.d}getX(){return this.d[0]}getY(){return this.d[1]}getZ(){return this.d[2]}getW(){return this.d[3]}length(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}set(t,e,s,i){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=s?this.d[2]=s:null!=t&&(this.d[2]=t),null!=i?this.d[3]=i:null!=t&&(this.d[3]=t),this}equal(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}addNumber(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}minus(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}minusNumber(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}multiplyNumber(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}multiplyMatrix(t){const e=this.d[0],s=this.d[1],i=this.d[2],n=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*s+t.d[8]*i+t.d[12]*n,this.d[1]=t.d[1]*e+t.d[5]*s+t.d[9]*i+t.d[13]*n,this.d[2]=t.d[2]*e+t.d[6]*s+t.d[10]*i+t.d[14]*n,this.d[3]=t.d[3]*e+t.d[7]*s+t.d[11]*i+t.d[15]*n,this}multiply(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}divideNumber(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}divide(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}distance(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}},61984:(t,e,s)=>{s.d(e,{A:()=>l});var i=s(43447),n=s(57381),h=s(55325),r=s(27853);const o=class extends n.A{get2dTexturePoint(t){const e=t.getX(),s=t.getY(),i=t.getZ(),n=new h.A(e,s,i,1),o=new r.A;o.equal(this.view).multiply(this.projection),n.multiplyMatrix(o);let d=n.getX()/n.getW(),a=n.getY()/n.getW();return d=.5*(d+1),a=.5*(a+1),[d,a]}get2dScreenPoint(t,e){const s=this.get2dTexturePoint(t);return[s[0]*e.width,s[1]*e.height]}};var d=s(91106);const a=class extends o{constructor(t){super(t),this.options=t,this.rotationX=new d.A,this.targetX=new d.A,this.zoomZ=new d.A(.7,.1)}update(){super.update(),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}setSmoothTarget(t){this.targetX.set(t)}setSmoothRotation(t){this.rotationX.set(t)}setSmoothZoom(t){this.zoomZ.set(t)}getZoom(){return this.zoomZ.get()}followPos2D(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}followPosY(t){this.options.position.y=t,this.options.target.y=t}},l=class extends i.A{constructor(t,e){super(t,e),this.camera=new a(e.camera),this.camera.perspective(this.containerSize.width,this.containerSize.height)}resize(t){super.resize(t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}update(t){super.update(t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}},15333:(t,e,s)=>{s.d(e,{A:()=>c});var i=s(61984),n=s(50730),h=s(75112),r=s(10334),o=s(27853);const d={position:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],texture:[1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]},a=class{constructor(t){this.gl=t,this.objet=new r.A(this.gl,d),this.model=new o.A,this.model.identity()}render(t){t.setMatrix("model",this.model.get()),this.objet.render(t.get())}update(t,e){this.model.identity().scale(e.getX(),e.getY(),e.getZ()).translate(t.getX(),t.getY(),t.getZ())}getModel(){return this.model}};var l=s(82669);const g=class extends n.A{constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(e),this.gl=t,this.fbo=new l.A(this.gl,s,i,n),this.sizeRepere=new h.A(.05,.05,.05),this.repere=new a(this.gl),this.repere.update(this.position,this.sizeRepere),this.lookAt()}start(){this.fbo.start()}end(){this.fbo.end()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}renderRepere(t){this.repere.render(t)}getDepthTexture(){return this.fbo.getDepthTexture()}setDepthProgram(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}setShadowProgram(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}resize(t){this.fbo.resize(t)}},c=class extends i.A{constructor(t,e){super(t,e);const s=this.canUseDepth(),{width:i,height:n}=e.canvas;this.lampes=e.lampes&&e.lampes.map((e=>new g(t,e,i,n,s)))||[]}async setupAssets(t){await super.setupAssets(t);const e=this.mngProg.getAll();Object.keys(e).forEach((t=>{const s=e[t];s.getLocations().numLights&&this.setLampeInfos(s)}))}renderReperes(){this.lampes.forEach((t=>t.renderRepere(this.camera)))}randomLampesPositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lampes.forEach(((s,i)=>{(null===e||null!==e&&i===e)&&s.move(this.time*t,i)}))}setLampeInfos(t){t.setVector("posEye",this.camera.getPosition()),t.setInt("numLights",this.lampes.length),this.config.lampes.forEach(((e,s)=>{const{type:i,ambiant:n,diffuse:h,specular:r,brillance:o,radius:d,direction:a,strength:l}=e;t.setInt(`lights[${s}].type`,i),t.setVector(`lights[${s}].position`,this.lampes[s].getPosition()),t.setVector(`lights[${s}].ambiant`,n),t.setVector(`lights[${s}].diffuse`,h),t.setVector(`lights[${s}].specular`,r),o&&t.setFloat(`lights[${s}].brillance`,o),d&&t.setFloat(`lights[${s}].radius`,d),a&&t.setVector(`lights[${s}].direction`,a),t.setFloat(`lights[${s}].strength`,l||1)}))}render(){super.render(),"function"==typeof this.renderBasiqueForLampeDepth&&this.renderBasiqueForLampeDepth(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}getLampe(t){return this.lampes[t]?this.lampes[t]:null}resize(t){super.resize(t),this.lampes.forEach((e=>e.resize(t)))}}},89616:(t,e,s)=>{s.r(e),s.d(e,{default:()=>w,destroy:()=>b});var i=s(83886),n=s(54705),h=s(15333),r=s(27853),o=s(35566),d=s(91106),a=s(20769),l=s(50583),g=s(10334),c=s(82669);const u=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.gl=t,this.fboColorDepth=new c.A(t,e,s,i),this.fboNormal=new c.A(t,e,s,i),this.fboPosition=new c.A(t,e,s,i),this.width=e,this.height=s}generateTextures(t,e){e.setInt("type",0),this.fboColorDepth.start(),t(e),this.fboColorDepth.end(),e.setInt("type",1),this.fboNormal.start(),t(e),this.fboNormal.end(),e.setInt("type",2),this.fboPosition.start(),t(e),this.fboPosition.end()}getColorTexture(){return this.fboColorDepth.getTexture()}getDepthTexture(){return this.fboColorDepth.getDepthTexture()}getNormalTexture(){return this.fboNormal.getTexture()}getPositionTexture(){return this.fboPosition.getTexture()}};var p=s(27128);const m=class extends h.A{constructor(t,e){super(t,e),(0,n.A)(this,"mainRender",(t=>{this.renderFakeShadow(this.mngProg.get("color")),this.mngGltf.get(this.config.MAIN_OBJ).render(t,this.model)})),(0,n.A)(this,"renderBasiqueForLampeDepth",(()=>{const t=this.getLampe(0),e=this.mngProg.get("basique3d");t.setDepthProgram(e),t.start(),this.mainRender(e),t.end()})),(0,n.A)(this,"onMouseDrag",(t=>{this.targetX.set(.1*t.relPrevious.x)})),(0,n.A)(this,"onMouseWheel",(t=>{let e=-t.deltaY;e=Math.min(e,1.2),e=Math.max(e,.8),this.targetZ.set(e)})),this.config.MAIN_PROG=e.MAIN_PROG,this.config.MAIN_OBJ=e.MAIN_OBJ,this.model=new r.A,this.model.identity(),this.targetX=new o.A(0),this.targetZ=new d.A(0,.05),this.fakeShadow=new g.A(t,p.A),this.targetZ.set(1.2),this.buffers=new u(this.gl,e.width,e.height,this.canUseDepth())}update(t){super.update(t),this.targetX.update(),this.targetZ.update(),this.model.identity(),this.model.scale(this.targetZ.get());const e=(0,l.pu)(this.targetX.get())+1e-4*t,s=new a.A;s.rotateY(-e),this.model.multiply(s.toMatrix4());const i=this.mngProg.get(this.config.MAIN_PROG),n=new r.A;n.equal(this.camera.getView()).multiply(this.model).inverse(),i.setMatrix("inverseModel",n.get()),this.mngGltf.get(this.config.MAIN_OBJ).update(t)}render(){super.render(),this.mainRender(this.mngProg.get(this.config.MAIN_PROG))}renderFakeShadow(t){const e=new r.A;e.identity(),e.rotate(-90,1,0,0),e.translate(.2,-7,0),e.scale(8.1,1,6),e.multiply(this.model),t.setMatrix("model",e.get()),t.setVector("color",[0,0,0,.9]),this.fakeShadow.render(t.get())}},f="paysage",v="paysage",y={slug:"paysage",MAIN_PROG:f,MAIN_OBJ:v,shaders:["/camera/basique3d.js","/camera/color.js",`/camera/${f}.js`,"/screen/fxaa.js","/screen/fxaa2.js","/screen/screen.js","/camera/buffers.js","/screen/brightcontrast.js","/screen/ssao.js","/screen/blurOnePass.js","/screen/compose.js","/screen/bloom.js","/camera/shadow.js"],postprocess:{ssao:{radius:2,strength:1,blur:{size:1e-6,intensity:.6}},shadow:{epsilon:1e-4,lighten:.1,blur:{size:.1,intensity:1}}},useDepthTexture:!0,assets:[`/gltf/${v}.gltf`],camera:{position:{x:-14,y:8,z:14},target:{x:0,y:-2,z:0},near:1,far:40,angle:90},lampes:[{type:0,position:{x:10,y:20,z:10},ambiant:[1,.8,.6],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:2e3,ortho:{left:-17,right:17,bottom:-15,top:15},near:10,far:50},{type:0,position:{x:-14,y:20,z:-14},ambiant:[.8,.6,1],diffuse:[.6,.5,.8],specular:[.8,.7,1],brillance:10,radius:10,direction:[0,0,1],strength:2e3}],mouse:{events:["drag","wheel"]},canvas:{width:1024,height:1024},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};s(19513),s(807);let A=null;const w=async()=>{A=new i.A,await A.setup(m,y);const t=document.querySelector(`#${y.slug}`),e=A.getCanvas();e&&t&&t.appendChild(e)},b=()=>{A&&A.destroy&&A.destroy()}},77314:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(31601),n=s.n(i),h=s(76314),r=s.n(h)()(n());r.push([t.id,"#controls {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: stretch;\n  z-index: 10;\n  background-color: rgba(34, 34, 34, .8);\n  margin: .5em;\n  padding: .5em;\n}\n\n#controls div {\n  display: flex;\n  align-items: stretch;\n}\n\n#controls div input[type=range] {\n  width: 100%;\n}\n\n#controls div input[type=checkbox] {\n  margin-right: 0.5em;\n}\n\n#controls label {\n  display: flex;\n  align-items: center;\n}\n\n#controls label,\n#controls a {\n  font-size: .8em;\n}\n\n@media (max-width: 570px) {\n  #controls.responsive {\n    position: relative;\n    width: 100%;\n    margin: 0;\n  }\n}",""]);const o=r},55420:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(31601),n=s.n(i),h=s(76314),r=s.n(h)()(n());r.push([t.id,"#fullscreen-toggle-btn {\n  border-radius: 0;\n  margin: 0;\n  padding: 4px;\n  border: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n  transform: scale(0.8);\n  opacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n  display: block;\n  width: 2em;\n  fill: #fff;\n  opacity: 0.8;\n  transform: scale(0.6);\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\n}\n\n[data-fullscreen] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const o=r},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,h){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(r[d]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);i&&r[l[0]]||(void 0!==h&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=h),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},31601:t=>{t.exports=function(t){return t[1]}},19513:(t,e,s)=>{var i=s(85072),n=s.n(i),h=s(97825),r=s.n(h),o=s(77659),d=s.n(o),a=s(55056),l=s.n(a),g=s(10540),c=s.n(g),u=s(41113),p=s.n(u),m=s(77314),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=d().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=c();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},807:(t,e,s)=>{var i=s(85072),n=s.n(i),h=s(97825),r=s.n(h),o=s(77659),d=s.n(o),a=s(55056),l=s.n(a),g=s(10540),c=s.n(g),u=s(41113),p=s.n(u),m=s(55420),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=d().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=c();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},85072:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var h={},r=[],o=0;o<t.length;o++){var d=t[o],a=i.base?d[0]+i.base:d[0],l=h[a]||0,g="".concat(a," ").concat(l);h[a]=l+1;var c=s(g),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==c)e[c].references++,e[c].updater(u);else{var p=n(u,i);i.byIndex=o,e.splice(o,0,{identifier:g,updater:p,references:1})}r.push(g)}return r}function n(t,e){var s=e.domAPI(e);s.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var h=i(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<h.length;r++){var o=s(h[r]);e[o].references--}for(var d=i(t,n),a=0;a<h.length;a++){var l=s(h[a]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}h=d}}},77659:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},10540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},55056:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},97825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var h=s.sourceMap;h&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(h))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},41113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);