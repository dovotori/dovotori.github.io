(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[4555],{67328:(t,e,i)=>{"use strict";i(87757),i(48926),i(34575),i(93913),i(59713),i(41262),i(36188),i(7071);i(55534),i(60760),i(92613)},66160:(t,e,i)=>{"use strict";i.d(e,{Z:()=>R});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(16525),u=i.n(a),h=i(2205),l=i.n(h),c=i(78585),f=i.n(c),g=i(29754),v=i.n(g),p=i(25773),d=i(21969);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return f()(this,i)}}var m=function(t){l()(i,t);var e=y(i);function i(t){var n;return s()(this,i),(n=e.call(this,t)).target=new p.Z(t.target.x,t.target.y,t.target.z),n.matIdentity=new d.Z,n.projection=new d.Z,n.projection.identity(),n.near=t.near||1,n.far=t.far||100,n.angle=t.angle||50,n.matIdentity.identity(),n.lookAt(),n}return o()(i,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new d.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),i}(i(44254).Z),k=i(66605);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return f()(this,i)}}var A=function(t){l()(i,t);var e=x(i);function i(){return s()(this,i),e.apply(this,arguments)}return o()(i,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),i=t.getY(),n=t.getZ(),s=new k.Z(e,i,n,1),r=new d.Z;r.equal(this.view).multiply(this.projection),s.multiplyMatrix(r);var o=s.getX()/s.getW(),a=s.getY()/s.getW();return[o=.5*(o+1),a=.5*(a+1)]}},{key:"get2dScreenPoint",value:function(t,e){var i=this.get2dTexturePoint(t);return[i[0]*e.width,i[1]*e.height]}}]),i}(m),b=i(47313);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return f()(this,i)}}var R=function(t){l()(i,t);var e=P(i);function i(t){var n;return s()(this,i),(n=e.call(this,t)).options=t,n.rotationX=new b.Z,n.targetX=new b.Z,n.zoomZ=new b.Z(.7,.1),n}return o()(i,[{key:"update",value:function(){u()(v()(i.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),i}(A)},21719:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(51414),u=function(){function t(){s()(this,t),this.min=Array(3),this.max=Array(3),this.id=0}return o()(t,[{key:"setup",value:function(t){this.id=t;for(var e=0;e<3;e+=1)this.min[e]=new a.Z,this.max[e]=new a.Z,this.min[e].setup(!0,this.id),this.max[e].setup(!1,this.id)}},{key:"update",value:function(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.setMinMax(t,e,i,t+n,e+s,i+r)}},{key:"setMinMax",value:function(t,e,i,n,s,r){this.min[0].set(t),this.min[1].set(e),this.min[2].set(i),this.max[0].set(n),this.max[1].set(s),this.max[2].set(r)}},{key:"getID",value:function(){return this.id}},{key:"getMinMax",value:function(t,e){return t?this.min[e].get():this.max[e].get()}},{key:"getMin",value:function(t){return this.min[t]}},{key:"getMax",value:function(t){return this.max[t]}}]),t}()},51414:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=function(){function t(){s()(this,t),this.value=null,this.isMin=!1,this.ownerId=null}return o()(t,[{key:"setup",value:function(t,e){this.isMin=t,this.ownerId=e}},{key:"set",value:function(t){this.value=t}},{key:"get",value:function(){return this.value}},{key:"getID",value:function(){return this.ownerId}},{key:"isMinimum",value:function(){return this.isMin}}]),t}()},47722:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(319),s=i.n(n),r=i(63038),o=i.n(r),a=i(34575),u=i.n(a),h=i(93913),l=i.n(h),c=i(59713),f=i.n(c),g=i(51414);const v=function(){function t(){u()(this,t),this.listesAxe=Array(3),this.resetPairesAxes()}return l()(t,null,[{key:"compareListes",value:function(t,e){for(var i=[],n=0;n<t.length;n+=1)for(var s=0;s<e.length;s+=1)(t[n][0]===e[s][0]&&t[n][1]===e[s][1]||t[n][1]===e[s][0]&&t[n][0]===e[s][1])&&i.push([t[n][0],t[n][1]]);return i}}]),l()(t,[{key:"resetPairesAxes",value:function(){for(var t=0;t<this.listesAxe.length;t+=1)this.listesAxe[t]=[]}},{key:"addPaireOnAxe",value:function(t,e){for(var i=!1,n=0;n<this.listesAxe[e].length;n+=1)if(t[0]===this.listesAxe[e][n][0]&&t[1]===this.listesAxe[e][n][1]||t[1]===this.listesAxe[e][n][0]&&t[0]===this.listesAxe[e][n][1]){i=!0;break}i||this.listesAxe[e].push(t)}},{key:"getPaires",value:function(e,i,n){var s=null;e&&(s=o()(this.listesAxe,1)[0],i&&(s=t.compareListes(s,this.listesAxe[1]),n&&(s=t.compareListes(s,this.listesAxe[2]))));return s}}]),t}();const p=function(){function t(){u()(this,t),this.listeAxe=Array(3),this.listeAxe[0]=[],this.listeAxe[1]=[],this.listeAxe[2]=[],this.pm=new v,this.cptEndpointPlace=0,this.endpointAplacer=null,this.activeList=[]}return l()(t,null,[{key:"addEndpointDecroissant",value:function(t,e,i){var n=t,s=new g.Z;s.set(-9999),t.push(s),t.push(s);for(var r=e,o=0,a=t.length-1;a>=0;a-=1){var u=t[a-(2-o)];if(u?u.get()>r.get()?(n[a]=r,o+=1,r=i):n[a]=u:(n[a]=r,o+=1,r=i),2===o)break}return n}}]),l()(t,[{key:"setup",value:function(t){this.addBoxes(t)}},{key:"addBoxes",value:function(e){for(var i=[],n=[],s=0;s<e.length;s+=1)i=t.addEndpointDecroissant(i,e[s].getMin(0),e[s].getMax(0)),n=t.addEndpointDecroissant(n,e[s].getMin(1),e[s].getMax(1));var r=0;this.addEndPointsOnListe(r,i),r+=1,this.addEndPointsOnListe(r,n)}},{key:"addEndPointsOnListe",value:function(t,e){var i=new g.Z;i.set(9999);for(var n=0;n<e.length;n+=1)this.listeAxe[t].push(i);this.cptEndpointPlace=0,this.endpointAplacer=e[this.cptEndpointPlace],this.activeList=[];for(var s=this.listeAxe[t].length-1;s>=0;s-=1)this.loopTri(t,e,s),this.loopCheckCollision(t,s)}},{key:"loopTri",value:function(t,e,i){if(this.cptEndpointPlace<e.length){var n=this.listeAxe[t][i-(e.length-this.cptEndpointPlace)];n?this.endpointAplacer.get()>n.get()?(this.listeAxe[t][i]=this.endpointAplacer,this.cptEndpointPlace+=1,this.endpointAplacer=e[this.cptEndpointPlace]):this.listeAxe[t][i]=n:(this.listeAxe[t][i]=this.endpointAplacer,this.cptEndpointPlace+=1,this.endpointAplacer=e[this.cptEndpointPlace])}}},{key:"loopCheckCollision",value:function(t,e){var i=this.listeAxe[t][e].getID();if(this.listeAxe[t][e].isMinimum()){for(var n=0;n<this.activeList.length;n+=1)if(this.activeList[n]===i){this.activeList.splice(n,1);break}}else{for(var s=0;s<this.activeList.length;s+=1)this.pm.addPaireOnAxe([this.activeList[s],i],t);this.activeList.push(i)}}},{key:"update",value:function(t,e,i){this.pm.resetPairesAxes(),this.activeList=[],t&&this.updateAxe(0),e&&this.updateAxe(1),i&&this.updateAxe(2)}},{key:"updateAxe",value:function(t){this.listeAxe[t].sort((function(t,e){return t.value<e.value?-1:1}));for(var e=this.listeAxe[0].length-1;e>=0;e-=1)this.loopCheckCollision(t,e)}},{key:"getPaires",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.update(t,e,i),this.pm.getPaires(t,e,i)}},{key:"removeBox",value:function(t){this.listeAxe=this.listeAxe.map((function(e){return e.filter((function(e){return e.ownerId!==t}))}))}},{key:"clear",value:function(){this.listeAxe[0]=[],this.listeAxe[1]=[],this.listeAxe[2]=[]}}]),t}();const d=function(){function t(e){var i=this;u()(this,t),f()(this,"addBoxes",(function(t){i.collision.addBoxes(t)})),f()(this,"clear",(function(){i.collision.clear()})),f()(this,"removeBox",(function(t){i.collision.removeBox(t)})),this.collision=new p,this.collision.addBoxes(e)}return l()(t,[{key:"get",value:function(){return this.collision.getPaires().reduce((function(t,e){var i="SIMPLE";e.sort();var n=e[0],r=e[1],a=null,u=-1!==n.indexOf("bullet"),h=-1!==r.indexOf("bullet");if(u&&h)return t;if(u){i="SHOOT",a=n;var l=n.split("-")[0];n=r,r=l}else if(h){i="SHOOT",a=r;var c=r.split("-");r=o()(c,1)[0]}return"SHOOT"===i&&n===r?t:[].concat(s()(t),[{type:i,from:r,on:n,bulletId:a}])}),[])}}]),t}()},88601:(t,e,i)=>{"use strict";i.d(e,{UP:()=>n,WV:()=>s,RL:()=>r,pX:()=>o,L_:()=>a,JU:()=>u,X:()=>h,W:()=>l,K5:()=>c,sC:()=>f});var n=38,s=40,r=37,o=39,a=32,u=16,h=88,l=87,c=13,f=27},39966:(t,e,i)=>{"use strict";i.d(e,{I:()=>n});var n=1e-6},77626:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(83495),u=i(17045),h=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;s()(this,t),this.gl=e,this.buffer=this.gl.createFramebuffer(),this.buffer.width=i,this.buffer.height=n,this.clearColor=[0,0,0,0],this.setup(r,o,a)}return o()(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer);var n=null!==e?e.COLOR_ATTACHMENT0_WEBGL+i:this.gl.COLOR_ATTACHMENT0;this.texture=new a.Z(this.gl,this.buffer.width,this.buffer.height),this.texture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,n,this.gl.TEXTURE_2D,this.texture.get(),0),t&&(this.depthTexture=new u.Z(this.gl,this.buffer.width,this.buffer.height),this.depthTexture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.get(),0)),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"resize",value:function(t){this.buffer.width=t.width,this.buffer.height=t.height,this.setup()}},{key:"start",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this.gl.viewport(0,0,this.buffer.width,this.buffer.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"end",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"get",value:function(){return this.buffer}},{key:"getTexture",value:function(){return this.texture}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setClearColor",value:function(t,e,i,n){this.clearColor=[t,e,i,n]}}]),t}()},27278:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(2205),u=i.n(a),h=i(78585),l=i.n(h),c=i(29754),f=i.n(c),g=i(44254),v=i(77626),p=i(548),d=i(25773);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f()(t);if(e){var s=f()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return l()(this,i)}}var m=function(t){u()(i,t);var e=y(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return s()(this,i),(r=e.call(this,n)).gl=t,r.fbo=new v.Z(r.gl,o,a,u),r.sizeRepere=new d.Z(.05,.05,.05),r.repere=new p.Z(r.gl),r.repere.update(r.position,r.sizeRepere),r.lookAt(),r}return o()(i,[{key:"start",value:function(){this.fbo.start()}},{key:"end",value:function(){this.fbo.end()}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}},{key:"renderRepere",value:function(t){this.repere.render(t)}},{key:"getDepthTexture",value:function(){return this.fbo.getDepthTexture()}},{key:"setDepthProgram",value:function(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}},{key:"setShadowProgram",value:function(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}}]),i}(g.Z)},44254:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(25773),u=i(21969),h=function(){function t(e){if(s()(this,t),this.position=new a.Z(e.position.x,e.position.y,e.position.z),this.target=new a.Z(0,0,0),this.view=new u.Z,e.ortho){var i=e.ortho,n=i.left,r=i.right,o=i.bottom,h=i.top,l=e.near,c=e.far;this.ortho=new u.Z,this.ortho.ortho(n,r,o,h,l,c)}}return o()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,i){this.position.addXYZ(t,e,i),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null!==t?t:this.position.getX(),s=null!==e?e:this.position.getY(),r=null!==i?i:this.position.getZ();this.position.set(n,s,r),this.lookAt()}},{key:"setTarget",value:function(t,e,i){this.target.set(t,e,i)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},70751:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(59713),s=i.n(n),r=i(63038),o=i.n(r),a=i(34575),u=i.n(a),h=i(93913),l=i.n(h);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var g={ambiant:[0,0,0],diffuse:[.5,.5,.5],specular:[1,1,1],emissive:[0,0,0],specDensity:[1],opacity:1},v=function(){function t(e,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=this.gl.STATIC_DRAW,this.materialProps={},this.steps=this.getSteps(i,s);var r=this.getPoints(i,s);this.stride=0,Object.entries(this.steps).forEach((function(t){null!==t[1]&&(n.stride+=t[1])})),this.vbo=this.gl.createBuffer(),this.count=r.length/this.stride,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(r),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}return l()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo);var i=0;Object.entries(this.steps).forEach((function(n){var s=o()(n,2),r=s[0],a=s[1];void 0!==t.locations[r]&&-1!==t.locations[r]&&(e.gl.enableVertexAttribArray(t.locations[r]),e.gl.vertexAttribPointer(t.locations[r],a,e.gl.FLOAT,!1,4*e.stride,4*i)),null!==e.steps[r]&&(i+=e.steps[r])}))}},{key:"render",value:function(t){this.enable(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.drawArrays(this.modeDessin,0,this.count),this.end()}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}},{key:"getSteps",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={position:3};return t.vt.indices.length>0&&(n.texture=2),t.vn.indices.length>0&&(n.normale=3),i&&t.mat&&Object.keys(t.mat).forEach((function(n){var s=t.mat[n],r=i[s];r&&Object.keys(r).forEach((function(t){void 0===e.materialProps[t]&&(e.materialProps[t]=r[t].length)}))})),f(f({},n),this.materialProps)}},{key:"getPoints",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];return t.v.indices.forEach((function(s,r){var o=3*s;if(n.push(t.v.points[o]),n.push(t.v.points[o+1]),n.push(t.v.points[o+2]),t.vt.indices.length>0){var a=2*t.vt.indices[r];n.push(t.vt.points[a]),n.push(t.vt.points[a+1])}if(t.vn.indices.length>0){var u=3*t.vn.indices[r];n.push(t.vn.points[u]),n.push(t.vn.points[u+1]),n.push(t.vn.points[u+2])}if(i&&t.mat){var h=Object.keys(t.mat).findIndex((function(e,i){var n=Object.keys(t.mat)[i+1];return!n||r>=e&&r<n})),l=t.mat[Object.keys(t.mat)[h]];Object.keys(e.materialProps).forEach((function(t){(i[l]&&i[l][t]||g[t]).forEach((function(t){return n.push(t)}))}))}})),n}}]),t}()},80602:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(34575),s=i.n(n),r=i(2205),o=i.n(r),a=i(78585),u=i.n(a),h=i(29754),l=i.n(h),c=i(35115);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=l()(t);if(e){var s=l()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return u()(this,i)}}var g=function(t,e){return Object.keys(e).reduce((function(i,n){var s,r,o,a,u=e[n];switch(n){case"color":r="VEC4",o=4,s=t.FLOAT,a=new Float32Array(u);break;default:case"position":case"next":case"previous":case"normale":r="VEC3",o=3,s=t.FLOAT,a=new Float32Array(u);break;case"texture":r="VEC2",o=2,s=t.FLOAT,a=new Float32Array(u);break;case"indices":r="SCALAR",o=1,s=t.UNSIGNED_SHORT,a=new Uint16Array(u);break;case"side":case"random":r="FLOAT",o=1,s=t.FLOAT,a=new Float32Array(u)}return i[n]={locationKey:n,type:r,values:a,count:u.length/o,componentType:s,size:o},i}),{})},v=function(t){o()(i,t);var e=f(i);function i(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s()(this,i);var o=g(t,n);return e.call(this,t,o,r)}return i}(c.Z)},77211:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(59713),u=i.n(a),h=function(){function t(e,i){var n=this;s()(this,t),u()(this,"getLocation",(function(t){return n.program.locations[t]||null})),this.gl=e,this.program=this.gl.createProgram(),this.setup(i)}return o()(t,[{key:"setup",value:function(t){this.creerShader("vertex",t.vertex),this.creerShader("fragment",t.fragment),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.createLocations(t),this.gl.useProgram(null)):this.gl.deleteProgram(this.program)}},{key:"creerShader",value:function(t,e){var i=this.gl.createShader("vertex"===t?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?(this.gl.attachShader(this.program,i),this.gl.deleteShader(i)):this.gl.deleteShader(i)}},{key:"createLocations",value:function(t){var e=this;this.program.locations={},t.uniforms.forEach((function(t){e.program.locations[t]=e.gl.getUniformLocation(e.program,t)})),t.attributes.forEach((function(t){e.program.locations[t]=e.gl.getAttribLocation(e.program,t)}))}},{key:"setProjectionView",value:function(t){this.setMatrix("projection",t.getProjection().get()),this.setMatrix("view",t.getView().get())}},{key:"setMatrix",value:function(t,e){var i=this.getLocation(t);null!==i&&(this.gl.useProgram(this.program),16===e.length?this.gl.uniformMatrix4fv(i,!1,e):this.gl.uniformMatrix3fv(i,!1,e),this.gl.useProgram(null))}},{key:"setInt",value:function(t,e){var i=this.getLocation(t);null!==i&&(this.gl.useProgram(this.program),this.gl.uniform1i(i,e),this.gl.useProgram(null))}},{key:"setTexture",value:function(t,e,i){var n=this.getLocation(i);null!==n&&(this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(n,t),this.gl.useProgram(null))}},{key:"setFloat",value:function(t,e){var i=this.getLocation(t);null!==i&&(this.gl.useProgram(this.program),this.gl.uniform1f(i,e),this.gl.useProgram(null))}},{key:"setVector",value:function(t,e){var i=this.getLocation(t);if(null!==i){switch(this.gl.useProgram(this.program),e.length){default:case 2:this.gl.uniform2fv(i,e);break;case 3:this.gl.uniform3fv(i,e);break;case 4:this.gl.uniform4fv(i,e)}this.gl.useProgram(null)}}},{key:"enable",value:function(){this.gl.useProgram(this.program)}},{key:"disable",value:function(){this.gl.useProgram(null)}},{key:"get",value:function(){return this.program}},{key:"getLocations",value:function(){return this.program.locations}}]),t}()},21200:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),o=i.n(r),a=i(80602),u=i(31073),h=function(){function t(e){s()(this,t),this.gl=e,this.objet=new a.Z(e,u.Z)}return o()(t,[{key:"render",value:function(t){this.gl.disable(this.gl.CULL_FACE),this.objet.render(t),this.gl.enable(this.gl.CULL_FACE)}}]),t}()}}]);