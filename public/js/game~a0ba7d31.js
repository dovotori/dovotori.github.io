(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[9413],{83909:(t,e,i)=>{"use strict";var s=i(88601),n=i(59713),o=i.n(n),r="DASH",a="SLASH",u="JUMP_LOAD";const c={id:"heros",x:4,y:5,z:.1,w:.5,h:1,life:100,displayLife:!0,physics:{run:.1,jump:.6,aircontrol:.05,dash:2,gravity:.05,damping:{x:.8,y:.8},clamp:{x:.4,y:.5}},states:{STAND:"STAND",RUN:"RUN",JUMP_UP:"JUMP_UP",JUMP_DOWN:"JUMP_DOWN",DASH:r,AIM:"AIM",RUN_JUMP_UP:"RUN_JUMP_UP",RUN_JUMP_DOWN:"RUN_JUMP_DOWN",DIE:"DIE",SLASH:a,SLASH_2:"SLASH_2",SLASH_3:"SLASH_3",SLOW_DOWN:"SLOW_DOWN",JUMP_LOAD:u,WALL:"WALL",WALL_UP:"WALL_UP",LAND:"LAND"},lockStates:["AIM",a,r,u],combos:{attack:[{key:s.X,cancel:!1,threshold:1e3,sprite:"up"},{key:s.X,cancel:!1,threshold:1e3,sprite:"down"},{key:s.X,cancel:!1,sprite:"run"}]}};var h,l=c.states,f=l.STAND,p=l.RUN,v=l.JUMP_UP,y=l.JUMP_DOWN,d=l.DASH,g=l.AIM,x=l.RUN_JUMP_UP,w=l.RUN_JUMP_DOWN,m=l.DIE,S=l.SLASH,k=l.SLASH_2,b=l.SLASH_3,P=l.WALL,D=l.WALL_UP,R=l.LAND,C=l.JUMP_LOAD,A=l.SLOW_DOWN;h={size:{w:256,h:512},time:100,refSize:57},o()(h,f,{uv:[{x:28,y:239,w:26,h:57,t:1e3},{x:0,y:239,w:28,h:57,t:1e3}]}),o()(h,p,{uv:[{x:39,y:80,w:40,h:47},{x:106,y:34,w:40,h:45},{x:0,y:80,w:39,h:47},{x:79,y:80,w:39,h:47}]}),o()(h,d,{uv:[{x:84,y:0,w:99,h:28,px:90,py:0},{x:146,y:34,w:100,h:46,px:90,py:0}],iteration:1,next:f}),o()(h,C,{uv:[{x:0,y:34,w:50,h:37}]}),o()(h,v,{uv:[{x:199,y:128,w:44,h:55},{x:99,y:183,w:44,h:56}]}),o()(h,y,{uv:[{x:173,y:239,w:33,h:64},{x:206,y:239,w:34,h:64}]}),o()(h,x,{uv:[{x:118,y:128,w:39,h:52},{x:157,y:128,w:42,h:52}]}),o()(h,w,{uv:[{x:186,y:183,w:42,h:56},{x:143,y:183,w:43,h:56}]}),o()(h,A,{uv:[{x:83,y:239,w:61,h:58}]}),o()(h,g,{uv:[{x:83,y:239,w:61,h:58,cx:57,cy:41}]}),o()(h,R,{uv:[{x:183,y:0,w:45,h:34}]}),o()(h,P,{uv:[{x:54,y:239,w:29,h:58}]}),o()(h,D,{uv:[{x:144,y:239,w:29,h:58}]}),o()(h,m,{uv:[{x:50,y:34,w:56,h:40,t:1e3},{x:0,y:0,w:84,h:18,t:1e3}],iteration:1}),o()(h,S,{uv:[{x:0,y:303,w:57,h:75,t:50,px:24},{x:57,y:303,w:118,h:95,t:50,px:31},{x:0,y:128,w:72,h:48,t:100,px:43}],iteration:1,next:f}),o()(h,k,{uv:[{x:118,y:80,w:78,h:48},{x:0,y:183,w:99,h:55}],iteration:1,next:f}),o()(h,b,{uv:[{x:72,y:128,w:46,h:51},{x:175,y:303,w:79,h:106}],iteration:1,next:f});const O={id:"bullet",x:0,y:0,z:.4,w:.5,h:.5,damage:10,physics:{speed:.5,recoil:.1},states:{BULLET_LOAD:"BULLET_LOAD",BULLET:"BULLET"}};var B,L=O.states,U=L.BULLET,X=L.BULLET_LOAD;B={size:{w:64,h:256},time:100,refSize:57},o()(B,U,{uv:[{x:0,y:0,w:35,h:17},{x:0,y:17,w:49,h:32}]}),o()(B,X,{uv:[{x:0,y:49,w:54,h:54,px:0,py:27},{x:0,y:103,w:38,h:39,px:0,py:19}]});const T={id:"fx",states:{DUST:"DUST"}};var N=T.states.DUST;o()({size:{w:32,h:64},time:200,refSize:57},N,{uv:[{x:0,y:0,w:26,h:19},{x:0,y:19,w:26,h:14},{x:0,y:33,w:29,h:12}],iteration:1});const z={id:"monster",x:10,y:4,z:.2,w:.5,h:1,life:100,physics:{run:.1,jump:0,gravity:.05,damping:{x:0,y:0},clamp:{x:1,y:1}},states:{STAND:"STAND",RUN:"RUN",JUMP_DOWN:"JUMP_DOWN",DIE:"DIE"}};var M,_=z.states,j=_.STAND,E=_.RUN,Y=_.JUMP_DOWN,I=_.DIE;M={size:{w:256,h:512},time:100,refSize:57},o()(M,j,{uv:[{x:28,y:239,w:26,h:57,t:1e3},{x:0,y:239,w:28,h:57,t:1e3}]}),o()(M,E,{uv:[{x:39,y:80,w:40,h:47},{x:106,y:34,w:40,h:45},{x:0,y:80,w:39,h:47},{x:79,y:80,w:39,h:47}]}),o()(M,Y,{uv:[{x:173,y:239,w:33,h:64},{x:206,y:239,w:34,h:64}]}),o()(M,I,{uv:[{x:50,y:34,w:56,h:40},{x:0,y:0,w:84,h:18}],iteration:1});var Z;Z={size:{w:256,h:256},refSize:64,objTypes:{CUBE:0,FLAT:1},colors:{"000":{pattern:9,objType:1},150150150:{pattern:10,objType:1},"00255":{pattern:10,objType:1,z:-1},25500:{pattern:10,objType:1},"02500":{pattern:10,objType:1},"02550":{pattern:12,objType:1,scale:{x:2,y:2},z:-.4},"02000":{pattern:13,objType:1,z:1},"01500":{pattern:14,objType:1,scale:{x:1.5,y:1.5},z:-.5},"01000":{pattern:15,objType:1},1e4:{pattern:0,scale:{x:4,y:4},objType:1}}},o()(Z,0,{uv:[{x:166,y:26,w:52,h:52}]}),o()(Z,1,{uv:[{x:57,y:0,w:52,h:26}]}),o()(Z,2,{uv:[{x:109,y:0,w:52,h:26}]}),o()(Z,3,{uv:[{x:0,y:0,w:57,h:16}]}),o()(Z,4,{uv:[{x:0,y:78,w:52,h:52}]}),o()(Z,5,{uv:[{x:0,y:26,w:57,h:27}]}),o()(Z,6,{uv:[{x:161,y:0,w:52,h:26}]}),o()(Z,7,{uv:[{x:52,y:78,w:52,h:52}]}),o()(Z,8,{uv:[{x:104,y:78,w:45,h:52}]}),o()(Z,9,{uv:[{x:38,y:187,w:64,h:64}]}),o()(Z,10,{uv:[{x:102,y:187,w:64,h:64}]}),o()(Z,11,{uv:[{x:166,y:187,w:64,h:64}]}),o()(Z,12,{uv:[{x:14,y:131,w:40,h:54}]}),o()(Z,13,{uv:[{x:91,y:131,w:45,h:54}]}),o()(Z,14,{uv:[{x:173,y:131,w:44,h:56}]}),o()(Z,15,{uv:[{x:0,y:187,w:38,h:56}]}),o()(Z,16,{uv:[{x:136,y:131,w:37,h:54}]}),o()(Z,17,{uv:[{x:124,y:26,w:42,h:51}]}),o()(Z,18,{uv:[{x:149,y:78,w:28,h:52}]}),o()(Z,19,{uv:[{x:84,y:26,w:40,h:50}]}),o()(Z,20,{uv:[{x:0,y:131,w:14,h:53}]}),o()(Z,21,{uv:[{x:57,y:26,w:27,h:50}]}),o()(Z,22,{uv:[{x:54,y:131,w:37,h:54}]}),o()(Z,23,{uv:[{x:177,y:78,w:44,h:53}]}),s.UP,s.WV,s.RL,s.pX,s.L_,s.JU,s.X,s.W,s.K5,s.sC},50479:(t,e,i)=>{"use strict";i(87757),i(48926),i(67328),i(6479);var s=i(34575),n=i.n(s),o=i(93913),r=i.n(o),a=i(81506),u=i.n(a),c=i(16525),h=i.n(c),l=i(2205),f=i.n(l),p=i(78585),v=i.n(p),y=i(29754),d=i.n(y),g=i(59713),x=i.n(g),w=i(22255),m=i(47313),S=i(47722),k=i(65510),b=i(68763),P=function(){function t(e,i){n()(this,t),this.screen=new k.Z,this.cpt=0,this.mountains=new Array(4);for(var s=0;s<this.mountains.length;s+=1)this.mountains[s]=new k.Z;this.clouds=new Array(4),this.cloudData=[],this.viewBox=e,this.levelSize=i;for(var o=0;o<this.clouds.length;o+=1)this.clouds[o]=new k.Z,this.cloudData[o]=this.setCloud()}return r()(t,[{key:"update",value:function(t){this.updateMountains(t),this.updateClouds(t)}},{key:"updateScreens",value:function(t){this.screen.update(),this.screen.setScale(20,10,0),this.screen.setTranslate(0,10,t)}},{key:"updateMountains",value:function(t){var e=this;this.mountains.forEach((function(i,s){var n=e.mountains.length-s,o=(0,b.Yp)(s,0,e.mountains.length,4,40),r=(0,b.Yp)(t[0],0,e.levelSize.w,e.viewBox.w+10*n,10*-n),a=10+o/2,u=(0,b.Yp)(s,0,e.mountains.length,255,100),c=(0,b.Yp)(s,0,e.mountains.length,-2,-20);i.update(),i.setScale(o,o,o),i.setRotate(45,0,0,1),i.setTranslate(r,a,c),i.setColor(u,u,u,1)}))}},{key:"updateClouds",value:function(){var t=this;this.clouds.forEach((function(e,i){var s=t.cloudData[i].scale;t.cloudData[i].x<-s?t.cloudData[i]=t.setCloud(t.viewBox.w+s):t.cloudData[i].x-=t.cloudData[i].speed,e.update(),e.setScale(s,s,s),e.setRotate(45,0,0,1),e.setTranslate(t.cloudData[i].x,t.cloudData[i].y,t.cloudData[i].z),e.setColor(255,255,255,.4)}))}},{key:"renderScreen",value:function(t,e,i,s){e.setFloat("offset",i*s),this.screen.render(t,e)}},{key:"renderMountains",value:function(t,e){this.mountains.forEach((function(i){return i.render(t,e)}))}},{key:"renderCloudsFront",value:function(t,e){var i=this;this.clouds.forEach((function(s,n){i.cloudData[n].z>0&&s.render(t,e)}))}},{key:"renderCloudsBack",value:function(t,e){var i=this;this.clouds.forEach((function(s,n){i.cloudData[n].z<0&&s.render(t,e)}))}},{key:"setCloud",value:function(t){return{x:t||10*Math.random(),y:(0,b.Yp)(Math.random(),0,1,0,this.levelSize.h),z:10*(0,b.Yp)(Math.random(),0,1,-4,2),scale:1+2*Math.random(),speed:.1+.1*Math.random()}}}]),t}(),D=i(32970);function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var C=function(t){f()(i,t);var e=R(i);function i(t){var s;return n()(this,i),(s=e.call(this)).state=new D.Z(t),s.state.set(t.colors["000"].pattern),s}return r()(i,[{key:"render",value:function(t,e,s){e.setTexture(0,s.get()),this.setSprite(this.state.get()),h()(d()(i.prototype),"render",this).call(this,t,e)}},{key:"setState",value:function(t){this.state.set(t)}},{key:"getState",value:function(){return this.state.get()}}]),i}(i(46566).Z);const A=function(){function t(e,i){n()(this,t),this.context=t.setupContext(e),this.levelSize={w:e.width,h:e.height};var s=i.viewBox;this.viewBox={x:0,y:0,w:s.w||20,h:s.h||20},this.scrollBox={w:this.viewBox.w/2,h:this.viewBox.h/2},this.smoothTilePos={x:0,y:0},this.tile=new C(i.sprites),this.sprites=i.sprites,this.tileSize=i.tileSize,this.map=this.getData()}return r()(t,null,[{key:"setupContext",value:function(t){var e=document.createElement("canvas"),i=e.getContext("2d");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0),i}}]),r()(t,[{key:"getData",value:function(){return this.context.getImageData(this.viewBox.x,this.viewBox.y,this.viewBox.w,this.viewBox.h)}},{key:"update",value:function(t){this.tile.setNormalMatrix(t)}},{key:"render",value:function(t,e,i,s){for(var n=0;n<this.map.height;n+=1)for(var o=0;o<this.map.width;o+=1){var r=n*this.map.width+o,a=this.map.data[4*r],u=this.map.data[4*r+1],c=this.map.data[4*r+2],h="".concat(a).concat(u).concat(c);if(this.tile.reset(),this.sprites.colors[h]){var l={x:o-this.smoothTilePos.x,y:n-this.smoothTilePos.y},f=this.sprites.colors[h],p=f.objType,v=f.pattern,y=f.scale,d=f.z;if(this.tile.setState(v),y){var g=this.tile.getState(),x=g.w,w=g.refSize;this.tile.setScale(y.x,y.y,1);var m=x/w*y.x;this.tile.setTranslate(l.x-.5*(m-1),l.y-(1-y.y),d||0)}else this.tile.setTranslate(l.x,l.y,d||0);this.tile.render(0===p?i:s,t,e)}}}},{key:"follow",value:function(t){var e=t[0]-this.scrollBox.w;e<0&&(e=0),e>this.levelSize.w-this.viewBox.w&&(e=this.levelSize.w-this.viewBox.w);var i=t[1]-this.scrollBox.h;i<0&&(i=0),i>this.levelSize.h-this.viewBox.h&&(i=this.levelSize.h-this.viewBox.h),this.viewBox.x===e&&this.viewBox.y===i||(this.viewBox.x=e,this.viewBox.y=i,this.map=this.getData(),this.smoothTilePos.x=e-Math.floor(e),this.smoothTilePos.y=i-Math.floor(i))}},{key:"getViewBox",value:function(){return this.viewBox}},{key:"getLevelSize",value:function(){return this.levelSize}},{key:"getTileSize",value:function(){return this.tileSize}},{key:"get",value:function(){return this.context}},{key:"getSmoothTilePos",value:function(){return this.smoothTilePos}}]),t}();var O=i(319),B=i.n(O),L=i(97882),U=i(25773);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var T=function(t){f()(i,t);var e=X(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox;return n()(this,i),s=e.call(this),x()(u()(s),"updateState",(function(t,e){s.inverseX=e,s.stateSprite.set(t),s.setSprite(s.stateSprite.get())})),x()(u()(s),"setEndOfAnimation",(function(t,e){e&&s.behavior.setEndOfAnimation(e),t===s.constants.states.DIE&&s.callbackDeath&&s.callbackDeath()})),s.inverseX=!1,s.stateSprite=new D.Z(r,s.setEndOfAnimation),s.viewBox=a,s.constants=o,s.sprites=r,s.worldPos=new U.Z,s.reset(),s}return r()(i,[{key:"update",value:function(t,e){h()(d()(i.prototype),"update",this).call(this),this.stateSprite.update(),this.behavior.update(t,e)}},{key:"render",value:function(t,e,s){var n=this.stateSprite.getRelSize(),o=n.w,r=n.h,a=n.px,u=n.py,c=0;null!==a&&(c=this.inverseX?-o-a:o-(o-a)),this.setScale(o,r,1),this.setTranslate(this.behavior.getX()-this.viewBox.x+c,this.behavior.getY()-this.viewBox.y-(1-r)+(u||0),this.behavior.getZ()),t.setTexture(0,e.get()),t.setInt("inverseX",this.inverseX?1:0),h()(d()(i.prototype),"render",this).call(this,s,t),this.setSprite(this.stateSprite.get())}},{key:"addToSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.behavior.addToSpeed(new U.Z(t,e,i))}},{key:"getX",value:function(){return this.behavior.getPosition().getX()}},{key:"getPosition",value:function(){return this.behavior.getPosition().get()}},{key:"getWorldPosition",value:function(){return this.worldPos.set(this.behavior.getX()-this.viewBox.x,this.behavior.getY()-this.viewBox.y,this.behavior.getZ()).get()}},{key:"getInverseX",value:function(){return this.inverseX}},{key:"getStatus",value:function(){return this.behavior.getStatus()}},{key:"isStatusChanged",value:function(){return this.behavior.isStatusChanged()}},{key:"getConstants",value:function(){return this.constants}},{key:"reset",value:function(){this.stateSprite.reset(),this.stateSprite.set(this.constants.states[Object.keys(this.constants.states)[0]]),this.setSprite(this.stateSprite.get())}}]),i}(L.Z),N=i(21719);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var M=function(t){f()(i,t);var e=z(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox;return n()(this,i),(s=e.call(this,{constants:o,sprites:r,viewBox:a})).collisionBox=new N.Z,s.collisionBox.setup(o.id),s.collisionCallback=null,s}return r()(i,[{key:"update",value:function(t,e){var s;h()(d()(i.prototype),"update",this).call(this,t,e),(s=this.collisionBox).update.apply(s,B()(this.getCollisionInfos()))}},{key:"getCollisionBox",value:function(){return this.collisionBox}},{key:"getCollisionInfos",value:function(){var t=this.constants,e=t.w,i=t.h;return[].concat(B()(this.getPosition()),[e,i])}},{key:"getId",value:function(){return this.constants.id}},{key:"setCallbacks",value:function(t){var e=t.addBoxes,i=t.removeBox;this.collisionCallback={addBoxes:e,removeBox:i}}}]),i}(T);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var j=function(t){f()(i,t);var e=_(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox;return n()(this,i),s=e.call(this,{constants:o,sprites:r,viewBox:a}),x()(u()(s),"setCallbackDeath",(function(t){s.callbackDeath=t})),x()(u()(s),"setLife",(function(t){s.life=t,s.bar.setAttribute("value",s.life)})),x()(u()(s),"setDamage",(function(t){s.life-=t,s.targetDamage.setDirect(2),s.bar&&s.bar.setAttribute("value",s.life),s.life<=0&&(s.behavior.setStatus(s.constants.states.DIE),s.stateSprite.set(s.constants.states.DIE),s.collisionCallback.removeBox(s.constants.id))})),x()(u()(s),"insert",(function(t){t&&t.appendChild(s.bar)})),s.life=o.life,s.callbackDeath=null,s.targetDamage=new m.Z(0,.1),o.displayLife&&(s.bar=document.createElement("meter"),s.bar.setAttribute("data-id",o.id),s.bar.setAttribute("min",0),s.bar.setAttribute("max",o.life),s.bar.setAttribute("value",s.life),s.insert(document.querySelector("#gameinfos"))),s}return r()(i,[{key:"update",value:function(t,e){var s;h()(d()(i.prototype),"update",this).call(this,t,e),(s=this.collisionBox).update.apply(s,B()(this.getCollisionInfos())),this.targetDamage.update()}},{key:"render",value:function(t,e,s){t.setFloat("damage",this.targetDamage.get()),h()(d()(i.prototype),"render",this).call(this,t,e,s)}},{key:"getLife",value:function(){return this.life}},{key:"reset",value:function(){h()(d()(i.prototype),"reset",this).call(this),this.life=this.constants.life,this.bar&&this.bar.setAttribute("value",this.life)}}]),i}(M);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var Y=function(t){f()(i,t);var e=E(i);function i(t,s,o,r,a,u){var c;return n()(this,i),(c=e.call(this)).inverseX=!1,c.stateSprite=new D.Z(s,u),c.stateSprite.set(t.states[Object.keys(t.states)[0]]),c.viewBox=o,c.constants=t,c.sprites=s,c.position=new U.Z(r.getX()||t.x||0,r.getY()||t.y||0,r.getZ()||t.z||0),c.stateSprite.reload(a),c}return r()(i,[{key:"update",value:function(t){h()(d()(i.prototype),"update",this).call(this,t),this.stateSprite.update()}},{key:"render",value:function(t,e,s){var n=this.stateSprite.getRelSize(),o=n.w,r=n.h,a=n.px,u=n.py,c=0;null!==a&&(c=this.inverseX?-o-a:o-(o-a)),this.setScale(o,r,1),this.setTranslate(this.position.getX()-this.viewBox.x+c,this.position.getY()-this.viewBox.y-(1-r)+(u||0),this.position.getZ()),t.setTexture(0,e.get()),t.setInt("inverseX",this.inverseX?1:0),h()(d()(i.prototype),"render",this).call(this,s,t),this.setSprite(this.stateSprite.get())}},{key:"setInverseX",value:function(t){this.inverseX=t}}]),i}(L.Z),I=function(){function t(e,i,s){var o=this;n()(this,t),x()(this,"endOfAnimation",(function(t){return function(){delete o.fxs[t]}})),this.fxs={},this.isAiming=!1,this.viewBox=s,this.sprites=i,this.constants=e,this.cpt=0}return r()(t,[{key:"update",value:function(){var t=this;Object.keys(this.fxs).forEach((function(e){t.fxs[e].update()}))}},{key:"createNewOne",value:function(t,e){this.fxs[this.cpt]=new Y(this.constants,this.sprites,this.viewBox,t,e,this.endOfAnimation(this.cpt)),this.cpt+=1}},{key:"render",value:function(t,e,i){var s=this;Object.keys(this.fxs).forEach((function(n){s.fxs[n].render(t,e,i)}))}},{key:"getConstants",value:function(){return this.constants}}]),t}();function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var W=function(t){f()(i,t);var e=Z(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox,u=t.fxs;return n()(this,i),s=e.call(this,{constants:o,sprites:r,viewBox:a}),u&&(s.fxs=new I(u.constants,u.sprites,a)),s}return r()(i,[{key:"update",value:function(t,e){if(h()(d()(i.prototype),"update",this).call(this,t,e),this.fxs){this.fxs.update();var s=this.constants.states,n=s.JUMP_UP,o=s.RUN_JUMP_UP,r=this.fxs.getConstants().states.DUST,a=this.getStatus(),u=this.getLastJumpingPosition(),c=this.getLastRunningPosition();!this.isStatusChanged()||a!==n&&a!==o||this.fxs.createNewOne(u,r),null!==c&&this.fxs.createNewOne(c,r)}}},{key:"renderFxs",value:function(t,e,i){this.fxs.render(t,e,i)}},{key:"getLastJumpingPosition",value:function(){return this.behavior.getLastJumpingPosition()}},{key:"getLastRunningPosition",value:function(){return this.behavior.getStatus()!==this.constants.states.RUN||!this.stateSprite.isNewStep()||0!==this.stateSprite.getStep()&&2!==this.stateSprite.getStep()?null:this.behavior.getPosition()}}]),i}(j);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var H=1e-6;const F=function(t){f()(i,t);var e=J(i);function i(t,s,o){var r;return n()(this,i),(r=e.call(this,t,s)).isCollision={left:!1,right:!1,bottom:!1,top:!1},r.testPoints=r.determineTestPoints(o),r}return r()(i,null,[{key:"getNearCollisionPoint",value:function(t,e){for(var s=0;s<e.length;s+=1)if(i.isCollisionTile(t,e[s].x,e[s].y))return{x:e[s].x,y:e[s].y};return null}},{key:"isCollisionTile",value:function(t,e,i){var s=t.getImageData(Math.floor(e),Math.floor(i),1,1);return 255!==s.data[0]&&s.data[0]===s.data[1]&&s.data[1]===s.data[2]}},{key:"determineStep",value:function(t,e){for(var i=t,s=1;Math.abs(i)>=e;)i/=2,s+=1;return{value:i,step:s}}}]),r()(i,[{key:"determineTestPoints",value:function(t){var e=this.constants,s=e.w,n=e.h,o=i.determineStep(s,t.w),r=o.value,a=o.step,u=i.determineStep(n,t.h),c=u.value,h=u.step,l=[];l.push({x:H,y:-1e-6});for(var f=1;f<a;f+=1)l.push({x:r*f,y:-1e-6});l.push({x:s-H,y:-1e-6});var p=[];p.push({x:H,y:n+H});for(var v=1;v<a;v+=1)p.push({x:r*v,y:n+H});p.push({x:s-H,y:n+H});var y=[];y.push({x:-1e-6,y:H});for(var d=1;d<h;d+=1)y.push({x:-1e-6,y:c*d});y.push({x:-1e-6,y:n-H});var g=[];g.push({x:s+H,y:H});for(var x=1;x<h;x+=1)g.push({x:s+H,y:c*x});return g.push({x:s+H,y:n-H}),{left:y,right:g,bottom:l,top:p}}},{key:"update",value:function(t,e){var s=h()(d()(i.prototype),"update",this).call(this);return s&&this.setCollision(t,e),s}},{key:"defineNextStatus",value:function(){h()(d()(i.prototype),"defineNextStatus",this).call(this);var t=this.constants.states,e=t.STAND,s=t.RUN;this.isLock()||this.isCollision.bottom&&(this.status=e,Math.abs(this.speed.getX())>0&&(this.status=s))}},{key:"setCollision",value:function(t,e){var i=this;Object.keys(this.isCollision).forEach((function(s){i.setDirectionCollision(t,s,e)})),(this.isCollision.top||this.isCollision.bottom)&&this.speed.setY(0),(this.isCollision.left||this.isCollision.right)&&this.speed.setX(0)}},{key:"setDirectionCollision",value:function(t,e,s){var n=!1,o="left"===e||"right"===e;switch(e){case"bottom":n=this.speed.getY()<0;break;case"top":n=this.speed.getY()>0;break;case"left":n=this.speed.getX()<0;break;case"right":n=this.speed.getX()>0}if(!this.isCollision[e]&&n){for(var r=i.determineStep(o?this.speed.getX():this.speed.getY(),o?s.w:s.h),a=r.value,u=r.step,c=[],h=this.testPoints[e],l=0;l<=u;l+=1)for(var f=0;f<h.length;f+=1){var p=this.position.getX()+h[f].x,v=this.position.getY()+h[f].y;o?p+=a*l:v+=a*l,c.push({x:p,y:v})}var y=i.getNearCollisionPoint(t,c);if(y){var d=this.constants,g=d.w,x=d.h;switch(e){case"bottom":this.position.setY(Math.ceil(y.y));break;case"top":this.position.setY(Math.floor(y.y)-x);break;case"left":this.position.setX(Math.ceil(y.x));break;case"right":this.position.setX(Math.floor(y.x)-g)}this.isCollision[e]=!0}else o?this.position.addX(this.speed.getX()):this.position.addY(this.speed.getY())}else this.isStillCollide(t,e)||(this.isCollision[e]=!1)}},{key:"isStillCollide",value:function(t,e){var s=this,n=this.testPoints[e].map((function(t){return{x:s.position.getX()+t.x,y:s.position.getY()+t.y}}));return null!==i.getNearCollisionPoint(t,n)}},{key:"getCollision",value:function(t){return this.isCollision[t]}},{key:"getCollisionAxeX",value:function(){return this.isCollision.left||this.isCollision.right}}]),i}(function(){function t(e,i){var s=this;n()(this,t),x()(this,"shoudContinue",(function(){var t=s.constants.states.DIE;return s.status!==t})),x()(this,"setEndOfAnimation",(function(t){t&&(s.status=t)})),x()(this,"reset",(function(){var t=s.constants,e=t.x,i=t.y,n=t.z,o=t.states;s.position.set(e||0,i||0,n||0),s.status=o[Object.keys(o)[0]],s.speed.set(0,0,0)})),this.constants=e,this.updateState=i,this.position=new U.Z,this.status=null,this.speed=new U.Z,this.size=new U.Z(e.w||1,e.h||1,1),this.inverseSprite=!1,this.statusChanged=!1,this.reset()}return r()(t,[{key:"update",value:function(){var t=this.shoudContinue();if(t){this.statusChanged=!1;var e=this.status;this.defineNextStatus(),this.updateState&&this.updateState(this.status,this.inverseSprite),e!==this.status&&(this.statusChanged=!0)}return t}},{key:"isLock",value:function(){var t=this.constants.lockStates;return t&&-1!==t.indexOf(this.status)}},{key:"defineNextStatus",value:function(){var t=this.constants.states,e=t.JUMP_DOWN,i=t.RUN_JUMP_DOWN;this.isLock()||this.speed.getY()<0&&(this.status=e,Math.abs(this.speed.getX())>0&&(this.status=i))}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.position.set(t,e,i)}},{key:"setSize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.size.set(t,e,i)}},{key:"setStatus",value:function(t){this.status=t}},{key:"getPosition",value:function(){return this.position}},{key:"getStatus",value:function(){return this.status}},{key:"getSize",value:function(){return this.size}},{key:"getX",value:function(){return this.position.getX()}},{key:"getY",value:function(){return this.position.getY()}},{key:"getZ",value:function(){return this.position.getZ()}},{key:"getSpeed",value:function(){return this.speed.get()}},{key:"getSpeedX",value:function(){return this.speed.getX()}},{key:"getSpeedY",value:function(){return this.speed.getY()}},{key:"addToSpeed",value:function(t){this.speed.add(t)}},{key:"isStatusChanged",value:function(){return this.statusChanged}}]),t}());function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var G=function(t){f()(i,t);var e=V(i);function i(t){var s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;return n()(this,i),(s=e.call(this,t,o,r)).isAiming=!0,s.goLeft=u,s.position.setX(a.getX()),s.position.setY(a.getY()),s.startPos=a,s}return r()(i,[{key:"update",value:function(t,e){this.isAiming?(this.position.setX(this.startPos.getX()),this.position.setY(this.startPos.getY())):h()(d()(i.prototype),"update",this).call(this,t,e)}},{key:"shoot",value:function(){this.isAiming=!1;var t=this.constants.physics.speed;this.speed.setX(this.goLeft?-t:t)}},{key:"setStartPos",value:function(t){this.startPos=t}}]),i}(F);function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var K=function(t){f()(i,t);var e=q(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox,u=t.tileSize,c=t.startPos,h=t.goLeft;return n()(this,i),(s=e.call(this,{constants:o,sprites:r,viewBox:a})).behavior=new G(o,null,u,c,h),s.inverseX=h,s.startPos=c,s.isShooted=!1,s}return r()(i,[{key:"update",value:function(t,e,s,n){this.isShooted||this.setAimingStrength(n),this.behavior.setStartPos(s),h()(d()(i.prototype),"update",this).call(this,t,e)}},{key:"shoot",value:function(t){this.isShooted=!0,this.stateSprite.set(t),this.setAimingStrength(1),this.behavior.shoot()}},{key:"isCollide",value:function(){return this.behavior.getCollisionAxeX()}},{key:"setAimingStrength",value:function(t){this.stateSprite.setScale(t)}}]),i}(M),Q=function(){function t(e,i,s){n()(this,t),this.bullets=[],this.isAiming=!1,this.viewBox=s,this.callbackShoot=null,this.callbackCollide=null,this.sprites=i,this.constants=e,this.recoil=e.physics.recoil,this.numero=0}return r()(t,[{key:"update",value:function(t,e,i,s,n){var o=this;!this.isAiming&&s?this.createNewOne(i,n,e):this.isAiming&&!s&&this.shootOne();var r=[];this.bullets.forEach((function(n,a){n.update(t,e,i,s),n.isCollide()&&(r.push(a),o.callbackCollide&&o.callbackCollide(n.getId()))})),r.length>0&&(this.bullets=this.bullets.filter((function(t,e){return-1===r.indexOf(e)}))),this.isAiming=s}},{key:"createNewOne",value:function(t,e,i){this.bullets.push(new K({id:"".concat(this.constants.id).concat(this.numero),constants:this.constants,sprites:this.sprites,viewBox:this.viewBox,tileSize:i,startPos:t,goLeft:e})),this.numero+=1}},{key:"shootOne",value:function(){if(this.bullets.length>0){var t=this.bullets[this.bullets.length-1];t.shoot(this.constants.states.BULLET),this.callbackShoot&&this.callbackShoot(t.getId(),t.getCollisionBox(),this.recoil)}}},{key:"removeOne",value:function(t){this.bullets=this.bullets.filter((function(e){return e.getId()!==t}))}},{key:"render",value:function(t,e,i){this.bullets.forEach((function(s){s.render(t,e,i)}))}},{key:"setCallbackShoot",value:function(t){this.callbackShoot=t}},{key:"setCallbackCollide",value:function(t){this.callbackCollide=t}},{key:"get",value:function(){return this.bullets.map((function(t){return t.getPosition()}))}},{key:"getConstants",value:function(){return this.constants}}]),t}();function $(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function tt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$(Object(i),!0).forEach((function(e){x()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var it=function(t){f()(i,t);var e=et(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox,c=t.fxs,h=t.bullets;if(n()(this,i),s=e.call(this,{constants:o,sprites:r,viewBox:a,fxs:c}),x()(u()(s),"callbackBulletShoot",(function(t,e,i){s.setRecoil(i),s.collisionCallback.addBoxes([e])})),x()(u()(s),"callbackBulletCollide",(function(t){s.collisionCallback.removeBox(t)})),x()(u()(s),"setRecoil",(function(t){s.behavior.addToSpeed(new U.Z(s.inverseX?t:-t,0,0))})),x()(u()(s),"removeBullet",(function(t){s.bullets.removeOne(t)})),s.offsetAiming=s.getAimingOffsetVector(),s.aimingPos=new U.Z,h){var l="".concat(o.id,"-").concat(h.constants.id);s.bullets=new Q(tt(tt({},h.constants),{},{id:l}),h.sprites,a),s.bullets.setCallbackShoot(s.callbackBulletShoot),s.bullets.setCallbackCollide(s.callbackBulletCollide)}return s}return r()(i,[{key:"update",value:function(t,e){h()(d()(i.prototype),"update",this).call(this,t,e),this.aimingPos.equal(this.behavior.getPosition()),this.aimingPos.addX(this.inverseX?this.offsetAiming.invX:this.offsetAiming.x),this.aimingPos.addY(this.offsetAiming.y),this.bullets&&this.bullets.update(t,e,this.aimingPos,this.isAiming(),this.inverseX)}},{key:"renderBullets",value:function(t,e,i){this.bullets.render(t,e,i)}},{key:"getAimingOffsetVector",value:function(){var t=this.sprites.refSize,e=this.sprites[this.constants.states.AIM].uv[0],i=e.w,s=e.cx;return{x:s/t,y:e.cy/t,invX:(i-s)/t}}},{key:"getAimingPos",value:function(){return this.aimingPos}},{key:"getAimingPosition",value:function(){var t=this.stateSprite.getRelSize().h;return new U.Z(this.behavior.getX()-this.viewBox.x+(this.inverseX?this.offsetAiming.invX:this.offsetAiming.x),this.behavior.getY()-this.viewBox.y-t+this.offsetAiming.y,this.behavior.getZ())}},{key:"isAiming",value:function(){return this.behavior.isAiming()}}]),i}(W);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var nt=function(t){f()(i,t);var e=st(i);function i(){return n()(this,i),e.apply(this,arguments)}return r()(i,[{key:"update",value:function(t,e){var s=h()(d()(i.prototype),"update",this).call(this,t,e);return s&&this.updateSpeed(),s}},{key:"updateSpeed",value:function(){this.setDamping(),this.setGravity(),this.setClamping()}},{key:"setGravity",value:function(){var t=this.constants.physics.gravity;this.isCollision.bottom||this.speed.addY(-t)}},{key:"setDamping",value:function(){var t=this.constants.physics.damping;Math.abs(this.speed.getX())>.01?this.speed.multiplyX(t.x):this.speed.setX(0)}},{key:"setClamping",value:function(){var t=this.constants.physics.clamp;this.speed.getX()>t.x&&this.speed.setX(t.x),this.speed.getX()<-t.x&&this.speed.setX(-t.x),this.speed.getY()>t.y&&this.speed.setY(t.y),this.speed.getY()<-t.y&&this.speed.setY(-t.y)}}]),i}(F);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var rt=function(t){f()(i,t);var e=ot(i);function i(t,s,o){var r;return n()(this,i),(r=e.call(this,t,s,o)).isAnimating=!1,r.aimingStrength=0,r.inverseSprite=!1,r.oldInverseSprite=r.inverseSprite,r.jumpPosition=new U.Z,r}return r()(i,[{key:"defineNextStatus",value:function(){h()(d()(i.prototype),"defineNextStatus",this).call(this);var t=this.constants.states,e=t.WALL,s=t.WALL_UP,n=t.JUMP_UP,o=t.RUN_JUMP_UP;this.isLock()||(this.speed.getY()>0&&(this.status=n,Math.abs(this.speed.getX())>0&&(this.status=o)),this.isCollision.bottom?(this.isCollision.left||this.isCollision.right)&&(this.status=e):(this.isCollision.left||this.isCollision.right)&&(this.status=s),this.isCollision.left?this.inverseSprite=!0:this.isCollision.right&&(this.inverseSprite=!1))}},{key:"setInteraction",value:function(t){var e=this.constants,i=e.physics,s=e.states,n=t.keys,o=s.DASH,r=s.AIM,a=s.SLASH,u=s.JUMP_UP,c=s.DIE;if(this.status!==c){this.status===r&&(this.aimingStrength=(0,b.Yp)(t.getCharge(n.W),0,40,.2,1));var h=this.isCollision.bottom?i.run:i.aircontrol;!this.isCollision.right&&t.isPressed(n.RIGHT)&&(this.speed.addX(h),this.inverseSprite=!1),!this.isCollision.left&&t.isPressed(n.LEFT)&&(this.speed.addX(-h),this.inverseSprite=!0),this.isLock()||this.isCollision.bottom&&(t.isPressedOne(n.SPACE)&&(this.jumpPosition.set(this.position.getX(),this.position.getY(),0),this.speed.addY(i.jump),this.status=u,this.isCollision.bottom=!1),t.isPressedOne(n.SHIFT)&&(this.speed.addX(this.inverseSprite?-i.dash:i.dash),this.status=o),t.isPressed(n.W)&&(this.status=r),t.isPressedOne(n.X)&&(this.status=a)),this.resetValues(t)}}},{key:"resetValues",value:function(t){var e=this.constants.states,i=t.keys,s=e.STAND,n=e.AIM;this.status,this.status!==n||t.isPressed(i.W)||(this.aimingStrength=0,this.status=s)}},{key:"getLastJumpingPosition",value:function(){return this.jumpPosition}},{key:"isAiming",value:function(){return this.aimingStrength}},{key:"getDashing",value:function(){var t=this.constants.states.DASH;return this.status===t}}]),i}(nt);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var ut=function(t){f()(i,t);var e=at(i);function i(t){var s,o=t.constants,r=t.sprites,a=t.viewBox,c=t.tileSize,h=t.bullets,l=t.fxs;return n()(this,i),s=e.call(this,{constants:o,sprites:r,viewBox:a,bullets:h,fxs:l}),x()(u()(s),"setInteraction",(function(t){s.behavior.setInteraction(t)})),s.behavior=new rt(o,s.updateState,c),s}return r()(i,[{key:"getDashing",value:function(){return this.behavior.getDashing()}},{key:"reset",value:function(){this.behavior&&this.behavior.reset(),h()(d()(i.prototype),"reset",this).call(this)}}]),i}(it);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var ht=function(t){f()(i,t);var e=ct(i);function i(){return n()(this,i),e.apply(this,arguments)}return r()(i,[{key:"updateSpeed",value:function(){h()(d()(i.prototype),"updateSpeed",this).call(this),this.isCollision.left?this.inverseSprite=!1:this.isCollision.right&&(this.inverseSprite=!0),this.isCollision.bottom&&this.speed.addX((this.inverseSprite?-1:1)*this.constants.physics.run)}}]),i}(nt);function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}var ft=function(t){f()(i,t);var e=lt(i);function i(t){var s,o,r=t.constants,a=t.sprites,c=t.viewBox,l=t.tileSize;return n()(this,i),o=e.call(this,{constants:r,sprites:a,viewBox:c}),x()(u()(o),"reset",(function(){h()((s=u()(o),d()(i.prototype)),"reset",s).call(s),o.behavior&&o.behavior.reset()})),o.behavior=new ht(r,o.updateState,l),o.setInverseColor(!0),o}return i}(j);function pt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function vt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(i),!0).forEach((function(e){x()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=d()(t);if(e){var n=d()(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v()(this,i)}}w.Z;i(83909);var dt=i(93379),gt=i.n(dt),xt=i(6616),wt={insert:"head",singleton:!1};gt()(xt.Z,wt);xt.Z.locals;i(88747),i(89153)},6616:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(23645),n=i.n(s)()((function(t){return t[1]}));n.push([t.id,"#game {\n  text-align: center;\n}\n\n#game canvas {\n  display: block;\n  margin: 0 auto;\n  width: auto;\n  height: auto;\n  max-height: 100vh;\n  max-width: 100%;\n}\n\n#gameinfos {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 4px;\n  width: 100%;\n  text-align: left;\n}\n\nmeter {\n  width: 100px;\n  height: 1.2em;\n}\n\n#game[data-fullscreen] canvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n\n#splash {\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  color: #fff;\n  transition: opacity 500ms ease-out;\n  z-index: 1;\n}\n\n#title {\n  font-size: 6em;\n  font-weight: 100;\n  text-shadow: 1px 1px 0 #000;\n  margin: 0;\n}\n\n#instructions {\n  font-size: 1.6em;\n  display: none;\n  letter-spacing: 0.1em;\n  animation: blink 1s linear infinite;\n  margin: 1em 0;\n}\n\n.commands {\n  letter-spacing: 0.2em;\n  text-transform: uppercase;\n  padding: 1em 0;\n}\n\n.command {\n  position: relative;\n  overflow: hidden;\n  font-size: 0.8em;\n  letter-spacing: 0.1em;\n  margin: 10px 0;\n}\n\n.command .key {\n  border-radius: 4px;\n  margin: 0 4px;\n  text-align: center;\n  width: calc(50% - 8px);\n  background: #444;\n  float: left;\n}\n\n.command .key.twocol {\n  width: calc(25% - 8px);\n}\n\n.command .key svg {\n  width: 8px;\n  stroke: #fff;\n  stroke-width: 2;\n  fill: none;\n}\n\n.command .desc {\n  float: left;\n  width: 50%;\n}\n\n.command .key,\n.command .desc {\n  padding: 0.4em;\n  text-shadow: 1px 1px 0 #000;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""]);const o=n}}]);