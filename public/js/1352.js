"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[1352],{16444:(t,e,i)=>{i.d(e,{A:()=>l});var s=i(34120),r=i(82922);class n extends s.A{constructor(t){super(),this.projection=(0,r.Jt)(t.projection),this.attributions_=o(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o(t),this.changed()}setState(t){this.state_=t,this.changed()}}function o(t){return t?"function"==typeof t?t:(Array.isArray(t)||(t=[t]),e=>t):null}const l=n},22570:(t,e,i)=>{i.d(e,{A:()=>S});var s=i(50071),r=i(32135),n=i(28450),o=i(66514),l=i(90588),a=i(1685),h=i(6837),u=i(9438),c=i(70915),d=i(21142),_=i(74238),g=i(60942),f=i(43530),p=i(24778),v=i(95902),F=i(4087),y=i(16444);const x="addfeature",E="changefeature",m="clear",T="removefeature",R="featuresloadstart",A="featuresloadend",C="featuresloaderror";class I extends a.Ay{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class G extends y.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=_.tV,this.format_=t.format||null,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,l.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,d.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:g.Q7;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,r;this.featuresRtree_=e?new v.A:null,this.loadedExtentsRtree_=new v.A,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),e||void 0!==i||(i=new s.A(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,F.v6)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new I(x,t))}setupChangeEvents_(t,e){e instanceof p.Ay||(this.featureChangeKeys_[t]=[(0,u.KT)(e,h.A.CHANGE,this.handleFeatureChange_,this),(0,u.KT)(e,n.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof p.Ay){const s=this.idIndex_[t];s instanceof p.Ay?Array.isArray(s)?s.push(e):this.idIndex_[t]=[s,e]:i=!1}else i=!1;else this.idIndex_[t]=e}return i&&((0,l.v)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let e=0,s=t.length;e<s;e++){const s=t[e],r=(0,F.v6)(s);this.addToIndex_(r,s)&&i.push(s)}for(let t=0,r=i.length;t<r;t++){const r=i[t],n=(0,F.v6)(r);this.setupChangeEvents_(n,r);const o=r.getGeometry();if(o){const t=o.getExtent();e.push(t),s.push(r)}else this.nullGeometryFeatures_[n]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(x))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new I(x,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(x,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(T,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(r.A.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(r.A.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(u.JH)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach((t=>{this.removeFeatureInternal(t)}));for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new I(m);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){const s=i.getGeometry();if(s instanceof p.Ay||s.intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){const s=i.getGeometry();if(s instanceof p.Ay||s.intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,f.p)(this.nullGeometryFeatures_)||(0,o.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=(0,c.QJ)(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let r=null;const n=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||_.rT,this.featuresRtree_.forEachInExtent(l,(function(t){if(e(t)){const e=t.getGeometry(),a=o;if(o=e instanceof p.Ay?0:e.closestPointXY(i,s,n,o),o<a){r=t;const e=Math.sqrt(o);l[0]=i-e,l[1]=s-e,l[2]=i+e,l[3]=s+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,F.v6)(e),s=e.getGeometry();if(s){const t=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new I(E,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,F.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,f.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let t=0,n=r.length;t<n;++t){const n=r[t];s.forEachInExtent(n,(function(t){return(0,c.ms)(t.extent,n)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new I(R)),this.loader_.call(this,n,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new I(A,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new I(C))})),s.insert(n,{extent:n.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,i=e.forEachInExtent(t,(function(e){if((0,c.aI)(e.extent,t))return e}));i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,s=t.length;i<s;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,F.v6)(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i?.forEach(u.JH),delete this.featureChangeKeys_[e];const s=t.getId();if(void 0!==s){const e=s.toString(),i=this.idIndex_[e];i===t?delete this.idIndex_[e]:Array.isArray(i)&&(i.splice(i.indexOf(t),1),1===i.length&&(this.idIndex_[e]=i[0]))}return delete this.uidIndex_[e],this.hasListener(T)&&this.dispatchEvent(new I(T,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){(0,l.v)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,d.nF)(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const S=G},55754:(t,e,i)=>{i.d(e,{A:()=>G});var s=i(11078),r=i(9480),n=i(88756),o=i(6837),l=i(70915),a=i(21142),h=i(43530),u=i(6782),c=i(56758),d=i(57115),_=i(4863),g=i(42654),f=i(14465),p=i(4087),v=i(1685),F=i(40186),y=i(16444);class x extends y.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&(0,u.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||(0,p.v6)(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,s,r){return(0,p.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,_.pr)(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),n=(0,u.xq)(s.getTileSize(t),this.tmpSize);return 1==r?n:(0,u.hs)(n,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const i=void 0!==e?e:this.getProjection(),s=void 0!==e?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,_.Li)(s,t,i)),(0,F.N5)(t,s)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class E extends v.Ay{constructor(t,e){super(t),this.tile=e}}const m=x,T="tileloadstart",R="tileloadend",A="tileloaderror";class C extends m{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===C.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,p.v6)(e),r=e.getState();let n;r==s.A.LOADING?(this.tileLoadingKeys_[i]=!0,n=T):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=r==s.A.ERROR?A:r==s.A.LOADED?R:void 0),null!=n&&this.dispatchEvent(new E(n,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,f.Uu)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,g.Qz)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}const I=C;const G=class extends I{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||(0,_.kZ)(e),s=t.tileGrid||(0,_.EN)({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:s,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:S,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:n.A,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,e,i){if(i.getState()===s.A.IDLE){i.setState(s.A.LOADING);const r=i.wrappedTileCoord,n=this.getTileGridForProjection(e),a=n.getTileCoordExtent(r),u=r[0],c=n.getResolution(u);(0,l.r)(a,-c,a);const d=this.tileGrid,_=d.getExtent();_&&(0,l._N)(a,_,a);const g=d.getZForResolution(c,this.zDirection);d.forEachTileCoord(a,g,(r=>{const n=this.tileUrlFunction(r,t,e);this.sourceTiles_[n]||(this.sourceTiles_[n]=new this.tileClass(r,n?s.A.IDLE:s.A.EMPTY,n,this.format_,this.tileLoadFunction));const l=this.sourceTiles_[n];i.sourceTiles.push(l),this.tileKeysBySourceTileUrl_[n]||(this.tileKeysBySourceTileUrl_[n]=[]),this.tileKeysBySourceTileUrl_[n].push(i.getKey());const a=l.getState();if(a<s.A.LOADED){const t=e=>{this.handleTileChange(e);const r=l.getState();if(r===s.A.LOADED||r===s.A.ERROR){const e=l.getKey();e in i.errorTileKeys?l.getState()===s.A.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,r===s.A.ERROR?i.errorTileKeys[e]=!0:l.removeEventListener(o.A.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,h.p)(i.errorTileKeys)?s.A.LOADED:s.A.ERROR)}};l.addEventListener(o.A.CHANGE,t),i.loadingSourceTiles++}a===s.A.IDLE&&(l.extent=d.getTileCoordExtent(r),l.projection=e,l.resolution=d.getResolution(r[0]),l.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((t=>t.getState()===s.A.ERROR))?s.A.ERROR:s.A.LOADED)}return i.sourceTiles}removeSourceTiles(t){const e=t.getKey(),i=t.sourceTiles;for(let t=0,s=i.length;t<s;++t){const s=i[t].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const r=this.tileKeysBySourceTileUrl_[s].indexOf(e);-1!==r&&(this.tileKeysBySourceTileUrl_[s].splice(r,1),0===this.tileKeysBySourceTileUrl_[s].length&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(t,e,i,n,o){const a=[t,e,i];let h=this.getTileCoordForTileUrlFunction(a,o);const u=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(o);if(h&&u){const e=c.getTileCoordExtent(h);(0,l.r)(e,-c.getResolution(t),e),(0,l.HY)(u,e)||(h=null)}let d=!0;if(null!==h){const e=this.tileGrid,i=c.getResolution(t),s=e.getZForResolution(i,1),r=c.getTileCoordExtent(h);(0,l.r)(r,-i,r),e.forEachTileCoord(r,s,(t=>{d=d&&!this.tileUrlFunction(t,n,o)}))}const _=new r.A(a,d?s.A.EMPTY:s.A.IDLE,h,this.getSourceTiles.bind(this,n,o),this.removeSourceTiles.bind(this));return _.key=this.getKey(),_}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const t=this.tileGrid,s=t.getResolutions().slice(),r=s.map((function(e,i){return t.getOrigin(i)})),n=s.map((function(e,i){return t.getTileSize(i)})),o=d.L+1;for(let t=s.length;t<o;++t)s.push(s[t-1]/2),r.push(r[t-1]),n.push(n[t-1]);i=new c.A({extent:t.getExtent(),origins:r,resolutions:s,tileSizes:n}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const s=this.getTileGridForProjection(i),r=(0,u.xq)(s.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]}setOverlaps(t){this.overlaps_=t,this.changed()}};function S(t,e){t.setLoader((function(i,s,r){(0,a.m8)(e,t.getFormat(),i,s,r,t.onLoad.bind(t),t.onError.bind(t))}))}},52490:(t,e,i)=>{i.d(e,{Yf:()=>n});var s=i(61597);const r=6371008.8;function n(t,e,i){i=i||r;const n=(0,s.eh)(t[1]),o=(0,s.eh)(e[1]),l=(o-n)/2,a=(0,s.eh)(e[0]-t[0])/2,h=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}}}]);