(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[3941,1188,1905,4502],{95660:(t,e,n)=>{"use strict";n(87757),n(48926),n(67328);var i="deform",r="sphere4";"/camera/".concat(i,".js"),"/obj/".concat(r,".obj");var o=n(34575),s=n.n(o),a=n(93913),u=n.n(a),l=n(81506),c=n.n(l),h=n(16525),f=n.n(h),d=n(2205),g=n.n(d),p=n(78585),v=n.n(p),y=n(29754),m=n.n(y),b=n(59713),k=n.n(b),A=n(22255),P=n(73677),R=n(91215),w=n(21969),x=n(98802),O=n(85693),E=n(47313),j=n(49790),Z=n(68763),T=n(27148),F=n(7626);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v()(this,n)}}A.Z,n(88747),n(89153),n(13017);var N=n(93379),D=n.n(N),S=n(90324),C={insert:"head",singleton:!1};D()(S.Z,C);S.Z.locals},67328:(t,e,n)=>{"use strict";n(87757),n(48926),n(34575),n(93913),n(59713),n(41262),n(36188),n(7071);n(55534),n(60760),n(92613)},66160:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(16525),u=n.n(a),l=n(2205),c=n.n(l),h=n(78585),f=n.n(h),d=n(29754),g=n.n(d),p=n(25773),v=n(21969);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var m=function(t){c()(n,t);var e=y(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).target=new p.Z(t.target.x,t.target.y,t.target.z),i.matIdentity=new v.Z,i.projection=new v.Z,i.projection.identity(),i.near=t.near||1,i.far=t.far||100,i.angle=t.angle||50,i.matIdentity.identity(),i.lookAt(),i}return s()(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new v.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),n}(n(44254).Z),b=n(66605);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var A=function(t){c()(n,t);var e=k(n);function n(){return r()(this,n),e.apply(this,arguments)}return s()(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),i=t.getZ(),r=new b.Z(e,n,i,1),o=new v.Z;o.equal(this.view).multiply(this.projection),r.multiplyMatrix(o);var s=r.getX()/r.getW(),a=r.getY()/r.getW();return[s=.5*(s+1),a=.5*(a+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(m),P=n(47313);function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var w=function(t){c()(n,t);var e=R(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).options=t,i.rotationX=new P.Z,i.targetX=new P.Z,i.zoomZ=new P.Z(.7,.1),i}return s()(n,[{key:"update",value:function(){u()(g()(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(A)},39966:(t,e,n)=>{"use strict";n.d(e,{I:()=>i});var i=1e-6},77626:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(83495),u=n(17045),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r()(this,t),this.gl=e,this.buffer=this.gl.createFramebuffer(),this.buffer.width=n,this.buffer.height=i,this.clearColor=[0,0,0,0],this.setup(o,s,a)}return s()(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer);var i=null!==e?e.COLOR_ATTACHMENT0_WEBGL+n:this.gl.COLOR_ATTACHMENT0;this.texture=new a.Z(this.gl,this.buffer.width,this.buffer.height),this.texture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,i,this.gl.TEXTURE_2D,this.texture.get(),0),t&&(this.depthTexture=new u.Z(this.gl,this.buffer.width,this.buffer.height),this.depthTexture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.get(),0)),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"resize",value:function(t){this.buffer.width=t.width,this.buffer.height=t.height,this.setup()}},{key:"start",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this.gl.viewport(0,0,this.buffer.width,this.buffer.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"end",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"get",value:function(){return this.buffer}},{key:"getTexture",value:function(){return this.texture}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setClearColor",value:function(t,e,n,i){this.clearColor=[t,e,n,i]}}]),t}()},27278:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(2205),u=n.n(a),l=n(78585),c=n.n(l),h=n(29754),f=n.n(h),d=n(44254),g=n(77626),p=n(548),v=n(25773);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f()(t);if(e){var r=f()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c()(this,n)}}var m=function(t){u()(n,t);var e=y(n);function n(t,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return r()(this,n),(o=e.call(this,i)).gl=t,o.fbo=new g.Z(o.gl,s,a,u),o.sizeRepere=new v.Z(.05,.05,.05),o.repere=new p.Z(o.gl),o.repere.update(o.position,o.sizeRepere),o.lookAt(),o}return s()(n,[{key:"start",value:function(){this.fbo.start()}},{key:"end",value:function(){this.fbo.end()}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}},{key:"renderRepere",value:function(t){this.repere.render(t)}},{key:"getDepthTexture",value:function(){return this.fbo.getDepthTexture()}},{key:"setDepthProgram",value:function(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}},{key:"setShadowProgram",value:function(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}}]),n}(d.Z)},44254:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(25773),u=n(21969),l=function(){function t(e){if(r()(this,t),this.position=new a.Z(e.position.x,e.position.y,e.position.z),this.target=new a.Z(0,0,0),this.view=new u.Z,e.ortho){var n=e.ortho,i=n.left,o=n.right,s=n.bottom,l=n.top,c=e.near,h=e.far;this.ortho=new u.Z,this.ortho.ortho(i,o,s,l,c,h)}}return s()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==t?t:this.position.getX(),r=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(i,r,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},70751:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g});var i=n(59713),r=n.n(i),o=n(63038),s=n.n(o),a=n(34575),u=n.n(a),l=n(93913),c=n.n(l);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={ambiant:[0,0,0],diffuse:[.5,.5,.5],specular:[1,1,1],emissive:[0,0,0],specDensity:[1],opacity:1},g=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=this.gl.STATIC_DRAW,this.materialProps={},this.steps=this.getSteps(n,r);var o=this.getPoints(n,r);this.stride=0,Object.entries(this.steps).forEach((function(t){null!==t[1]&&(i.stride+=t[1])})),this.vbo=this.gl.createBuffer(),this.count=o.length/this.stride,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(o),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}return c()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo);var n=0;Object.entries(this.steps).forEach((function(i){var r=s()(i,2),o=r[0],a=r[1];void 0!==t.locations[o]&&-1!==t.locations[o]&&(e.gl.enableVertexAttribArray(t.locations[o]),e.gl.vertexAttribPointer(t.locations[o],a,e.gl.FLOAT,!1,4*e.stride,4*n)),null!==e.steps[o]&&(n+=e.steps[o])}))}},{key:"render",value:function(t){this.enable(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.drawArrays(this.modeDessin,0,this.count),this.end()}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}},{key:"getSteps",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={position:3};return t.vt.indices.length>0&&(i.texture=2),t.vn.indices.length>0&&(i.normale=3),n&&t.mat&&Object.keys(t.mat).forEach((function(i){var r=t.mat[i],o=n[r];o&&Object.keys(o).forEach((function(t){void 0===e.materialProps[t]&&(e.materialProps[t]=o[t].length)}))})),f(f({},i),this.materialProps)}},{key:"getPoints",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];return t.v.indices.forEach((function(r,o){var s=3*r;if(i.push(t.v.points[s]),i.push(t.v.points[s+1]),i.push(t.v.points[s+2]),t.vt.indices.length>0){var a=2*t.vt.indices[o];i.push(t.vt.points[a]),i.push(t.vt.points[a+1])}if(t.vn.indices.length>0){var u=3*t.vn.indices[o];i.push(t.vn.points[u]),i.push(t.vn.points[u+1]),i.push(t.vn.points[u+2])}if(n&&t.mat){var l=Object.keys(t.mat).findIndex((function(e,n){var i=Object.keys(t.mat)[n+1];return!i||o>=e&&o<i})),c=t.mat[Object.keys(t.mat)[l]];Object.keys(e.materialProps).forEach((function(t){(n[c]&&n[c][t]||d[t]).forEach((function(t){return i.push(t)}))}))}})),i}}]),t}()},80602:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g});var i=n(34575),r=n.n(i),o=n(2205),s=n.n(o),a=n(78585),u=n.n(a),l=n(29754),c=n.n(l),h=n(35115);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c()(t);if(e){var r=c()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var d=function(t,e){return Object.keys(e).reduce((function(n,i){var r,o,s,a,u=e[i];switch(i){case"color":o="VEC4",s=4,r=t.FLOAT,a=new Float32Array(u);break;default:case"position":case"next":case"previous":case"normale":o="VEC3",s=3,r=t.FLOAT,a=new Float32Array(u);break;case"texture":o="VEC2",s=2,r=t.FLOAT,a=new Float32Array(u);break;case"indices":o="SCALAR",s=1,r=t.UNSIGNED_SHORT,a=new Uint16Array(u);break;case"side":case"random":o="FLOAT",s=1,r=t.FLOAT,a=new Float32Array(u)}return n[i]={locationKey:i,type:o,values:a,count:u.length/s,componentType:r,size:s},n}),{})},g=function(t){s()(n,t);var e=f(n);function n(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r()(this,n);var s=d(t,i);return e.call(this,t,s,o)}return n}(h.Z)},77211:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(59713),u=n.n(a),l=function(){function t(e,n){var i=this;r()(this,t),u()(this,"getLocation",(function(t){return i.program.locations[t]||null})),this.gl=e,this.program=this.gl.createProgram(),this.setup(n)}return s()(t,[{key:"setup",value:function(t){this.creerShader("vertex",t.vertex),this.creerShader("fragment",t.fragment),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.createLocations(t),this.gl.useProgram(null)):this.gl.deleteProgram(this.program)}},{key:"creerShader",value:function(t,e){var n=this.gl.createShader("vertex"===t?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?(this.gl.attachShader(this.program,n),this.gl.deleteShader(n)):this.gl.deleteShader(n)}},{key:"createLocations",value:function(t){var e=this;this.program.locations={},t.uniforms.forEach((function(t){e.program.locations[t]=e.gl.getUniformLocation(e.program,t)})),t.attributes.forEach((function(t){e.program.locations[t]=e.gl.getAttribLocation(e.program,t)}))}},{key:"setProjectionView",value:function(t){this.setMatrix("projection",t.getProjection().get()),this.setMatrix("view",t.getView().get())}},{key:"setMatrix",value:function(t,e){var n=this.getLocation(t);null!==n&&(this.gl.useProgram(this.program),16===e.length?this.gl.uniformMatrix4fv(n,!1,e):this.gl.uniformMatrix3fv(n,!1,e),this.gl.useProgram(null))}},{key:"setInt",value:function(t,e){var n=this.getLocation(t);null!==n&&(this.gl.useProgram(this.program),this.gl.uniform1i(n,e),this.gl.useProgram(null))}},{key:"setTexture",value:function(t,e,n){var i=this.getLocation(n);null!==i&&(this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(i,t),this.gl.useProgram(null))}},{key:"setFloat",value:function(t,e){var n=this.getLocation(t);null!==n&&(this.gl.useProgram(this.program),this.gl.uniform1f(n,e),this.gl.useProgram(null))}},{key:"setVector",value:function(t,e){var n=this.getLocation(t);if(null!==n){switch(this.gl.useProgram(this.program),e.length){default:case 2:this.gl.uniform2fv(n,e);break;case 3:this.gl.uniform3fv(n,e);break;case 4:this.gl.uniform4fv(n,e)}this.gl.useProgram(null)}}},{key:"enable",value:function(){this.gl.useProgram(this.program)}},{key:"disable",value:function(){this.gl.useProgram(null)}},{key:"get",value:function(){return this.program}},{key:"getLocations",value:function(){return this.program.locations}}]),t}()},21200:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(80602),u=n(31073),l=function(){function t(e){r()(this,t),this.gl=e,this.objet=new a.Z(e,u.Z)}return s()(t,[{key:"render",value:function(t){this.gl.disable(this.gl.CULL_FACE),this.objet.render(t),this.gl.enable(this.gl.CULL_FACE)}}]),t}()},35918:(t,e,n)=>{"use strict";n.d(e,{Z:()=>k});var i=n(69100),r=n.n(i),o=n(319),s=n.n(o),a=n(34575),u=n.n(a),l=n(93913),c=n.n(l),h=n(59713),f=n.n(h),d=n(35115),g=n(91215),p=function(){function t(e,n){var i=this,r=n.vbos,o=n.material,s=void 0===o?{}:o;u()(this,t),f()(this,"addInstancing",(function(t,e){i.vbos.addInstancingVbos(t,e)})),this.material=s,this.vbos=new d.Z(e,r),s.normalMap&&(this.normalMap=new g.Z(e,s.normalMap.data))}return c()(t,[{key:"render",value:function(t){var e=this.material,n=e.color,i=e.metal,r=e.rough,o=e.ao;t.setVector("color",n||[1,1,1,1]),t.setFloat("metal",void 0!==i?i:0),t.setFloat("rough",void 0!==r?r:.5),t.setFloat("ao",void 0!==o?o:1),this.vbos.render(t.get())}},{key:"setModeDessin",value:function(t){this.vbos.setModeDessin(t)}},{key:"setModeCalcul",value:function(t){this.vbos.setModeCalcul(t)}}]),t}(),v=n(17968),y=n(21969);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=function(){function t(e,n){var i=this;u()(this,t),f()(this,"formatPrimitives",(function(t,e){return e.map((function(e){var n=e.vbos,i=e.material;return new p(t,{vbos:n,material:i})}))})),f()(this,"renderNodesAndChildren",(function(t,e,n){Object.keys(t).forEach((function(r){var o=t[r];i.renderNodeAndChildren(o,e,n)}))})),f()(this,"renderNodeAndChildren",(function(t,e,n){var r;r=i.setNodeModel(t,e,n),i.renderNode(t,e),t.children&&i.renderNodesAndChildren(t.children,e,r)})),f()(this,"setNodeModel",(function(t,e,n){var r=i.handleLocalTransform(t);r.multiply(n),e.setMatrix("model",r.get());var o=r.getMatrice3x3();return o.inverse(),o.transpose(),e.setMatrix("normalMatrix",o.get()),r})),f()(this,"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,i=t.scale,o=t.matrix,a=new y.Z;return a.identity(),i&&a.scale.apply(a,s()(i)),n&&a.multiply(r()(v.Z,s()(n)).toMatrix4()),e&&a.translate.apply(a,s()(e)),o&&a.multiplyArray(o),a}));var o=n.nodes,a=n.meshes,l=n.materials;this.meshes=a.map((function(t){var n=t.primitives,r=t.name,o=void 0===r?"":r,s=t.weights,a=n.map((function(t){return void 0!==t.material?b(b({},t),{},{material:l[t.material]}):t}));return{name:o,primitives:i.formatPrimitives(e,a),weights:s}})),this.nodes=o}return c()(t,[{key:"addInstancingVbos",value:function(t,e){var n=this;Object.keys(this.nodes).forEach((function(i){var r=n.nodes[i].mesh;n.meshes[r].primitives.forEach((function(n){return n.addInstancing(t,e)}))}))}},{key:"render",value:function(t,e){this.renderNodesAndChildren(this.nodes,t,e)}},{key:"renderOnly",value:function(t,e,n){var i=this;t.forEach((function(t){var r=i.nodes[t];i.renderNodeAndChildren(r,e,n)}))}},{key:"renderExcept",value:function(t,e,n){var i=this;Object.keys(this.nodes).forEach((function(r){if(-1===t.indexOf(r)){var o=i.nodes[r];i.renderNodeAndChildren(o,e,n)}}))}},{key:"renderNode",value:function(t,e){if(void 0!==t.mesh){var n=t.mesh;this.meshes[n].primitives.forEach((function(t){return t.render(e)}))}}}]),t}()},14129:(t,e,n)=>{"use strict";n.d(e,{Z:()=>M});var i=n(63038),r=n.n(i),o=n(6479),s=n.n(o),a=n(69100),u=n.n(a),l=n(319),c=n.n(l),h=n(34575),f=n.n(h),d=n(81506),g=n.n(d),p=n(2205),v=n.n(p),y=n(78585),m=n.n(y),b=n(29754),k=n.n(b),A=n(59713),P=n.n(A),R=n(35918),w=n(17968),x=n(21969),O=n(29686),E=n(41178),j=n(68763);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){P()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=k()(t);if(e){var r=k()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var M=function(t){v()(n,t);var e=F(n);function n(t,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f()(this,n),o=e.call(this,t,i),P()(g()(o),"addAllAnimations",(function(t,e){return Object.keys(t).reduce((function(n,i){var r=n,s=t[i],a=s.animations,u=s.name,l=s.children;return a&&(r[u]=o.addAnimations(a,e)),l&&(r=T(T({},n),o.addAllAnimations(l,e))),r}),{})})),P()(g()(o),"addAnimations",(function(t,e){var n={};return t.forEach((function(t){var i=t.path,r=t.times,s=t.output,a=t.interpolation,l=null!==e?s[e]:s[0];"rotation"===i&&(l=u()(w.Z,c()(l)).toMatrix4()),o.animationInterval[1]=Math.max.apply(Math,c()(r).concat([o.animationInterval[1]])),n[i]={output:s,sample:new O.Z(r,a,o.speedAnimation),customStep:e,value:l}})),n})),P()(g()(o),"removeNodesAnimations",(function(t){return Object.keys(t).reduce((function(e,n){var i=e,r=t[n];return i[r.name]=o.removeNodeAnim(r),r.children&&(i=T(T({},i),o.removeNodesAnimations(r.children))),e}),{})})),P()(g()(o),"removeNodeAnim",(function(t){t.animations;return s()(t,["animations"])})),P()(g()(o),"getAnimationInterval",(function(t){var e=0;return t.forEach((function(t){var n=t.animations;n&&n.forEach((function(t){var n=t.times;e=Math.max.apply(Math,c()(n).concat([e]))}))})),[0,e]})),P()(g()(o),"update",(function(t){var e=t-o.lastFrame;e>o.animationInterval[1]*o.speedAnimation&&(o.lastFrame=t),o.updateAnimations(e)})),P()(g()(o),"updateAnimations",(function(t){Object.keys(o.animations).forEach((function(e){var n=o.animations[e];Object.keys(n).forEach((function(e){n[e]="rotation"===e?o.updateQuat(n[e],t):o.updateVector(n[e],t)}))}))})),P()(g()(o),"updateVector",(function(t,e){var n=t,i=n.sample,o=n.customStep,s=n.output;if(null===o){i.update(e);var a=i.getIndex();if(0===a){var u=r()(s,1);n.value=u[0]}else if(a>s.length-1)n.value=s[s.length-1];else{var l=s[a-1],c=s[a],h=i.get();n.value=l.map((function(t,e){return(0,E.t7)(h,t,c[e])}))}}else n.value=s[o];return n})),P()(g()(o),"updateQuat",(function(t,e){var n=t,i=n.sample,r=n.customStep,o=n.output;if(null===r){i.update(e);var s=i.getIndex();if(0===s)n.value=u()(w.Z,c()(o[0])).toMatrix4();else if(s>o.length-1)n.value=u()(w.Z,c()(o[o.length-1])).toMatrix4();else{var a=o[s-1],l=o[s],h=i.get();n.value=w.Z.slerpArray(a,l,h).toMatrix4()}}else n.value=u()(w.Z,c()(o[r])).toMatrix4();return n})),P()(g()(o),"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,i=t.scale,r=t.matrix,s=t.name,a=o.animations[s],u=a&&a.rotation||null,l=a&&a.translation||null,h=a&&a.scale||null,f=new x.Z;return f.identity(),(i||h)&&f.scale.apply(f,c()(o.getVector(i,h))),(n||u)&&f.multiply(o.getRotationMat(n,u)),(e||l)&&f.translate.apply(f,c()(o.getVector(e,l))),r&&f.multiplyArray(r),f})),P()(g()(o),"setAnimationStep",(function(t,e,n){var i=o.animations[t][e],r=i.output.length,s=(0,j.Yp)(n,0,1,0,r-1);i.customStep=Math.round(s)})),P()(g()(o),"setAnimationSpeed",(function(t,e,n){o.animations[t][e].sample.setSpeed(n)})),P()(g()(o),"getVector",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:t})),P()(g()(o),"getRotationMat",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:u()(w.Z,c()(t)).toMatrix4()}));var l=i.nodes;return o.speedAnimation=2e3,o.animationInterval=[0,0],o.animations=o.addAllAnimations(l,a),o.nodes=o.removeNodesAnimations(l),o.lastFrame=0,o}return n}(R.Z)},41517:(t,e,n)=>{"use strict";n.d(e,{Z:()=>P});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(81506),u=n.n(a),l=n(16525),c=n.n(l),h=n(2205),f=n.n(h),d=n(78585),g=n.n(d),p=n(29754),v=n.n(p),y=n(59713),m=n.n(y),b=n(14129),k=n(21969);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v()(t);if(e){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g()(this,n)}}var P=function(t){f()(n,t);var e=A(n);function n(t,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r()(this,n),o=e.call(this,t,i),m()(u()(o),"removeAnimations",(function(t){return t.map((function(t){var e=t;return e.children&&(e.children=o.removeAnimations(e.children)),o.removeAnim(e)}))})),m()(u()(o),"addJointsAnimations",(function(t,e){t.forEach((function(t){var n=t.animations,i=t.name,r=t.children;n&&(o.animations[i]=o.addAnimations(n,e)),r&&o.addJointsAnimations(r,e)}))})),m()(u()(o),"setProgramSkin",(function(t,e){if(void 0!==t){var n=new k.Z;n.identity();var i=o.skins[t].joints;o.setProgramJoints(i,e,n)}})),m()(u()(o),"setProgramJoints",(function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach((function(t){var r=t.invMatrix,s=t.children,a=o.handleLocalTransform(t);a.multiply(n);var u=new k.Z;u.identity();var l=new k.Z;l.setFromArray(r),l.resetScale(),u.multiply(l),u.multiply(a),e.setMatrix("jointMat[".concat(i,"]"),u.get()),s&&o.setProgramJoints(s,e,a,i+1)}))}));var a=i.skins;return a&&(a.forEach((function(t){var e=t.joints;o.addJointsAnimations(e,s)})),o.skins=a.map((function(t){var e=t.joints;return{joints:o.removeAnimations(e)}}))),o}return s()(n,[{key:"renderNode",value:function(t,e,i){var r=t.skin;void 0!==r&&this.setProgramSkin(r,e),c()(v()(n.prototype),"renderNode",this).call(this,t,e,i)}}]),n}(b.Z)},1336:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(59713),u=n.n(a),l=function(){function t(e){var n=this;r()(this,t),u()(this,"saveData",(function(t){n.audioData=t})),u()(this,"togglePause",(function(){n.isPlaying?n.isPause?(n.audioContext.resume(),n.isPause=!1):(n.audioContext.suspend(),n.isPause=!0):(n.play(),n.isPause=!1)})),u()(this,"stop",(function(){n.clearAnalyse(),n.sourceNode&&(n.sourceNode.removeEventListener("ended",n.stop,!1),n.sourceNode.disconnect(),n.sourceNode.stop(0)),n.isPlaying=!1})),u()(this,"toggle",(function(){n.isPlaying?n.stop():n.play()})),u()(this,"clearAnalyse",(function(){n.amplitudeArray.fill(0),n.javascriptNode&&(n.analyserNode.disconnect(),n.javascriptNode.disconnect(),n.javascriptNode.removeEventListener("audioprocess",n.onAnalyse,!1))})),u()(this,"onAnalyse",(function(){n.analyserNode.getByteFrequencyData(n.amplitudeArray)})),u()(this,"onError",(function(t){})),u()(this,"setPlaybackRate",(function(t){n.playbackRate=t,n.sourceNode&&(n.sourceNode.playbackRate.value=n.playbackRate)})),u()(this,"setVolume",(function(t){n.volume=t,n.gainNode&&(n.gainNode.gain.value=n.volume)})),u()(this,"getAmplitudes",(function(){return n.amplitudeArray})),u()(this,"getFrequencyLength",(function(){return n.analyserNode.frequencyBinCount})),u()(this,"getIsPlaying",(function(){return n.isPlaying})),u()(this,"getIsPause",(function(){return n.isPause}));var i=window.AudioContext||window.webkitAudioContext;this.support=!!i;try{this.audioContext=new i}catch(t){this.support=!1}this.audioData=null,this.playbackRate=1,this.playMultiple=!1,this.isPlaying=!1,this.isPause=!0,this.isMute=!0,this.isLoop=!0,this.volume=.5,this.setup(e)}return s()(t,[{key:"setup",value:function(t){this.support&&(this.audioContext.decodeAudioData(t,this.saveData,this.onError),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.gainNode.connect(this.audioContext.destination),this.sampleSize=1024,this.javascriptNode=this.audioContext.createScriptProcessor(this.sampleSize,1,1),this.analyserNode=this.audioContext.createAnalyser(),this.amplitudeArray=new Uint8Array(this.analyserNode.frequencyBinCount))}},{key:"play",value:function(){this.audioData&&(!this.playMultiple&&this.isPlaying&&this.stop(),this.sourceNode=this.audioContext.createBufferSource(),this.sourceNode.playbackRate.value=this.playbackRate,this.sourceNode.buffer=this.audioData,this.sourceNode.loop=this.isLoop,this.sourceNode.connect(this.gainNode),this.setupAnalyse(),this.sourceNode.addEventListener("ended",this.stop,!1),this.sourceNode.start(0),this.isPlaying=!0)}},{key:"setupAnalyse",value:function(){this.sourceNode.connect(this.analyserNode),this.analyserNode.connect(this.javascriptNode),this.javascriptNode.connect(this.audioContext.destination),this.javascriptNode.addEventListener("audioprocess",this.onAnalyse,!1)}},{key:"getSupport",value:function(){return this.support}}]),t}()},60760:(t,e,n)=>{"use strict";n(34575),n(93913),n(59713)},55534:(t,e,n)=>{"use strict";n(34575),n(93913),n(59713)},92613:(t,e,n)=>{"use strict";n(34575),n(93913),n(59713)},41262:(t,e,n)=>{"use strict";n(34575),n(93913),n(59713)},90324:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(23645),r=n.n(i)()((function(t){return t[1]}));r.push([t.id,"#deform {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  --project-color: #e666ff;\n}\n\n#deform canvas {\n  display: block;\n  margin: 0 auto;\n  width: auto;\n  height: auto;\n  max-height: 100vh;\n  max-width: 100%;\n}\n\n#deform .play-button {\n  position: absolute;\n  width: 6em;\n  height: 6em;\n  left: 50%;\n  top: 50%;\n  transition: transform 300ms ease-out, opacity 300ms ease-out;\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n  border-radius: 50%;\n  background: #e666ff;\n  z-index: 1;\n  opacity: 0.7;\n}\n\n#deform .play-button[data-play] {\n  opacity: 0.4;\n}\n\n#deform .play-button:hover {\n  opacity: 1;\n  transform: translate3d(-50%, -50%, 0) scale(1);\n}\n\n#deform .play-button:active {\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n}\n\n#deform .play-button[data-play] .play-icon,\n#deform .play-button .pause-icon {\n  display: none;\n}\n\n#deform .play-button[data-play] .pause-icon,\n#deform .play-button .play-icon {\n  display: block;\n}\n\n#deform .play-button svg {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  fill: #333;\n  width: 3em;\n  height: 3em;\n  transform: translate3d(-50%, -50%, 0);\n}\n",""]);const o=r}}]);