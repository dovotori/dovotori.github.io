(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{286:function(t,s,e){"use strict";e.d(s,"a",(function(){return r}));var i=e(1),h=e.n(i),n=e(2),d=e.n(n),r=function(){function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h()(this,t),this.value=s,this.speed=0,this.sampling=e.sampling||.7}return d()(t,[{key:"update",value:function(){this.value+=this.speed,this.speed*=this.sampling}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.speed+=t}}]),t}()},314:function(t,s,e){"use strict";var i=e(1),h=e.n(i),n=e(2),d=e.n(n),r=e(53),a=e(35),o=e(19),u=function(){function t(){h()(this,t),this.d=new Float32Array(8),this.identity()}return d()(t,[{key:"identity",value:function(){return this.d[0]=0,this.d[1]=0,this.d[2]=0,this.d[3]=1,this.d[4]=0,this.d[5]=0,this.d[6]=0,this.d[7]=0,this}},{key:"set",value:function(t,s,e,i,h,n,d,r){return this.d[0]=t,this.d[1]=s,this.d[2]=e,this.d[3]=i,this.d[4]=h,this.d[5]=n,this.d[6]=d,this.d[7]=r,this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this.d[4]+=t.d[4],this.d[5]+=t.d[5],this.d[6]+=t.d[6],this.d[7]+=t.d[7],this}},{key:"translate",value:function(t){var s=this.d[0],e=this.d[1],i=this.d[2],h=this.d[3],n=.5*t[0],d=.5*t[1],r=.5*t[2],a=this.d[4],o=this.d[5],u=this.d[6],c=this.d[7];return this.d[0]=s,this.d[1]=e,this.d[2]=i,this.d[3]=h,this.d[4]=h*n+e*r-i*d+a,this.d[5]=h*d+i*n-s*r+o,this.d[6]=h*r+s*d-e*n+u,this.d[7]=-s*n-e*d-i*r+c,this}},{key:"multiply",value:function(t){var s=this.d[0],e=this.d[1],i=this.d[2],h=this.d[3],n=t.d[4],d=t.d[5],r=t.d[6],a=t.d[7],o=this.d[4],u=this.d[5],c=this.d[6],l=this.d[7],g=t.d[0],f=t.d[1],p=t.d[2],v=t.d[3];return this.d[0]=s*v+h*g+e*p-i*f,this.d[1]=e*v+h*f+i*g-s*p,this.d[2]=i*v+h*p+s*f-e*g,this.d[3]=h*v-s*g-e*f-i*p,this.d[4]=s*a+h*n+e*r-i*d+o*v+l*g+u*p-c*f,this.d[5]=e*a+h*d+i*n-s*r+u*v+l*f+c*g-o*p,this.d[6]=i*a+h*r+s*d-e*n+c*v+l*p+o*f-u*g,this.d[7]=h*a-s*n-e*d-i*r+l*v-o*g-u*f-c*p,this}},{key:"scale",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this.d[4]*=t,this.d[5]*=t,this.d[6]*=t,this.d[7]*=t,this}},{key:"rotateX",value:function(t){var s=-this.d[0],e=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],r=this.d[6],o=this.d[7],u=n*h+o*s+d*i-r*e,c=d*h+o*e+r*s-n*i,l=r*h+o*i+n*e-d*s,g=o*h-n*s-d*e-r*i,f=new a.a(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateX(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),s=f.getX(),e=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*s+c*i-l*e,this.d[5]=c*h+g*e+l*s-u*i,this.d[6]=l*h+g*i+u*e-c*s,this.d[7]=g*h-u*s-c*e-l*i,this}},{key:"rotateY",value:function(t){var s=-this.d[0],e=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],r=this.d[6],o=this.d[7],u=n*h+o*s+d*i-r*e,c=d*h+o*e+r*s-n*i,l=r*h+o*i+n*e-d*s,g=o*h-n*s-d*e-r*i,f=new a.a(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateY(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),s=f.getX(),e=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*s+c*i-l*e,this.d[5]=c*h+g*e+l*s-u*i,this.d[6]=l*h+g*i+u*e-c*s,this.d[7]=g*h-u*s-c*e-l*i,this}},{key:"rotateZ",value:function(t){var s=-this.d[0],e=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],r=this.d[6],o=this.d[7],u=n*h+o*s+d*i-r*e,c=d*h+o*e+r*s-n*i,l=r*h+o*i+n*e-d*s,g=o*h-n*s-d*e-r*i,f=new a.a(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateZ(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),s=f.getX(),e=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*s+c*i-l*e,this.d[5]=c*h+g*e+l*s-u*i,this.d[6]=l*h+g*i+u*e-c*s,this.d[7]=g*h-u*s-c*e-l*i,this}},{key:"rotateAroundAxis",value:function(t,s){if(Math.abs(s)<r.a)return this;var e=Math.hypot(t[0],t[1],t[2]),i=.5*s,h=Math.sin(i),n=h*t[0]/e,d=h*t[1]/e,a=h*t[2]/e,o=Math.cos(i),u=this.d[0],c=this.d[1],l=this.d[2],g=this.d[3];this.d[0]=u*o+g*n+c*a-l*d,this.d[1]=c*o+g*d+l*n-u*a,this.d[2]=l*o+g*a+u*d-c*n,this.d[3]=g*o-u*n-c*d-l*a;var f=this.d[4],p=this.d[5],v=this.d[6],y=this.d[7];return this.d[4]=f*o+y*n+p*a-v*d,this.d[5]=p*o+y*d+v*n-f*a,this.d[6]=v*o+y*a+f*d-p*n,this.d[7]=y*o-f*n-p*d-v*a,this}},{key:"getTranslation",value:function(){var t=this.d[4],s=this.d[5],e=this.d[6],i=this.d[7],h=-this.d[0],n=-this.d[1],d=-this.d[2],r=this.d[3],a=[3];return a[0]=2*(t*r+i*h+s*d-e*n),a[1]=2*(s*r+i*n+e*h-t*d),a[2]=2*(e*r+i*d+t*n-s*h),a}},{key:"toMatrix4",value:function(){var t=[16];return t[0]=1-2*this.d[1]*this.d[1]-2*this.d[2]*this.d[2],t[1]=2*this.d[0]*this.d[1]+2*this.d[3]*this.d[2],t[2]=2*this.d[0]*this.d[2]-2*this.d[3]*this.d[1],t[3]=0,t[4]=2*this.d[0]*this.d[1]-2*this.d[3]*this.d[2],t[5]=1-2*this.d[0]*this.d[0]-2*this.d[2]*this.d[2],t[6]=2*this.d[1]*this.d[2]+2*this.d[3]*this.d[0],t[7]=0,t[8]=2*this.d[0]*this.d[2]+2*this.d[3]*this.d[1],t[9]=2*this.d[1]*this.d[2]-2*this.d[3]*this.d[0],t[10]=1-2*this.d[0]*this.d[0]-2*this.d[1]*this.d[1],t[11]=0,t[12]=2*(-this.d[7]*this.d[0]+this.d[4]*this.d[3]-this.d[5]*this.d[2]+this.d[6]*this.d[1]),t[13]=2*(-this.d[7]*this.d[1]+this.d[4]*this.d[2]+this.d[5]*this.d[3]-this.d[6]*this.d[0]),t[14]=2*(-this.d[7]*this.d[2]-this.d[4]*this.d[1]+this.d[5]*this.d[0]+this.d[6]*this.d[3]),t[15]=1,(new o.a).setFromArray(t)}},{key:"get",value:function(){return this.d}}]),t}();s.a=u},480:function(t,s,e){"use strict";e.d(s,"a",(function(){return a}));var i=e(1),h=e.n(i),n=e(2),d=e.n(n),r=e(65),a=function(){function t(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h()(this,t),this.gl=s,this.fboColorDepth=new r.a(s,e,i,n),this.fboNormal=new r.a(s,e,i,n),this.fboPosition=new r.a(s,e,i,n),this.width=e,this.height=i}return d()(t,[{key:"generateTextures",value:function(t,s){s.setInt("type",0),this.fboColorDepth.start(),t(s),this.fboColorDepth.end(),s.setInt("type",1),this.fboNormal.start(),t(s),this.fboNormal.end(),s.setInt("type",2),this.fboPosition.start(),t(s),this.fboPosition.end()}},{key:"getColorTexture",value:function(){return this.fboColorDepth.getTexture()}},{key:"getDepthTexture",value:function(){return this.fboColorDepth.getDepthTexture()}},{key:"getNormalTexture",value:function(){return this.fboNormal.getTexture()}},{key:"getPositionTexture",value:function(){return this.fboPosition.getTexture()}}]),t}()},543:function(t,s,e){var i=e(99),h=e(544);"string"==typeof(h=h.__esModule?h.default:h)&&(h=[[t.i,h,""]]);var n={insert:"head",singleton:!1};i(h,n);t.exports=h.locals||{}},544:function(t,s,e){"use strict";e.r(s);var i=e(60),h=e.n(i)()(!1);h.push([t.i,"#paysage {\n  text-align: center;\n}\n\n#paysage canvas {\n  display: block;\n  margin: 0 auto;\n  width: auto;\n  height: auto;\n  max-height: 100vh;\n  max-width: 100%;\n}\n",""]),s.default=h},745:function(t,s,e){"use strict";e.r(s),e.d(s,"destroy",(function(){return G}));var i=e(43),h=e.n(i),n=e(61),d=e.n(n),r=e(130),a=e(1),o=e.n(a),u=e(2),c=e.n(u),l=e(10),g=e.n(l),f=e(22),p=e.n(f),v=e(7),y=e.n(v),m=e(8),w=e.n(m),x=e(3),b=e.n(x),k=e(0),M=e.n(k),P=e(132),R=e(19),N=e(286),T=e(52),A=e(314),D=e(29),j=e(73),I=e(480),O=e(118);function Z(t){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=b()(t);if(s){var h=b()(this).constructor;e=Reflect.construct(i,arguments,h)}else e=i.apply(this,arguments);return w()(this,e)}}var _=function(t){y()(e,t);var s=Z(e);function e(t,i,h){var n;return o()(this,e),n=s.call(this,t,i,h),M()(g()(n),"mainRender",(function(t){n.renderFakeShadow(n.mngProg.get("color")),n.mngGltf.get(n.config.MAIN_OBJ).render(t,n.model)})),M()(g()(n),"renderBasiqueForShadow",(function(t){n.renderFakeShadow(t),n.mainRender(t)})),M()(g()(n),"onMouseDrag",(function(t){n.targetX.set(.1*t.relPrevious.x)})),M()(g()(n),"onMouseWheel",(function(t){var s=-t.deltaY;s=Math.min(s,1.2),s=Math.max(s,.8),n.targetZ.set(s)})),n.config.MAIN_PROG=i.MAIN_PROG,n.config.MAIN_OBJ=i.MAIN_OBJ,n.model=new R.a,n.model.identity(),n.targetX=new N.a(0),n.targetZ=new T.a(0,.05),n.fakeShadow=new j.a(t,O.a),n.targetZ.set(1.2),n.buffers=new I.a(n.gl,i.width,i.height,n.canUseDepth()),n}return c()(e,[{key:"update",value:function(t){p()(b()(e.prototype),"update",this).call(this,t),this.targetX.update(),this.targetZ.update(),this.model.identity(),this.model.scale(this.targetZ.get());var s=Object(D.a)(this.targetX.get())+1e-4*t,i=new A.a;i.rotateY(-s),this.model.multiply(i.toMatrix4());var h=this.mngProg.get(this.config.MAIN_PROG),n=new R.a;n.equal(this.camera.getView()).multiply(this.model).inverse(),h.setMatrix("inverseModel",n.get()),this.mngGltf.get(this.config.MAIN_OBJ).update(t)}},{key:"render",value:function(){if(p()(b()(e.prototype),"render",this).call(this),this.canUseDepth()){var t=this.mngProg.get("buffers");this.buffers.generateTextures(this.mainRender,t),this.ssao.compute(this.buffers.getDepthTexture().get());var s=this.getLampe(0);this.shadow.start(s),this.mainRender(this.shadow.getProgram()),this.shadow.end(),this.shadow.setBrightContrast(0,4),this.shadow.setBlur(),this.postProcess.start(),this.mainRender(this.mngProg.get(this.config.MAIN_PROG)),this.postProcess.end(),this.postProcess.setCompose(this.ssao.getTexture().get(),this.shadow.getTexture().get(),this.buffers.getDepthTexture().get()),this.postProcess.setFxaa2(),this.postProcess.render()}else this.mainRender(this.mngProg.get(this.config.MAIN_PROG))}},{key:"renderFakeShadow",value:function(t){var s=new R.a;s.identity(),s.rotate(-90,1,0,0),s.translate(.2,-7,0),s.scale(8.1,1,6),s.multiply(this.model),t.setMatrix("model",s.get()),t.setVector("color",[0,0,0,.9]),this.fakeShadow.render(t.get())}}]),e}(P.a),X="paysage",C="paysage",Y={slug:"paysage",MAIN_PROG:X,MAIN_OBJ:C,shaders:["/camera/basique3d.js","/camera/color.js","/camera/".concat(X,".js"),"/screen/fxaa.js","/screen/fxaa2.js","/screen/screen.js","/camera/buffers.js","/screen/brightcontrast.js","/screen/ssao.js","/screen/blurOnePass.js","/screen/compose.js","/screen/bloom.js","/camera/shadow.js"],postprocess:{ssao:{radius:2,strength:1,blur:{size:1e-6,intensity:.6}},shadow:{epsilon:1e-4,lighten:.1,blur:{size:.1,intensity:1}}},useDepthTexture:!0,assets:["/gltf/".concat(C,".gltf")],camera:{position:{x:-14,y:8,z:14},target:{x:0,y:-2,z:0},near:1,far:40,angle:90},lampes:[{type:0,position:{x:10,y:20,z:10},ambiant:[1,.8,.6],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:2e3,ortho:{left:-17,right:17,bottom:-15,top:15},near:10,far:50},{type:0,position:{x:-14,y:20,z:-14},ambiant:[.8,.6,1],diffuse:[.6,.5,.8],specular:[.8,.7,1],brillance:10,radius:10,direction:[0,0,1],strength:2e3}],mouse:{events:["drag","wheel"]},canvas:{width:1024,height:1024}},B=(e(543),null),G=(s.default=d()(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B=new r.a,t.next=3,B.setup(_,Y);case 3:document.querySelector("#".concat(Y.slug)).appendChild(B.getCanvas());case 5:case"end":return t.stop()}}),t)}))),function(){B&&B.destroy&&B.destroy()})}}]);