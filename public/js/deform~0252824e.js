(window.webpackJsonp=window.webpackJsonp||[]).push([[107,146,150,154],{116:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(73),u=n(118),l=function(){function t(e){i()(this,t),this.gl=e,this.objet=new s.a(e,u.a)}return a()(t,[{key:"render",value:function(t){this.gl.disable(this.gl.CULL_FACE),this.objet.render(t),this.gl.enable(this.gl.CULL_FACE)}}]),t}()},130:function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(43),i=n.n(r),o=n(61),a=n.n(o),s=n(1),u=n.n(s),l=n(2),c=n.n(l),h=n(0),f=n.n(h),g=n(139),p=n(151),d=n(140),v=n(152),m=n(141),y=n(153),b=n(142),k=n(54);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=function(){function t(){var e=this;u()(this,t),f()(this,"render",(function(t){e.keyboard&&(e.keyboard.start(),e.scene.setKeyboardInteraction(e.keyboard)),e.scene.update(t),e.scene.render(),e.keyboard&&e.keyboard.end()})),f()(this,"revealAfterLoaded",(function(t){t&&t.querySelectorAll("[style]").forEach((function(t){return t.removeAttribute("style")}))})),this.keyboard=null,this.mouse=null,this.scene=null,this.loop=null}var e;return c()(t,[{key:"setup",value:(e=a()(i.a.mark((function t(e,n){var r,o,a,s,u,l,c,h,w,P,A,R,E=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.body.offsetWidth,o=window.innerHeight,a={},!n){t.next=16;break}if(r=n.canvas.width,o=n.canvas.height,!n.assets){t.next=11;break}return s=new p.a,t.next=10,s.get(n.assets.map((function(t){return Object(k.getEnvPath)(t)})));case 10:a=t.sent;case 11:if(!n.shaders){t.next=16;break}return u=new d.a,t.next=15,u.get(n.shaders);case 15:a.shaders=t.sent;case 16:this.canvas=new v.a,this.canvas.resize({width:r,height:o}),l=x(x({},n),{},{support:this.canvas.getSupport()}),this.scene=new e(this.canvas.getContext(),l,a),c=document.querySelector("#".concat(n.slug)),n&&(n.keyboard&&(this.keyboard=new m.a(n.keyboard)),n.mouse&&(h=n.mouse,w=h.events,P=h.domId,A=w.reduce((function(t,e){return x(x({},t),{},f()({},"callback".concat(Object(k.capitalize)(e)),E.scene["onMouse".concat(Object(k.capitalize)(e))]))}),{}),R=P?document.querySelector("#".concat(P)):c,this.mouse=new b.a(R,A)),n.controls&&(this.controls=new y.a(c,n.controls),c.appendChild(this.controls.getDomItem()),n.controls.ranges&&this.scene.setupControls&&this.scene.setupControls({ranges:this.controls.getRanges()}))),this.revealAfterLoaded(c),this.loop=new g.a,this.loop.setCallback(this.render),this.loop.start();case 26:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"stop",value:function(){this.loop&&this.loop.stop(),this.mouse&&this.mouse.cancel()}},{key:"getCanvas",value:function(){return this.canvas&&this.canvas.get()}},{key:"destroy",value:function(){this.stop(),this.scene&&this.scene.destroy&&this.scene.destroy(),this.controls&&this.controls.destroy()}}]),t}()},137:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(22),u=n.n(s),l=n(7),c=n.n(l),h=n(8),f=n.n(h),g=n(3),p=n.n(g),d=n(25),v=n(19);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var y=function(t){c()(n,t);var e=m(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).target=new d.a(t.target.x,t.target.y,t.target.z),r.matIdentity=new v.a,r.projection=new v.a,r.projection.identity(),r.near=t.near||1,r.far=t.far||100,r.angle=t.angle||50,r.matIdentity.identity(),r.lookAt(),r}return a()(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}}]),n}(n(85).a),b=n(135);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var w=function(t){c()(n,t);var e=k(n);function n(){return i()(this,n),e.apply(this,arguments)}return a()(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),r=t.getZ(),i=new b.a(e,n,r,1),o=new v.a;o.equal(this.view).multiply(this.projection),i.multiplyMatrix(o);var a=i.getX()/i.getW(),s=i.getY()/i.getW();return[a=.5*(a+1),s=.5*(s+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(y),x=n(52);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var A=function(t){c()(n,t);var e=P(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).options=t,r.rotationX=new x.a,r.targetX=new x.a,r.zoomZ=new x.a(.7,.1),r}return a()(n,[{key:"update",value:function(){u()(p()(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(w)},143:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(0),i=n.n(r),o=n(48),a=n.n(o),s=n(1),u=n.n(s),l=n(2),c=n.n(l);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={ambiant:[0,0,0],diffuse:[.5,.5,.5],specular:[1,1,1],emissive:[0,0,0],specDensity:[1],opacity:1},p=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=this.gl.STATIC_DRAW,this.materialProps={},this.steps=this.getSteps(n,i);var o=this.getPoints(n,i);this.stride=0,Object.entries(this.steps).forEach((function(t){null!==t[1]&&(r.stride+=t[1])})),this.vbo=this.gl.createBuffer(),this.count=o.length/this.stride,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(o),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}return c()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo);var n=0;Object.entries(this.steps).forEach((function(r){var i=a()(r,2),o=i[0],s=i[1];void 0!==t.locations[o]&&-1!==t.locations[o]&&(e.gl.enableVertexAttribArray(t.locations[o]),e.gl.vertexAttribPointer(t.locations[o],s,e.gl.FLOAT,!1,4*e.stride,4*n)),null!==e.steps[o]&&(n+=e.steps[o])}))}},{key:"render",value:function(t){this.enable(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.drawArrays(this.modeDessin,0,this.count),this.end()}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}},{key:"getSteps",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={position:3};return t.vt.indices.length>0&&(r.texture=2),t.vn.indices.length>0&&(r.normale=3),n&&t.mat&&Object.keys(t.mat).forEach((function(r){var i=t.mat[r],o=n[i];o&&Object.keys(o).forEach((function(t){void 0===e.materialProps[t]&&(e.materialProps[t]=o[t].length)}))})),f(f({},r),this.materialProps)}},{key:"getPoints",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];return t.v.indices.forEach((function(i,o){var a=3*i;if(r.push(t.v.points[a]),r.push(t.v.points[a+1]),r.push(t.v.points[a+2]),t.vt.indices.length>0){var s=2*t.vt.indices[o];r.push(t.vt.points[s]),r.push(t.vt.points[s+1])}if(t.vn.indices.length>0){var u=3*t.vn.indices[o];r.push(t.vn.points[u]),r.push(t.vn.points[u+1]),r.push(t.vn.points[u+2])}if(n&&t.mat){var l=Object.keys(t.mat).findIndex((function(e,n){var r=Object.keys(t.mat)[n+1];return!r||o>=e&&o<r})),c=t.mat[Object.keys(t.mat)[l]];Object.keys(e.materialProps).forEach((function(t){(n[c]&&n[c][t]||g[t]).forEach((function(t){return r.push(t)}))}))}})),r}}]),t}()},144:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=function(){function t(e,n){i()(this,t),this.gl=e,this.program=this.gl.createProgram(),this.setup(n)}return a()(t,[{key:"setup",value:function(t){this.creerShader("vertex",t.vertex),this.creerShader("fragment",t.fragment),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.createLocations(t),this.gl.useProgram(null)):this.gl.deleteProgram(this.program)}},{key:"creerShader",value:function(t,e){var n=this.gl.createShader("vertex"===t?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?(this.gl.attachShader(this.program,n),this.gl.deleteShader(n)):this.gl.deleteShader(n)}},{key:"createLocations",value:function(t){var e=this;this.program.locations={},t.uniforms.forEach((function(t){e.program.locations[t]=e.gl.getUniformLocation(e.program,t)})),t.attributes.forEach((function(t){e.program.locations[t]=e.gl.getAttribLocation(e.program,t)}))}},{key:"setProjectionView",value:function(t){this.setMatrix("projection",t.getProjection().get()),this.setMatrix("view",t.getView().get())}},{key:"setMatrix",value:function(t,e){this.gl.useProgram(this.program),16===e.length?this.gl.uniformMatrix4fv(this.program.locations[t],!1,e):this.gl.uniformMatrix3fv(this.program.locations[t],!1,e),this.gl.useProgram(null)}},{key:"setInt",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1i(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setTexture",value:function(t,e,n){this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.program.locations[n],t),this.gl.useProgram(null)}},{key:"setFloat",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1f(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setVector",value:function(t,e){switch(this.gl.useProgram(this.program),e.length){default:case 2:this.gl.uniform2fv(this.program.locations[t],e);break;case 3:this.gl.uniform3fv(this.program.locations[t],e);break;case 4:this.gl.uniform4fv(this.program.locations[t],e)}this.gl.useProgram(null)}},{key:"enable",value:function(){this.gl.useProgram(this.program)}},{key:"disable",value:function(){this.gl.useProgram(null)}},{key:"get",value:function(){return this.program}},{key:"getLocations",value:function(){return this.program.locations}}]),t}()},146:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(10),u=n.n(s),l=n(22),c=n.n(l),h=n(7),f=n.n(h),g=n(8),p=n.n(g),d=n(3),v=n.n(d),m=n(0),y=n.n(m),b=n(86),k=n(19);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var x=function(t){f()(n,t);var e=w(n);function n(t,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i()(this,n),o=e.call(this,t,r),y()(u()(o),"removeAnimations",(function(t){return t.map((function(t){var e=t;return e.children&&(e.children=o.removeAnimations(e.children)),o.removeAnim(e)}))})),y()(u()(o),"addJointsAnimations",(function(t,e){t.forEach((function(t){var n=t.animations,r=t.name,i=t.children;n&&(o.animations[r]=o.addAnimations(n,e)),i&&o.addJointsAnimations(i,e)}))})),y()(u()(o),"setProgramSkin",(function(t,e){if(void 0!==t){var n=new k.a;n.identity();var r=o.skins[t].joints;o.setProgramJoints(r,e,n)}})),y()(u()(o),"setProgramJoints",(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach((function(t){var i=t.invMatrix,a=t.children,s=o.handleLocalTransform(t);s.multiply(n);var u=new k.a;u.identity();var l=new k.a;l.setFromArray(i),l.resetScale(),u.multiply(l),u.multiply(s),e.setMatrix("jointMat[".concat(r,"]"),u.get()),a&&o.setProgramJoints(a,e,s,r+1)}))}));var s=r.skins;return s&&(s.forEach((function(t){var e=t.joints;o.addJointsAnimations(e,a)})),o.skins=s.map((function(t){var e=t.joints;return{joints:o.removeAnimations(e)}}))),o}return a()(n,[{key:"renderNode",value:function(t,e,r){var i=this.nodes[t].skin;void 0!==i&&this.setProgramSkin(i,e),c()(v()(n.prototype),"renderNode",this).call(this,t,e,r)}}]),n}(b.a)},149:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(7),u=n.n(s),l=n(8),c=n.n(l),h=n(3),f=n.n(h),g=n(85),p=n(65),d=n(150),v=n(25);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var y=function(t){u()(n,t);var e=m(n);function n(t,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i()(this,n),(o=e.call(this,r)).gl=t,o.fbo=new p.a(o.gl,a,s,u),o.sizeRepere=new v.a(.05,.05,.05),o.repere=new d.a(o.gl),o.repere.update(o.position,o.sizeRepere),o.lookAt(),o}return a()(n,[{key:"start",value:function(){this.fbo.start()}},{key:"end",value:function(){this.fbo.end()}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}},{key:"renderRepere",value:function(t){this.repere.render(t)}},{key:"getDepthTexture",value:function(){return this.fbo.getDepthTexture()}}]),n}(g.a)},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(0),u=n.n(s),l=function(){function t(e){i()(this,t),this.gl=t.checkWebGl(e),this.support={webgl:!1,depthTexture:!1},this.gl&&(this.support.webgl=!0,this.gl.enable(this.gl.DEPTH_TEST),this.gl.clearDepth(1),this.gl.depthFunc(this.gl.LESS),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor(0,0,0,0),this.support.depthTexture=!!this.gl.getExtension("WEBGL_depth_texture"),this.support.drawBuffers=!!this.gl.getExtension("WEBGL_draw_buffers")||!!this.gl.getExtension("GL_EXT_draw_buffers")||!!this.gl.getExtension("EXT_draw_buffers"))}return a()(t,null,[{key:"checkWebGl",value:function(t){for(var e,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=0;r<n.length;r+=1){try{e=t.getContext(n[r],{preserveDrawingBuffer:!0})}catch(t){}if(e)break}return e}}]),a()(t,[{key:"get",value:function(){return this.gl}},{key:"getSupport",value:function(){return this.support}}]),t}(),c=function(){function t(){var e=this;i()(this,t),u()(this,"resize",(function(t){e.canvas.setAttribute("width",t.width),e.canvas.setAttribute("height",t.height)})),this.canvas=document.createElement("canvas"),this.context=new l(this.canvas)}return a()(t,[{key:"get",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context.get()}},{key:"getSupport",value:function(){return this.context.getSupport()}}]),t}()},53:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=1e-6},539:function(t,e,n){var r=n(99),i=n(540);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);t.exports=i.locals||{}},540:function(t,e,n){"use strict";n.r(e);var r=n(60),i=n.n(r)()(!1);i.push([t.i,"#deform {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  --project-color: #e666ff;\n}\n\n#deform canvas {\n  display: block;\n  margin: 0 auto;\n  width: auto;\n  height: auto;\n  max-height: 100vh;\n  max-width: 100%;\n}\n\n#deform .play-button {\n  position: absolute;\n  width: 6em;\n  height: 6em;\n  left: 50%;\n  top: 50%;\n  transition: transform 300ms ease-out, opacity 300ms ease-out;\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n  border-radius: 50%;\n  background: #e666ff;\n  z-index: 1;\n  opacity: 0.7;\n}\n\n#deform .play-button[data-play] {\n  opacity: 0.4;\n}\n\n#deform .play-button:hover {\n  opacity: 1;\n  transform: translate3d(-50%, -50%, 0) scale(1);\n}\n\n#deform .play-button:active {\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n}\n\n#deform .play-button[data-play] .play-icon,\n#deform .play-button .pause-icon {\n  display: none;\n}\n\n#deform .play-button[data-play] .pause-icon,\n#deform .play-button .play-icon {\n  display: block;\n}\n\n#deform .play-button svg {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  fill: #333;\n  width: 3em;\n  height: 3em;\n  transform: translate3d(-50%, -50%, 0);\n}\n",""]),e.default=i},65:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(147),u=n(148),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i()(this,t),this.gl=e,this.buffer=this.gl.createFramebuffer(),this.buffer.width=n,this.buffer.height=r,this.clearColor=[0,0,0,0],this.setup(o,a,s)}return a()(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer);var r=null!==e?e.COLOR_ATTACHMENT0_WEBGL+n:this.gl.COLOR_ATTACHMENT0;this.texture=new s.a(this.gl,this.buffer.width,this.buffer.height),this.texture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,r,this.gl.TEXTURE_2D,this.texture.get(),0),t&&(this.depthTexture=new u.a(this.gl,this.buffer.width,this.buffer.height),this.depthTexture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.get(),0)),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"resize",value:function(t){this.buffer.width=t.width,this.buffer.height=t.height,this.setup()}},{key:"start",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this.gl.viewport(0,0,this.buffer.width,this.buffer.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"end",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"get",value:function(){return this.buffer}},{key:"getTexture",value:function(){return this.texture}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setClearColor",value:function(t,e,n,r){this.clearColor=[t,e,n,r]}}]),t}()},73:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(1),i=n.n(r),o=n(7),a=n.n(o),s=n(8),u=n.n(s),l=n(3),c=n.n(l),h=n(88);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c()(t);if(e){var i=c()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var g=function(t,e){return Object.keys(e).reduce((function(n,r){var i,o,a,s,u=e[r];switch(r){default:case"position":case"next":case"previous":case"normale":case"color":o="VEC3",a=3,i=t.FLOAT,s=new Float32Array(u);break;case"texture":o="VEC2",a=2,i=t.FLOAT,s=new Float32Array(u);break;case"indices":o="SCALAR",a=1,i=t.UNSIGNED_SHORT,s=new Uint16Array(u);break;case"side":o="FLOAT",a=1,i=t.FLOAT,s=new Float32Array(u)}return n[r]={locationKey:r,type:o,values:s,count:u.length/a,componentType:i,size:a},n}),{})},p=function(t){a()(n,t);var e=f(n);function n(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i()(this,n);var a=g(t,r);return e.call(this,t,a,o)}return n}(h.a)},744:function(t,e,n){"use strict";n.r(e),n.d(e,"destroy",(function(){return U}));var r=n(43),i=n.n(r),o=n(61),a=n.n(o),s=n(130),u="deform",l="sphere4",c={slug:"deform",MAIN_PROG:u,MAIN_OBJ:l,shaders:["/camera/basique3d.js","/camera/frequencyCircle.js","/camera/frequencyGrid.js","/camera/".concat(u,".js")],assets:["/obj/".concat(l,".obj"),"/textures/earth.png","/sound/akira.mp3"],camera:{position:{x:0,y:0,z:20},target:{x:0,y:0,z:0},near:1,far:40,angle:40},lampes:[{type:0,position:{x:40,y:40,z:40},ambiant:[1,1,1],diffuse:[1,1,1],specular:[1,1,1],brillance:1},{type:0,position:{x:-40,y:-40,z:40},ambiant:[1,1,1],diffuse:[1,179/255,1],specular:[1,1,1],brillance:1}],mouse:{domId:"deform",events:["drag","wheel","click"]},controls:{fullscreen:{domId:"deform",buttonId:"fullscreen-toggle-btn"},ranges:{volume:{min:0,max:100,value:50},playbackRate:{min:0,max:100,value:50}}},postprocess:!0,useDepthTexture:!0,canvas:{width:1024,height:1024}},h=n(1),f=n.n(h),g=n(2),p=n.n(g),d=n(10),v=n.n(d),m=n(22),y=n.n(m),b=n(7),k=n.n(b),w=n(8),x=n.n(w),P=n(3),A=n.n(P),R=n(0),E=n.n(R),O=n(132),j=n(467),M=n(468),T=n(19),S=n(469),F=n(286),D=n(52),C=n(314),_=n(29),L=n(470),I=n(471);function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A()(t);if(e){var i=A()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var V=function(t){k()(n,t);var e=B(n);function n(t,r,i){var o;f()(this,n),o=e.call(this,t,r,i),E()(v()(o),"setupControls",(function(t){var e=t.ranges;if(o.button=document.querySelector(".play-button"),o.sound=o.mngSound.get("akira"),o.button&&o.button.addEventListener("click",o.togglePlay,!1),o.ranges=e,o.config.controls){var n=o.ranges,r=n.volume,i=n.playbackRate;r.dom.addEventListener("change",o.onChangeVolume,!1),i.dom.addEventListener("change",o.onChangePlaybackRate,!1)}})),E()(v()(o),"togglePlay",(function(){o.sound&&o.button&&(o.sound.togglePause(),o.sound.getIsPause()?o.button.removeAttribute("data-play"):o.button.setAttribute("data-play",!0))})),E()(v()(o),"onChangeVolume",(function(t){o.sound.setVolume(.01*t.target.value)})),E()(v()(o),"onChangePlaybackRate",(function(t){o.sound.setPlaybackRate(.02*t.target.value)})),E()(v()(o),"mainRender",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.setMatrix("model",o.model.get());var n=o.model.getMatrice3x3();n.inverse(),n.transpose(),t.setMatrix("normalMatrix",n.get()),t.setTexture(2,o.texture.get(),"noiseMap"),t.setTexture(3,o.mngTex.get("earth").get(),"colorMap"),e&&t.setTexture(5,e.get(),"displacementMap"),o.mngObj.get(o.config.MAIN_OBJ).render(t.get())})),E()(v()(o),"onMouseDrag",(function(t){o.targetX.set(.1*t.relPrevious.x),o.targetY.set(.1*t.relPrevious.y)})),E()(v()(o),"onMouseWheel",(function(t){var e=-t.deltaY;e=Math.min(e,2),e=Math.max(e,1),o.targetZ.set(e)})),E()(v()(o),"onMouseClick",(function(){o.pulse.set(1e3)})),o.texture=new j.a(t,256,256),o.model=new T.a,o.model.identity(),o.pulse=new S.a(0),o.targetX=new F.a(0),o.targetY=new F.a(0),o.targetZ=new D.a(0,.05),o.mouseCanvasPosition={x:0,y:0};var a=o.mngSound.get("akira").getFrequencyLength();o.uVbo=new L.a(o.gl,a);var s=new Array(a);return s.fill(0),s=s.map((function(t,e){return e})),o.fVbo=new I.a(o.gl,s),o.mngObj.get(o.config.MAIN_OBJ).setModeDessin(o.gl.POINTS),o.targetZ.set(1),o}return p()(n,[{key:"update",value:function(t){y()(A()(n.prototype),"update",this).call(this,t),this.targetX.update(),this.targetY.update(),this.targetZ.update(),this.pulse.update(),this.model.identity();var e=Object(_.a)(this.targetX.get())+5e-4*this.time,r=new C.a;r.rotateY(-e),r.rotateX(-.5),this.model.multiply(r.toMatrix4()),this.model.scale(this.targetZ.get()),this.mngProg.get(this.config.MAIN_PROG).setFloat("time",this.pulse.get())}},{key:"render",value:function(){y()(A()(n.prototype),"render",this).call(this);var t=this.mngSound.get("akira").getAmplitudes(),e=new M.a(this.gl,t);this.mainRender(this.mngProg.get(this.config.MAIN_PROG),e);var r=this.mngProg.get("frequencyCircle");r.setMatrix("projection",this.camera.getProjection().get()),r.setMatrix("view",this.camera.getView().get()),r.setMatrix("model",this.model.get()),r.setInt("length",this.fVbo.getCount()),r.setInt("maxfrequency",256),this.uVbo.start(r.get(),"value",t),this.fVbo.start(r.get(),"index"),this.gl.drawArrays(this.gl.LINE_LOOP,0,this.fVbo.getCount()),this.uVbo.end();var i=this.mngProg.get("frequencyGrid");i.setMatrix("model",this.model.get()),i.setInt("length",this.fVbo.getCount()),i.setInt("maxfrequency",256),this.uVbo.start(i.get(),"value",t),this.fVbo.start(i.get(),"index"),this.uVbo.end()}},{key:"destroy",value:function(){if(this.button&&this.button.addEventListener("click",this.togglePlay,!1),this.ranges){var t=this.ranges,e=t.volume,n=t.playbackRate;e.dom.removeEventListener("change",this.onChangeVolume,!1),n.dom.removeEventListener("change",this.onChangePlaybackRate,!1)}this.sound&&this.sound.stop()}}]),n}(O.a),X=(n(351),n(353),n(537),n(539),null),U=(e.default=a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X=new s.a,t.next=3,X.setup(V,c);case 3:document.querySelector("#".concat(c.slug)).appendChild(X.getCanvas());case 5:case"end":return t.stop()}}),t)}))),function(){X&&X.destroy&&X.destroy()})},85:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(25),u=n(19),l=function(){function t(e){if(i()(this,t),this.position=new s.a(e.position.x,e.position.y,e.position.z),this.target=new s.a(0,0,0),this.view=new u.a,e.ortho){var n=e.ortho,r=n.left,o=n.right,a=n.bottom,l=n.top,c=e.near,h=e.far;this.ortho=new u.a,this.ortho.ortho(r,o,a,l,c,h)}}return a()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==t?t:this.position.getX(),i=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(r,i,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},86:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(48),i=n.n(r),o=n(46),a=n.n(o),s=n(27),u=n.n(s),l=n(49),c=n.n(l),h=n(1),f=n.n(h),g=n(10),p=n.n(g),d=n(7),v=n.n(d),m=n(8),y=n.n(m),b=n(3),k=n.n(b),w=n(0),x=n.n(w),P=n(89),A=n(35),R=n(19),E=n(145),O=n(87),j=n(29);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var i=k()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var T=function(t){v()(n,t);var e=M(n);function n(t,r){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f()(this,n),o=e.call(this,t,r),x()(p()(o),"removeAnim",(function(t){t.animations;return c()(t,["animations"])})),x()(p()(o),"addAnimations",(function(t,e){var n={};return t.forEach((function(t){var r=t.path,i=t.times,s=t.output,l=t.interpolation,c=null!==e?s[e]:s[0];"rotation"===r&&(c=a()(A.a,u()(c)).toMatrix4()),o.animationInterval[1]=Math.max.apply(Math,u()(i).concat([o.animationInterval[1]])),n[r]={output:s,sample:new E.a(i,l,o.speedAnimation),customStep:e,value:c}})),n})),x()(p()(o),"getAnimationInterval",(function(t){var e=0;return t.forEach((function(t){var n=t.animations;n&&n.forEach((function(t){var n=t.times;e=Math.max.apply(Math,u()(n).concat([e]))}))})),[0,e]})),x()(p()(o),"update",(function(t){var e=t-o.lastFrame;e>o.animationInterval[1]*o.speedAnimation&&(o.lastFrame=t),o.updateAnimations(e)})),x()(p()(o),"updateAnimations",(function(t){Object.keys(o.animations).forEach((function(e){var n=o.animations[e];Object.keys(n).forEach((function(e){n[e]="rotation"===e?o.updateQuat(n[e],t):o.updateVector(n[e],t)}))}))})),x()(p()(o),"updateVector",(function(t,e){var n=t,r=n.sample,o=n.customStep,a=n.output;if(null===o){r.update(e);var s=r.getIndex();if(0===s){var u=i()(a,1);n.value=u[0]}else if(s>a.length-1)n.value=a[a.length-1];else{var l=a[s-1],c=a[s],h=r.get();n.value=l.map((function(t,e){return Object(O.a)(h,t,c[e])}))}}else n.value=a[o];return n})),x()(p()(o),"updateQuat",(function(t,e){var n=t,r=n.sample,i=n.customStep,o=n.output;if(null===i){r.update(e);var s=r.getIndex();if(0===s)n.value=a()(A.a,u()(o[0])).toMatrix4();else if(s>o.length-1)n.value=a()(A.a,u()(o[o.length-1])).toMatrix4();else{var l=o[s-1],c=o[s],h=r.get();n.value=A.a.slerpArray(l,c,h).toMatrix4()}}else n.value=a()(A.a,u()(o[i])).toMatrix4();return n})),x()(p()(o),"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,r=t.scale,i=t.matrix,a=t.name,s=o.animations[a],l=s&&s.rotation||null,c=s&&s.translation||null,h=s&&s.scale||null,f=new R.a;return f.identity(),(r||h)&&f.scale.apply(f,u()(o.getVector(r,h))),(n||l)&&f.multiply(o.getRotationMat(n,l)),(e||c)&&f.translate.apply(f,u()(o.getVector(e,c))),i&&f.multiplyArray(i),f})),x()(p()(o),"setAnimationStep",(function(t,e,n){var r=o.animations[t][e],i=r.output.length,a=Object(j.b)(n,0,1,0,i-1);r.customStep=Math.round(a)})),x()(p()(o),"setAnimationSpeed",(function(t,e,n){o.animations[t][e].sample.setSpeed(n)})),x()(p()(o),"getVector",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:t})),x()(p()(o),"getRotationMat",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:a()(A.a,u()(t)).toMatrix4()}));var l=r.nodes;return o.speedAnimation=2e3,o.animationInterval=[0,0],o.animations=l.reduce((function(t,e){var n=e.animations,r=e.name;return n&&(t[r]=o.addAnimations(n,s)),t}),{}),o.nodes=l.reduce((function(t,e){return t[e.name]=o.removeAnim(e),t}),{}),o.lastFrame=0,o}return n}(P.a)},89:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(46),i=n.n(r),o=n(27),a=n.n(o),s=n(1),u=n.n(s),l=n(2),c=n.n(l),h=n(0),f=n.n(h),g=n(88),p=n(138),d=function(){function t(e,n){var r=n.vbos,i=n.material,o=void 0===i?{}:i;u()(this,t),this.material=o,this.objet=new g.a(e,r),o.normalMap&&(this.normalMap=new p.a(e,o.normalMap.data))}return c()(t,[{key:"render",value:function(t){var e=this.material,n=e.color,r=e.metal,i=e.rough,o=e.ao;t.setVector("color",n||[1,1,1,1]),t.setFloat("metal",void 0!==r?r:0),t.setFloat("rough",void 0!==i?i:.5),t.setFloat("ao",void 0!==o?o:1),this.objet.render(t.get())}},{key:"setModeDessin",value:function(t){this.objet.setModeDessin(t)}},{key:"setModeCalcul",value:function(t){this.objet.setModeCalcul(t)}}]),t}(),v=n(35),m=n(19);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=function(){function t(e,n){var r=this;u()(this,t),f()(this,"formatPrimitives",(function(t,e){return e.map((function(e){var n=e.vbos,r=e.material;return new d(t,{vbos:n,material:r})}))})),f()(this,"handleLocalTransform",(function(t){var e=t.translation,n=t.rotation,r=t.scale,o=t.matrix,s=new m.a;return s.identity(),r&&s.scale.apply(s,a()(r)),n&&s.multiply(i()(v.a,a()(n)).toMatrix4()),e&&s.translate.apply(s,a()(e)),o&&s.multiplyArray(o),s}));var o=n.nodes,s=n.meshes,l=n.materials;this.meshes=s.map((function(t){var n=t.primitives,i=t.name,o=void 0===i?"":i,a=t.weights,s=n.map((function(t){return void 0!==t.material?b(b({},t),{},{material:l[t.material]}):t}));return{name:o,primitives:r.formatPrimitives(e,s),weights:a}})),this.nodes=o}return c()(t,[{key:"render",value:function(t,e){var n=this;Object.keys(this.nodes).forEach((function(r){n.renderNode(r,t,e)}))}},{key:"renderNode",value:function(t,e,n){var r=this.nodes[t],i=r.mesh,o=this.handleLocalTransform(r);o.multiply(n),e.setMatrix("model",o.get()),o.resetTranslate();var a=o.getMatrice3x3();a.inverse(),a.transpose(),e.setMatrix("normalMatrix",a.get()),this.meshes[i].primitives.forEach((function(t){return t.render(e)}))}}]),t}()}}]);