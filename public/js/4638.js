(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[4638],{66160:(t,e,i)=>{"use strict";i.d(e,{Z:()=>M});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o),u=i(16525),a=i.n(u),c=i(2205),h=i.n(c),l=i(78585),d=i.n(l),f=i(29754),p=i.n(f),g=i(25773),v=i(21969);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var y=function(t){h()(i,t);var e=m(i);function i(t){var n;return r()(this,i),(n=e.call(this,t)).target=new g.Z(t.target.x,t.target.y,t.target.z),n.matIdentity=new v.Z,n.projection=new v.Z,n.projection.identity(),n.near=t.near||1,n.far=t.far||100,n.angle=t.angle||50,n.matIdentity.identity(),n.lookAt(),n}return s()(i,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new v.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),i}(i(44254).Z),w=i(66605);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var k=function(t){h()(i,t);var e=b(i);function i(){return r()(this,i),e.apply(this,arguments)}return s()(i,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),i=t.getY(),n=t.getZ(),r=new w.Z(e,i,n,1),o=new v.Z;o.equal(this.view).multiply(this.projection),r.multiplyMatrix(o);var s=r.getX()/r.getW(),u=r.getY()/r.getW();return[s=.5*(s+1),u=.5*(u+1)]}},{key:"get2dScreenPoint",value:function(t,e){var i=this.get2dTexturePoint(t);return[i[0]*e.width,i[1]*e.height]}}]),i}(y),Z=i(47313);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var M=function(t){h()(i,t);var e=P(i);function i(t){var n;return r()(this,i),(n=e.call(this,t)).options=t,n.rotationX=new Z.Z,n.targetX=new Z.Z,n.zoomZ=new Z.Z(.7,.1),n}return s()(i,[{key:"update",value:function(){a()(p()(i.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),i}(k)},44254:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o),u=i(25773),a=i(21969),c=function(){function t(e){if(r()(this,t),this.position=new u.Z(e.position.x,e.position.y,e.position.z),this.target=new u.Z(0,0,0),this.view=new a.Z,e.ortho){var i=e.ortho,n=i.left,o=i.right,s=i.bottom,c=i.top,h=e.near,l=e.far;this.ortho=new a.Z,this.ortho.ortho(n,o,s,c,h,l)}}return s()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,i){this.position.addXYZ(t,e,i),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null!==t?t:this.position.getX(),r=null!==e?e:this.position.getY(),o=null!==i?i:this.position.getZ();this.position.set(n,r,o),this.lookAt()}},{key:"setTarget",value:function(t,e,i){this.target.set(t,e,i)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},47313:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;r()(this,t),this.value=e,this.target=e,this.sampling=i,this.threshold=1e-6}return s()(t,[{key:"update",value:function(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.target=t}},{key:"setDirect",value:function(t){this.value=t}}]),t}()},66605:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o);const u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r()(this,t),this.d=[0,0,0,0],this.set(e,i,n,o)}return s()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"getW",value:function(){return this.d[3]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}},{key:"set",value:function(t,e,i,n){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=i?this.d[2]=i:null!=t&&(this.d[2]=t),null!=n?this.d[3]=n:null!=t&&(this.d[3]=t),this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}},{key:"multiplyMatrix",value:function(t){var e=this.d[0],i=this.d[1],n=this.d[2],r=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*i+t.d[8]*n+t.d[12]*r,this.d[1]=t.d[1]*e+t.d[5]*i+t.d[9]*n+t.d[13]*r,this.d[2]=t.d[2]*e+t.d[6]*i+t.d[10]*n+t.d[14]*r,this.d[3]=t.d[3]*e+t.d[7]*i+t.d[11]*n+t.d[15]*r,this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}]),t}()},94281:(t,e,i)=>{"use strict";i.d(e,{Eu:()=>r,H$:()=>o});var n=i(68763),r=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.startX,o=void 0===r?-1:r,s=i.endX,u=void 0===s?1:s,a=i.startZ,c=void 0===a?-1:a,h=i.endZ,l=void 0===h?1:h,d=[],f=0;f<e;f++)for(var p=(0,n.Yp)(f,0,e-1,c,l),g=0;g<t;g++){var v=(0,n.Yp)(g,0,t-1,o,u);d.push(v),d.push(0),d.push(p)}return d},o=function(t,e){for(var i=[],n=0;n<e-1;n++)for(var r=0;r<t-1;r++){var o=n*t+r;i.push(o),i.push(t+o),i.push(o+1),i.push(t+o),i.push(t+o+1),i.push(o+1)}return i}},3022:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o),u=i(16525),a=i.n(u),c=i(2205),h=i.n(c),l=i(78585),d=i.n(l),f=i(29754),p=i.n(f),g=i(20748),v=i(66160);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p()(t);if(e){var r=p()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d()(this,i)}}var y=function(t){h()(i,t);var e=m(i);function i(t,n,o){var s;return r()(this,i),(s=e.call(this,t,n,o)).camera=new v.Z(n.camera),s.camera.perspective(s.containerSize.width,s.containerSize.height),s}return s()(i,[{key:"resize",value:function(t){a()(p()(i.prototype),"resize",this).call(this,t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}},{key:"update",value:function(t){a()(p()(i.prototype),"update",this).call(this,t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}]),i}(g.Z)},77505:(t,e,i)=>{"use strict";i.d(e,{ve:()=>r,oo:()=>o});var n=function(t,e,i){var n=i;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},r=function(t,e,i){var r,o,s,u=t/360,a=e/100,c=i/100;if(0===a)r=c,o=c,s=c;else{var h=c<.5?c*(1+a):c+a-c*a,l=2*c-h;r=n(l,h,u+1/3),o=n(l,h,u),s=n(l,h,u-1/3)}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*s)}},o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},64740:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(34575),r=i.n(n),o=i(93913),s=i.n(o),u=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r()(this,t),this.size=e,this.seed=i?t.getFixedSeedNoise(this.size):t.getGenerateNoise(this.size)}return s()(t,[{key:"get",value:function(t,e){for(var i=0,n=this.size;n>=1;)i+=this.smoothNoise(t/n,e/n,this.seed)*n,n/=2;return.5*i/this.size}},{key:"smoothNoise",value:function(t,e,i){var n=t-Math.floor(t),r=e-Math.floor(e),o=(Math.floor(t)+this.size)%this.size,s=(Math.floor(e)+this.size)%this.size,u=(o+this.size-1)%this.size,a=(s+this.size-1)%this.size,c=0;return c+=n*r*i[o][s],c+=n*(1-r)*i[o][a],c+=(1-n)*r*i[u][s],c+=(1-n)*(1-r)*i[u][a]}}],[{key:"getGenerateNoise",value:function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var n=0;n<t;n+=1)e[i][n]=Math.random()}return e}},{key:"getFixedSeedNoise",value:function(t){for(var e=new Array(t),i=0,n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=u[i]/256,i+=1}return e}}]),t}()},88390:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>wt,destroy:()=>bt});var n=i(87757),r=i.n(n),o=i(48926),s=i.n(o),u=i(67328),a=i(319),c=i.n(a),h=i(34575),l=i.n(h),d=i(93913),f=i.n(d),p=i(81506),g=i.n(p),v=i(16525),m=i.n(v),y=i(2205),w=i.n(y),b=i(78585),k=i.n(b),Z=i(29754),P=i.n(Z),M=i(59713),x=i.n(M),N=i(3022),R=i(21200),Y=i(69100),D=i.n(Y),S=i(80602),I=i(25773),X=function t(e){var i=this,n=e.spring,r=e.friction;l()(this,t),x()(this,"update",(function(t,e){var n=D()(I.Z,c()(t)),r=D()(I.Z,c()(e)).minus(n).multiplyNumber(i.spring);return i.velocity.add(r).multiplyNumber(i.friction),n.add(i.velocity).get()})),this.spring=n,this.friction=r,this.velocity=new I.Z},z=function(t){return t.reduce((function(t,e){return[].concat(c()(t),c()(e))}),[])},A=function(t){var e=t.length;if(e>1){var i=[],n=[],r=[];return t.forEach((function(o,s){i=[].concat(c()(i),c()(o),c()(o));var u=[];if(0===s){var a=t[1];u=[o[0]+a[0]-o[0],o[1]+a[1]-o[1],o[2]+a[2]-o[2]]}else u=t[s-1];r=[].concat(c()(r),c()(u),c()(u));var h=[];if(e-1){var l=t[e-2];h=[o[0]+l[0]-o[0],o[1]+l[1]-o[1],o[2]+l[2]-o[2]]}else h=t[s+1];n=[].concat(c()(n),c()(h),c()(h))})),{position:i,next:n,previous:r}}return{position:z(t)}},j=function(){function t(e,i,n){var r=this,o=n.spring,s=n.friction;l()(this,t),x()(this,"init",(function(t){r.points.fill(t)}));var u=function(t){return new Array(t).fill([0,0,0])}(i),a=A(u),h={position:a.position,next:a.next,previous:a.previous,indices:Array(2*(i-1)).fill().reduce((function(t,e,i){return[].concat(c()(t),i%2==0?[i,i+1,i+2]:[i,i+2,i+1])}),[]),side:function(t){var e=new Float32Array(2*t);return Array(t).fill().forEach((function(t,i){e.set([-1,1],2*i)})),e}(i),texture:function(t){var e=[];return Array(t).fill().forEach((function(i,n){e=[].concat(c()(e),[n/t,0,n/t,1])})),e}(i)};this.vbo=new S.Z(e,h,!0),this.spring=new X({spring:o,friction:s}),this.points=u}return f()(t,[{key:"update",value:function(t){var e=this;this.points=this.points.map((function(i,n){var r=i;return r=0===n?e.spring.update(i,[t.x,t.y,0]):e.points[n-1],I.Z.lerp(D()(I.Z,c()(i)),D()(I.Z,c()(r)),0===n?.9999:.8).get()}));var i=A(this.points);this.vbo.update(i)}},{key:"render",value:function(t){this.vbo.render(t)}}]),t}(),T=i(77505),E=function(){function t(e){var i=this;l()(this,t),x()(this,"onMouseDrag",(function(t){i.mousePos=t.rel,i.weight=.01*t.speed})),x()(this,"onMouseDown",(function(t){i.mousePos=t.rel,i.lines.forEach((function(e){return e.init([t.rel.x,t.rel.y,0])}))})),this.colors=["#e09f7d","#ef5d60","#ec4067","#a01a7d","#311847"].map((function(t){var e=(0,T.oo)(t);return[e.r/255,e.g/255,e.b/255]})),this.lines=this.colors.map((function(t,i){return new j(e,20,{spring:.06*i,friction:.85+.02*i})})),this.mousePos={x:0,y:0},this.weight=0}return f()(t,[{key:"update",value:function(t){var e=this;t.setFloat("time",this.time),this.lines.forEach((function(t){return t.update(e.mousePos)}))}},{key:"render",value:function(t){var e=this;t.setFloat("weight",this.weight),this.lines.forEach((function(i,n){t.setVector("color",e.colors[n]),i.render(t.get())}))}}]),t}(),O=i(68763),q=-1,F=-1,C=-1,V=function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,t),x()(this,"update",(function(){e.withSlowDown&&e.slowDown(),e.withRebond?e.rebond():e.withRespawn&&e.respawn(),e.position.add(e.speed)})),x()(this,"slowDown",(function(){e.speed.multiplyNumber(e.damping)})),x()(this,"rebond",(function(){(e.position.getX()<q||e.position.getX()>1)&&e.speed.multiplyX(-1),(e.position.getY()<F||e.position.getY()>1)&&e.speed.multiplyY(-1),(e.position.getZ()<C||e.position.getZ()>1)&&e.speed.multiplyZ(-1)})),x()(this,"respawn",(function(){e.position.getX()<q?e.position.setX(1):e.position.getX()>1&&e.position.setX(q),e.position.getY()<F?e.position.setY(1):e.position.getY()>1&&e.position.setY(F),e.position.getZ()<C?e.position.setZ(1):e.position.getZ()>1&&e.position.setZ(C)})),x()(this,"setPosition",(function(t,i,n){e.position.set(t,i,n)})),x()(this,"setSpeed",(function(t,i,n){e.speed.set(t,i,n)})),x()(this,"getPosition",(function(){return e.position})),x()(this,"getSpeed",(function(){return e.speed})),this.position=new I.Z(0,0,0),this.speed=new I.Z(0,0,0),this.withRebond=!!i.withRebond,this.withSlowDown=!!i.withSlowDown,this.withRespawn=!!i.withRespawn,this.damping=i.damping||.9};function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=P()(t);if(e){var r=P()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return k()(this,i)}}var L=function(t){w()(i,t);var e=G(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l()(this,i),t=e.call(this,n),x()(g()(t),"attract",(function(e){var i=(new I.Z).equal(t.position).minus(e.getPosition()),n=i.length();if(n>0&&n<t.radius){var r=n/t.radius,o=1/Math.pow(r,.5*t.ramp)-1;o=t.strength*o/t.radius,i=i.multiplyNumber(o),e.setSpeed.apply(e,c()(e.speed.add(i).get()))}})),x()(g()(t),"setRadius",(function(e){t.radius=e})),x()(g()(t),"setStrength",(function(e){t.strength=e})),x()(g()(t),"setRamp",(function(e){t.ramp=e})),t.radius=.5,t.strength=.1,t.ramp=.2,t}return i}(V),_=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1?arguments[1]:void 0;l()(this,t),x()(this,"update",(function(){e.attractor.update(),e.nodes.forEach((function(t){e.attractor.attract(t),t.update()}))})),x()(this,"placeNodes",(function(){for(var t=0,i=0;i<e.nbColumns;i++)for(var n=0;n<e.nbRows;n++){var r=(0,O.Yp)(n,0,e.nbRows-1,-1,1),o=(0,O.Yp)(i,0,e.nbColumns-1,-1,1);e.nodes[t].setPosition(r,o,0),t++}})),this.nbRows=i,this.nbColumns=n||i,this.nodes=Array.from({length:this.nbRows*this.nbColumns},(function(){return new V({withRebond:!0,withSlowDown:!1})})),this.attractor=new L,this.attractor.setPosition(0,0,0),this.placeNodes()}return f()(t,[{key:"getPositions",value:function(){return this.nodes.reduce((function(t,e){return[].concat(c()(e.getPosition().get()),c()(t))}),[])}}]),t}();function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=P()(t);if(e){var r=P()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return k()(this,i)}}var W=.01,$=.1,H=.02,U=function(t){w()(i,t);var e=B(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,i),t=e.call(this,n),x()(g()(t),"seek",(function(e){return(new I.Z).equal(e).minus(t.position).multiplyNumber(W).normalise()})),x()(g()(t),"seekSteering",(function(e){var i=t.seek(e);return(new I.Z).equal(i).minus(t.speed).limiter($).divideNumber(10).add(t.speed).limiter(W)})),x()(g()(t),"seekSteeringArrival",(function(e){var i=(new I.Z).equal(e).minus(t.position),n=i.length();if(n<H){var r=W*(n/H);i.normalise().multiplyNumber(r)}else i.normalise().multiplyNumber(W);return(new I.Z).equal(i).minus(t.speed).limiter($).add(t.speed)})),x()(g()(t),"flee",(function(e){return(new I.Z).equal(t.seek(e)).multiplyNumber(-1)})),x()(g()(t),"fleeSteering",(function(e){return(new I.Z).equal(t.seekSteering(e)).multiplyNumber(-1)})),x()(g()(t),"updateMigration",(function(e){t.defineAcceleration(e),t.speed.add(t.acceleration).limiter(W),t.acceleration.set(0,0,0)})),x()(g()(t),"defineAcceleration",(function(e){var i=new I.Z,n=0,r=new I.Z,o=0,s=new I.Z,u=0;e.forEach((function(e){var a=t.position.distance(e.getPosition());if(a>0){if(a<.1){var c=(new I.Z).equal(t.position).minus(e.getPosition());c.normalise(),c.divideNumber(a),i.add(c),n++}a<.3&&(r.add(e.getSpeed()),o++),a<.5&&(s.add(e.getPosition()),u++)}})),n>0&&i.divideNumber(n),i.length()>0&&(i.normalise().multiplyNumber(W),i.minus(t.speed).limiter($)),o>0&&(r.divideNumber(o).normalise().multiplyNumber(W),r.minus(t.speed).limiter($)),u>0&&(s.divideNumber(u),s=t.seekSteering(s)),i.multiplyNumber(1.5);var a=(new I.Z).equal(i).add(r).add(s).divideNumber(10);t.acceleration=t.acceleration.add(a)})),t.acceleration=new I.Z(0,0,0);var r=(0,O.MX)(0,Math.PI);return t.speed.set(Math.cos(r),Math.sin(r),0),t}return i}(V),J=function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;l()(this,t),x()(this,"update",(function(){e.birds.forEach((function(t){t.updateMigration(e.birds),t.update()}))})),x()(this,"getPositions",(function(){return e.birds.reduce((function(t,e){return[].concat(c()(e.getPosition().get()),c()(t))}),[])})),this.birds=Array.from({length:i},(function(){return new U({withRespawn:!0})}))},K=i(91215),Q=i(77626),tt=i(64740),et=function(t,e){for(var i=[],n=0;n<e;n++)for(var r=0;r<t;r++){var o=(0,O.Yp)(r,0,t-1,0,1),s=(0,O.Yp)(n,0,e-1,0,1);i.push(o),i.push(s)}return i};function it(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach((function(e){x()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var rt=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3?arguments[3]:void 0;l()(this,t),x()(this,"addDataTexture",(function(t,e){i.textures=nt(nt({},i.textures),{},x()({},t,new K.Z(i.gl,new Uint8Array(e))))})),this.gl=e,this.screen=new R.Z(e),this.fbo=new Q.Z(e,n,r);var s=et(n,r);this.vbo=new S.Z(e,{texture:s}),this.vbo.setModeDessin(o||e.POINTS),this.textures={}}return f()(t,[{key:"compute",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object.keys(this.textures).forEach((function(i,n){t.setTexture(n,e.textures[i].get(),i)})),t.setFloat("time",i),this.fbo.start(),this.screen.render(t.get()),this.fbo.end()}},{key:"render",value:function(t){t.setTexture(0,this.fbo.getTexture().get(),"textureMap"),this.vbo.render(t.get())}}]),t}(),ot=i(63038),st=i.n(ot),ut=1/1048576,at=function(t,e,i,n){var r,o,s,u,a,c,h,l,d=st()(t[e],2),f=d[0],p=d[1],g=st()(t[i],2),v=g[0],m=g[1],y=st()(t[n],2),w=y[0],b=y[1],k=Math.abs(p-m),Z=Math.abs(m-b);if(k<ut&&Z<ut)throw new Error("Eek! Coincident points!");k<ut?o=(u=-(w-v)/(b-m))*((r=(v+f)/2)-(c=(v+w)/2))+(l=(m+b)/2):Z<ut?o=(s=-(v-f)/(m-p))*((r=(w+v)/2)-(a=(f+v)/2))+(h=(p+m)/2):(r=((s=-(v-f)/(m-p))*(a=(f+v)/2)-(u=-(w-v)/(b-m))*(c=(v+w)/2)+(l=(m+b)/2)-(h=(p+m)/2))/(s-u),o=k>Z?s*(r-a)+h:u*(r-c)+l);var P=v-r,M=m-o;return{i:e,j:i,k:n,x:r,y:o,r:P*P+M*M}},ct=function(t){var e,i,n,r,o,s;for(i=t.length;i;)for(r=t[--i],n=t[--i],e=i;e;)if(s=t[--e],n===(o=t[--e])&&r===s||n===s&&r===o){t.splice(i,2),t.splice(e,2);break}};const ht={triangulate:function(t,e){var i,n,r,o,s,u=t.length;if(u<3)return[];var a=t.slice(0);if(e)for(var c=u;c--;)a[c]=a[c][e];for(var h=new Array(u),l=u;l--;)h[l]=l;h.sort((function(t,e){return a[e][0]-a[t][0]}));var d=function(t){for(var e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=t.length;o--;){var s=st()(t[o],2),u=s[0],a=s[1];u<e&&(e=u),u>n&&(n=u),a<i&&(i=a),a>r&&(r=a)}var c=n-e,h=r-i,l=Math.max(c,h),d=e+.5*c,f=i+.5*h;return[[d-20*l,f-l],[d,f+20*l],[d+20*l,f-l]]}(a);a.push(d[0],d[1],d[2]);for(var f=[at(a,u+0,u+1,u+2)],p=[],g=[],v=h.length;v--;g.length=0){s=h[v];for(var m=f.length;m--;)(i=a[s][0]-f[m].x)>0&&i*i>f[m].r?(p.push(f[m]),f.splice(m,1)):i*i+(n=a[s][1]-f[m].y)*n-f[m].r>ut||(g.push(f[m].i,f[m].j,f[m].j,f[m].k,f[m].k,f[m].i),f.splice(m,1));ct(g);for(var y=g.length;y;)o=g[--y],r=g[--y],f.push(at(a,r,o,s))}for(var w=f.length;w--;)p.push(f[w]);f.length=0;for(var b=p.length;b--;)p[b].i<u&&p[b].j<u&&p[b].k<u&&f.push(p[b].i,p[b].j,p[b].k);return f},contains:function(t,e){if(e[0]<t[0][0]&&e[0]<t[1][0]&&e[0]<t[2][0]||e[0]>t[0][0]&&e[0]>t[1][0]&&e[0]>t[2][0]||e[1]<t[0][1]&&e[1]<t[1][1]&&e[1]<t[2][1]||e[1]>t[0][1]&&e[1]>t[1][1]&&e[1]>t[2][1])return null;var i=t[1][0]-t[0][0],n=t[2][0]-t[0][0],r=t[1][1]-t[0][1],o=t[2][1]-t[0][1],s=i*o-n*r;if(0===s)return null;var u=(o*(e[0]-t[0][0])-n*(e[1]-t[0][1]))/s,a=(i*(e[1]-t[0][1])-r*(e[0]-t[0][0]))/s;return u<0||a<0||u+a>1?null:[u,a]}};var lt=i(21969),dt=i(94281);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=P()(t);if(e){var r=P()(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return k()(this,i)}}var pt=function(t){return.5*Math.sin(t)+.5},gt=function(t,e,i,n){var r=.02;return new I.Z(Math.cos(t*Math.PI*e.getX()+n)*i.getX()-Math.cos(r*Math.PI*e.getX()+n)*i.getX(),pt(t*Math.PI*e.getY()+n)*i.getY()-pt(r*Math.PI*e.getY()+n)*i.getY(),pt(t*Math.PI*e.getZ()+n)*i.getZ()-pt(r*Math.PI*e.getZ()+n)*i.getZ())},vt=function(t){w()(i,t);var e=ft(i);function i(t,n,r){var o;l()(this,i),o=e.call(this,t,n,r),x()(g()(o),"setupControls",(function(){o.mode=0,o.buttons=document.querySelectorAll(".mode"),o.buttons.forEach((function(t,e){t.addEventListener("click",(function(t){return o.onClickButton(t.target,e)}),!1)}))})),x()(g()(o),"onClickButton",(function(t,e){o.buttons.forEach((function(t){return t.removeAttribute("data-current")})),t.setAttribute("data-current",!0),o.mode=e})),x()(g()(o),"destroy",(function(){o.buttons&&o.buttons.forEach((function(t,e){return t.removeEventListener("click",(function(){return o.onClickButton(e)}),!1)}))})),x()(g()(o),"onMouseDrag",(function(t){2===o.mode&&o.linesTrail.onMouseDrag(t)})),x()(g()(o),"onMouseDown",(function(t){2===o.mode&&o.linesTrail.onMouseDown(t)})),o.screen=new R.Z(o.gl),o.linesTrail=new E(o.gl),o.grid=new _(10),o.vboGrid=new S.Z(t,{position:o.grid.getPositions()},!0),o.vboGrid.setModeDessin(o.gl.POINTS),o.migration=new J(40),o.vboMigration=new S.Z(t,{position:o.migration.getPositions()},!0),o.vboMigration.setModeDessin(o.gl.POINTS),o.particules=new rt(t,32,32),o.particules.addDataTexture("textureMap",function(t,e){for(var i=[],n=new tt.Z,r=0;r<e;r++)for(var o=0;o<t;o++){var s=(0,O.Yp)(o,0,t-1,0,255),u=Math.floor(255*n.get(o,r)),a=(0,O.Yp)(r,0,e-1,0,255);i=[].concat(c()(i),[s,u,a,255])}return i}(32,32)),o.particules.addDataTexture("morphMap",function(t,e){for(var i=[],n=0;n<e;n++)for(var r=0;r<t;r++){var o=(0,O.Yp)(r,0,t-1,0,255),s=(0,O.Yp)(n,0,e-1,0,255);i=[].concat(c()(i),[o,0,s,255])}return i}(32,32));var s=Array.from({length:40},(function(){return[2*Math.random()-1,2*Math.random()-1]})),u=ht.triangulate(s),a=s.reduce((function(t,e){return[].concat(c()(t),[e[0],e[1],0])}),[]);o.vboDelaunay=new S.Z(t,{position:a,indices:u}),o.vboDelaunay.setModeDessin(t.LINE_LOOP),o.bloom.setBlurSize(.4),o.bloom.setBlurIntensity(1.1),o.model=new lt.Z;var h=(0,dt.Eu)(2,128,{startX:-1,endX:1,startZ:0,endZ:128}),d=(0,dt.H$)(2,128);return o.roadVbo=new S.Z(t,{position:h,indices:d}),o.roadFrequence=new I.Z(2,0,2),o.roadAmplitude=new I.Z(10,0,4),o.roadPositionY=1.2,o.roadLength=128,o.setupControls(),o}return f()(i,[{key:"render",value:function(){m()(P()(i.prototype),"render",this).call(this),this.model.identity();var t=this.config.camera,e=t.position,n=t.target;switch(this.camera.setTarget(n.x,n.y,n.z),this.camera.setPosition(e.x,e.y,e.z),this.mode){default:case 5:this.grid.update(),this.vboGrid.update({position:this.grid.getPositions()}),this.vboGrid.render(this.mngProg.get("point").get());break;case 3:this.migration.update(),this.vboMigration.update({position:this.migration.getPositions()}),this.vboMigration.render(this.mngProg.get("point").get());break;case 0:this.model.rotate(.01*this.time,0,1,0),this.mngProg.get("basique3d").setMatrix("model",this.model.get()),this.bloom.start(),this.vboDelaunay.render(this.mngProg.get("basique3d").get()),this.bloom.end(),this.bloom.render();break;case 1:this.model.rotate(.001*this.time,0,1,0);var r=(0,O.Yp)(Math.cos(.01*this.time*.05),-1,1,0,1);this.particules.compute(this.mngProg.get("pass1Morph"),r),this.resizeViewport(),this.mngProg.get("pass2Camera").setMatrix("model",this.model.get()),this.particules.render(this.mngProg.get("pass2Camera"));break;case 2:var o=this.mngProg.get("line");this.linesTrail.update(o),this.linesTrail.render(o);break;case 4:var s=.005*this.time,u=gt(0,this.roadFrequence,this.roadAmplitude,s),a=gt(.2,this.roadFrequence,this.roadAmplitude,s);this.camera.setTarget(a.getX(),this.roadPositionY+a.getY(),this.roadLength),this.camera.setPosition(u.getX(),this.roadPositionY+u.getY(),0);var c=this.mngProg.get("road");c.setProjectionView(this.camera),c.setMatrix("model",this.model.get()),c.setFloat("time",s),c.setVector("frequence",this.roadFrequence.get()),c.setVector("amplitude",this.roadAmplitude.get()),c.setFloat("roadLength",this.roadLength),this.roadVbo.render(c.get());break;case 6:var h=this.mngProg.get("landscape");h.setFloat("flipY",1),h.setFloat("time",.001*this.time),this.screen.render(h.get())}}}]),i}(N.Z);const mt={slug:"shader",shaders:["/camera/road.js","/screen/line.js","/screen/point.js","/particules/pass1Morph.js","/particules/pass2Camera.js","/camera/basique3d.js","/screen/landscape.js","/screen/blurOnePass.js","/screen/screen.js","/screen/debug.js"],postprocess:{bloom:!0},canvas:{width:1024,height:1024},mouse:{events:["drag","down","move"]},camera:{position:{x:0,y:0,z:-4},target:{x:0,y:0,z:0},near:1,far:200,angle:90},controls:{modes:[1,2,3],fullscreen:{buttonId:"fullscreen-toggle-btn"}}};var yt=null;const wt=s()(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return yt=new u.Z,t.next=3,yt.setup(vt,mt);case 3:document.querySelector("#".concat(mt.slug)).appendChild(yt.getCanvas());case 5:case"end":return t.stop()}}),t)})));var bt=function(){yt&&yt.destroy&&yt.destroy()}}}]);