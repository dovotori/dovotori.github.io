"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[6888],{44254:(t,e,n)=>{n.d(e,{Z:()=>c});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(25773),u=n(21969),c=function(){function t(e){if(r()(this,t),this.position=new a.Z(e.position.x,e.position.y,e.position.z),this.target=new a.Z(0,0,0),this.view=new u.Z,e.ortho){var n=e.ortho,i=n.left,o=n.right,s=n.bottom,c=n.top,h=e.near,l=e.far;this.ortho=new u.Z,this.ortho.ortho(i,o,s,c,h,l)}}return s()(t,[{key:"lookAt",value:function(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}},{key:"getView",value:function(){return this.view}},{key:"getPosition",value:function(){return this.position.get()}},{key:"getPositionVec3",value:function(){return this.position}},{key:"getTarget",value:function(){return this.target.get()}},{key:"getModel",value:function(){return this.repere.getModel()}},{key:"getOrtho",value:function(){return this.ortho}},{key:"addToPosition",value:function(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==t?t:this.position.getX(),r=null!==e?e:this.position.getY(),o=null!==n?n:this.position.getZ();this.position.set(i,r,o),this.lookAt()}},{key:"setTarget",value:function(t,e,n){this.target.set(t,e,n)}},{key:"setTargetVec3",value:function(t){this.target.equal(t)}}]),t}()},47313:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;r()(this,t),this.value=e,this.target=e,this.sampling=n,this.threshold=1e-6}return s()(t,[{key:"update",value:function(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.target=t}},{key:"setDirect",value:function(t){this.value=t}}]),t}()},40487:(t,e,n)=>{n.d(e,{Z:()=>z});var i=n(34575),r=n.n(i),o=n(93913),s=n.n(o),a=n(16525),u=n.n(a),c=n(2205),h=n.n(c),l=n(78585),f=n.n(l),d=n(29754),p=n.n(d),v=n(40480),g=n(25773),y=n(21969);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var k=function(t){h()(n,t);var e=m(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).target=new g.Z(t.target.x,t.target.y,t.target.z),i.matIdentity=new y.Z,i.projection=new y.Z,i.projection.identity(),i.near=t.near||1,i.far=t.far||100,i.angle=t.angle||50,i.matIdentity.identity(),i.lookAt(),i}return s()(n,[{key:"update",value:function(){this.lookAt()}},{key:"perspective",value:function(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}},{key:"setNearFar",value:function(t,e){this.near=t,this.far=e}},{key:"setAngle",value:function(t){this.angle=t}},{key:"getProjection",value:function(){return this.projection}},{key:"getIdentity",value:function(){return this.matIdentity}},{key:"getNearFar",value:function(){return[this.near,this.far]}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getAngle",value:function(){return this.angle}},{key:"getReflectViewMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=2*(this.position.getY()-t);return(new y.Z).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}]),n}(n(44254).Z);const w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r()(this,t),this.d=[0,0,0,0],this.set(e,n,i,o)}return s()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"getW",value:function(){return this.d[3]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}},{key:"set",value:function(t,e,n,i){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=n?this.d[2]=n:null!=t&&(this.d[2]=t),null!=i?this.d[3]=i:null!=t&&(this.d[3]=t),this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}},{key:"multiplyMatrix",value:function(t){var e=this.d[0],n=this.d[1],i=this.d[2],r=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*n+t.d[8]*i+t.d[12]*r,this.d[1]=t.d[1]*e+t.d[5]*n+t.d[9]*i+t.d[13]*r,this.d[2]=t.d[2]*e+t.d[6]*n+t.d[10]*i+t.d[14]*r,this.d[3]=t.d[3]*e+t.d[7]*n+t.d[11]*i+t.d[15]*r,this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}]),t}();function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var x=function(t){h()(n,t);var e=Z(n);function n(){return r()(this,n),e.apply(this,arguments)}return s()(n,[{key:"get2dTexturePoint",value:function(t){var e=t.getX(),n=t.getY(),i=t.getZ(),r=new w(e,n,i,1),o=new y.Z;o.equal(this.view).multiply(this.projection),r.multiplyMatrix(o);var s=r.getX()/r.getW(),a=r.getY()/r.getW();return[s=.5*(s+1),a=.5*(a+1)]}},{key:"get2dScreenPoint",value:function(t,e){var n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}}]),n}(k),R=n(47313);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var M=function(t){h()(n,t);var e=b(n);function n(t){var i;return r()(this,n),(i=e.call(this,t)).options=t,i.rotationX=new R.Z,i.targetX=new R.Z,i.zoomZ=new R.Z(.7,.1),i}return s()(n,[{key:"update",value:function(){u()(p()(n.prototype),"update",this).call(this),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}},{key:"setSmoothTarget",value:function(t){this.targetX.set(t)}},{key:"setSmoothRotation",value:function(t){this.rotationX.set(t)}},{key:"setSmoothZoom",value:function(t){this.zoomZ.set(t)}},{key:"getZoom",value:function(){return this.zoomZ.get()}},{key:"followPos2D",value:function(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}},{key:"followPosY",value:function(t){this.options.position.y=t,this.options.target.y=t}}]),n}(x);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p()(t);if(e){var r=p()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}var z=function(t){h()(n,t);var e=P(n);function n(t,i){var o;return r()(this,n),(o=e.call(this,t,i)).camera=new M(i.camera),o.camera.perspective(o.containerSize.width,o.containerSize.height),o}return s()(n,[{key:"resize",value:function(t){u()(p()(n.prototype),"resize",this).call(this,t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}},{key:"update",value:function(t){u()(p()(n.prototype),"update",this).call(this,t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}]),n}(v.Z)},25192:(t,e,n)=>{n.d(e,{Z:()=>T});var i=n(48926),r=n.n(i),o=n(34575),s=n.n(o),a=n(93913),u=n.n(a),c=n(16525),h=n.n(c),l=n(2205),f=n.n(l),d=n(78585),p=n.n(d),v=n(29754),g=n.n(v),y=n(87757),m=n.n(y),k=n(40487),w=n(44254),Z=n(2444),x=n(80602),R=n(21969);const b={position:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],texture:[1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]};var M=function(){function t(e){s()(this,t),this.gl=e,this.objet=new x.Z(this.gl,b),this.model=new R.Z,this.model.identity()}return u()(t,[{key:"render",value:function(t){t.setMatrix("model",this.model.get()),this.objet.render(t.get())}},{key:"update",value:function(t,e){this.model.identity().scale(e.getX(),e.getY(),e.getZ()).translate(t.getX(),t.getY(),t.getZ())}},{key:"getModel",value:function(){return this.model}}]),t}(),P=n(25773);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var X=function(t){f()(n,t);var e=z(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return s()(this,n),(r=e.call(this,i)).gl=t,r.fbo=new Z.Z(r.gl,o,a,u),r.sizeRepere=new P.Z(.05,.05,.05),r.repere=new M(r.gl),r.repere.update(r.position,r.sizeRepere),r.lookAt(),r}return u()(n,[{key:"start",value:function(){this.fbo.start()}},{key:"end",value:function(){this.fbo.end()}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}},{key:"renderRepere",value:function(t){this.repere.render(t)}},{key:"getDepthTexture",value:function(){return this.fbo.getDepthTexture()}},{key:"setDepthProgram",value:function(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}},{key:"setShadowProgram",value:function(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}},{key:"resize",value:function(t){this.fbo.resize(t)}}]),n}(w.Z);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p()(this,n)}}var T=function(t){f()(i,t);var e,n=A(i);function i(t,e){var r;s()(this,i);var o=(r=n.call(this,t,e)).canUseDepth(),a=e.canvas,u=a.width,c=a.height;return r.lampes=e.lampes&&e.lampes.map((function(e){return new X(t,e,u,c,o)}))||[],r}return u()(i,[{key:"setupAssets",value:(e=r()(m().mark((function t(e){var n,r=this;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()(g()(i.prototype),"setupAssets",this).call(this,e);case 2:n=this.mngProg.getAll(),Object.keys(n).forEach((function(t){var e=n[t];e.getLocations().numLights&&r.setLampeInfos(e)}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"renderReperes",value:function(){var t=this;this.lampes.forEach((function(e){return e.renderRepere(t.camera)}))}},{key:"randomLampesPositions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lampes.forEach((function(i,r){(null===n||null!==n&&r===n)&&i.move(t.time*e,r)}))}},{key:"setLampeInfos",value:function(t){var e=this;t.setVector("posEye",this.camera.getPosition()),t.setInt("numLights",this.lampes.length),this.config.lampes.forEach((function(n,i){var r=n.type,o=n.ambiant,s=n.diffuse,a=n.specular,u=n.brillance,c=n.radius,h=n.direction,l=n.strength;t.setInt("lights[".concat(i,"].type"),r),t.setVector("lights[".concat(i,"].position"),e.lampes[i].getPosition()),t.setVector("lights[".concat(i,"].ambiant"),o),t.setVector("lights[".concat(i,"].diffuse"),s),t.setVector("lights[".concat(i,"].specular"),a),u&&t.setFloat("lights[".concat(i,"].brillance"),u),c&&t.setFloat("lights[".concat(i,"].radius"),c),h&&t.setVector("lights[".concat(i,"].direction"),h),t.setFloat("lights[".concat(i,"].strength"),l||1)}))}},{key:"render",value:function(){h()(g()(i.prototype),"render",this).call(this),"function"==typeof this.renderBasiqueForLampeDepth&&this.renderBasiqueForLampeDepth(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}},{key:"getLampe",value:function(t){return this.lampes[t]?this.lampes[t]:null}},{key:"resize",value:function(t){h()(g()(i.prototype),"resize",this).call(this,t),this.lampes.forEach((function(e){return e.resize(t)}))}}]),i}(k.Z)},23645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&s[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},8081:t=>{t.exports=function(t){return t[1]}},93379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var u=t[a],c=i.base?u[0]+i.base:u[0],h=o[c]||0,l="".concat(c," ").concat(h);o[c]=h+1;var f=n(l),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=r(d,i);i.byIndex=a,e.splice(a,0,{identifier:l,updater:p,references:1})}s.push(l)}return s}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var u=i(t,r),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=u}}},90569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},70609:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);