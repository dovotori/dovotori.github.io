"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[8342],{3195(t,e,i){i.d(e,{A:()=>s});const s={position:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],texture:[1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]}},10540(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},19365(t,e,i){i.d(e,{A:()=>s});const s=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.d=[0,0,0,0],this.set(t,e,i,s)}normalise(){const t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}get(){return this.d}getX(){return this.d[0]}getY(){return this.d[1]}getZ(){return this.d[2]}getW(){return this.d[3]}length(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}set(t,e,i,s){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=i?this.d[2]=i:null!=t&&(this.d[2]=t),null!=s?this.d[3]=s:null!=t&&(this.d[3]=t),this}equal(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}addNumber(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}minus(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}minusNumber(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}multiplyNumber(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}multiplyMatrix(t){const e=this.d[0],i=this.d[1],s=this.d[2],r=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*i+t.d[8]*s+t.d[12]*r,this.d[1]=t.d[1]*e+t.d[5]*i+t.d[9]*s+t.d[13]*r,this.d[2]=t.d[2]*e+t.d[6]*i+t.d[10]*s+t.d[14]*r,this.d[3]=t.d[3]*e+t.d[7]*i+t.d[11]*s+t.d[15]*r,this}multiply(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}divideNumber(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}divide(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}distance(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}},23876(t,e,i){i.d(e,{A:()=>n});var s=i(67269),r=i(54096);const n=class{constructor(t){if(this.position=new r.A(t.position.x,t.position.y,t.position.z),this.target=new r.A(0,0,0),this.view=new s.A,t.ortho){const{left:e,right:i,bottom:r,top:n}=t.ortho,{near:o,far:h}=t;this.ortho=new s.A,this.ortho.ortho(e,i,r,n,o,h)}}lookAt(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}getView(){return this.view}getPosition(){return this.position.get()}getPositionVec3(){return this.position}getTarget(){return this.target.get()}getModel(){return this.repere.getModel()}getOrtho(){return this.ortho}addToPosition(t,e,i){this.position.addXYZ(t,e,i),this.lookAt()}setPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=null!==t?t:this.position.getX(),r=null!==e?e:this.position.getY(),n=null!==i?i:this.position.getZ();this.position.set(s,r,n),this.lookAt()}setTarget(t,e,i){this.target.set(t,e,i)}setTargetVec3(t){this.target.equal(t)}}},28342(t,e,i){i.r(e),i.d(e,{default:()=>z,destroy:()=>j});var s=i(99590),r=i(67269),n=i(66172);const o=class extends n.A{setup(){this.model=new r.A,this.model.identity()}update(t){super.update(t),this.model.identity(),this.mngGltf.get(this.config.MAIN_OBJ).update(t)}render(){super.render(),this.mngGltf.get(this.config.MAIN_OBJ).render(this.mngProg.get(this.config.MAIN_PROG),this.model)}},h="skin",a="moreSimple",d={slug:"skin",MAIN_PROG:h,MAIN_OBJ:a,shaders:["/camera/basique3d.js",`/camera/${h}.js`],assets:[`/gltf/${a}.gltf`],camera:{position:{x:0,y:0,z:40},target:{x:0,y:0,z:0},near:1,far:200,angle:40},lampes:[{type:0,position:{x:10,y:10,z:0},ambiant:[1,1,1],diffuse:[1,1,1],specular:[1,1,1],strength:100},{type:0,position:{x:-10,y:-10,z:0},ambiant:[1,1,1],diffuse:[1,1,1],specular:[1,1,1],strength:10}],useDepthTexture:!0,canvas:{width:1024,height:1024}};var l=i(85072),u=i.n(l),c=i(97825),g=i.n(c),p=i(77659),m=i.n(p),f=i(55056),v=i.n(f),y=i(10540),w=i.n(y),A=i(41113),x=i.n(A),M=i(74502),b={};b.styleTagTransform=x(),b.setAttributes=v(),b.insert=m().bind(null,"head"),b.domAPI=g(),b.insertStyleElement=w();u()(M.A,b);M.A&&M.A.locals&&M.A.locals;let P=null;const z=async()=>{P=new s.A,await P.setup(o,d);const t=document.querySelector(`#${d.slug}`),e=P.getCanvas();e&&t&&t.appendChild(e)},j=()=>{P&&P.destroy&&P.destroy()}},31601(t){t.exports=function(t){return t[1]}},41113(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},55056(t,e,i){t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},66172(t,e,i){i.d(e,{A:()=>c});var s=i(72985),r=i(23876),n=i(54096),o=i(3195),h=i(67269),a=i(10334);const d=class{constructor(t){this.gl=t,this.objet=new a.A(this.gl,o.A),this.model=new h.A,this.model.identity()}render(t){t.setMatrix("model",this.model.get()),this.objet.render(t.get())}update(t,e){this.model.identity().scale(e.getX(),e.getY(),e.getZ()).translate(t.getX(),t.getY(),t.getZ())}getModel(){return this.model}};var l=i(82669);const u=class extends r.A{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(e),this.gl=t,this.fbo=new l.A(this.gl,i,s,r),this.sizeRepere=new n.A(.05,.05,.05),this.repere=new d(this.gl),this.repere.update(this.position,this.sizeRepere),this.lookAt()}start(){this.fbo.start()}end(){this.fbo.end()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}renderRepere(t){this.repere.render(t)}getDepthTexture(){return this.fbo.getDepthTexture()}setDepthProgram(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}setShadowProgram(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}resize(t){this.fbo.resize(t)}},c=class extends s.A{constructor(t,e){super(t,e);const i=this.canUseDepth(),{width:s,height:r}=e.canvas;this.lampes=e.lampes&&e.lampes.map((e=>new u(t,e,s,r,i)))||[]}async setupAssets(t){await super.setupAssets(t);const e=this.mngProg.getAll();Object.keys(e).forEach((t=>{const i=e[t];i.getLocations().numLights&&this.setLampeInfos(i)}))}renderReperes(){this.lampes.forEach((t=>t.renderRepere(this.camera)))}randomLampesPositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lampes.forEach(((i,s)=>{(null===e||null!==e&&s===e)&&i.move(this.time*t,s)}))}setLampeInfos(t){t.setVector("posEye",this.camera.getPosition()),t.setInt("numLights",this.lampes.length),this.config.lampes.forEach(((e,i)=>{const{type:s,ambiant:r,diffuse:n,specular:o,brillance:h,radius:a,direction:d,strength:l}=e;t.setInt(`lights[${i}].type`,s),t.setVector(`lights[${i}].position`,this.lampes[i].getPosition()),t.setVector(`lights[${i}].ambiant`,r),t.setVector(`lights[${i}].diffuse`,n),t.setVector(`lights[${i}].specular`,o),h&&t.setFloat(`lights[${i}].brillance`,h),a&&t.setFloat(`lights[${i}].radius`,a),d&&t.setVector(`lights[${i}].direction`,d),t.setFloat(`lights[${i}].strength`,l||1)}))}render(){super.render(),"function"==typeof this.renderBasiqueForLampeDepth&&this.renderBasiqueForLampeDepth(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}getLampe(t){return this.lampes[t]?this.lampes[t]:null}resize(t){super.resize(t),this.lampes.forEach((e=>e.resize(t)))}}},71907(t,e,i){i.d(e,{A:()=>o});var s=i(67269),r=i(54096),n=i(23876);const o=class extends n.A{constructor(t){super(t),this.matIdentity=new s.A,this.projection=new s.A,this.projection.identity(),this.near=t.near??1,this.far=t.far??100,this.angle=t.angle??50,this.matIdentity.identity(),this.lookAt()}update(){this.lookAt()}perspective(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}moveAroundCenter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(t)*e,Math.sin(t)*(2+e),Math.sin(t)*e),this.lookAt()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}setNearFar(t,e){this.near=t,this.far=e}setAngle(t){this.angle=t}getModeProjection(){return this.ortho??this.projection}getProjection(){return this.projection}getViewProjection(){const t=new s.A;return t.identity(),t.multiply(this.getView()),t.multiply(this.getProjection()),t}getInverseViewProjection(){return this.getViewProjection().inverse()}unproject(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const s=new r.A(t,e,i),n=this.getInverseViewProjection();return s.multiplyMatrix(n)}getRayFromNDC(t,e){const i=this.getInverseViewProjection(),s=new r.A(t,e,0).multiplyMatrix(i),n=new r.A(t,e,1).multiplyMatrix(i);return{origin:s,dir:new r.A(n.getX(),n.getY(),n.getZ()).minus(s).normalise()}}worldToNDC(t){const e=this.getViewProjection();return new r.A(t.getX(),t.getY(),t.getZ()).multiplyMatrix(e)}worldToRelativeScreen(t,e){const i=this.worldToNDC(t);return{x:(.5*i.getX()+.5)*e.width,y:(1-(.5*i.getY()+.5))*e.height}}getIdentity(){return this.matIdentity}getNearFar(){return[this.near,this.far]}getNear(){return this.near}getFar(){return this.far}getAngle(){return this.angle}getReflectViewMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=2*(this.position.getY()-t);return(new s.A).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}},72985(t,e,i){i.d(e,{A:()=>l});var s=i(99594),r=i(67269),n=i(19365),o=i(71907);const h=class extends o.A{get2dTexturePoint(t){const e=t.getX(),i=t.getY(),s=t.getZ(),o=new n.A(e,i,s,1),h=new r.A;h.equal(this.view).multiply(this.projection),o.multiplyMatrix(h);let a=o.getX()/o.getW(),d=o.getY()/o.getW();return a=.5*(a+1),d=.5*(d+1),[a,d]}get2dScreenPoint(t,e){const i=this.get2dTexturePoint(t);return[i[0]*e.width,i[1]*e.height]}},a=class extends h{constructor(t){super(t),this.options=t,this.rotationX=new s.A,this.targetX=new s.A,this.zoomZ=new s.A(.7,.1)}update(){super.update(),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}setSmoothTarget(t){this.targetX.set(t)}setSmoothRotation(t){this.rotationX.set(t)}setSmoothZoom(t){this.zoomZ.set(t)}getZoom(){return this.zoomZ.get()}followPos2D(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}followPosY(t){this.options.position.y=t,this.options.target.y=t}};var d=i(76717);const l=class extends d.A{constructor(t,e){super(t,e),this.camera=new a(e.camera),this.camera.perspective(this.containerSize.width,this.containerSize.height)}resize(t){super.resize(t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}update(t){super.update(t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}},74502(t,e,i){i.d(e,{A:()=>h});var s=i(31601),r=i.n(s),n=i(76314),o=i.n(n)()(r());o.push([t.id,"#skin {\n\tmargin: 0 auto;\n\ttext-align: center;\n\tmax-width: 1024px;\n\tmax-height: 1024px;\n}\n",""]);const h=o},76314(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,r,n){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var h=0;h<this.length;h++){var a=this[h][0];null!=a&&(o[a]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);s&&o[l[0]]||(void 0!==n&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=n),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},77659(t){var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},85072(t){var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var n={},o=[],h=0;h<t.length;h++){var a=t[h],d=s.base?a[0]+s.base:a[0],l=n[d]||0,u="".concat(d," ").concat(l);n[d]=l+1;var c=i(u),g={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==c)e[c].references++,e[c].updater(g);else{var p=r(g,s);s.byIndex=h,e.splice(h,0,{identifier:u,updater:p,references:1})}o.push(u)}return o}function r(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,r){var n=s(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<n.length;o++){var h=i(n[o]);e[h].references--}for(var a=s(t,r),d=0;d<n.length;d++){var l=i(n[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}n=a}}},97825(t){t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,r&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},99594(t,e,i){i.d(e,{A:()=>s});const s=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;this.value=t,this.target=t,this.sampling=e,this.threshold=1e-6}update(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}get(){return this.value}set(t){this.target=t}setDirect(t){this.value=t}}}}]);