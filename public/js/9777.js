"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[9777],{807(t,e,s){var i=s(85072),n=s.n(i),r=s(97825),o=s.n(r),a=s(77659),h=s.n(a),d=s(55056),l=s.n(d),c=s(10540),g=s.n(c),p=s(41113),u=s.n(p),m=s(55420),f={};f.styleTagTransform=u(),f.setAttributes=l(),f.insert=h().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=g();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},2038(t,e,s){s.d(e,{uu:()=>r,wH:()=>n});var i=s(4689);const n=function(t,e){let{startX:s=-1,endX:n=1,startZ:r=-1,endZ:o=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[];for(let h=0;h<e;h++){const d=(0,i.cy)(h,0,e-1,r,o);for(let e=0;e<t;e++){const r=(0,i.cy)(e,0,t-1,s,n);a.push(r),a.push(0),a.push(d)}}return a},r=(t,e)=>{const s=[];for(let i=0;i<e-1;i++)for(let e=0;e<t-1;e++){const n=i*t+e;s.push(n),s.push(t+n),s.push(n+1),s.push(t+n),s.push(t+n+1),s.push(n+1)}return s}},3195(t,e,s){s.d(e,{A:()=>i});const i={position:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],texture:[1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]}},10540(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},19365(t,e,s){s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.d=[0,0,0,0],this.set(t,e,s,i)}normalise(){const t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}get(){return this.d}getX(){return this.d[0]}getY(){return this.d[1]}getZ(){return this.d[2]}getW(){return this.d[3]}length(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}set(t,e,s,i){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=s?this.d[2]=s:null!=t&&(this.d[2]=t),null!=i?this.d[3]=i:null!=t&&(this.d[3]=t),this}equal(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}addNumber(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}minus(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}minusNumber(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}multiplyNumber(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}multiplyMatrix(t){const e=this.d[0],s=this.d[1],i=this.d[2],n=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*s+t.d[8]*i+t.d[12]*n,this.d[1]=t.d[1]*e+t.d[5]*s+t.d[9]*i+t.d[13]*n,this.d[2]=t.d[2]*e+t.d[6]*s+t.d[10]*i+t.d[14]*n,this.d[3]=t.d[3]*e+t.d[7]*s+t.d[11]*i+t.d[15]*n,this}multiply(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}divideNumber(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}divide(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}distance(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}},19513(t,e,s){var i=s(85072),n=s.n(i),r=s(97825),o=s.n(r),a=s(77659),h=s.n(a),d=s(55056),l=s.n(d),c=s(10540),g=s.n(c),p=s(41113),u=s.n(p),m=s(77314),f={};f.styleTagTransform=u(),f.setAttributes=l(),f.insert=h().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=g();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},19777(t,e,s){s.r(e),s.d(e,{default:()=>f,destroy:()=>v});var i=s(99590);const n={slug:"race",assets:["/textures/noisergb.avif","/gltf/raceship.gltf"],shaders:["/camera/road.js","/camera/gltf.js","/camera/roadmountain.js","/camera/basique3d.js","/sky/roadSky.js","/camera/gltf.js","/screen/screen.js","/screen/debug.js","/screen/blurOnePass.js","/screen/bloom.js","/screen/mergeBloom.js","/screen/fxaa.js","/screen/fxaa2.js","/screen/tunnelrace.js","/screen/rgb.js"],useDepthTexture:!0,postprocess:{bloom:{intensity:1}},textures:{noisergb:"LINEAR"},canvas:{width:1024,height:512},mouse:{events:["down","up","drag"]},camera:{position:{x:0,y:4,z:0},target:{x:0,y:0,z:128},near:1,far:200,angle:90},lampes:[{type:0,position:{x:0,y:3,z:3},ambiant:[1,1,1],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:40}],controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}},roadFrequence:[2,0,2],roadAmplitude:[10,0,4],roadLength:128,roadWidth:8,shipPosition:[0,2,3]};var r=s(54705),o=s(67269),a=s(99594),h=s(54096),d=s(2038),l=s(10334),c=s(12911),g=s(66172);const p=t=>.5*Math.sin(t)+.5,u=class extends g.A{constructor(){super(...arguments),(0,r.A)(this,"getDistPos",(t=>{const{roadAmplitude:e,roadLength:s,roadFrequence:i}=this.config;return new h.A(...((t,e,s,i)=>{const n=.02;return[Math.cos(t*Math.PI*e[0]+i)*s[0]-Math.cos(n*Math.PI*e[0]+i)*s[0],p(t*Math.PI*e[1]+i)*s[1]-p(n*Math.PI*e[1]+i)*s[1],p(t*Math.PI*e[2]+i)*s[2]-p(n*Math.PI*e[2]+i)*s[2]]})(t/s,i,e,this.posTime))})),(0,r.A)(this,"updateCamera",(()=>{const{roadLength:t,camera:e}=this.config,s=this.getDistPos(100),i=this.getDistPos(0);this.camera.setTarget(s.getX(),e.position.y+s.getY(),t),this.camera.setPosition(i.getX(),e.position.y+i.getY(),0)})),(0,r.A)(this,"moveShip",(()=>{this.targetPosX.update(),this.targetSpeed.update(),this.posTime+=this.targetSpeed.get();const t=this.getDistPos(this.shipPos.getZ());this.currentShipPos.equal(t).add(this.shipPos).addX(this.targetPosX.get())})),(0,r.A)(this,"renderMountain",(()=>{const{roadAmplitude:t,roadLength:e,roadWidth:s,roadFrequence:i}=this.config,n=this.mngProg.get("roadmountain");n.setProjectionView(this.camera),n.setMatrix("model",this.model.get()),n.setFloat("time",this.posTime),n.setVector("frequence",i),n.setVector("amplitude",t),n.setFloat("roadWidth",s),n.setFloat("roadLength",e),this.mountainVbo.render(n.get())})),(0,r.A)(this,"renderRoad",(()=>{const{roadAmplitude:t,roadLength:e,roadWidth:s,roadFrequence:i}=this.config,n=this.mngProg.get("road");n.setProjectionView(this.camera),n.setMatrix("model",this.model.get()),n.setFloat("time",this.posTime),n.setVector("frequence",i),n.setVector("amplitude",t),n.setFloat("roadWidth",s),n.setFloat("roadLength",e),this.roadVbo.render(n.get())})),(0,r.A)(this,"renderShip",(()=>{const t=this.mngProg.get("gltf"),e=this.mngGltf.get("raceship");this.model.push(),this.model.translate(...this.currentShipPos.get()),e.renderExcept(["trail1","trail2"],t,this.model),this.model.pop()})),(0,r.A)(this,"renderShipTrails",(()=>{const t=this.mngProg.get("gltf"),e=this.mngGltf.get("raceship");this.model.push(),this.model.translate(...this.currentShipPos.get()),e.renderOnly(["trail1","trail2"],t,this.model),this.model.pop()})),(0,r.A)(this,"interactShip",(t=>{const{roadWidth:e}=this.config;this.targetSpeed.set(.1),this.targetPosX.set(-t.rel.x*e*.6)})),(0,r.A)(this,"onMouseDrag",(t=>{this.interactShip(t)})),(0,r.A)(this,"onMouseDown",(t=>{this.interactShip(t)})),(0,r.A)(this,"onMouseUp",(()=>{this.targetSpeed.set(0)}))}setup(){const{gl:t}=this;this.screen=new c.A(t),this.model=new o.A;const{roadLength:e,roadWidth:s,shipPosition:i}=this.config,n=(0,d.wH)(2,e,{startX:-s,endX:s,startZ:0,endZ:e}),r=(0,d.wH)(120,e,{startX:-120,endX:120,startZ:0,endZ:e}),g=(0,d.uu)(2,e);this.roadVbo=new l.A(t,{position:n,indices:g});const p=(0,d.uu)(120,e);this.mountainVbo=new l.A(t,{position:r,indices:p}),this.shipPos=new h.A(...i),this.currentShipPos=new h.A(0),this.targetPosX=new a.A(0,.1),this.targetSpeed=new a.A(0,.1),this.posTime=0,this.setLampeInfos(this.mngProg.get("gltf")),this.mngProg.get("roadSky").setTexture(1,this.mngTex.get("noisergb").get(),"textureMap")}update(t){super.update(t),this.model.identity(),this.moveShip(),this.updateTrails(),this.updateCamera(),this.mngGltf.get("raceship").update(t)}updateTrails(){const t=this.mngProg.get("gltf"),e=this.mngGltf.get("raceship");t.setProjectionView(this.camera),e.setAnimationStep("trail1","scale",10*this.targetSpeed.get()),e.setAnimationStep("trail2","scale",10*this.targetSpeed.get())}renderLandscape(){this.gl.disable(this.gl.DEPTH_TEST);const t=this.mngProg.get("roadSky");t.setFloat("flipY",-1),t.setFloat("time",.1*this.time),t.setVector("wind",[.1,.2]),this.screen.render(t.get()),this.gl.enable(this.gl.DEPTH_TEST)}renderTunnel(){this.gl.disable(this.gl.DEPTH_TEST);const t=this.mngProg.get("tunnelrace");t.setFloat("flipY",-1),t.setFloat("time",.001*this.time),this.screen.render(t.get()),this.gl.enable(this.gl.DEPTH_TEST)}render(){super.render(),this.postProcess.start(),this.renderTunnel(),this.renderMountain(),this.renderRoad(),this.renderShip(),this.postProcess.end(),this.bloom.start(),this.renderShipTrails(),this.bloom.end(),this.postProcess.mergeBloom(this.bloom.getTexture(),1.5,2.2);const t=100*this.targetSpeed.get();this.postProcess.setRGB(t,t,.5,.5),this.postProcess.setFxaa2(),this.postProcess.render()}};s(19513),s(807);let m=null;const f=async()=>{m=new i.A,await m.setup(u,n);const t=document.querySelector(`#${n.slug}`);t.parentNode&&(t.parentNode.style.display="flex",t.parentNode.style.alignItems="center");const e=m.getCanvas();e&&t&&t.appendChild(e)},v=()=>{m?.destroy&&m.destroy()}},23876(t,e,s){s.d(e,{A:()=>r});var i=s(67269),n=s(54096);const r=class{constructor(t){if(this.position=new n.A(t.position.x,t.position.y,t.position.z),this.target=new n.A(0,0,0),this.view=new i.A,t.ortho){const{left:e,right:s,bottom:n,top:r}=t.ortho,{near:o,far:a}=t;this.ortho=new i.A,this.ortho.ortho(e,s,n,r,o,a)}}lookAt(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}getView(){return this.view}getPosition(){return this.position.get()}getPositionVec3(){return this.position}getTarget(){return this.target.get()}getModel(){return this.repere.getModel()}getOrtho(){return this.ortho}addToPosition(t,e,s){this.position.addXYZ(t,e,s),this.lookAt()}setPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=null!==t?t:this.position.getX(),n=null!==e?e:this.position.getY(),r=null!==s?s:this.position.getZ();this.position.set(i,n,r),this.lookAt()}setTarget(t,e,s){this.target.set(t,e,s)}setTargetVec3(t){this.target.equal(t)}}},31601(t){t.exports=function(t){return t[1]}},41113(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},55056(t,e,s){t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},55420(t,e,s){s.d(e,{A:()=>a});var i=s(31601),n=s.n(i),r=s(76314),o=s.n(r)()(n());o.push([t.id,"#fullscreen-toggle-btn {\n\tborder-radius: 0;\n\tmargin: 0;\n\tpadding: 4px;\n\tborder: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n\ttransform: scale(0.8);\n\topacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n\tdisplay: block;\n\twidth: 2em;\n\tfill: #fff;\n\topacity: 0.8;\n\ttransform: scale(0.6);\n\ttransition:\n\t\topacity 300ms ease-out,\n\t\ttransform 300ms ease-out;\n}\n\n[data-fullscreen] {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n",""]);const a=o},66172(t,e,s){s.d(e,{A:()=>g});var i=s(54096),n=s(23876),r=s(67269),o=s(3195),a=s(10334);const h=class{constructor(t){this.gl=t,this.objet=new a.A(this.gl,o.A),this.model=new r.A,this.model.identity()}render(t){t.setMatrix("model",this.model.get()),this.objet.render(t.get())}update(t,e){this.model.identity().scale(e.getX(),e.getY(),e.getZ()).translate(t.getX(),t.getY(),t.getZ())}getModel(){return this.model}};var d=s(82669);const l=class extends n.A{constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1024,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(e),this.gl=t,this.fbo=new d.A(this.gl,s,n,r),this.sizeRepere=new i.A(.05,.05,.05),this.repere=new h(this.gl),this.repere.update(this.position,this.sizeRepere),this.lookAt()}start(){this.fbo.start()}end(){this.fbo.end()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(.002*t)*(4+e),this.position.getY(),Math.sin(.002*t)*(4+e)),this.lookAt(),this.repere.update(this.position,this.sizeRepere)}renderRepere(t){this.repere.render(t)}getDepthTexture(){return this.fbo.getDepthTexture()}setDepthProgram(t){t.setMatrix("projection",this.getOrtho().get()),t.setMatrix("view",this.getView().get())}setShadowProgram(t){t.setTexture(2,this.getDepthTexture().get(),"shadowMap"),t.setMatrix("shadowView",this.getView().get()),t.setMatrix("shadowProjection",this.getOrtho().get()),t.setVector("posLum",this.getPosition())}resize(t){this.fbo.resize(t)}};var c=s(72985);const g=class extends c.A{constructor(t,e){super(t,e);const s=this.canUseDepth(),{width:i,height:n}=e.canvas;this.lampes=e.lampes?.map((e=>new l(t,e,i,n,s)))||[]}async setupAssets(t){await super.setupAssets(t);const e=this.mngProg.getAll();Object.keys(e).forEach((t=>{const s=e[t];s.getLocations().numLights&&this.setLampeInfos(s)}))}renderReperes(){this.lampes.forEach((t=>{t.renderRepere(this.camera)}))}randomLampesPositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lampes.forEach(((s,i)=>{(null===e||null!==e&&i===e)&&s.move(this.time*t,i)}))}setLampeInfos(t){t.setVector("posEye",this.camera.getPosition()),t.setInt("numLights",this.lampes.length),this.config.lampes.forEach(((e,s)=>{const{type:i,ambiant:n,diffuse:r,specular:o,brillance:a,radius:h,direction:d,strength:l}=e;t.setInt(`lights[${s}].type`,i),t.setVector(`lights[${s}].position`,this.lampes[s].getPosition()),t.setVector(`lights[${s}].ambiant`,n),t.setVector(`lights[${s}].diffuse`,r),t.setVector(`lights[${s}].specular`,o),a&&t.setFloat(`lights[${s}].brillance`,a),h&&t.setFloat(`lights[${s}].radius`,h),d&&t.setVector(`lights[${s}].direction`,d),t.setFloat(`lights[${s}].strength`,l||1)}))}render(){super.render(),"function"==typeof this.renderBasiqueForLampeDepth&&this.renderBasiqueForLampeDepth(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}getLampe(t){return this.lampes[t]?this.lampes[t]:null}resize(t){super.resize(t),this.lampes.forEach((e=>{e.resize(t)}))}}},71907(t,e,s){s.d(e,{A:()=>o});var i=s(67269),n=s(54096),r=s(23876);const o=class extends r.A{constructor(t){super(t),this.matIdentity=new i.A,this.projection=new i.A,this.projection.identity(),this.near=t.near??1,this.far=t.far??100,this.angle=t.angle??50,this.matIdentity.identity(),this.lookAt()}update(){this.lookAt()}perspective(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}moveAroundCenter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(t)*e,Math.sin(t)*(2+e),Math.sin(t)*e),this.lookAt()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}setNearFar(t,e){this.near=t,this.far=e}setAngle(t){this.angle=t}getModeProjection(){return this.ortho??this.projection}getProjection(){return this.projection}getViewProjection(){const t=new i.A;return t.identity(),t.multiply(this.getView()),t.multiply(this.getProjection()),t}getInverseViewProjection(){return this.getViewProjection().inverse()}unproject(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const i=new n.A(t,e,s),r=this.getInverseViewProjection();return i.multiplyMatrix(r)}getRayFromNDC(t,e){const s=this.getInverseViewProjection(),i=new n.A(t,e,0).multiplyMatrix(s),r=new n.A(t,e,1).multiplyMatrix(s);return{origin:i,dir:new n.A(r.getX(),r.getY(),r.getZ()).minus(i).normalise()}}worldToNDC(t){const e=this.getViewProjection();return new n.A(t.getX(),t.getY(),t.getZ()).multiplyMatrix(e)}worldToRelativeScreen(t,e){const s=this.worldToNDC(t);return{x:(.5*s.getX()+.5)*e.width,y:(1-(.5*s.getY()+.5))*e.height}}getIdentity(){return this.matIdentity}getNearFar(){return[this.near,this.far]}getNear(){return this.near}getFar(){return this.far}getAngle(){return this.angle}getReflectViewMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=2*(this.position.getY()-t);return(new i.A).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}},72985(t,e,s){s.d(e,{A:()=>l});var i=s(99594),n=s(67269),r=s(19365),o=s(71907);const a=class extends o.A{get2dTexturePoint(t){const e=t.getX(),s=t.getY(),i=t.getZ(),o=new r.A(e,s,i,1),a=new n.A;a.equal(this.view).multiply(this.projection),o.multiplyMatrix(a);let h=o.getX()/o.getW(),d=o.getY()/o.getW();return h=.5*(h+1),d=.5*(d+1),[h,d]}get2dScreenPoint(t,e){const s=this.get2dTexturePoint(t);return[s[0]*e.width,s[1]*e.height]}},h=class extends a{constructor(t){super(t),this.options=t,this.rotationX=new i.A,this.targetX=new i.A,this.zoomZ=new i.A(.7,.1)}update(){super.update(),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}setSmoothTarget(t){this.targetX.set(t)}setSmoothRotation(t){this.rotationX.set(t)}setSmoothZoom(t){this.zoomZ.set(t)}getZoom(){return this.zoomZ.get()}followPos2D(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}followPosY(t){this.options.position.y=t,this.options.target.y=t}};var d=s(76717);const l=class extends d.A{constructor(t,e){super(t,e),this.camera=new h(e.camera),this.camera.perspective(this.containerSize.width,this.containerSize.height)}resize(t){super.resize(t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}update(t){super.update(t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}},76314(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);i&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},77314(t,e,s){s.d(e,{A:()=>a});var i=s(31601),n=s.n(i),r=s(76314),o=s.n(r)()(n());o.push([t.id,'#controls {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tdisplay: flex;\n\talign-items: stretch;\n\tz-index: 10;\n\tbackground-color: rgba(34, 34, 34, 0.8);\n\tmargin: 0.5em;\n\tpadding: 0.5em;\n}\n\n#controls div {\n\tdisplay: flex;\n\talign-items: stretch;\n}\n\n#controls div input[type="range"] {\n\twidth: 100%;\n}\n\n#controls div input[type="checkbox"] {\n\tmargin-right: 0.5em;\n}\n\n#controls label {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n#controls label,\n#controls a {\n\tfont-size: 0.8em;\n}\n\n@media (max-width: 570px) {\n\t#controls.responsive {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t}\n}\n',""]);const a=o},77659(t){var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},85072(t){var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],d=i.base?h[0]+i.base:h[0],l=r[d]||0,c="".concat(d," ").concat(l);r[d]=l+1;var g=s(c),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==g)e[g].references++,e[g].updater(p);else{var u=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:c,updater:u,references:1})}o.push(c)}return o}function n(t,e){var s=e.domAPI(e);s.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var h=i(t,n),d=0;d<r.length;d++){var l=s(r[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},97825(t){t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},99594(t,e,s){s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;this.value=t,this.target=t,this.sampling=e,this.threshold=1e-6}update(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}get(){return this.value}set(t){this.target=t}setDirect(t){this.value=t}}}}]);