"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[3007],{807(t,e,s){var i=s(85072),n=s.n(i),o=s(97825),r=s.n(o),h=s(77659),a=s.n(h),l=s(55056),d=s.n(l),c=s(10540),u=s.n(c),g=s(41113),p=s.n(g),m=s(55420),f={};f.styleTagTransform=p(),f.setAttributes=d(),f.insert=a().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=u();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},2038(t,e,s){s.d(e,{uu:()=>o,wH:()=>n});var i=s(4689);const n=function(t,e){let{startX:s=-1,endX:n=1,startZ:o=-1,endZ:r=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const h=[];for(let a=0;a<e;a++){const l=(0,i.cy)(a,0,e-1,o,r);for(let e=0;e<t;e++){const o=(0,i.cy)(e,0,t-1,s,n);h.push(o),h.push(0),h.push(l)}}return h},o=(t,e)=>{const s=[];for(let i=0;i<e-1;i++)for(let e=0;e<t-1;e++){const n=i*t+e;s.push(n),s.push(t+n),s.push(n+1),s.push(t+n),s.push(t+n+1),s.push(n+1)}return s}},2499(t,e,s){s.d(e,{A:()=>o});const i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];class n{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.size=t,this.seed=e?n.getFixedSeedNoise(this.size):n.getGenerateNoise(this.size)}get(t,e){let s=0,i=this.size;for(;i>=1;)s+=this.smoothNoise(t/i,e/i,this.seed)*i,i/=2;return.5*s/this.size}smoothNoise(t,e,s){const i=t-Math.floor(t),n=e-Math.floor(e),o=(Math.floor(t)+this.size)%this.size,r=(Math.floor(e)+this.size)%this.size,h=(o+this.size-1)%this.size,a=(r+this.size-1)%this.size;let l=0;return l+=i*n*s[o][r],l+=i*(1-n)*s[o][a],l+=(1-i)*n*s[h][r],l+=(1-i)*(1-n)*s[h][a],l}static getGenerateNoise(t){const e=new Array(t);for(let s=0;s<t;s+=1){e[s]=new Array(t);for(let i=0;i<t;i+=1)e[s][i]=Math.random()}return e}static getFixedSeedNoise(t){const e=new Array(t);let s=0;for(let n=0;n<t;n+=1){e[n]=new Array(t);for(let o=0;o<t;o+=1)e[n][o]=i[s]/256,s+=1}return e}}const o=n},10540(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},19365(t,e,s){s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.d=[0,0,0,0],this.set(t,e,s,i)}normalise(){const t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}get(){return this.d}getX(){return this.d[0]}getY(){return this.d[1]}getZ(){return this.d[2]}getW(){return this.d[3]}length(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}set(t,e,s,i){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=s?this.d[2]=s:null!=t&&(this.d[2]=t),null!=i?this.d[3]=i:null!=t&&(this.d[3]=t),this}equal(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}addNumber(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}minus(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}minusNumber(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}multiplyNumber(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}multiplyMatrix(t){const e=this.d[0],s=this.d[1],i=this.d[2],n=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*s+t.d[8]*i+t.d[12]*n,this.d[1]=t.d[1]*e+t.d[5]*s+t.d[9]*i+t.d[13]*n,this.d[2]=t.d[2]*e+t.d[6]*s+t.d[10]*i+t.d[14]*n,this.d[3]=t.d[3]*e+t.d[7]*s+t.d[11]*i+t.d[15]*n,this}multiply(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}divideNumber(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}divide(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}distance(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}},19513(t,e,s){var i=s(85072),n=s.n(i),o=s(97825),r=s.n(o),h=s(77659),a=s.n(h),l=s(55056),d=s.n(l),c=s(10540),u=s.n(c),g=s(41113),p=s.n(g),m=s(77314),f={};f.styleTagTransform=p(),f.setAttributes=d(),f.insert=a().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=u();n()(m.A,f),m.A&&m.A.locals&&m.A.locals},23862(t,e,s){s.d(e,{A:()=>h});var i=s(31601),n=s.n(i),o=s(76314),r=s.n(o)()(n());r.push([t.id,"#shader {\n\tposition: relative;\n\twidth: 100%;\n\theight: auto;\n\t--project-color: #7866ff;\n}\n\n#shader canvas {\n\tmargin: 0 auto;\n\twidth: 100%;\n}\n\n#modes {\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin: 1em 0;\n}\n\n#modes button {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 3em;\n\theight: 3em;\n\tmargin: 0 0.2em;\n\tpadding: 0.9em 0 1em;\n\tborder-radius: 50%;\n\tcolor: #fff;\n\tbackground-color: var(--project-color);\n\topacity: 0.5;\n\ttransition:\n\t\topacity 100ms ease-out,\n\t\ttransform 100ms cubic-bezier(0.43, 0.5, 0.36, 1.89);\n}\n\n#modes button[data-current],\n#modes button:hover {\n\ttransform: scale(1.1);\n\topacity: 1;\n}\n\n#modes button p {\n\tmargin-bottom: 2px;\n}\n\n#shader #message {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate3d(-50%, -50%, 0);\n\tcolor: #fff;\n\tfont-size: 1em;\n\tletter-spacing: 0.2em;\n\tdisplay: none;\n\t-webkit-touch-callout: none;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n}\n",""]);const h=r},23876(t,e,s){s.d(e,{A:()=>o});var i=s(67269),n=s(54096);const o=class{constructor(t){if(this.position=new n.A(t.position.x,t.position.y,t.position.z),this.target=new n.A(0,0,0),this.view=new i.A,t.ortho){const{left:e,right:s,bottom:n,top:o}=t.ortho,{near:r,far:h}=t;this.ortho=new i.A,this.ortho.ortho(e,s,n,o,r,h)}}lookAt(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}getView(){return this.view}getPosition(){return this.position.get()}getPositionVec3(){return this.position}getTarget(){return this.target.get()}getModel(){return this.repere.getModel()}getOrtho(){return this.ortho}addToPosition(t,e,s){this.position.addXYZ(t,e,s),this.lookAt()}setPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=null!==t?t:this.position.getX(),n=null!==e?e:this.position.getY(),o=null!==s?s:this.position.getZ();this.position.set(i,n,o),this.lookAt()}setTarget(t,e,s){this.target.set(t,e,s)}setTargetVec3(t){this.target.equal(t)}}},31601(t){t.exports=function(t){return t[1]}},41113(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},55056(t,e,s){t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},55420(t,e,s){s.d(e,{A:()=>h});var i=s(31601),n=s.n(i),o=s(76314),r=s.n(o)()(n());r.push([t.id,"#fullscreen-toggle-btn {\n\tborder-radius: 0;\n\tmargin: 0;\n\tpadding: 4px;\n\tborder: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n\ttransform: scale(0.8);\n\topacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n\tdisplay: block;\n\twidth: 2em;\n\tfill: #fff;\n\topacity: 0.8;\n\ttransform: scale(0.6);\n\ttransition:\n\t\topacity 300ms ease-out,\n\t\ttransform 300ms ease-out;\n}\n\n[data-fullscreen] {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n",""]);const h=r},67164(t,e,s){s.d(e,{E2:()=>o,YL:()=>n});const i=(t,e,s)=>{let i=s;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},n=(t,e,s)=>{let n,o,r;const h=t/360,a=e/100,l=s/100;if(0===a)n=l,o=l,r=l;else{const t=l<.5?l*(1+a):l+a-l*a,e=2*l-t;n=i(e,t,h+1/3),o=i(e,t,h),r=i(e,t,h-1/3)}return{r:Math.round(255*n),g:Math.round(255*o),b:Math.round(255*r)}},o=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},71907(t,e,s){s.d(e,{A:()=>r});var i=s(67269),n=s(54096),o=s(23876);const r=class extends o.A{constructor(t){super(t),this.matIdentity=new i.A,this.projection=new i.A,this.projection.identity(),this.near=t.near??1,this.far=t.far??100,this.angle=t.angle??50,this.matIdentity.identity(),this.lookAt()}update(){this.lookAt()}perspective(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}moveAroundCenter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(Math.cos(t)*e,Math.sin(t)*(2+e),Math.sin(t)*e),this.lookAt()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}setNearFar(t,e){this.near=t,this.far=e}setAngle(t){this.angle=t}getModeProjection(){return this.ortho??this.projection}getProjection(){return this.projection}getViewProjection(){const t=new i.A;return t.identity(),t.multiply(this.getView()),t.multiply(this.getProjection()),t}getInverseViewProjection(){return this.getViewProjection().inverse()}unproject(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const i=new n.A(t,e,s),o=this.getInverseViewProjection();return i.multiplyMatrix(o)}getRayFromNDC(t,e){const s=this.getInverseViewProjection(),i=new n.A(t,e,0).multiplyMatrix(s),o=new n.A(t,e,1).multiplyMatrix(s);return{origin:i,dir:new n.A(o.getX(),o.getY(),o.getZ()).minus(i).normalise()}}worldToNDC(t){const e=this.getViewProjection();return new n.A(t.getX(),t.getY(),t.getZ()).multiplyMatrix(e)}worldToRelativeScreen(t,e){const s=this.worldToNDC(t);return{x:(.5*s.getX()+.5)*e.width,y:(1-(.5*s.getY()+.5))*e.height}}getIdentity(){return this.matIdentity}getNearFar(){return[this.near,this.far]}getNear(){return this.near}getFar(){return this.far}getAngle(){return this.angle}getReflectViewMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=2*(this.position.getY()-t);return(new i.A).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}}},72985(t,e,s){s.d(e,{A:()=>d});var i=s(99594),n=s(67269),o=s(19365),r=s(71907);const h=class extends r.A{get2dTexturePoint(t){const e=t.getX(),s=t.getY(),i=t.getZ(),r=new o.A(e,s,i,1),h=new n.A;h.equal(this.view).multiply(this.projection),r.multiplyMatrix(h);let a=r.getX()/r.getW(),l=r.getY()/r.getW();return a=.5*(a+1),l=.5*(l+1),[a,l]}get2dScreenPoint(t,e){const s=this.get2dTexturePoint(t);return[s[0]*e.width,s[1]*e.height]}},a=class extends h{constructor(t){super(t),this.options=t,this.rotationX=new i.A,this.targetX=new i.A,this.zoomZ=new i.A(.7,.1)}update(){super.update(),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}setSmoothTarget(t){this.targetX.set(t)}setSmoothRotation(t){this.rotationX.set(t)}setSmoothZoom(t){this.zoomZ.set(t)}getZoom(){return this.zoomZ.get()}followPos2D(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}followPosY(t){this.options.position.y=t,this.options.target.y=t}};var l=s(76717);const d=class extends l.A{constructor(t,e){super(t,e),this.camera=new a(e.camera),this.camera.perspective(this.containerSize.width,this.containerSize.height)}resize(t){super.resize(t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}update(t){super.update(t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}},76314(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var h=0;h<this.length;h++){var a=this[h][0];null!=a&&(r[a]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);i&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},77314(t,e,s){s.d(e,{A:()=>h});var i=s(31601),n=s.n(i),o=s(76314),r=s.n(o)()(n());r.push([t.id,'#controls {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tdisplay: flex;\n\talign-items: stretch;\n\tz-index: 10;\n\tbackground-color: rgba(34, 34, 34, 0.8);\n\tmargin: 0.5em;\n\tpadding: 0.5em;\n}\n\n#controls div {\n\tdisplay: flex;\n\talign-items: stretch;\n}\n\n#controls div input[type="range"] {\n\twidth: 100%;\n}\n\n#controls div input[type="checkbox"] {\n\tmargin-right: 0.5em;\n}\n\n#controls label {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n#controls label,\n#controls a {\n\tfont-size: 0.8em;\n}\n\n@media (max-width: 570px) {\n\t#controls.responsive {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t}\n}\n',""]);const h=r},77659(t){var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},83007(t,e,s){s.r(e),s.d(e,{default:()=>K,destroy:()=>Q});var i=s(99590),n=s(54705);const o=1/1048576,r=(t,e,s,i)=>{const[n,r]=t[e],[h,a]=t[s],[l,d]=t[i],c=Math.abs(r-a),u=Math.abs(a-d);let g,p,m,f,v,w,A,b;if(c<o&&u<o)throw new Error("Eek! Coincident points!");c<o?(f=-(l-h)/(d-a),w=(h+l)/2,b=(a+d)/2,g=(h+n)/2,p=f*(g-w)+b):u<o?(m=-(h-n)/(a-r),v=(n+h)/2,A=(r+a)/2,g=(l+h)/2,p=m*(g-v)+A):(m=-(h-n)/(a-r),f=-(l-h)/(d-a),v=(n+h)/2,w=(h+l)/2,A=(r+a)/2,b=(a+d)/2,g=(m*v-f*w+b-A)/(m-f),p=c>u?m*(g-v)+A:f*(g-w)+b);const y=h-g,x=a-p;return{i:e,j:s,k:i,x:g,y:p,r:y*y+x*x}},h=t=>{let e,s,i,n,o,r;for(s=t.length;s;)for(n=t[--s],i=t[--s],e=s;e;)if(r=t[--e],o=t[--e],i===o&&n===r||i===r&&n===o){t.splice(s,2),t.splice(e,2);break}},a={triangulate:(t,e)=>{const s=t.length;let i,n,a,l,d;if(s<3)return[];const c=t.slice(0);if(e)for(let t=s;t--;)c[t]=c[t][e];const u=new Array(s);for(let t=s;t--;)u[t]=t;u.sort(((t,e)=>c[e][0]-c[t][0]));const g=(t=>{let e=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o=t.length;o--;){const[r,h]=t[o];r<e&&(e=r),r>i&&(i=r),h<s&&(s=h),h>n&&(n=h)}const o=i-e,r=n-s,h=Math.max(o,r),a=e+.5*o,l=s+.5*r;return[[a-20*h,l-h],[a,l+20*h],[a+20*h,l-h]]})(c);c.push(g[0],g[1],g[2]);const p=[r(c,s+0,s+1,s+2)],m=[],f=[];for(let t=u.length;t--;f.length=0){d=u[t];for(let t=p.length;t--;)i=c[d][0]-p[t].x,i>0&&i*i>p[t].r?(m.push(p[t]),p.splice(t,1)):(n=c[d][1]-p[t].y,i*i+n*n-p[t].r>o||(f.push(p[t].i,p[t].j,p[t].j,p[t].k,p[t].k,p[t].i),p.splice(t,1)));h(f);for(let t=f.length;t;)l=f[--t],a=f[--t],p.push(r(c,a,l,d))}for(let t=p.length;t--;)m.push(p[t]);p.length=0;for(let t=m.length;t--;)m[t].i<s&&m[t].j<s&&m[t].k<s&&p.push(m[t].i,m[t].j,m[t].k);return p},contains:(t,e)=>{if(e[0]<t[0][0]&&e[0]<t[1][0]&&e[0]<t[2][0]||e[0]>t[0][0]&&e[0]>t[1][0]&&e[0]>t[2][0]||e[1]<t[0][1]&&e[1]<t[1][1]&&e[1]<t[2][1]||e[1]>t[0][1]&&e[1]>t[1][1]&&e[1]>t[2][1])return null;const s=t[1][0]-t[0][0],i=t[2][0]-t[0][0],n=t[1][1]-t[0][1],o=t[2][1]-t[0][1],r=s*o-i*n;if(0===r)return null;const h=(o*(e[0]-t[0][0])-i*(e[1]-t[0][1]))/r,a=(s*(e[1]-t[0][1])-n*(e[0]-t[0][0]))/r;return h<0||a<0||h+a>1?null:[h,a]}};var l=s(67164),d=s(54096);const c=class{constructor(t){let{spring:e,friction:s}=t;(0,n.A)(this,"update",((t,e)=>{const s=new d.A(...t),i=new d.A(...e).minus(s).multiplyNumber(this.spring);return this.velocity.add(i).multiplyNumber(this.friction),s.add(this.velocity).get()})),this.spring=e,this.friction=s,this.velocity=new d.A}};var u=s(10334);const g=t=>t.reduce(((t,e)=>[...t,...e]),[]),p=t=>{const e=t.length;if(e>1){let s=[],i=[],n=[];return t.forEach(((o,r)=>{s=[...s,...o,...o];let h=[];if(0===r){const e=t[1];h=[o[0]+e[0]-o[0],o[1]+e[1]-o[1],o[2]+e[2]-o[2]]}else h=t[r-1];n=[...n,...h,...h];let a=[];if(e-1){const s=t[e-2];a=[o[0]+s[0]-o[0],o[1]+s[1]-o[1],o[2]+s[2]-o[2]]}else a=t[r+1];i=[...i,...a,...a]})),{position:s,next:i,previous:n}}return{position:g(t)}},m=class{constructor(t,e,s){let{spring:i,friction:o}=s;(0,n.A)(this,"init",(t=>{this.points.fill(t)}));const r=(t=>new Array(t).fill([0,0,0]))(e),{position:h,next:a,previous:l}=p(r),d=Array(2*(e-1)).fill().reduce(((t,e,s)=>s%2==0?[...t,s,s+1,s+2]:[...t,s,s+2,s+1]),[]);const g=(t=>{const e=new Float32Array(2*t);return Array(t).fill().forEach(((t,s)=>{e.set([-1,1],2*s)})),e})(e),m=(t=>{let e=[];return Array(t).fill().forEach(((s,i)=>{e=[...e,i/t,0,i/t,1]})),e})(e),f={position:h,next:a,previous:l,indices:d,side:g,texture:m};this.vbo=new u.A(t,f,!0),this.spring=new c({spring:i,friction:o}),this.points=r}update(t){this.points=this.points.map(((e,s)=>{let i=e;i=0===s?this.spring.update(e,[t.x,t.y,0]):this.points[s-1];return d.A.lerp(new d.A(...e),new d.A(...i),0===s?.9999:.8).get()}));const e=p(this.points);this.vbo.update(e)}render(t){this.vbo.render(t)}},f=class{constructor(t){(0,n.A)(this,"onMouseDrag",(t=>{this.mousePos=t.rel,this.weight=.01*t.speed})),(0,n.A)(this,"onMouseDown",(t=>{this.mousePos=t.rel,this.lines.forEach((e=>e.init([t.rel.x,t.rel.y,0])))})),this.colors=["#e09f7d","#ef5d60","#ec4067","#a01a7d","#311847"].map((t=>{const{r:e,g:s,b:i}=(0,l.E2)(t);return[e/255,s/255,i/255]})),this.lines=this.colors.map(((e,s)=>new m(t,20,{spring:.06*s,friction:.85+.02*s}))),this.mousePos={x:0,y:0},this.weight=0}update(t){t.setFloat("time",this.time),this.lines.forEach((t=>t.update(this.mousePos)))}render(t){t.setFloat("weight",this.weight),this.lines.forEach(((e,s)=>{t.setVector("color",this.colors[s]),e.render(t.get())}))}};var v=s(4689);const w=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.A)(this,"update",(()=>{this.withSlowDown&&this.slowDown(),this.withRebond?this.rebond():this.withRespawn&&this.respawn(),this.position.add(this.speed)})),(0,n.A)(this,"slowDown",(()=>{this.speed.multiplyNumber(this.damping)})),(0,n.A)(this,"rebond",(()=>{(this.position.getX()<-1||this.position.getX()>1)&&this.speed.multiplyX(-1),(this.position.getY()<-1||this.position.getY()>1)&&this.speed.multiplyY(-1),(this.position.getZ()<-1||this.position.getZ()>1)&&this.speed.multiplyZ(-1)})),(0,n.A)(this,"respawn",(()=>{this.position.getX()<-1?this.position.setX(1):this.position.getX()>1&&this.position.setX(-1),this.position.getY()<-1?this.position.setY(1):this.position.getY()>1&&this.position.setY(-1),this.position.getZ()<-1?this.position.setZ(1):this.position.getZ()>1&&this.position.setZ(-1)})),(0,n.A)(this,"setPosition",((t,e,s)=>{this.position.set(t,e,s)})),(0,n.A)(this,"setSpeed",((t,e,s)=>{this.speed.set(t,e,s)})),(0,n.A)(this,"getPosition",(()=>this.position)),(0,n.A)(this,"getSpeed",(()=>this.speed)),this.position=new d.A(0,0,0),this.speed=new d.A(0,0,0),this.withRebond=!!t.withRebond,this.withSlowDown=!!t.withSlowDown,this.withRespawn=!!t.withRespawn,this.damping=t.damping||.9}},A=class extends w{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,n.A)(this,"attract",(t=>{let e=(new d.A).equal(this.position).minus(t.getPosition());const s=e.length();if(s>0&&s<this.radius){let i=1/(s/this.radius)**(.5*this.ramp)-1;i=this.strength*i/this.radius,e=e.multiplyNumber(i),t.setSpeed(...t.speed.add(e).get())}})),(0,n.A)(this,"setRadius",(t=>{this.radius=t})),(0,n.A)(this,"setStrength",(t=>{this.strength=t})),(0,n.A)(this,"setRamp",(t=>{this.ramp=t})),this.radius=.5,this.strength=.1,this.ramp=.2}},b=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(0,n.A)(this,"update",(()=>{this.attractor.update(),this.nodes.forEach((t=>{this.attractor.attract(t),t.update()}))})),(0,n.A)(this,"placeNodes",(()=>{let t=0;for(let e=0;e<this.nbColumns;e++)for(let s=0;s<this.nbRows;s++){const i=(0,v.cy)(s,0,this.nbRows-1,-1,1),n=(0,v.cy)(e,0,this.nbColumns-1,-1,1);this.nodes[t].setPosition(i,n,0),t++}})),this.nbRows=t,this.nbColumns=e||t,this.nodes=Array.from({length:this.nbRows*this.nbColumns},(()=>new w({withRebond:!0,withSlowDown:!1}))),this.attractor=new A,this.attractor.setPosition(0,0,0),this.placeNodes()}getPositions(){return this.nodes.reduce(((t,e)=>[...e.getPosition().get(),...t]),[])}},y=.01,x=.1,M=class extends w{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),(0,n.A)(this,"seek",(t=>(new d.A).equal(t).minus(this.position).multiplyNumber(y).normalise())),(0,n.A)(this,"seekSteering",(t=>{const e=this.seek(t);return(new d.A).equal(e).minus(this.speed).limiter(x).divideNumber(10).add(this.speed).limiter(y)})),(0,n.A)(this,"seekSteeringArrival",(t=>{const e=(new d.A).equal(t).minus(this.position),s=e.length();if(s<.02){const t=y*(s/.02);e.normalise().multiplyNumber(t)}else e.normalise().multiplyNumber(y);return(new d.A).equal(e).minus(this.speed).limiter(x).add(this.speed)})),(0,n.A)(this,"flee",(t=>(new d.A).equal(this.seek(t)).multiplyNumber(-1))),(0,n.A)(this,"fleeSteering",(t=>(new d.A).equal(this.seekSteering(t)).multiplyNumber(-1))),(0,n.A)(this,"updateMigration",(t=>{this.defineAcceleration(t),this.speed.add(this.acceleration).limiter(y),this.acceleration.set(0,0,0)})),(0,n.A)(this,"defineAcceleration",(t=>{const e=new d.A;let s=0;const i=new d.A;let n=0,o=new d.A,r=0;t.forEach((t=>{const h=this.position.distance(t.getPosition());if(h>0){if(h<.1){const i=(new d.A).equal(this.position).minus(t.getPosition());i.normalise(),i.divideNumber(h),e.add(i),s++}h<.3&&(i.add(t.getSpeed()),n++),h<.5&&(o.add(t.getPosition()),r++)}})),s>0&&e.divideNumber(s),e.length()>0&&(e.normalise().multiplyNumber(y),e.minus(this.speed).limiter(x)),n>0&&(i.divideNumber(n).normalise().multiplyNumber(y),i.minus(this.speed).limiter(x)),r>0&&(o.divideNumber(r),o=this.seekSteering(o)),e.multiplyNumber(1.5);const h=(new d.A).equal(e).add(i).add(o).divideNumber(10);this.acceleration=this.acceleration.add(h)})),this.acceleration=new d.A(0,0,0);const t=(0,v.yT)(0,Math.PI);this.speed.set(Math.cos(t),Math.sin(t),0)}},P=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;(0,n.A)(this,"update",(()=>{this.birds.forEach((t=>{t.updateMigration(this.birds),t.update()}))})),(0,n.A)(this,"getPositions",(()=>this.birds.reduce(((t,e)=>[...e.getPosition().get(),...t]),[]))),this.birds=Array.from({length:t},(()=>new M({withRespawn:!0})))}};var N=s(2038),I=s(2499);var T=s(67269),k=s(55179),S=s(82669),j=s(12911);const z=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.POINTS;(0,n.A)(this,"addDataTexture",((t,e)=>{this.textures={...this.textures,[t]:new k.A(this.gl,new Uint8Array(e))}})),this.gl=t,this.screen=new j.A(t),this.fbo=new S.A(t,e,s);const o=((t,e)=>{const s=[];for(let i=0;i<e;i++)for(let n=0;n<t;n++){const o=(0,v.cy)(n,0,t-1,0,1),r=(0,v.cy)(i,0,e-1,0,1);s.push(o),s.push(r)}return s})(e,s);this.vbo=new u.A(t,{texture:o}),this.vbo.setModeDessin(i||t.POINTS),this.textures={}}compute(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object.keys(this.textures).forEach(((e,s)=>{t.setTexture(s,this.textures[e].get(),e)})),t.setFloat("time",e),this.fbo.start(),this.screen.render(t.get()),this.fbo.end()}render(t){t.setTexture(0,this.fbo.getTexture().get(),"textureMap"),this.vbo.render(t.get())}};var X=s(72985);const E=t=>.5*Math.sin(t)+.5,Y=(t,e,s,i)=>{const n=.02;return new d.A(Math.cos(t*Math.PI*e.getX()+i)*s.getX()-Math.cos(n*Math.PI*e.getX()+i)*s.getX(),E(t*Math.PI*e.getY()+i)*s.getY()-E(n*Math.PI*e.getY()+i)*s.getY(),E(t*Math.PI*e.getZ()+i)*s.getZ()-E(n*Math.PI*e.getZ()+i)*s.getZ())},C=class extends X.A{constructor(){super(...arguments),(0,n.A)(this,"setupControls",(()=>{this.mode=0,this.message=document.querySelector("#message"),this.buttons=document.querySelectorAll(".mode"),this.buttons.forEach(((t,e)=>{t.addEventListener("click",(t=>{this.onClickButton(t.target,e)}))}))})),(0,n.A)(this,"onClickButton",((t,e)=>{this.buttons.forEach((t=>t.removeAttribute("data-current"))),t.setAttribute("data-current",!0),this.mode=e,this.message.style.display=2===e?"block":"none"})),(0,n.A)(this,"destroy",(()=>{this.buttons&&this.buttons.forEach(((t,e)=>t.removeEventListener("click",(()=>this.onClickButton(e)),!1)))})),(0,n.A)(this,"onMouseDrag",(t=>{2===this.mode&&this.linesTrail.onMouseDrag(t)})),(0,n.A)(this,"onMouseDown",(t=>{2===this.mode&&this.linesTrail.onMouseDown(t)})),(0,n.A)(this,"onMouseMove",(t=>{this.mousePos=[t.relScroll.x/t.size.width,1-t.relScroll.y/t.size.height]}))}setup(){const{gl:t}=this;this.screen=new j.A(t),this.linesTrail=new f(t),this.grid=new b(40),this.vboGrid=new u.A(t,{position:this.grid.getPositions()},!0),this.vboGrid.setModeDessin(t.POINTS),this.migration=new P(40),this.vboMigration=new u.A(t,{position:this.migration.getPositions()},!0),this.vboMigration.setModeDessin(t.POINTS),this.particules=new z(t,32,32),this.particules.addDataTexture("textureMap",((t,e)=>{let s=[];const i=new I.A;for(let n=0;n<e;n++)for(let o=0;o<t;o++){const r=(0,v.cy)(o,0,t-1,0,255),h=Math.floor(255*i.get(o,n)),a=(0,v.cy)(n,0,e-1,0,255);s=[...s,r,h,a,255]}return s})(32,32)),this.particules.addDataTexture("morphMap",((t,e)=>{let s=[];for(let i=0;i<e;i++)for(let n=0;n<t;n++){const o=(0,v.cy)(n,0,t-1,0,255),r=0,h=(0,v.cy)(i,0,e-1,0,255);s=[...s,o,r,h,255]}return s})(32,32));const e=Array.from({length:40},(()=>[2*Math.random()-1,2*Math.random()-1])),s=a.triangulate(e),i=e.reduce(((t,e)=>[...t,e[0],e[1],2*Math.random()-1]),[]);this.vboDelaunay=new u.A(t,{position:i,indices:s}),this.vboDelaunay.setModeDessin(t.LINE_LOOP),this.bloom.setBlurSize(.4),this.bloom.setBlurIntensity(1.1),this.model=new T.A;const n=(0,N.wH)(2,128,{startX:-1,endX:1,startZ:0,endZ:128}),o=(0,N.uu)(2,128);this.roadVbo=new u.A(t,{position:n,indices:o}),this.roadFrequence=new d.A(2,0,2),this.roadAmplitude=new d.A(10,0,4),this.roadPositionY=1.2,this.roadLength=128,this.mousePos=[0,0];const r=new Array(256).fill(0).map(((t,e)=>e));this.circleVbo=new u.A(t,{index:r}),this.circleVbo.setModeDessin(t.LINE_LOOP);const h=this.mngProg.get("movingCircle");h.setInt("length",256),h.setInt("count",10),h.setVector("mouse",this.mousePos);const l=new Array(10).fill(0).map(((t,e)=>e)),c={componentType:t.FLOAT,count:10,size:1,type:"VEC3",values:new Float32Array(l)};this.circleVbo.addInstancingVbos(10,{offset:c}),this.setupControls()}render(){super.render(),this.model.identity();const{position:t,target:e}=this.config.camera;switch(this.camera.setTarget(e.x,e.y,e.z),this.camera.setPosition(t.x,t.y,t.z),this.mode){case 3:this.migration.update(),this.vboMigration.update({position:this.migration.getPositions()}),this.vboMigration.render(this.mngProg.get("point").get());break;case 0:this.model.rotate(.01*this.time,0,1,0),this.mngProg.get("basique3d").setMatrix("model",this.model.get()),this.bloom.start(),this.vboDelaunay.render(this.mngProg.get("basique3d").get()),this.bloom.end(),this.bloom.render();break;case 1:{this.model.rotate(.005*this.time,0,1,0);const t=(0,v.cy)(Math.cos(.01*this.time*.05),-1,1,0,1);this.particules.compute(this.mngProg.get("pass1Morph"),t),this.resizeViewport(),this.mngProg.get("pass2Camera").setMatrix("model",this.model.get()),this.particules.render(this.mngProg.get("pass2Camera"));break}case 2:{const t=this.mngProg.get("line");this.linesTrail.update(t),this.linesTrail.render(t);break}case 4:{const t=.005*this.time,e=Y(0,this.roadFrequence,this.roadAmplitude,t),s=Y(.2,this.roadFrequence,this.roadAmplitude,t);this.camera.setTarget(s.getX(),this.roadPositionY+s.getY(),this.roadLength),this.camera.setPosition(e.getX(),this.roadPositionY+e.getY(),0);const i=this.mngProg.get("road");i.setProjectionView(this.camera),i.setMatrix("model",this.model.get()),i.setFloat("time",t),i.setVector("frequence",this.roadFrequence.get()),i.setVector("amplitude",this.roadAmplitude.get()),i.setFloat("roadLength",this.roadLength),this.roadVbo.render(i.get());break}case 6:{const t=this.mngProg.get("landscape");t.setFloat("flipY",1),t.setFloat("time",.001*this.time),this.screen.render(t.get());break}case 7:{this.model.rotate(40*this.mousePos[0]-20,0,1,0);const t=this.mngProg.get("movingCircle");t.setMatrix("model",this.model.get()),t.setFloat("time",.001*this.time),t.setVector("mouse",this.mousePos),this.circleVbo.render(t.get());break}default:this.grid.update(),this.vboGrid.update({position:this.grid.getPositions()}),this.vboGrid.render(this.mngProg.get("point").get())}}},Z={slug:"shader",shaders:["/camera/road.js","/screen/line.js","/screen/point.js","/particules/pass1Morph.js","/particules/pass2Camera.js","/camera/basique3d.js","/camera/movingCircle.js","/screen/landscape.js","/screen/blurOnePass.js","/screen/screen.js","/screen/debug.js","/screen/bloom.js"],postprocess:{bloom:!0},canvas:{width:1024,height:1024},mouse:{events:["drag","down","move"]},camera:{position:{x:0,y:0,z:-4},target:{x:0,y:0,z:0},near:1,far:200,angle:90},controls:{modes:[1,2,3],fullscreen:{buttonId:"fullscreen-toggle-btn"}}};s(19513),s(807);var V=s(85072),D=s.n(V),F=s(97825),q=s.n(F),R=s(77659),L=s.n(R),O=s(55056),G=s.n(O),_=s(10540),B=s.n(_),H=s(41113),U=s.n(H),W=s(23862),$={};$.styleTagTransform=U(),$.setAttributes=G(),$.insert=L().bind(null,"head"),$.domAPI=q(),$.insertStyleElement=B();D()(W.A,$);W.A&&W.A.locals&&W.A.locals;let J=null;const K=async()=>{J=new i.A,await J.setup(C,Z);const t=document.querySelector(`#${Z.slug}`),e=J.getCanvas();e&&t&&t.appendChild(e)},Q=()=>{J&&J.destroy&&J.destroy()}},85072(t){var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var o={},r=[],h=0;h<t.length;h++){var a=t[h],l=i.base?a[0]+i.base:a[0],d=o[l]||0,c="".concat(l," ").concat(d);o[l]=d+1;var u=s(c),g={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==u)e[u].references++,e[u].updater(g);else{var p=n(g,i);i.byIndex=h,e.splice(h,0,{identifier:c,updater:p,references:1})}r.push(c)}return r}function n(t,e){var s=e.domAPI(e);s.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var o=i(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var h=s(o[r]);e[h].references--}for(var a=i(t,n),l=0;l<o.length;l++){var d=s(o[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=a}}},97825(t){t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},99594(t,e,s){s.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;this.value=t,this.target=t,this.sampling=e,this.threshold=1e-6}update(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}get(){return this.value}set(t){this.target=t}setDirect(t){this.value=t}}}}]);