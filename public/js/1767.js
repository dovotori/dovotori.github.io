"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[1767],{49790:(t,e,s)=>{s.d(e,{Z:()=>l});var n=s(34575),i=s.n(n),r=s(93913),d=s.n(r),h=s(39966),o=s(17968),a=s(21969);const l=function(){function t(){i()(this,t),this.d=new Float32Array(8),this.identity()}return d()(t,[{key:"identity",value:function(){return this.d[0]=0,this.d[1]=0,this.d[2]=0,this.d[3]=1,this.d[4]=0,this.d[5]=0,this.d[6]=0,this.d[7]=0,this}},{key:"set",value:function(t,e,s,n,i,r,d,h){return this.d[0]=t,this.d[1]=e,this.d[2]=s,this.d[3]=n,this.d[4]=i,this.d[5]=r,this.d[6]=d,this.d[7]=h,this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this.d[4]+=t.d[4],this.d[5]+=t.d[5],this.d[6]+=t.d[6],this.d[7]+=t.d[7],this}},{key:"translate",value:function(t){var e=this.d[0],s=this.d[1],n=this.d[2],i=this.d[3],r=.5*t[0],d=.5*t[1],h=.5*t[2],o=this.d[4],a=this.d[5],l=this.d[6],c=this.d[7];return this.d[0]=e,this.d[1]=s,this.d[2]=n,this.d[3]=i,this.d[4]=i*r+s*h-n*d+o,this.d[5]=i*d+n*r-e*h+a,this.d[6]=i*h+e*d-s*r+l,this.d[7]=-e*r-s*d-n*h+c,this}},{key:"multiply",value:function(t){var e=this.d[0],s=this.d[1],n=this.d[2],i=this.d[3],r=t.d[4],d=t.d[5],h=t.d[6],o=t.d[7],a=this.d[4],l=this.d[5],c=this.d[6],u=this.d[7],g=t.d[0],f=t.d[1],p=t.d[2],m=t.d[3];return this.d[0]=e*m+i*g+s*p-n*f,this.d[1]=s*m+i*f+n*g-e*p,this.d[2]=n*m+i*p+e*f-s*g,this.d[3]=i*m-e*g-s*f-n*p,this.d[4]=e*o+i*r+s*h-n*d+a*m+u*g+l*p-c*f,this.d[5]=s*o+i*d+n*r-e*h+l*m+u*f+c*g-a*p,this.d[6]=n*o+i*h+e*d-s*r+c*m+u*p+a*f-l*g,this.d[7]=i*o-e*r-s*d-n*h+u*m-a*g-l*f-c*p,this}},{key:"scale",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this.d[4]*=t,this.d[5]*=t,this.d[6]*=t,this.d[7]*=t,this}},{key:"rotateX",value:function(t){var e=-this.d[0],s=-this.d[1],n=-this.d[2],i=this.d[3],r=this.d[4],d=this.d[5],h=this.d[6],a=this.d[7],l=r*i+a*e+d*n-h*s,c=d*i+a*s+h*e-r*n,u=h*i+a*n+r*s-d*e,g=a*i-r*e-d*s-h*n,f=new o.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateX(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),n=f.getZ(),i=f.getW(),this.d[4]=l*i+g*e+c*n-u*s,this.d[5]=c*i+g*s+u*e-l*n,this.d[6]=u*i+g*n+l*s-c*e,this.d[7]=g*i-l*e-c*s-u*n,this}},{key:"rotateY",value:function(t){var e=-this.d[0],s=-this.d[1],n=-this.d[2],i=this.d[3],r=this.d[4],d=this.d[5],h=this.d[6],a=this.d[7],l=r*i+a*e+d*n-h*s,c=d*i+a*s+h*e-r*n,u=h*i+a*n+r*s-d*e,g=a*i-r*e-d*s-h*n,f=new o.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateY(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),n=f.getZ(),i=f.getW(),this.d[4]=l*i+g*e+c*n-u*s,this.d[5]=c*i+g*s+u*e-l*n,this.d[6]=u*i+g*n+l*s-c*e,this.d[7]=g*i-l*e-c*s-u*n,this}},{key:"rotateZ",value:function(t){var e=-this.d[0],s=-this.d[1],n=-this.d[2],i=this.d[3],r=this.d[4],d=this.d[5],h=this.d[6],a=this.d[7],l=r*i+a*e+d*n-h*s,c=d*i+a*s+h*e-r*n,u=h*i+a*n+r*s-d*e,g=a*i-r*e-d*s-h*n,f=new o.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateZ(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),n=f.getZ(),i=f.getW(),this.d[4]=l*i+g*e+c*n-u*s,this.d[5]=c*i+g*s+u*e-l*n,this.d[6]=u*i+g*n+l*s-c*e,this.d[7]=g*i-l*e-c*s-u*n,this}},{key:"rotateAroundAxis",value:function(t,e){if(Math.abs(e)<h.I)return this;var s=Math.hypot(t[0],t[1],t[2]),n=.5*e,i=Math.sin(n),r=i*t[0]/s,d=i*t[1]/s,o=i*t[2]/s,a=Math.cos(n),l=this.d[0],c=this.d[1],u=this.d[2],g=this.d[3];this.d[0]=l*a+g*r+c*o-u*d,this.d[1]=c*a+g*d+u*r-l*o,this.d[2]=u*a+g*o+l*d-c*r,this.d[3]=g*a-l*r-c*d-u*o;var f=this.d[4],p=this.d[5],m=this.d[6],v=this.d[7];return this.d[4]=f*a+v*r+p*o-m*d,this.d[5]=p*a+v*d+m*r-f*o,this.d[6]=m*a+v*o+f*d-p*r,this.d[7]=v*a-f*r-p*d-m*o,this}},{key:"getTranslation",value:function(){var t=this.d[4],e=this.d[5],s=this.d[6],n=this.d[7],i=-this.d[0],r=-this.d[1],d=-this.d[2],h=this.d[3],o=[3];return o[0]=2*(t*h+n*i+e*d-s*r),o[1]=2*(e*h+n*r+s*i-t*d),o[2]=2*(s*h+n*d+t*r-e*i),o}},{key:"toMatrix4",value:function(){var t=[16];return t[0]=1-2*this.d[1]*this.d[1]-2*this.d[2]*this.d[2],t[1]=2*this.d[0]*this.d[1]+2*this.d[3]*this.d[2],t[2]=2*this.d[0]*this.d[2]-2*this.d[3]*this.d[1],t[3]=0,t[4]=2*this.d[0]*this.d[1]-2*this.d[3]*this.d[2],t[5]=1-2*this.d[0]*this.d[0]-2*this.d[2]*this.d[2],t[6]=2*this.d[1]*this.d[2]+2*this.d[3]*this.d[0],t[7]=0,t[8]=2*this.d[0]*this.d[2]+2*this.d[3]*this.d[1],t[9]=2*this.d[1]*this.d[2]-2*this.d[3]*this.d[0],t[10]=1-2*this.d[0]*this.d[0]-2*this.d[1]*this.d[1],t[11]=0,t[12]=2*(-this.d[7]*this.d[0]+this.d[4]*this.d[3]-this.d[5]*this.d[2]+this.d[6]*this.d[1]),t[13]=2*(-this.d[7]*this.d[1]+this.d[4]*this.d[2]+this.d[5]*this.d[3]-this.d[6]*this.d[0]),t[14]=2*(-this.d[7]*this.d[2]-this.d[4]*this.d[1]+this.d[5]*this.d[0]+this.d[6]*this.d[3]),t[15]=1,(new a.Z).setFromArray(t)}},{key:"get",value:function(){return this.d}}]),t}()},85693:(t,e,s)=>{s.d(e,{Z:()=>h});var n=s(34575),i=s.n(n),r=s(93913),d=s.n(r),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,t),this.value=e,this.speed=0,this.sampling=s.sampling||.7}return d()(t,[{key:"update",value:function(){this.value+=this.speed,this.speed*=this.sampling}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.speed+=t}}]),t}()},21767:(t,e,s)=>{s.r(e),s.d(e,{default:()=>G,destroy:()=>W});var n=s(48926),i=s.n(n),r=s(87757),d=s.n(r),h=s(35466),o=s(34575),a=s.n(o),l=s(93913),c=s.n(l),u=s(81506),g=s.n(u),f=s(16525),p=s.n(f),m=s(2205),v=s.n(m),y=s(78585),b=s.n(y),k=s(29754),Z=s.n(k),x=s(59713),w=s.n(x),M=s(25192),P=s(21969),j=s(85693),A=s(47313),I=s(49790),N=s(68763),T=s(80602),R=s(2444),D=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a()(this,t),this.gl=e,this.fboColorDepth=new R.Z(e,s,n,i),this.fboNormal=new R.Z(e,s,n,i),this.fboPosition=new R.Z(e,s,n,i),this.width=s,this.height=n}return c()(t,[{key:"generateTextures",value:function(t,e){e.setInt("type",0),this.fboColorDepth.start(),t(e),this.fboColorDepth.end(),e.setInt("type",1),this.fboNormal.start(),t(e),this.fboNormal.end(),e.setInt("type",2),this.fboPosition.start(),t(e),this.fboPosition.end()}},{key:"getColorTexture",value:function(){return this.fboColorDepth.getTexture()}},{key:"getDepthTexture",value:function(){return this.fboColorDepth.getDepthTexture()}},{key:"getNormalTexture",value:function(){return this.fboNormal.getTexture()}},{key:"getPositionTexture",value:function(){return this.fboPosition.getTexture()}}]),t}(),O=s(31073);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,n=Z()(t);if(e){var i=Z()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return b()(this,s)}}var z=function(t){v()(s,t);var e=X(s);function s(t,n){var i;return a()(this,s),i=e.call(this,t,n),w()(g()(i),"mainRender",(function(t){i.renderFakeShadow(i.mngProg.get("color")),i.mngGltf.get(i.config.MAIN_OBJ).render(t,i.model)})),w()(g()(i),"renderBasiqueForLampeDepth",(function(){var t=i.getLampe(0),e=i.mngProg.get("basique3d");t.setDepthProgram(e),t.start(),i.mainRender(e),t.end()})),w()(g()(i),"onMouseDrag",(function(t){i.targetX.set(.1*t.relPrevious.x)})),w()(g()(i),"onMouseWheel",(function(t){var e=-t.deltaY;e=Math.min(e,1.2),e=Math.max(e,.8),i.targetZ.set(e)})),i.config.MAIN_PROG=n.MAIN_PROG,i.config.MAIN_OBJ=n.MAIN_OBJ,i.model=new P.Z,i.model.identity(),i.targetX=new j.Z(0),i.targetZ=new A.Z(0,.05),i.fakeShadow=new T.Z(t,O.Z),i.targetZ.set(1.2),i.buffers=new D(i.gl,n.width,n.height,i.canUseDepth()),i}return c()(s,[{key:"update",value:function(t){p()(Z()(s.prototype),"update",this).call(this,t),this.targetX.update(),this.targetZ.update(),this.model.identity(),this.model.scale(this.targetZ.get());var e=(0,N.Id)(this.targetX.get())+1e-4*t,n=new I.Z;n.rotateY(-e),this.model.multiply(n.toMatrix4());var i=this.mngProg.get(this.config.MAIN_PROG),r=new P.Z;r.equal(this.camera.getView()).multiply(this.model).inverse(),i.setMatrix("inverseModel",r.get()),this.mngGltf.get(this.config.MAIN_OBJ).update(t)}},{key:"render",value:function(){p()(Z()(s.prototype),"render",this).call(this),this.mainRender(this.mngProg.get(this.config.MAIN_PROG))}},{key:"renderFakeShadow",value:function(t){var e=new P.Z;e.identity(),e.rotate(-90,1,0,0),e.translate(.2,-7,0),e.scale(8.1,1,6),e.multiply(this.model),t.setMatrix("model",e.get()),t.setVector("color",[0,0,0,.9]),this.fakeShadow.render(t.get())}}]),s}(M.Z),Y="paysage",_="paysage";const B={slug:"paysage",MAIN_PROG:Y,MAIN_OBJ:_,shaders:["/camera/basique3d.js","/camera/color.js","/camera/".concat(Y,".js"),"/screen/fxaa.js","/screen/fxaa2.js","/screen/screen.js","/camera/buffers.js","/screen/brightcontrast.js","/screen/ssao.js","/screen/blurOnePass.js","/screen/compose.js","/screen/bloom.js","/camera/shadow.js"],postprocess:{ssao:{radius:2,strength:1,blur:{size:1e-6,intensity:.6}},shadow:{epsilon:1e-4,lighten:.1,blur:{size:.1,intensity:1}}},useDepthTexture:!0,assets:["/gltf/".concat(_,".gltf")],camera:{position:{x:-14,y:8,z:14},target:{x:0,y:-2,z:0},near:1,far:40,angle:90},lampes:[{type:0,position:{x:10,y:20,z:10},ambiant:[1,.8,.6],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:2e3,ortho:{left:-17,right:17,bottom:-15,top:15},near:10,far:50},{type:0,position:{x:-14,y:20,z:-14},ambiant:[.8,.6,1],diffuse:[.6,.5,.8],specular:[.8,.7,1],brillance:10,radius:10,direction:[0,0,1],strength:2e3}],mouse:{events:["drag","wheel"]},canvas:{width:1024,height:1024},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};s(88747),s(89153);var C=null;const G=i()(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C=new h.Z,t.next=3,C.setup(z,B);case 3:case"end":return t.stop()}}),t)})));var W=function(){C&&C.destroy&&C.destroy()}},24981:(t,e,s)=>{s.d(e,{Z:()=>h});var n=s(8081),i=s.n(n),r=s(23645),d=s.n(r)()(i());d.push([t.id,"#controls {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: stretch;\n  z-index: 10;\n  background-color: rgba(34, 34, 34, .8);\n  margin: .5em;\n  padding: .5em;\n}\n\n#controls div {\n  display: flex;\n  align-items: stretch;\n}\n\n#controls div input[type=range] {\n  width: 100%;\n}\n\n#controls div input[type=checkbox] {\n  margin-right: 0.5em;\n}\n\n#controls select {\n  background-color: #555;\n  color: var(--project-color);\n  border: none;\n  border-radius: 0.2em;\n  display: inline-block;\n  padding: 0.5em 1em 0.5em 0.2em;\n  margin: 0;\n  box-sizing: border-box;\n}\n\n#controls select:focus {\n  outline: 0;\n}\n\n#controls select option {\n  font-size: 1.2em;\n}\n\n#controls label {\n  display: flex;\n  align-items: center;\n}\n\n#controls label,\n#controls a,\n#controls button,\n#controls select {\n  font-size: .8em;\n}\n\n#controls div label {\n  min-width: 40%;\n  margin-right: 5px;\n}\n\n#controls a,\n#controls button {\n  background: #555;\n  padding: 0.5em;\n  border-radius: 0.2em;\n  color: var(--project-color);\n  transition: background 200ms ease-out;\n}\n\n#controls .primary {\n  background: var(--project-color);\n  color: black;\n}\n\n#controls a:hover,\n#controls button:hover {\n  background: black;\n  color: var(--project-color);\n}\n\n#controls a:active,\n#controls button:active {\n  transform: scale(0.9);\n}\n\n@media (max-width: 570px) {\n  #controls.responsive {\n    position: relative;\n    width: 100%;\n    margin: 0;\n  }\n}",""]);const h=d},76889:(t,e,s)=>{s.d(e,{Z:()=>h});var n=s(8081),i=s.n(n),r=s(23645),d=s.n(r)()(i());d.push([t.id,"#fullscreen-toggle-btn {\n  border-radius: 0;\n  margin: 0;\n  padding: 4px;\n  border: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n  transform: scale(0.8);\n  opacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n  display: block;\n  width: 2em;\n  fill: #fff;\n  opacity: 0.8;\n  transform: scale(0.6);\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\n}\n\n[data-fullscreen] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const h=d},88747:(t,e,s)=>{var n=s(93379),i=s.n(n),r=s(7795),d=s.n(r),h=s(90569),o=s.n(h),a=s(3565),l=s.n(a),c=s(70609),u=s.n(c),g=s(44589),f=s.n(g),p=s(24981),m={};m.styleTagTransform=f(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=d(),m.insertStyleElement=u();i()(p.Z,m),p.Z&&p.Z.locals&&p.Z.locals},89153:(t,e,s)=>{var n=s(93379),i=s.n(n),r=s(7795),d=s.n(r),h=s(90569),o=s.n(h),a=s(3565),l=s.n(a),c=s(70609),u=s.n(c),g=s(44589),f=s.n(g),p=s(76889),m={};m.styleTagTransform=f(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=d(),m.insertStyleElement=u();i()(p.Z,m),p.Z&&p.Z.locals&&p.Z.locals}}]);