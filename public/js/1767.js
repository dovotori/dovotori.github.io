"use strict";(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[1767],{49790:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(15671),h=s(43144),n=s(39966),r=s(17968),d=s(21969);const o=function(){function t(){(0,i.Z)(this,t),this.d=new Float32Array(8),this.identity()}return(0,h.Z)(t,[{key:"identity",value:function(){return this.d[0]=0,this.d[1]=0,this.d[2]=0,this.d[3]=1,this.d[4]=0,this.d[5]=0,this.d[6]=0,this.d[7]=0,this}},{key:"set",value:function(t,e,s,i,h,n,r,d){return this.d[0]=t,this.d[1]=e,this.d[2]=s,this.d[3]=i,this.d[4]=h,this.d[5]=n,this.d[6]=r,this.d[7]=d,this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this.d[4]+=t.d[4],this.d[5]+=t.d[5],this.d[6]+=t.d[6],this.d[7]+=t.d[7],this}},{key:"translate",value:function(t){var e=this.d[0],s=this.d[1],i=this.d[2],h=this.d[3],n=.5*t[0],r=.5*t[1],d=.5*t[2],o=this.d[4],a=this.d[5],u=this.d[6],l=this.d[7];return this.d[0]=e,this.d[1]=s,this.d[2]=i,this.d[3]=h,this.d[4]=h*n+s*d-i*r+o,this.d[5]=h*r+i*n-e*d+a,this.d[6]=h*d+e*r-s*n+u,this.d[7]=-e*n-s*r-i*d+l,this}},{key:"multiply",value:function(t){var e=this.d[0],s=this.d[1],i=this.d[2],h=this.d[3],n=t.d[4],r=t.d[5],d=t.d[6],o=t.d[7],a=this.d[4],u=this.d[5],l=this.d[6],c=this.d[7],g=t.d[0],f=t.d[1],p=t.d[2],v=t.d[3];return this.d[0]=e*v+h*g+s*p-i*f,this.d[1]=s*v+h*f+i*g-e*p,this.d[2]=i*v+h*p+e*f-s*g,this.d[3]=h*v-e*g-s*f-i*p,this.d[4]=e*o+h*n+s*d-i*r+a*v+c*g+u*p-l*f,this.d[5]=s*o+h*r+i*n-e*d+u*v+c*f+l*g-a*p,this.d[6]=i*o+h*d+e*r-s*n+l*v+c*p+a*f-u*g,this.d[7]=h*o-e*n-s*r-i*d+c*v-a*g-u*f-l*p,this}},{key:"scale",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this.d[4]*=t,this.d[5]*=t,this.d[6]*=t,this.d[7]*=t,this}},{key:"rotateX",value:function(t){var e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],o=this.d[6],a=this.d[7],u=n*h+a*e+d*i-o*s,l=d*h+a*s+o*e-n*i,c=o*h+a*i+n*s-d*e,g=a*h-n*e-d*s-o*i,f=new r.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateX(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*e+l*i-c*s,this.d[5]=l*h+g*s+c*e-u*i,this.d[6]=c*h+g*i+u*s-l*e,this.d[7]=g*h-u*e-l*s-c*i,this}},{key:"rotateY",value:function(t){var e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],o=this.d[6],a=this.d[7],u=n*h+a*e+d*i-o*s,l=d*h+a*s+o*e-n*i,c=o*h+a*i+n*s-d*e,g=a*h-n*e-d*s-o*i,f=new r.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateY(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*e+l*i-c*s,this.d[5]=l*h+g*s+c*e-u*i,this.d[6]=c*h+g*i+u*s-l*e,this.d[7]=g*h-u*e-l*s-c*i,this}},{key:"rotateZ",value:function(t){var e=-this.d[0],s=-this.d[1],i=-this.d[2],h=this.d[3],n=this.d[4],d=this.d[5],o=this.d[6],a=this.d[7],u=n*h+a*e+d*i-o*s,l=d*h+a*s+o*e-n*i,c=o*h+a*i+n*s-d*e,g=a*h-n*e-d*s-o*i,f=new r.Z(this.d[0],this.d[1],this.d[2],this.d[3]);return f.rotateZ(t),this.d[0]=f.getX(),this.d[1]=f.getY(),this.d[2]=f.getZ(),this.d[3]=f.getW(),e=f.getX(),s=f.getY(),i=f.getZ(),h=f.getW(),this.d[4]=u*h+g*e+l*i-c*s,this.d[5]=l*h+g*s+c*e-u*i,this.d[6]=c*h+g*i+u*s-l*e,this.d[7]=g*h-u*e-l*s-c*i,this}},{key:"rotateAroundAxis",value:function(t,e){if(Math.abs(e)<n.I)return this;var s=Math.hypot(t[0],t[1],t[2]),i=.5*e,h=Math.sin(i),r=h*t[0]/s,d=h*t[1]/s,o=h*t[2]/s,a=Math.cos(i),u=this.d[0],l=this.d[1],c=this.d[2],g=this.d[3];this.d[0]=u*a+g*r+l*o-c*d,this.d[1]=l*a+g*d+c*r-u*o,this.d[2]=c*a+g*o+u*d-l*r,this.d[3]=g*a-u*r-l*d-c*o;var f=this.d[4],p=this.d[5],v=this.d[6],m=this.d[7];return this.d[4]=f*a+m*r+p*o-v*d,this.d[5]=p*a+m*d+v*r-f*o,this.d[6]=v*a+m*o+f*d-p*r,this.d[7]=m*a-f*r-p*d-v*o,this}},{key:"getTranslation",value:function(){var t=this.d[4],e=this.d[5],s=this.d[6],i=this.d[7],h=-this.d[0],n=-this.d[1],r=-this.d[2],d=this.d[3],o=[3];return o[0]=2*(t*d+i*h+e*r-s*n),o[1]=2*(e*d+i*n+s*h-t*r),o[2]=2*(s*d+i*r+t*n-e*h),o}},{key:"toMatrix4",value:function(){var t=[16];return t[0]=1-2*this.d[1]*this.d[1]-2*this.d[2]*this.d[2],t[1]=2*this.d[0]*this.d[1]+2*this.d[3]*this.d[2],t[2]=2*this.d[0]*this.d[2]-2*this.d[3]*this.d[1],t[3]=0,t[4]=2*this.d[0]*this.d[1]-2*this.d[3]*this.d[2],t[5]=1-2*this.d[0]*this.d[0]-2*this.d[2]*this.d[2],t[6]=2*this.d[1]*this.d[2]+2*this.d[3]*this.d[0],t[7]=0,t[8]=2*this.d[0]*this.d[2]+2*this.d[3]*this.d[1],t[9]=2*this.d[1]*this.d[2]-2*this.d[3]*this.d[0],t[10]=1-2*this.d[0]*this.d[0]-2*this.d[1]*this.d[1],t[11]=0,t[12]=2*(-this.d[7]*this.d[0]+this.d[4]*this.d[3]-this.d[5]*this.d[2]+this.d[6]*this.d[1]),t[13]=2*(-this.d[7]*this.d[1]+this.d[4]*this.d[2]+this.d[5]*this.d[3]-this.d[6]*this.d[0]),t[14]=2*(-this.d[7]*this.d[2]-this.d[4]*this.d[1]+this.d[5]*this.d[0]+this.d[6]*this.d[3]),t[15]=1,(new d.Z).setFromArray(t)}},{key:"get",value:function(){return this.d}}]),t}()},85693:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(15671),h=s(43144),n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,t),this.value=e,this.speed=0,this.sampling=s.sampling||.7}return(0,h.Z)(t,[{key:"update",value:function(){this.value+=this.speed,this.speed*=this.sampling}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.speed+=t}}]),t}()},21767:(t,e,s)=>{s.r(e),s.d(e,{default:()=>j,destroy:()=>D});var i=s(15861),h=s(87757),n=s.n(h),r=s(35466),d=s(15671),o=s(43144),a=s(97326),u=s(11752),l=s(60136),c=s(6215),g=s(61120),f=s(4942),p=s(25192),v=s(21969),m=s(85693),y=s(47313),Z=s(49790),b=s(68763),w=s(80602),x=s(2444),k=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,d.Z)(this,t),this.gl=e,this.fboColorDepth=new x.Z(e,s,i,h),this.fboNormal=new x.Z(e,s,i,h),this.fboPosition=new x.Z(e,s,i,h),this.width=s,this.height=i}return(0,o.Z)(t,[{key:"generateTextures",value:function(t,e){e.setInt("type",0),this.fboColorDepth.start(),t(e),this.fboColorDepth.end(),e.setInt("type",1),this.fboNormal.start(),t(e),this.fboNormal.end(),e.setInt("type",2),this.fboPosition.start(),t(e),this.fboPosition.end()}},{key:"getColorTexture",value:function(){return this.fboColorDepth.getTexture()}},{key:"getDepthTexture",value:function(){return this.fboColorDepth.getDepthTexture()}},{key:"getNormalTexture",value:function(){return this.fboNormal.getTexture()}},{key:"getPositionTexture",value:function(){return this.fboPosition.getTexture()}}]),t}(),P=s(31073);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=(0,g.Z)(t);if(e){var h=(0,g.Z)(this).constructor;s=Reflect.construct(i,arguments,h)}else s=i.apply(this,arguments);return(0,c.Z)(this,s)}}var T=function(t){(0,l.Z)(s,t);var e=M(s);function s(t,i,h){var n;return(0,d.Z)(this,s),n=e.call(this,t,i,h),(0,f.Z)((0,a.Z)(n),"mainRender",(function(t){n.renderFakeShadow(n.mngProg.get("color")),n.mngGltf.get(n.config.MAIN_OBJ).render(t,n.model)})),(0,f.Z)((0,a.Z)(n),"renderBasiqueForLampeDepth",(function(){var t=n.getLampe(0),e=n.mngProg.get("basique3d");t.setDepthProgram(e),t.start(),n.mainRender(e),t.end()})),(0,f.Z)((0,a.Z)(n),"onMouseDrag",(function(t){n.targetX.set(.1*t.relPrevious.x)})),(0,f.Z)((0,a.Z)(n),"onMouseWheel",(function(t){var e=-t.deltaY;e=Math.min(e,1.2),e=Math.max(e,.8),n.targetZ.set(e)})),n.config.MAIN_PROG=i.MAIN_PROG,n.config.MAIN_OBJ=i.MAIN_OBJ,n.model=new v.Z,n.model.identity(),n.targetX=new m.Z(0),n.targetZ=new y.Z(0,.05),n.fakeShadow=new w.Z(t,P.Z),n.targetZ.set(1.2),n.buffers=new k(n.gl,i.width,i.height,n.canUseDepth()),n}return(0,o.Z)(s,[{key:"update",value:function(t){(0,u.Z)((0,g.Z)(s.prototype),"update",this).call(this,t),this.targetX.update(),this.targetZ.update(),this.model.identity(),this.model.scale(this.targetZ.get());var e=(0,b.Id)(this.targetX.get())+1e-4*t,i=new Z.Z;i.rotateY(-e),this.model.multiply(i.toMatrix4());var h=this.mngProg.get(this.config.MAIN_PROG),n=new v.Z;n.equal(this.camera.getView()).multiply(this.model).inverse(),h.setMatrix("inverseModel",n.get()),this.mngGltf.get(this.config.MAIN_OBJ).update(t)}},{key:"render",value:function(){if((0,u.Z)((0,g.Z)(s.prototype),"render",this).call(this),this.canUseDepth()){var t=this.mngProg.get("buffers");this.buffers.generateTextures(this.mainRender,t),this.ssao.compute(this.buffers.getDepthTexture().get());var e=this.getLampe(0);this.shadow.start(e),this.mainRender(this.shadow.getProgram()),this.shadow.end(),this.shadow.setBrightContrast(0,4),this.shadow.setBlur(),this.postProcess.start(),this.mainRender(this.mngProg.get(this.config.MAIN_PROG)),this.postProcess.end(),this.postProcess.setCompose(this.ssao.getTexture().get(),this.shadow.getTexture().get(),this.buffers.getDepthTexture().get()),this.postProcess.setFxaa2(),this.postProcess.render()}else this.mainRender(this.mngProg.get(this.config.MAIN_PROG))}},{key:"renderFakeShadow",value:function(t){var e=new v.Z;e.identity(),e.rotate(-90,1,0,0),e.translate(.2,-7,0),e.scale(8.1,1,6),e.multiply(this.model),t.setMatrix("model",e.get()),t.setVector("color",[0,0,0,.9]),this.fakeShadow.render(t.get())}}]),s}(p.Z),A="paysage",I="paysage";const R={slug:"paysage",MAIN_PROG:A,MAIN_OBJ:I,shaders:["/camera/basique3d.js","/camera/color.js","/camera/".concat(A,".js"),"/screen/fxaa.js","/screen/fxaa2.js","/screen/screen.js","/camera/buffers.js","/screen/brightcontrast.js","/screen/ssao.js","/screen/blurOnePass.js","/screen/compose.js","/screen/bloom.js","/camera/shadow.js"],postprocess:{ssao:{radius:2,strength:1,blur:{size:1e-6,intensity:.6}},shadow:{epsilon:1e-4,lighten:.1,blur:{size:.1,intensity:1}}},useDepthTexture:!0,assets:["/gltf/".concat(I,".gltf")],camera:{position:{x:-14,y:8,z:14},target:{x:0,y:-2,z:0},near:1,far:40,angle:90},lampes:[{type:0,position:{x:10,y:20,z:10},ambiant:[1,.8,.6],diffuse:[.8,.6,.5],specular:[1,.8,.7],brillance:1,strength:2e3,ortho:{left:-17,right:17,bottom:-15,top:15},near:10,far:50},{type:0,position:{x:-14,y:20,z:-14},ambiant:[.8,.6,1],diffuse:[.6,.5,.8],specular:[.8,.7,1],brillance:10,radius:10,direction:[0,0,1],strength:2e3}],mouse:{events:["drag","wheel"]},canvas:{width:1024,height:1024},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};s(88747),s(89153);var N=null;const j=(0,i.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N=new r.Z,t.next=3,N.setup(T,R);case 3:document.querySelector("#".concat(R.slug)).appendChild(N.getCanvas());case 5:case"end":return t.stop()}}),t)})));var D=function(){N&&N.destroy&&N.destroy()}},24981:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(8081),h=s.n(i),n=s(23645),r=s.n(n)()(h());r.push([t.id,"#controls {\r\n  position: absolute;\r\n  top: 4px;\r\n  right: 4px;\r\n  display: flex;\r\n  align-items: stretch;\r\n  z-index: 1;\r\n}\r\n",""]);const d=r},76889:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(8081),h=s.n(i),n=s(23645),r=s.n(n)()(h());r.push([t.id,"#fullscreen-toggle-btn {\r\n  border-radius: 0;\r\n  margin: 0;\r\n  padding: 4px;\r\n  border: solid 2px var(--project-color);\r\n}\r\n\r\n#fullscreen-toggle-btn:hover svg,\r\n#fullscreen-toggle-btn:active svg {\r\n  transform: scale(0.8);\r\n  opacity: 1;\r\n}\r\n\r\n#fullscreen-toggle-btn svg {\r\n  display: block;\r\n  width: 2em;\r\n  fill: #fff;\r\n  opacity: 0.8;\r\n  transform: scale(0.6);\r\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\r\n}\r\n\r\n[data-fullscreen] {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n",""]);const d=r},88747:(t,e,s)=>{var i=s(93379),h=s.n(i),n=s(7795),r=s.n(n),d=s(90569),o=s.n(d),a=s(3565),u=s.n(a),l=s(70609),c=s.n(l),g=s(44589),f=s.n(g),p=s(24981),v={};v.styleTagTransform=f(),v.setAttributes=u(),v.insert=o().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=c();h()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals},89153:(t,e,s)=>{var i=s(93379),h=s.n(i),n=s(7795),r=s.n(n),d=s(90569),o=s.n(d),a=s(3565),u=s.n(a),l=s(70609),c=s.n(l),g=s(44589),f=s.n(g),p=s(76889),v={};v.styleTagTransform=f(),v.setAttributes=u(),v.insert=o().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=c();h()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals}}]);