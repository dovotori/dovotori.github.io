"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[9448],{39448:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N,destroy:()=>U});var s=n(35466);const i="deform",o={slug:"deform",MAIN_PROG:i,shaders:["/camera/normale.js","/camera/frequencyCircle.js","/camera/frequencyGrid.js",`/camera/${i}.js`],assets:["/textures/earth.png","/sound/akira.mp3"],camera:{position:{x:0,y:0,z:20},target:{x:0,y:0,z:0},near:1,far:40,angle:40},lampes:[{type:0,position:{x:40,y:40,z:40},ambiant:[1,1,1],diffuse:[1,1,1],specular:[1,1,1],brillance:1},{type:0,position:{x:-40,y:-40,z:40},ambiant:[1,1,1],diffuse:[1,179/255,1],specular:[1,1,1],brillance:1}],mouse:{domId:"deform",events:["drag","wheel","click"]},controls:{fullscreen:{domId:"deform",buttonId:"fullscreen-toggle-btn"},ranges:{volume:{min:0,max:100,value:50,label:"Volume"},playbackRate:{min:0,max:100,value:50,label:"Playback rate"}}},postprocess:!0,useDepthTexture:!0,canvas:{width:1024,height:1024}};var r=n(59713),a=n.n(r),l=n(25192),h=n(72710),u=n(64740);const d=class extends h.Z{create(){const t=new ArrayBuffer(this.size.width*this.size.height*4),e=new Uint8Array(t);let n=0;this.perlinNoise=new u.Z;for(let t=0;t<this.size.height;t+=1)for(let s=0;s<this.size.width;s+=1){const i=255*this.perlinNoise.get(s,t);e[n]=i,e[n+1]=i,e[n+2]=i,e[n+3]=255,n+=4}this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.height,this.size.width,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)}};var c=n(91215),g=n(21969);var p=n(85693),m=n(47313),f=n(80602),b=n(49790),y=n(68763);const v=t=>{let[e,n,s]=t,i=e*e+n*n+s*s;return 0!==i&&1!==i?(i=1/Math.sqrt(i),[e*i,n*i,s*i]):[e,n,s]};function A(t){const{positions:e,cells:n}=t,s=[],i=[],o={},r=(t,e)=>{const n=((t,e)=>[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])(t,e),s=(t=>`${t[0].toPrecision(6)},${t[1].toPrecision(6)},${t[2].toPrecision(6)}`)(n),i=o[s];return i||(o[s]=n,o[s])};let a=0;for(let t=0;t<n.length;t++){const o=n[t],l=o[0],h=o[1],u=o[2],d=e[l],c=e[h],g=e[u],p=r(d,c),m=r(c,g),f=r(g,d);let b=i.indexOf(p);-1===b&&(b=a++,i.push(p));let y=i.indexOf(m);-1===y&&(y=a++,i.push(m));let v=i.indexOf(f);-1===v&&(v=a++,i.push(f));let A=i.indexOf(d);-1===A&&(A=a++,i.push(d));let x=i.indexOf(c);-1===x&&(x=a++,i.push(c));let w=i.indexOf(g);-1===w&&(w=a++,i.push(g)),s.push([A,b,v]),s.push([x,y,b]),s.push([w,v,y]),s.push([b,y,v])}return{cells:s,positions:i}}const x=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0|+t,s=[];const i=[],o=[],r=.5+Math.sqrt(5)/2;s.push([-1,+r,0]),s.push([1,+r,0]),s.push([-1,-r,0]),s.push([1,-r,0]),s.push([0,-1,+r]),s.push([0,1,+r]),s.push([0,-1,-r]),s.push([0,1,-r]),s.push([+r,0,-1]),s.push([+r,0,1]),s.push([-r,0,-1]),s.push([-r,0,1]),i.push([0,11,5]),i.push([0,5,1]),i.push([0,1,7]),i.push([0,7,10]),i.push([0,10,11]),i.push([1,5,9]),i.push([5,11,4]),i.push([11,10,2]),i.push([10,7,6]),i.push([7,1,8]),i.push([3,9,4]),i.push([3,4,2]),i.push([3,2,6]),i.push([3,6,8]),i.push([3,8,9]),i.push([4,9,5]),i.push([2,4,11]),i.push([6,2,10]),i.push([8,6,7]),i.push([9,8,1]);let a={cells:i,positions:s};for(;n-- >0;)a=A(a);s=a.positions;for(let t=0;t<s.length;t++){const n=v(s[t]);e||(s[t]=n);const i=.5*(-Math.atan2(n[2],-n[0])/Math.PI+1),r=.5+Math.asin(n[1])/Math.PI;o.push([1-i,1-r])}return{position:a.positions.flat(),indices:a.cells.flat(),texture:o.flat(),normale:a.positions.flat()}},w=class extends l.Z{constructor(){var t;super(...arguments),t=this,a()(this,"setupControls",(t=>{let{ranges:e}=t;if(this.button=document.querySelector(".play-button"),this.sound=this.mngSound.get("akira"),this.button&&this.button.addEventListener("click",this.togglePlay,!1),this.ranges=e,this.config.controls){const{volume:t,playbackRate:e}=this.ranges;t.dom.addEventListener("change",this.onChangeVolume,!1),e.dom.addEventListener("change",this.onChangePlaybackRate,!1)}})),a()(this,"togglePlay",(()=>{this.sound&&this.button&&(this.sound.togglePause(),this.sound.getIsPause()?this.button.removeAttribute("data-play"):this.button.setAttribute("data-play",!0))})),a()(this,"onChangeVolume",(t=>{this.sound.setVolume(.01*t.target.value)})),a()(this,"onChangePlaybackRate",(t=>{this.sound.setPlaybackRate(.02*t.target.value)})),a()(this,"renderGlobe",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t.mngProg.get("normale");t.model.push(),t.model.scale(.7),t.model.rotate(.1*t.time,1,1,1),s.setMatrix("model",t.model.get()),t.model.pop(),t.simpleIcoSphere.render(s.get()),t.model.push(),t.model.rotate(.02*t.time,0,1,1),e.setMatrix("model",t.model.get());const i=t.model.getMatrice3x3();i.inverse(),i.transpose(),e.setMatrix("normalMatrix",i.get()),t.model.pop(),e.setTexture(2,t.texture.get(),"noiseMap"),e.setTexture(3,t.mngTex.get("earth").get(),"colorMap"),n&&e.setTexture(5,n.get(),"displacementMap"),t.icoSphere.render(e.get())})),a()(this,"onMouseDrag",(t=>{this.targetX.set(.1*t.relPrevious.x),this.targetY.set(.1*t.relPrevious.y)})),a()(this,"onMouseWheel",(t=>{let e=-t.deltaY;e=Math.min(e,2),e=Math.max(e,1),this.targetZ.set(e)})),a()(this,"onMouseClick",(()=>{this.pulse.set(1e3)}))}setup(){const{gl:t}=this;this.texture=new d(t,256,256),this.model=new g.Z,this.model.identity(),this.pulse=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=t,this.sampling=e.sampling||.7}update(){0!==this.value&&(this.value<1e-6&&(this.value=0),this.value*=this.sampling)}get(){return this.value}set(t){this.value=t}}(0),this.targetX=new p.Z(0),this.targetY=new p.Z(0),this.targetZ=new m.Z(0,.05),this.mouseCanvasPosition={x:0,y:0};const e=this.mngSound.get("akira").getFrequencyLength();this.uVbo=new class{constructor(t,e){this.gl=t,this.modeCalcul=this.gl.DYNAMIC_DRAW,this.vbo=this.gl.createBuffer(),this.count=e;const n=new Array(e);n.fill(0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}enable(t,e){this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.enableVertexAttribArray(t.locations[e]),this.gl.vertexAttribPointer(t.locations[e],1,this.gl.FLOAT,!1,0,0)}start(t,e,n){this.enable(t,e),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(n),this.modeCalcul)}end(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}setModeCalcul(t){this.modeCalcul=t}getCount(){return this.count}}(t,e);let n=new Array(e);n.fill(0),n=n.map(((t,e)=>e)),this.fVbo=new class{constructor(t,e){this.gl=t,this.modeCalcul=this.gl.STATIC_DRAW,this.vbo=this.gl.createBuffer(),this.count=e.length,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}enable(t,e){this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.enableVertexAttribArray(t.locations[e]),this.gl.vertexAttribPointer(t.locations[e],1,this.gl.FLOAT,!1,0,0)}start(t,e){this.enable(t,e),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo)}end(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}setModeCalcul(t){this.modeCalcul=t}getCount(){return this.count}}(t,n),this.icoSphere=new f.Z(t,x(4)),this.icoSphere.setModeDessin(t.POINTS),this.simpleIcoSphere=new f.Z(t,x(1,!0)),this.targetZ.set(1);const s=this.mngProg.get("frequencyCircle");s.setInt("length",this.fVbo.getCount()),s.setInt("maxfrequency",256)}update(t){super.update(t),this.targetX.update(),this.targetY.update(),this.targetZ.update(),this.pulse.update(),this.model.identity();const e=(0,y.Id)(this.targetX.get())+5e-4*this.time,n=new b.Z;n.rotateY(-e),n.rotateX(-.5),this.model.multiply(n.toMatrix4()),this.model.scale(this.targetZ.get());this.mngProg.get(this.config.MAIN_PROG).setFloat("time",this.pulse.get())}render(){super.render();const t=this.mngSound.get("akira").getAmplitudes(),e=new c.Z(this.gl,t);this.renderGlobe(this.mngProg.get(this.config.MAIN_PROG),e);const n=this.mngProg.get("frequencyCircle");this.model.push(),this.model.scale(1+.2*Math.cos(.001*this.time)),this.model.rotate(.02*this.time,0,1,0),n.setMatrix("model",this.model.get()),this.model.pop(),this.uVbo.start(n.get(),"value",t),this.fVbo.start(n.get(),"index"),this.gl.drawArrays(this.gl.LINE_LOOP,0,this.fVbo.getCount()),this.uVbo.end(),this.fVbo.end()}destroy(){if(this.button&&this.button.addEventListener("click",this.togglePlay,!1),this.ranges){const{volume:t,playbackRate:e}=this.ranges;t.dom.removeEventListener("change",this.onChangeVolume,!1),e.dom.removeEventListener("change",this.onChangePlaybackRate,!1)}this.sound&&this.sound.stop()}};n(88747),n(89153),n(13017);var R=n(93379),k=n.n(R),P=n(7795),Z=n.n(P),F=n(90569),M=n.n(F),C=n(3565),B=n.n(C),E=n(70609),z=n.n(E),I=n(44589),T=n.n(I),_=n(90324),Y={};Y.styleTagTransform=T(),Y.setAttributes=B(),Y.insert=M().bind(null,"head"),Y.domAPI=Z(),Y.insertStyleElement=z();k()(_.Z,Y);_.Z&&_.Z.locals&&_.Z.locals;let S=null;const N=async()=>{S=new s.Z,await S.setup(w,o)},U=()=>{S&&S.destroy&&S.destroy()}},64740:(t,e,n)=>{n.d(e,{Z:()=>o});const s=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.size=t,this.seed=e?i.getFixedSeedNoise(this.size):i.getGenerateNoise(this.size)}get(t,e){let n=0,s=this.size;for(;s>=1;)n+=this.smoothNoise(t/s,e/s,this.seed)*s,s/=2;return.5*n/this.size}smoothNoise(t,e,n){const s=t-Math.floor(t),i=e-Math.floor(e),o=(Math.floor(t)+this.size)%this.size,r=(Math.floor(e)+this.size)%this.size,a=(o+this.size-1)%this.size,l=(r+this.size-1)%this.size;let h=0;return h+=s*i*n[o][r],h+=s*(1-i)*n[o][l],h+=(1-s)*i*n[a][r],h+=(1-s)*(1-i)*n[a][l],h}static getGenerateNoise(t){const e=new Array(t);for(let n=0;n<t;n+=1){e[n]=new Array(t);for(let s=0;s<t;s+=1)e[n][s]=Math.random()}return e}static getFixedSeedNoise(t){const e=new Array(t);let n=0;for(let i=0;i<t;i+=1){e[i]=new Array(t);for(let o=0;o<t;o+=1)e[i][o]=s[n]/256,n+=1}return e}}const o=i},90324:(t,e,n)=>{n.d(e,{Z:()=>a});var s=n(8081),i=n.n(s),o=n(23645),r=n.n(o)()(i());r.push([t.id,"#deform {\n  width: 100%;\n  height: auto;\n  text-align: center;\n  --project-color: #e666ff;\n}\n\n#deform canvas {\n  display: block;\n  margin: 0 auto;\n  width: 100%;\n  height: auto;\n  max-width: 100%;\n}\n\n#deform .play-button {\n  position: absolute;\n  width: 6em;\n  height: 6em;\n  left: 50%;\n  top: 50%;\n  transition: transform 300ms ease-out, opacity 300ms ease-out;\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n  border-radius: 50%;\n  background: #e666ff;\n  z-index: 1;\n  opacity: 0.7;\n}\n\n#deform .play-button[data-play] {\n  opacity: 0.4;\n}\n\n#deform .play-button:hover {\n  opacity: 1;\n  transform: translate3d(-50%, -50%, 0) scale(1);\n}\n\n#deform .play-button:active {\n  transform: translate3d(-50%, -50%, 0) scale(0.8);\n}\n\n#deform .play-button[data-play] .play-icon,\n#deform .play-button .pause-icon {\n  display: none;\n}\n\n#deform .play-button[data-play] .pause-icon,\n#deform .play-button .play-icon {\n  display: block;\n}\n\n#deform .play-button svg {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  fill: #333;\n  width: 3em;\n  height: 3em;\n  transform: translate3d(-50%, -50%, 0);\n}",""]);const a=r},24981:(t,e,n)=>{n.d(e,{Z:()=>a});var s=n(8081),i=n.n(s),o=n(23645),r=n.n(o)()(i());r.push([t.id,"#controls {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: stretch;\n  z-index: 10;\n  background-color: rgba(34, 34, 34, .8);\n  margin: .5em;\n  padding: .5em;\n}\n\n#controls div {\n  display: flex;\n  align-items: stretch;\n}\n\n#controls div input[type=range] {\n  width: 100%;\n}\n\n#controls div input[type=checkbox] {\n  margin-right: 0.5em;\n}\n\n#controls label {\n  display: flex;\n  align-items: center;\n}\n\n#controls label,\n#controls a {\n  font-size: .8em;\n}\n\n@media (max-width: 570px) {\n  #controls.responsive {\n    position: relative;\n    width: 100%;\n    margin: 0;\n  }\n}",""]);const a=r},76889:(t,e,n)=>{n.d(e,{Z:()=>a});var s=n(8081),i=n.n(s),o=n(23645),r=n.n(o)()(i());r.push([t.id,"#fullscreen-toggle-btn {\n  border-radius: 0;\n  margin: 0;\n  padding: 4px;\n  border: solid 2px var(--project-color);\n}\n\n#fullscreen-toggle-btn:hover svg,\n#fullscreen-toggle-btn:active svg {\n  transform: scale(0.8);\n  opacity: 1;\n}\n\n#fullscreen-toggle-btn svg {\n  display: block;\n  width: 2em;\n  fill: #fff;\n  opacity: 0.8;\n  transform: scale(0.6);\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\n}\n\n[data-fullscreen] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n",""]);const a=r},32073:(t,e,n)=>{n.d(e,{Z:()=>a});var s=n(8081),i=n.n(s),o=n(23645),r=n.n(o)()(i());r.push([t.id,"input[type='range'] {\n  -webkit-appearance: none; /*nécessaire pour Chrome */\n  padding: 0; /* nécessaire pour IE */\n  font: inherit; /* même rendu suivant font document */\n  outline: none;\n  background: transparent;\n  margin: 0.5em;\n}\n\ninput[type='range']:focus {\n  outline: none;\n}\n\ninput[type='range']::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 2px;\n  cursor: pointer;\n  background: var(--project-color);\n}\n\ninput[type='range']::-moz-range-track {\n  width: 100%;\n  height: 2px;\n  cursor: pointer;\n  background: var(--project-color);\n}\n\ninput[type='range']::-ms-track {\n  -webkit-appearance: none;\n  width: 100%;\n  height: 2px;\n  background: var(--project-color);\n  cursor: pointer;\n}\n\ninput[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  height: 2em;\n  width: 1em;\n  margin: calc(2px - 1em) 0 0 0;\n  background: #fff;\n  cursor: pointer;\n  border-radius: 0;\n  border: solid 2px #444;\n}\n\ninput[type='range']::-moz-range-thumb {\n  -webkit-appearance: none;\n  height: 2em;\n  width: 1em;\n  margin: calc(2px - 1em) 0 0 0;\n  background: #fff;\n  cursor: pointer;\n  border-radius: 0;\n  border: solid 2px #444;\n}\n\ninput[type='range']::-ms-thumb {\n  -webkit-appearance: none;\n  height: 2em;\n  width: 1em;\n  margin: calc(2px - 1em) 0 0 0;\n  background: #fff;\n  cursor: pointer;\n  border-radius: 0;\n  border: solid 2px #444;\n}\n",""]);const a=r},88747:(t,e,n)=>{var s=n(93379),i=n.n(s),o=n(7795),r=n.n(o),a=n(90569),l=n.n(a),h=n(3565),u=n.n(h),d=n(70609),c=n.n(d),g=n(44589),p=n.n(g),m=n(24981),f={};f.styleTagTransform=p(),f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=c();i()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals},89153:(t,e,n)=>{var s=n(93379),i=n.n(s),o=n(7795),r=n.n(o),a=n(90569),l=n.n(a),h=n(3565),u=n.n(h),d=n(70609),c=n.n(d),g=n(44589),p=n.n(g),m=n(76889),f={};f.styleTagTransform=p(),f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=c();i()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals},13017:(t,e,n)=>{var s=n(93379),i=n.n(s),o=n(7795),r=n.n(o),a=n(90569),l=n.n(a),h=n(3565),u=n.n(h),d=n(70609),c=n.n(d),g=n(44589),p=n.n(g),m=n(32073),f={};f.styleTagTransform=p(),f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=c();i()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals}}]);