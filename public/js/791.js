"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[791],{60791:(t,e,n)=>{n.r(e),n.d(e,{default:()=>W,destroy:()=>E});var i=n(16853);function s(t,e,n=2){const i=e&&e.length,s=i?e[0]*n:t.length;let o=r(t,0,s,n,!0);const l=[];if(!o||o.next===o.prev)return l;let d,u,a;if(i&&(o=function(t,e,n,i){const s=[];for(let n=0,o=e.length;n<o;n++){const h=r(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1);h===h.next&&(h.steiner=!0),s.push(f(h))}s.sort(x);for(let t=0;t<s.length;t++)n=c(s[t],n);return n}(t,e,o,n)),t.length>80*n){d=1/0,u=1/0;let e=-1/0,i=-1/0;for(let r=n;r<s;r+=n){const n=t[r],s=t[r+1];n<d&&(d=n),s<u&&(u=s),n>e&&(e=n),s>i&&(i=s)}a=Math.max(e-d,i-u),a=0!==a?32767/a:0}return h(o,l,n,d,u,a,0),l}function r(t,e,n,i,s){let r;if(s===Y(t,e,n,i)>0)for(let s=e;s<n;s+=i)r=X(s/i|0,t[s],t[s+1],r);else for(let s=n-i;s>=e;s-=i)r=X(s/i|0,t[s],t[s+1],r);return r&&w(r,r.next)&&(k(r),r=r.next),r}function o(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!w(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(k(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function h(t,e,n,i,s,r,x){if(!t)return;!x&&r&&function(t,e,n,i){let s=t;do{0===s.z&&(s.z=g(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,function(t){let e,n=1;do{let i,s=t;t=null;let r=null;for(e=0;s;){e++;let o=s,h=0;for(let t=0;t<n&&(h++,o=o.nextZ,o);t++);let l=n;for(;h>0||l>0&&o;)0!==h&&(0===l||!o||s.z<=o.z)?(i=s,s=s.nextZ,h--):(i=o,o=o.nextZ,l--),r?r.nextZ=i:t=i,i.prevZ=r,r=i;s=o}r.nextZ=null,n*=2}while(e>1)}(s)}(t,i,s,r);let c=t;for(;t.prev!==t.next;){const p=t.prev,g=t.next;if(r?d(t,i,s,r):l(t))e.push(p.i,t.i,g.i),k(t),t=g.next,c=g.next;else if((t=g)===c){x?1===x?h(t=u(o(t),e),e,n,i,s,r,2):2===x&&a(t,e,n,i,s,r):h(o(t),e,n,i,s,r,1);break}}}function l(t){const e=t.prev,n=t,i=t.next;if(m(e,n,i)>=0)return!1;const s=e.x,r=n.x,o=i.x,h=e.y,l=n.y,d=i.y,u=s<r?s<o?s:o:r<o?r:o,a=h<l?h<d?h:d:l<d?l:d,x=s>r?s>o?s:o:r>o?r:o,c=h>l?h>d?h:d:l>d?l:d;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=x&&p.y>=a&&p.y<=c&&v(s,h,r,l,o,d,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function d(t,e,n,i){const s=t.prev,r=t,o=t.next;if(m(s,r,o)>=0)return!1;const h=s.x,l=r.x,d=o.x,u=s.y,a=r.y,x=o.y,c=h<l?h<d?h:d:l<d?l:d,p=u<a?u<x?u:x:a<x?a:x,f=h>l?h>d?h:d:l>d?l:d,y=u>a?u>x?u:x:a>x?a:x,w=g(c,p,e,n,i),Z=g(f,y,e,n,i);let z=t.prevZ,A=t.nextZ;for(;z&&z.z>=w&&A&&A.z<=Z;){if(z.x>=c&&z.x<=f&&z.y>=p&&z.y<=y&&z!==s&&z!==o&&v(h,u,l,a,d,x,z.x,z.y)&&m(z.prev,z,z.next)>=0)return!1;if(z=z.prevZ,A.x>=c&&A.x<=f&&A.y>=p&&A.y<=y&&A!==s&&A!==o&&v(h,u,l,a,d,x,A.x,A.y)&&m(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;z&&z.z>=w;){if(z.x>=c&&z.x<=f&&z.y>=p&&z.y<=y&&z!==s&&z!==o&&v(h,u,l,a,d,x,z.x,z.y)&&m(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;A&&A.z<=Z;){if(A.x>=c&&A.x<=f&&A.y>=p&&A.y<=y&&A!==s&&A!==o&&v(h,u,l,a,d,x,A.x,A.y)&&m(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function u(t,e){let n=t;do{const i=n.prev,s=n.next.next;!w(i,s)&&Z(i,n,n.next,s)&&M(i,s)&&M(s,i)&&(e.push(i.i,n.i,s.i),k(n),k(n.next),n=t=s),n=n.next}while(n!==t);return o(n)}function a(t,e,n,i,s,r){let l=t;do{let t=l.next.next;for(;t!==l.prev;){if(l.i!==t.i&&y(l,t)){let d=b(l,t);return l=o(l,l.next),d=o(d,d.next),h(l,e,n,i,s,r,0),void h(d,e,n,i,s,r,0)}t=t.next}l=l.next}while(l!==t)}function x(t,e){return t.x-e.x}function c(t,e){const n=function(t,e){let n=e;const i=t.x,s=t.y;let r,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const t=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o&&(o=t,r=n.x<n.next.x?n:n.next,t===i))return r}n=n.next}while(n!==e);if(!r)return null;const h=r,l=r.x,d=r.y;let u=1/0;n=r;do{if(i>=n.x&&n.x>=l&&i!==n.x&&v(s<d?i:o,s,l,d,s<d?o:i,s,n.x,n.y)){const e=Math.abs(s-n.y)/(i-n.x);M(n,t)&&(e<u||e===u&&(n.x>r.x||n.x===r.x&&p(r,n)))&&(r=n,u=e)}n=n.next}while(n!==h);return r}(t,e);if(!n)return e;const i=b(n,t);return o(i,i.next),o(n,n.next)}function p(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function g(t,e,n,i,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function v(t,e,n,i,s,r,o,h){return(s-o)*(e-h)>=(t-o)*(r-h)&&(t-o)*(i-h)>=(n-o)*(e-h)&&(n-o)*(r-h)>=(s-o)*(i-h)}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Z(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(M(t,e)&&M(e,t)&&function(t,e){let n=t,i=!1;const s=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&s<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||w(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function Z(t,e,n,i){const s=A(m(t,e,n)),r=A(m(t,e,i)),o=A(m(n,i,t)),h=A(m(n,i,e));return s!==r&&o!==h||(!(0!==s||!z(t,n,e))||(!(0!==r||!z(t,i,e))||(!(0!==o||!z(n,t,i))||!(0!==h||!z(n,e,i)))))}function z(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function M(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function b(t,e){const n=P(t.i,t.x,t.y),i=P(e.i,e.x,e.y),s=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function X(t,e,n,i){const s=P(t,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Y(t,e,n,i){let s=0;for(let r=e,o=n-i;r<n;r+=i)s+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return s}const j={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},q=/([astvzqmhlc])([^astvzqmhlc]*)/gi,C=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,S=t=>{const e=[];return t.replace(q,((t,n,i)=>{let s=n,r=n.toLowerCase();const o=(t=>{const e=t.match(C);return e?e.map(Number):[]})(i);for("m"===r&&o.length>2&&(e.push([s].concat(o.splice(0,2))),r="l",s="m"===s?"l":"L");;){if(o.length===j[r])return o.unshift(s),e.push(o);if(o.length<j[r])throw new Error("malformed path data");e.push([s].concat(o.splice(0,j[r])))}})),e};var I=n(6154),N=n(10334),T=n(27853),L=n(33202);const V=class extends I.A{setup(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:0,y:0},i=S(t),s=e?-1:1;return i.reduce(((t,e)=>("L"!==e[0]&&"M"!==e[0]||3!==e.length?"m"!==e[0]&&"l"!==e[0]||3!==e.length?"v"===e[0]&&2===e.length?(n.y+=e[1]*s,t.push([n.x,n.y])):"h"===e[0]&&2===e.length?(n.x+=e[1],t.push([n.x,n.y])):"z"===e[0]&&(n.x=0,n.y=0):(n.x+=e[1],n.y+=e[2]*s,t.push([n.x,n.y])):t.push([e[1],e[2]*s]),t)),[])}("m-10-20-2 2 8 12-18 18v5l7 7v-10l5-5 5 5h10l5-5 5 5v10l7-7v-5l-18-18 8-12-2-2-10 10z",!0),e=s(t.flat()),n=e.reduce(((e,n)=>{const[i,s]=t[n],r=[i,s,5*Math.random()];return e.concat(r)}),[]),i=e.length/3,r=Array.from({length:i},(()=>{const{r:t,g:e,b:n}=(0,L.YL)(150+100*Math.random(),50,60);return[t/255,e/255,n/255,1]})),o=e.reduce(((t,e,n)=>{const i=Math.floor(n/3);return t.concat(r[i])}),[]);this.vbo=new N.A(gl,{position:n,color:o}),this.model=new T.A}render(){super.render(),this.model.identity(),this.model.rotate(50*Math.cos(.001*this.time),0,1,0),this.mngProg.get("vertexColor").setMatrix("model",this.model.get()),this.bloom.start(),this.vbo.render(this.mngProg.get("vertexColor").get()),this.bloom.end(),this.bloom.render()}},D={slug:"fragment",shaders:["/camera/vertexColor.js","/screen/blurOnePass.js","/screen/bloom.js","/screen/screen.js"],postprocess:{bloom:{scale:.7,threshold:.1,blur:{size:.1,intensity:1.2}}},useDepthTexture:!0,canvas:{width:1024,height:1024},camera:{position:{x:0,y:0,z:100},target:{x:0,y:0,z:0},near:1,far:200,angle:60},controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}}};let F=null;const W=async()=>{F=new i.A,await F.setup(V,D);const t=document.querySelector(`#${D.slug}`),e=F.getCanvas();e&&t&&t.appendChild(e)},E=()=>{F&&F.destroy&&F.destroy()}},20415:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(75112),s=n(27853);const r=class{constructor(t){if(this.position=new i.A(t.position.x,t.position.y,t.position.z),this.target=new i.A(0,0,0),this.view=new s.A,t.ortho){const{left:e,right:n,bottom:i,top:r}=t.ortho,{near:o,far:h}=t;this.ortho=new s.A,this.ortho.ortho(e,n,i,r,o,h)}}lookAt(){this.view.identity().lookAt(this.position.getX(),this.position.getY(),this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}getView(){return this.view}getPosition(){return this.position.get()}getPositionVec3(){return this.position}getTarget(){return this.target.get()}getModel(){return this.repere.getModel()}getOrtho(){return this.ortho}addToPosition(t,e,n){this.position.addXYZ(t,e,n),this.lookAt()}setPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=null!==t?t:this.position.getX(),s=null!==e?e:this.position.getY(),r=null!==n?n:this.position.getZ();this.position.set(i,s,r),this.lookAt()}setTarget(t,e,n){this.target.set(t,e,n)}setTargetVec3(t){this.target.equal(t)}}},91106:(t,e,n)=>{n.d(e,{A:()=>i});const i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;this.value=t,this.target=t,this.sampling=e,this.threshold=1e-6}update(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}get(){return this.value}set(t){this.target=t}setDirect(t){this.value=t}}},6154:(t,e,n)=>{n.d(e,{A:()=>x});var i=n(60837),s=n(75112),r=n(27853),o=n(20415);const h=class extends o.A{constructor(t){super(t),this.target=new s.A(t.target.x,t.target.y,t.target.z),this.matIdentity=new r.A,this.projection=new r.A,this.projection.identity(),this.near=t.near||1,this.far=t.far||100,this.angle=t.angle||50,this.matIdentity.identity(),this.lookAt()}update(){this.lookAt()}perspective(t,e){this.projection.identity().perspective(this.angle,t/e,this.near,this.far)}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.position.set(this.position.getX(),Math.sin(.02*t)*(2+e),this.position.getZ()),this.lookAt()}setNearFar(t,e){this.near=t,this.far=e}setAngle(t){this.angle=t}getProjection(){return this.projection}getIdentity(){return this.matIdentity}getNearFar(){return[this.near,this.far]}getNear(){return this.near}getFar(){return this.far}getAngle(){return this.angle}getReflectViewMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=2*(this.position.getY()-t);return(new r.A).identity().lookAt(this.position.getX(),this.position.getY()-e,this.position.getZ(),this.target.getX(),this.target.getY(),this.target.getZ(),0,1,0)}};const l=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.d=[0,0,0,0],this.set(t,e,n,i)}normalise(){const t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}get(){return this.d}getX(){return this.d[0]}getY(){return this.d[1]}getZ(){return this.d[2]}getW(){return this.d[3]}length(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}set(t,e,n,i){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=n?this.d[2]=n:null!=t&&(this.d[2]=t),null!=i?this.d[3]=i:null!=t&&(this.d[3]=t),this}equal(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}add(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}addNumber(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}minus(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}minusNumber(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}multiplyNumber(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}multiplyMatrix(t){const e=this.d[0],n=this.d[1],i=this.d[2],s=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*n+t.d[8]*i+t.d[12]*s,this.d[1]=t.d[1]*e+t.d[5]*n+t.d[9]*i+t.d[13]*s,this.d[2]=t.d[2]*e+t.d[6]*n+t.d[10]*i+t.d[14]*s,this.d[3]=t.d[3]*e+t.d[7]*n+t.d[11]*i+t.d[15]*s,this}multiply(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}divideNumber(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}divide(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}distance(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}},d=class extends h{get2dTexturePoint(t){const e=t.getX(),n=t.getY(),i=t.getZ(),s=new l(e,n,i,1),o=new r.A;o.equal(this.view).multiply(this.projection),s.multiplyMatrix(o);let h=s.getX()/s.getW(),d=s.getY()/s.getW();return h=.5*(h+1),d=.5*(d+1),[h,d]}get2dScreenPoint(t,e){const n=this.get2dTexturePoint(t);return[n[0]*e.width,n[1]*e.height]}};var u=n(91106);const a=class extends d{constructor(t){super(t),this.options=t,this.rotationX=new u.A,this.targetX=new u.A,this.zoomZ=new u.A(.7,.1)}update(){super.update(),this.rotationX.update(),this.zoomZ.update(),this.targetX.update(),this.position.set(this.options.position.x+this.targetX.get()+Math.sin(this.rotationX.get())*(this.options.position.z*this.zoomZ.get()),this.options.position.y,Math.cos(this.rotationX.get())*(this.options.position.z*this.zoomZ.get())),this.target.set(this.options.target.x,this.options.target.y,this.options.target.z)}setSmoothTarget(t){this.targetX.set(t)}setSmoothRotation(t){this.rotationX.set(t)}setSmoothZoom(t){this.zoomZ.set(t)}getZoom(){return this.zoomZ.get()}followPos2D(t,e){this.options.position.x=t,this.options.position.y=e,this.options.target.x=t,this.options.target.y=e}followPosY(t){this.options.position.y=t,this.options.target.y=t}},x=class extends i.A{constructor(t,e){super(t,e),this.camera=new a(e.camera),this.camera.perspective(this.containerSize.width,this.containerSize.height)}resize(t){super.resize(t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}update(t){super.update(t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}},33202:(t,e,n)=>{n.d(e,{E2:()=>r,YL:()=>s});const i=(t,e,n)=>{let i=n;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},s=(t,e,n)=>{let s,r,o;const h=t/360,l=e/100,d=n/100;if(0===l)s=d,r=d,o=d;else{const t=d<.5?d*(1+l):d+l-d*l,e=2*d-t;s=i(e,t,h+1/3),r=i(e,t,h),o=i(e,t,h-1/3)}return{r:Math.round(255*s),g:Math.round(255*r),b:Math.round(255*o)}},r=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}}}]);