"use strict";(self.webpackChunkdovotori=self.webpackChunkdovotori||[]).push([[2473],{37917:(t,e,i)=>{i.d(e,{Jt:()=>n,WQ:()=>o});let s={};function n(t){return s[t]||s[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function o(t,e){s[t]=e}},73158:(t,e,i)=>{i.d(e,{Jt:()=>o,WQ:()=>n});let s={};function n(t,e,i){const n=t.getCode(),o=e.getCode();n in s||(s[n]={}),s[n][o]=i}function o(t,e){let i;return t in s&&e in s[t]&&(i=s[t][e]),i}},53537:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(90025),n=i(71064);class o extends s.A{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+i,s.top=Math.min(t[1],e[1])+i,s.width=Math.abs(e[0]-t[0])+i,s.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new n.Ay([i])}getGeometry(){return this.geometry_}}const r=o},9960:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(1685);class n extends s.Ay{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}}const o=n},83984:(t,e,i)=>{i.d(e,{A:()=>s});const s={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},24778:(t,e,i)=>{i.d(e,{Ay:()=>x});var s=i(9703),n=i(70915),o=i(83671),r=i(66514),h=i(22616),l=i(9687),a=i(83402),c=i(79969),_=i(54049),d=i(74238),g=i(87622);const u=(0,s.vt)();class f{constructor(t,e,i,s,n,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=n,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,n.dP)(this.flatCoordinates_):(0,n.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,n.q1)(this.getExtent());this.flatInteriorPoints_=(0,h.J)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,a.yJ)(this.flatCoordinates_,this.ends_),e=(0,_.C)(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=(0,h.p)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,c.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let s=0,n=i.length;s<n;++s){const n=i[s],o=(0,c.SH)(t,e,n,2,.5);(0,r.X$)(this.flatMidpoints_,o),e=n}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,l.Jt)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const t=(0,n.Oq)(i)/(0,n.Oq)(e);(0,s.Zz)(u,i[0],i[3],t,-t,0,0,0),(0,g.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,u,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new f(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,d.B4)(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=(0,o.P4)(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=(0,o.AL)(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,s);break;case"Polygon":s=[],i.length=(0,o.Hg)(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,s)}return s&&(this.simplifiedGeometry_=new f(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}f.prototype.getFlatCoordinates=f.prototype.getOrientedFlatCoordinates;const x=f},32826:(t,e,i)=>{i.d(e,{A:()=>s});const s=class{drawCustom(t,e,i,s,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},8130:(t,e,i)=>{i.d(e,{A:()=>d});var s=i(66429),n=i(11580),o=i(32826),r=i(77295),h=i(70915),l=i(38774),a=i(66514),c=i(56361);class _ extends o.A{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let o=n.length;for(let r=0,l=t.length;r<l;r+=e)s[0]=t[r],s[1]=t[r+1],(0,h.Ym)(i,s)&&(n[o++]=s[0],n[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,o,r){const l=this.coordinates;let a=l.length;const c=this.getBufferedMaxExtent();r&&(e+=s);let _=t[e],d=t[e+1];const g=this.tmpCoordinate_;let u,f,x,S=!0;for(u=e+s;u<i;u+=s)g[0]=t[u],g[1]=t[u+1],x=(0,h.vz)(c,g),x!==f?(S&&(l[a++]=_,l[a++]=d,S=!1),l[a++]=g[0],l[a++]=g[1]):x===n.A.INTERSECTING?(l[a++]=g[0],l[a++]=g[1],S=!1):S=!0,_=g[0],d=g[1],f=x;return(o&&S||u===e+s)&&(l[a++]=_,l[a++]=d),a}drawCustomCoordinates_(t,e,i,s,n){for(let o=0,r=i.length;o<r;++o){const r=i[o],h=this.appendFlatLineCoordinates(t,e,r,s,!1,!1);n.push(h),e=r}return e}drawCustom(t,e,i,n,o){this.beginGeometry(t,e,o);const r=t.getType(),h=t.getStride(),l=this.coordinates.length;let a,_,d,g,u;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),g=[];const e=t.getEndss();u=0;for(let t=0,i=e.length;t<i;++t){const i=[];u=this.drawCustomCoordinates_(a,u,e[t],h,i),g.push(i)}this.instructions.push([s.Ay.CUSTOM,l,g,t,i,c.Dz,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,l,g,t,n||i,c.Dz,o]);break;case"Polygon":case"MultiLineString":d=[],a="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),h,d),this.instructions.push([s.Ay.CUSTOM,l,d,t,i,c.cD,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,l,d,t,n||i,c.cD,o]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),_=this.appendFlatLineCoordinates(a,0,a.length,h,!1,!1),this.instructions.push([s.Ay.CUSTOM,l,_,t,i,c.n2,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,l,_,t,n||i,c.n2,o]);break;case"MultiPoint":a=t.getFlatCoordinates(),_=this.appendFlatPointCoordinates(a,h),_>l&&(this.instructions.push([s.Ay.CUSTOM,l,_,t,i,c.n2,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,l,_,t,n||i,c.n2,o]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),_=this.coordinates.length,this.instructions.push([s.Ay.CUSTOM,l,_,t,i,void 0,o]),this.hitDetectionInstructions.push([s.Ay.CUSTOM,l,_,t,n||i,void 0,o])}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[s.Ay.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[s.Ay.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,o,r=-1;for(e=0;e<i;++e)n=t[e],o=n[0],o==s.Ay.END_GEOMETRY?r=e:o==s.Ay.BEGIN_GEOMETRY&&(n[2]=e,(0,a.gI)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillPatternScale=e&&"object"==typeof e&&"src"in e?this.pixelRatio:1,i.fillStyle=(0,r.F)(e||l.qY)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,r.F)(t||l.NT);const s=e.getLineCap();i.lineCap=void 0!==s?s:l._m;const n=e.getLineDash();i.lineDash=n?n.slice():l.Oq;const o=e.getLineDashOffset();i.lineDashOffset=o||l.vk;const h=e.getLineJoin();i.lineJoin=void 0!==h?h:l._K;const a=e.getWidth();i.lineWidth=void 0!==a?a:l.aq;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:l.eL,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[s.Ay.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[s.Ay.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,h=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!(0,a.aI)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=h||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=h,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[s.Ay.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,h.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,h.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const d=_},70136:(t,e,i)=>{i.d(e,{A:()=>x});var s=i(8130),n=i(66429),o=i(70915);class r extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!(0,o.Ym)(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),r=t.getStride(),h=this.coordinates.length,l=this.appendFlatPointCoordinates(s,r);this.instructions.push([n.Ay.DRAW_IMAGE,h,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,h,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),r=[];for(let e=0,i=s.length;e<i;e+=t.getStride())this.maxExtent&&!(0,o.Ym)(this.maxExtent,s.slice(e,e+2))||r.push(s[e],s[e+1]);const h=this.coordinates.length,l=this.appendFlatPointCoordinates(r,2);this.instructions.push([n.Ay.DRAW_IMAGE,h,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,h,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const h=r;var l=i(38774);class a extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const o=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),h=[n.Ay.MOVE_TO_LINE_TO,o,r];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i}drawLineString(t,e,i){const s=this.state,o=s.strokeStyle,r=s.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,l.Oq,l.vk],n.th);const h=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(h,0,h.length,a),this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}drawMultiLineString(t,e,i){const s=this.state,o=s.strokeStyle,r=s.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,l.Oq,l.vk],n.th);const h=t.getEnds(),a=t.getFlatCoordinates(),c=t.getStride();let _=0;for(let t=0,e=h.length;t<e;++t)_=this.drawFlatCoordinates_(a,_,h[t],c);this.hitDetectionInstructions.push(n.VD),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(n.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(n.VD),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(n.th)}}const c=a;var _=i(83671);class d extends s.A{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const o=this.state,r=void 0!==o.fillStyle,h=void 0!==o.strokeStyle,l=i.length;this.instructions.push(n.th),this.hitDetectionInstructions.push(n.th);for(let o=0;o<l;++o){const r=i[o],l=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,s,!0,!h),c=[n.Ay.MOVE_TO_LINE_TO,l,a];this.instructions.push(c),this.hitDetectionInstructions.push(c),h&&(this.instructions.push(n.kx),this.hitDetectionInstructions.push(n.kx)),e=r}return r&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),h&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),e}drawCircle(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,l.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,l.Oq,l.vk]);const h=t.getFlatCoordinates(),a=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1);const _=[n.Ay.CIRCLE,c];this.instructions.push(n.th,_),this.hitDetectionInstructions.push(n.th,_),void 0!==s.fillStyle&&(this.instructions.push(n.I5),this.hitDetectionInstructions.push(n.I5)),void 0!==s.strokeStyle&&(this.instructions.push(n.VD),this.hitDetectionInstructions.push(n.VD)),this.endGeometry(e)}drawPolygon(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,l.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,l.Oq,l.vk]);const h=t.getEnds(),a=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(a,0,h,c),this.endGeometry(e)}drawMultiPolygon(t,e,i){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.Ay.SET_FILL_STYLE,l.qY]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.Ay.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,l.Oq,l.vk]);const h=t.getEndss(),a=t.getOrientedFlatCoordinates(),c=t.getStride();let _=0;for(let t=0,e=h.length;t<e;++t)_=this.drawFlatCoordinatess_(a,_,h[t],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=(0,_.n$)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}const g=d;var u=i(55799);const f={Circle:g,Default:s.A,Image:h,LineString:c,Polygon:g,Text:u.A};const x=class{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];if(void 0===n){n=new(0,f[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n}return n}}},41401:(t,e,i)=>{i.d(e,{y2:()=>v,$i:()=>L,x$:()=>R,Ay:()=>E});var s=i(66429),n=i(40808),o=i(55799),r=i(9703),h=i(70915),l=i(38774),a=i(27016),c=i(66514),_=i(50904),d=i(87622);const g=(0,h.S5)(),u=[],f=[],x=[],S=[];function m(t){return t[3].declutterBox}const p=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function y(t,e){return"start"===e?e=p.test(t)?"right":"left":"end"===e&&(e=p.test(t)?"left":"right"),o.E[e]}function C(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const k=class{constructor(t,e,i,s,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,r.vt)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new n.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,s){const n=t+e+i+s;if(this.labels_[n])return this.labels_[n];const r=s?this.strokeStates[s]:null,h=i?this.fillStates[i]:null,a=this.textStates[e],c=this.pixelRatio,_=[a.scale[0]*c,a.scale[1]*c],d=Array.isArray(t),g=a.justify?o.E[a.justify]:y(Array.isArray(t)?t[0]:t,a.textAlign||l.MY),u=s&&r.lineWidth?r.lineWidth:0,f=d?t:t.split("\n").reduce(C,[]),{width:x,height:S,widths:m,heights:p,lineWidths:k}=(0,l.jT)(a,f),T=x+u,I=[],v=(T+2)*_[0],L=(S+u)*_[1],R={width:v<0?Math.floor(v):Math.ceil(v),height:L<0?Math.floor(L):Math.ceil(L),contextInstructions:I};1==_[0]&&1==_[1]||I.push("scale",_),s&&(I.push("strokeStyle",r.strokeStyle),I.push("lineWidth",u),I.push("lineCap",r.lineCap),I.push("lineJoin",r.lineJoin),I.push("miterLimit",r.miterLimit),I.push("setLineDash",[r.lineDash]),I.push("lineDashOffset",r.lineDashOffset)),i&&I.push("fillStyle",h.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const A=.5-g;let E=g*T+A*u;const w=[],D=[];let O,M=0,b=0,F=0,P=0;for(let t=0,e=f.length;t<e;t+=2){const e=f[t];if("\n"===e){b+=M,M=0,E=g*T+A*u,++P;continue}const n=f[t+1]||a.font;n!==O&&(s&&w.push("font",n),i&&D.push("font",n),O=n),M=Math.max(M,p[F]);const o=[e,E+A*m[F]+g*(m[F]-k[P]),.5*(u+M)+b];E+=m[F],s&&w.push("strokeText",o),i&&D.push("fillText",o),++F}return Array.prototype.push.apply(I,w),Array.prototype.push.apply(I,D),this.labels_[n]=R,R}replayTextBackground_(t,e,i,s,n,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,o,l,a,c,_,d,m,p,y,C,k){let T=i-(l*=m[0]),I=s-(a*=m[1]);const v=n+c>t?t-c:n,L=o+_>e?e-_:o,R=y[3]+v*m[0]+y[1],A=y[0]+L*m[1]+y[2],E=T-y[3],w=I-y[0];let D;return(C||0!==d)&&(u[0]=E,S[0]=E,u[1]=w,f[1]=w,f[0]=E+R,x[0]=f[0],x[1]=w+A,S[1]=x[1]),0!==d?(D=(0,r.Zz)((0,r.vt)(),i,s,1,1,d,-i,-s),(0,r.Bb)(D,u),(0,r.Bb)(D,f),(0,r.Bb)(D,x),(0,r.Bb)(D,S),(0,h.N)(Math.min(u[0],f[0],x[0],S[0]),Math.min(u[1],f[1],x[1],S[1]),Math.max(u[0],f[0],x[0],S[0]),Math.max(u[1],f[1],x[1],S[1]),g)):(0,h.N)(Math.min(E,E+R),Math.min(w,w+A),Math.max(E,E+R),Math.max(w,w+A),g),p&&(T=Math.round(T),I=Math.round(I)),{drawImageX:T,drawImageY:I,drawImageW:v,drawImageH:L,originX:c,originY:_,declutterBox:{minX:g[0],minY:g[1],maxX:g[2],maxY:g[3],value:k},canvasTransform:D,scale:m}}replayImageOrLabel_(t,e,i,s,n,o,r){const h=!(!o&&!r),a=s.declutterBox,c=r?r[2]*s.scale[0]/2:0;return a.minX-c<=e[0]&&a.maxX+c>=0&&a.minY-c<=e[1]&&a.maxY+c>=0&&(h&&this.replayTextBackground_(t,u,f,x,S,o,r),(0,l.Jw)(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=(0,r.Bb)(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const n=this.textStates[e],r=this.createLabel(t,e,s,i),h=this.strokeStates[i],a=this.pixelRatio,c=y(Array.isArray(t)?t[0]:t,n.textAlign||l.MY),_=o.E[n.textBaseline||l.M8],d=h&&h.lineWidth?h.lineWidth:0;return{label:r,anchorX:c*(r.width/a-2*n.scale[0])+2*(.5-c)*d,anchorY:_*r.height/a+2*(.5-_)*d}}execute_(t,e,i,n,o,g,u,f){const x=this.zIndexContext_;let S;this.pixelCoordinates_&&(0,c.aI)(i,this.renderedTransform_)?S=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),S=(0,d.Rc)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,r.k3)(this.renderedTransform_,i));let p=0;const C=n.length;let k,T,I,v,L,R,A,E,w,D,O,M,b,F=0,P=0,W=0,Y=null,G=null;const B=this.coordinateCache_,q=this.viewRotation_,N=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,X={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:q},J=this.instructions!=n||this.overlaps?0:200;let V,H,K,Z;for(;p<C;){const i=n[p];switch(i[0]){case s.Ay.BEGIN_GEOMETRY:V=i[1],Z=i[3],V.getGeometry()?void 0===u||(0,h.HY)(u,Z.getExtent())?++p:p=i[2]+1:p=i[2],x&&(x.zIndex=i[4]);break;case s.Ay.BEGIN_PATH:P>J&&(this.fill_(t),P=0),W>J&&(t.stroke(),W=0),P||W||(t.beginPath(),L=NaN,R=NaN),++p;break;case s.Ay.CIRCLE:F=i[1];const n=S[F],r=S[F+1],c=S[F+2]-n,d=S[F+3]-r,C=Math.sqrt(c*c+d*d);t.moveTo(n+C,r),t.arc(n,r,C,0,2*Math.PI,!0),++p;break;case s.Ay.CLOSE_PATH:t.closePath(),++p;break;case s.Ay.CUSTOM:F=i[1],k=i[2];const z=i[3],U=i[4],j=i[5];X.geometry=z,X.feature=V,p in B||(B[p]=[]);const $=B[p];j?j(S,F,k,2,$):($[0]=S[F],$[1]=S[F+1],$.length=2),x&&(x.zIndex=i[6]),U($,X),++p;break;case s.Ay.DRAW_IMAGE:F=i[1],k=i[2],w=i[3],T=i[4],I=i[5];let Q=i[6];const tt=i[7],et=i[8],it=i[9],st=i[10];let nt=i[11];const ot=i[12];let rt=i[13];v=i[14]||"declutter";const ht=i[15];if(!w&&i.length>=20){D=i[19],O=i[20],M=i[21],b=i[22];const t=this.drawLabelWithPointPlacement_(D,O,M,b);w=t.label,i[3]=w;const e=i[23];T=(t.anchorX-e)*this.pixelRatio,i[4]=T;const s=i[24];I=(t.anchorY-s)*this.pixelRatio,i[5]=I,Q=w.height,i[6]=Q,rt=w.width,i[13]=rt}let lt,at,ct,_t;i.length>25&&(lt=i[25]),i.length>17?(at=i[16],ct=i[17],_t=i[18]):(at=l.Tq,ct=!1,_t=!1),st&&N?nt+=q:st||N||(nt-=q);let dt=0;for(;F<k;F+=2){if(lt&&lt[dt++]<rt/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(w.width,w.height,S[F],S[F+1],rt,Q,T,I,et,it,nt,ot,o,at,ct||_t,V),s=[t,e,w,i,tt,ct?Y:null,_t?G:null];if(f){let t,e,n,o,r;if(ht){const i=k-F;if(!ht[i]){ht[i]={args:s,declutterMode:v};continue}const o=ht[i];t=o.args,e=o.declutterMode,delete ht[i],n=m(t)}if(!t||"declutter"===e&&f.collides(n)||(o=!0),"declutter"===v&&f.collides(i.declutterBox)||(r=!0),"declutter"===e&&"declutter"===v){const t=o&&r;o=t,r=t}o&&("none"!==e&&f.insert(n),this.replayImageOrLabel_.apply(this,t)),r&&("none"!==v&&f.insert(i.declutterBox),this.replayImageOrLabel_.apply(this,s))}else this.replayImageOrLabel_.apply(this,s)}++p;break;case s.Ay.DRAW_CHARS:const gt=i[1],ut=i[2],ft=i[3],xt=i[4];b=i[5];const St=i[6],mt=i[7],pt=i[8];M=i[9];const yt=i[10];D=i[11],O=i[12];const Ct=[i[13],i[13]];v=i[14]||"declutter";const kt=this.textStates[O],Tt=kt.font,It=[kt.scale[0]*mt,kt.scale[1]*mt];let vt;Tt in this.widths_?vt=this.widths_[Tt]:(vt={},this.widths_[Tt]=vt);const Lt=(0,_.k)(S,gt,ut,2),Rt=Math.abs(It[0])*(0,l.TA)(Tt,D,vt);if(xt||Rt<=Lt){const i=(Lt-Rt)*y(D,this.textStates[O].textAlign),s=(0,a.w)(S,gt,ut,2,D,i,St,Math.abs(It[0]),l.TA,Tt,vt,N?0:this.viewRotation_);t:if(s){const i=[];let n,o,r,h,a;if(M)for(n=0,o=s.length;n<o;++n){a=s[n],r=a[4],h=this.createLabel(r,O,"",M),T=a[2]+(It[0]<0?-yt:yt),I=ft*h.height+2*(.5-ft)*yt*It[1]/It[0]-pt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,a[0],a[1],h.width,h.height,T,I,0,0,a[3],Ct,!1,l.Tq,!1,V);if(f&&"declutter"===v&&f.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}if(b)for(n=0,o=s.length;n<o;++n){a=s[n],r=a[4],h=this.createLabel(r,O,b,""),T=a[2],I=ft*h.height-pt;const o=this.calculateImageOrLabelDimensions_(h.width,h.height,a[0],a[1],h.width,h.height,T,I,0,0,a[3],Ct,!1,l.Tq,!1,V);if(f&&"declutter"===v&&f.collides(o.declutterBox))break t;i.push([t,e,h,o,1,null,null])}f&&"none"!==v&&f.load(i.map(m));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++p;break;case s.Ay.END_GEOMETRY:if(void 0!==g){V=i[1];const t=g(V,Z);if(t)return t}++p;break;case s.Ay.FILL:J?P++:this.fill_(t),++p;break;case s.Ay.MOVE_TO_LINE_TO:for(F=i[1],k=i[2],H=S[F],K=S[F+1],A=H+.5|0,E=K+.5|0,A===L&&E===R||(t.moveTo(H,K),L=A,R=E),F+=2;F<k;F+=2)H=S[F],K=S[F+1],A=H+.5|0,E=K+.5|0,F!=k-2&&A===L&&E===R||(t.lineTo(H,K),L=A,R=E);++p;break;case s.Ay.SET_FILL_STYLE:Y=i,this.alignAndScaleFill_=i[2],P&&(this.fill_(t),P=0,W&&(t.stroke(),W=0)),t.fillStyle=i[1],++p;break;case s.Ay.SET_STROKE_STYLE:G=i,W&&(t.stroke(),W=0),this.setStrokeStyle_(t,i),++p;break;case s.Ay.STROKE:J?W++:t.stroke(),++p;break;default:++p}}P&&this.fill_(t),W&&t.stroke()}execute(t,e,i,s,n,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,s,n)}};var T=i(68711),I=i(43530);const v=["Polygon","Circle","LineString","Image","Text","Default"],L=["Image","Text"],R=v.filter((t=>!L.includes(t)));const A={};const E=class{constructor(t,e,i,s,n,o,h){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,r.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(n,h)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let s=this.executorsByZIndex_[i];void 0===s&&(s={},this.executorsByZIndex_[i]=s);const n=t[i];for(const t in n){const i=n[t];s[t]=new k(this.resolution_,this.pixelRatio_,this.overlaps_,i,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,s=t.length;e<s;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,n,o){const l=2*(s=Math.round(s))+1,a=(0,r.Zz)(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),_=!this.hitDetectionContext_;_&&(this.hitDetectionContext_=(0,T.Y)(l,l,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;let g;d.canvas.width!==l||d.canvas.height!==l?(d.canvas.width=l,d.canvas.height=l):_||d.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(g=(0,h.S5)(),(0,h.$C)(g,t),(0,h.r)(g,e*(this.renderBuffer_+s),g));const u=function(t){if(void 0!==A[t])return A[t];const e=2*t+1,i=t*t,s=new Array(i+1);for(let n=0;n<=t;++n)for(let o=0;o<=t;++o){const r=n*n+o*o;if(r>i)break;let h=s[r];h||(h=[],s[r]=h),h.push(4*((t+n)*e+(t+o))+3),n>0&&h.push(4*((t-n)*e+(t+o))+3),o>0&&(h.push(4*((t+n)*e+(t-o))+3),n>0&&h.push(4*((t-n)*e+(t-o))+3))}const n=[];for(let t=0,e=s.length;t<e;++t)s[t]&&n.push(...s[t]);return A[t]=n,n}(s);let f;function x(t,e){const i=d.getImageData(0,0,l,l).data;for(let r=0,h=u.length;r<h;r++)if(i[u[r]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(t)){const i=(u[r]-3)/4,o=s-i%l,h=s-(i/l|0),a=n(t,e,o*o+h*h);if(a)return a}d.clearRect(0,0,l,l);break}}const S=Object.keys(this.executorsByZIndex_).map(Number);let m,p,y,C,k;for(S.sort(c.V_),m=S.length-1;m>=0;--m){const t=S[m].toString();for(y=this.executorsByZIndex_[t],p=v.length-1;p>=0;--p)if(f=v[p],C=y[f],void 0!==C&&(k=C.executeHitDetection(d,a,i,x,g),k))return k}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],o=e[3],r=[i,s,i,o,n,o,n,s];return(0,d.Rc)(r,0,8,2,t,r),r}isEmpty(){return(0,I.p)(this.executorsByZIndex_)}execute(t,e,i,s,n,o,r){const h=Object.keys(this.executorsByZIndex_).map(Number);let l,a,_,d,g,u;for(h.sort(c.V_),o=o||v,r&&h.reverse(),l=0,a=h.length;l<a;++l){const a=h[l].toString();for(g=this.executorsByZIndex_[a],_=0,d=o.length;_<d;++_){const a=o[_];if(u=g[a],void 0!==u){const o=null===r?void 0:u.getZIndexContext(),c=o?o.getContext():t,_=this.maxExtent_&&"Image"!==a&&"Text"!==a;if(_&&(c.save(),this.clip(c,i)),u.execute(c,e,i,s,n,r),_&&c.restore(),o){o.offset();const t=h[l];this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(c.V_);for(let i=0,s=e.length;i<s;++i)t[e[i]].forEach((t=>{t.draw(this.renderedContext_),t.clear()}))}}},2236:(t,e,i)=>{i.d(e,{A:()=>g});var s=i(32826),n=i(77295),o=i(9703),r=i(38774),h=i(66514),l=i(70915),a=i(61597),c=i(87622),_=i(62096);class d extends s.A{constructor(t,e,i,s,n,r,h){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?(0,a.Mg)(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=r,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,o.vt)()}drawImages_(t,e,i,s){if(!this.image_)return;const n=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_,h=this.tmpLocalTransform_,l=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=l*this.imageOpacity_);let a=this.imageRotation_;0===this.transformRotation_&&(a-=this.viewRotation_),this.imageRotateWithView_&&(a+=this.viewRotation_);for(let t=0,e=n.length;t<e;t+=2){const e=n[t]-this.imageAnchorX_,i=n[t+1]-this.imageAnchorY_;if(0!==a||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,s=i+this.imageAnchorY_;(0,o.Zz)(h,t,s,1,1,a,-t,-s),r.save(),r.transform.apply(r,h),r.translate(t,s),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let r=this.textRotation_;for(0===this.transformRotation_&&(r-=this.viewRotation_),this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=s){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(r),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,s,n){const o=this.context_,r=(0,c.Rc)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let h=r.length;n&&(h-=2);for(let t=2;t<h;t+=2)o.lineTo(r[t],r[t+1]);return n&&o.closePath(),i}drawRings_(t,e,i,s){for(let n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.HY)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,_.v7)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.HY)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,l.HY)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const n=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t)s=this.moveToLineTo_(i,s,n[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t){const e=n[t];s=this.drawRings_(i,s,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,h.aI)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:r.MY;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,n.F)(e||r.qY)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),h=e.getLineJoin(),l=e.getWidth(),a=e.getMiterLimit(),c=s||r.Oq;this.strokeState_={lineCap:void 0!==i?i:r._m,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(o||r.vk)*this.pixelRatio_,lineJoin:void 0!==h?h:r._K,lineWidth:(void 0!==l?l:r.aq)*this.pixelRatio_,miterLimit:void 0!==a?a:r.eL,strokeStyle:(0,n.F)(t||r.NT)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,n.F)(t||r.qY)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),s=i.getLineDash(),o=i.getLineDashOffset(),h=i.getLineJoin(),l=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:r._m,lineDash:s||r.Oq,lineDashOffset:o||r.vk,lineJoin:void 0!==h?h:r._K,lineWidth:void 0!==l?l:r.aq,miterLimit:void 0!==a?a:r.eL,strokeStyle:(0,n.F)(t||r.NT)}}else this.textStrokeState_=null;const s=t.getFont(),o=t.getOffsetX(),h=t.getOffsetY(),l=t.getRotateWithView(),a=t.getRotation(),c=t.getScaleArray(),_=t.getText(),d=t.getTextAlign(),g=t.getTextBaseline();this.textState_={font:void 0!==s?s:r.ZV,textAlign:void 0!==d?d:r.MY,textBaseline:void 0!==g?g:r.M8},this.text_=void 0!==_?Array.isArray(_)?_.reduce(((t,e,i)=>t+(i%2?" ":e)),""):_:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==h?this.pixelRatio_*h:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const g=d},66429:(t,e,i)=>{i.d(e,{Ay:()=>l,I5:()=>n,VD:()=>o,kx:()=>h,th:()=>r});const s={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},n=[s.FILL],o=[s.STROKE],r=[s.BEGIN_PATH],h=[s.CLOSE_PATH],l=s},55799:(t,e,i)=>{i.d(e,{A:()=>g,E:()=>_});var s=i(8130),n=i(66429),o=i(77295),r=i(38774),h=i(4087),l=i(70915),a=i(68297),c=i(87745);const _={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class d extends s.A{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[r.qY]={fillStyle:r.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const s=this.textFillState_,o=this.textStrokeState_,h=this.textState_;if(""===this.text_||!h||!s&&!o)return;const _=this.coordinates;let d=_.length;const g=t.getType();let u=null,f=t.getStride();if("line"!==h.placement||"LineString"!=g&&"MultiLineString"!=g&&"Polygon"!=g&&"MultiPolygon"!=g){let s=h.overflow?null:[];switch(g){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),f=2;break;case"Polygon":u=t.getFlatInteriorPoint(),h.overflow||s.push(u[2]/this.resolution),f=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();u=[];for(let t=0,i=e.length;t<i;t+=3)h.overflow||s.push(e[t+2]/this.resolution),u.push(e[t],e[t+1]);if(0===u.length)return;f=2}const o=this.appendFlatPointCoordinates(u,f);if(o===d)return;if(s&&(o-d)/2!=u.length/f){let t=d/2;s=s.filter(((e,i)=>{const s=_[2*(t+i)]===u[i*f]&&_[2*(t+i)+1]===u[i*f+1];return s||--t,s}))}this.saveTextStates_(),(h.backgroundFill||h.backgroundStroke)&&(this.setFillStrokeStyle(h.backgroundFill,h.backgroundStroke),h.backgroundFill&&this.updateFillStyle(this.state,this.createFill),h.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let l=h.padding;if(l!=r.Tq&&(h.scale[0]<0||h.scale[1]<0)){let t=h.padding[0],e=h.padding[1],i=h.padding[2],s=h.padding[3];h.scale[0]<0&&(e=-e,s=-s),h.scale[1]<0&&(t=-t,i=-i),l=[t,e,i,s]}const a=this.pixelRatio;this.instructions.push([n.Ay.DRAW_IMAGE,d,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,l==r.Tq?r.Tq:l.map((function(t){return t*a})),!!h.backgroundFill,!!h.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]);const c=1/a,x=this.state.fillStyle;h.backgroundFill&&(this.state.fillStyle=r.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([n.Ay.DRAW_IMAGE,d,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[c,c],NaN,this.declutterMode_,this.declutterImageWithText_,l,!!h.backgroundFill,!!h.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?r.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]),h.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,l.HY)(this.maxExtent,t.getExtent()))return;let s;if(u=t.getFlatCoordinates(),"LineString"==g)s=[u.length];else if("MultiLineString"==g)s=t.getEnds();else if("Polygon"==g)s=t.getEnds().slice(0,1);else if("MultiPolygon"==g){const e=t.getEndss();s=[];for(let t=0,i=e.length;t<i;++t)s.push(e[t][0])}this.beginGeometry(t,e,i);const n=h.repeat,o=n?void 0:h.textAlign;let r=0;for(let t=0,e=s.length;t<e;++t){let e;e=n?(0,a.W)(n*this.resolution,u,r,s[t],f):[u.slice(r,s[t])];for(let i=0,n=e.length;i<n;++i){const n=e[i];let l=0,a=n.length;if(null==o){const t=(0,c.z)(h.maxAngle,n,0,n.length,2);l=t[0],a=t[1]}for(let t=l;t<a;t+=f)_.push(n[t],n[t+1]);const g=_.length;r=s[t],this.drawChars_(d,g),d=g}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||r.MY,justify:e.justify,textBaseline:e.textBaseline||r.M8,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,h=this.textKey_,l=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,c=_[s.textBaseline],d=this.textOffsetY_*a,g=this.text_,u=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([n.Ay.DRAW_CHARS,t,e,c,s.overflow,l,s.maxAngle,a,d,o,u*a,g,h,1,this.declutterMode_]),this.hitDetectionInstructions.push([n.Ay.DRAW_CHARS,t,e,c,s.overflow,l?r.qY:l,s.maxAngle,a,d,o,u*a,g,h,1/a,this.declutterMode_])}setTextStyle(t,e){let i,s,n;if(t){const e=t.getFill();e?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=(0,o.F)(e.getColor()||r.qY)):(s=null,this.textFillState_=s);const l=t.getStroke();if(l){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=l.getLineDash(),e=l.getLineDashOffset(),i=l.getWidth(),s=l.getMiterLimit();n.lineCap=l.getLineCap()||r._m,n.lineDash=t?t.slice():r.Oq,n.lineDashOffset=void 0===e?r.vk:e,n.lineJoin=l.getLineJoin()||r._K,n.lineWidth=void 0===i?r.aq:i,n.miterLimit=void 0===s?r.eL:s,n.strokeStyle=(0,o.F)(l.getColor()||r.NT)}else n=null,this.textStrokeState_=n;i=this.textState_;const a=t.getFont()||r.ZV;(0,r.fZ)(a);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=a,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||r.M8,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||r.Tq,i.scale=void 0===c?[1,1]:c;const _=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===_?0:_,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===u?0:u,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,h.v6)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,h.v6)(s.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const g=d}}]);