(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{130:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var s=n(43),r=n.n(s),a=n(61),o=n.n(a),i=n(1),c=n.n(i),h=n(2),u=n.n(h),l=n(0),p=n.n(l),y=n(139),x=n(151),d=n(140),w=n(152),f=n(141),v=n(153),m=n(142),b=n(54);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){function e(){var t=this;c()(this,e),p()(this,"render",(function(e){t.keyboard&&(t.keyboard.start(),t.scene.setKeyboardInteraction(t.keyboard)),t.scene.update(e),t.scene.render(),t.keyboard&&t.keyboard.end()})),p()(this,"revealAfterLoaded",(function(e){e&&e.querySelectorAll("[style]").forEach((function(e){return e.removeAttribute("style")}))})),this.keyboard=null,this.mouse=null,this.scene=null,this.loop=null}var t;return u()(e,[{key:"setup",value:(t=o()(r.a.mark((function e(t,n){var s,a,o,i,c,h,u,l,g,O,j,P,D=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=document.body.offsetWidth,a=window.innerHeight,o={},!n){e.next=16;break}if(s=n.canvas.width,a=n.canvas.height,!n.assets){e.next=11;break}return i=new x.a,e.next=10,i.get(n.assets.map((function(e){return Object(b.getEnvPath)(e)})));case 10:o=e.sent;case 11:if(!n.shaders){e.next=16;break}return c=new d.a,e.next=15,c.get(n.shaders);case 15:o.shaders=e.sent;case 16:this.canvas=new w.a,this.canvas.resize({width:s,height:a}),h=S(S({},n),{},{support:this.canvas.getSupport()}),this.scene=new t(this.canvas.getContext(),h,o),u=document.querySelector("#".concat(n.slug)),n&&(n.keyboard&&(this.keyboard=new f.a(n.keyboard)),n.mouse&&(l=n.mouse,g=l.events,O=l.domId,j=g.reduce((function(e,t){return S(S({},e),{},p()({},"callback".concat(Object(b.capitalize)(t)),D.scene["onMouse".concat(Object(b.capitalize)(t))]))}),{}),P=O?document.querySelector("#".concat(O)):u,this.mouse=new m.a(P,j)),n.controls&&(this.controls=new v.a(u,n.controls),u.appendChild(this.controls.getDomItem()),n.controls.ranges&&this.scene.setupControls&&this.scene.setupControls({ranges:this.controls.getRanges()}))),this.revealAfterLoaded(u),this.loop=new y.a,this.loop.setCallback(this.render),this.loop.start();case 26:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"stop",value:function(){this.loop&&this.loop.stop(),this.mouse&&this.mouse.cancel()}},{key:"getCanvas",value:function(){return this.canvas&&this.canvas.get()}},{key:"destroy",value:function(){this.stop(),this.scene&&this.scene.destroy&&this.scene.destroy(),this.controls&&this.controls.destroy()}}]),e}()},412:function(e,t,n){"use strict";n.r(t);var s,r,a,o,i=n(125),c=n(0),h=n.n(c),u="DASH",l="SLASH",p="JUMP_LOAD",y={id:"heros",x:4,y:5,z:.1,w:.5,h:1,life:100,displayLife:!0,physics:{run:.1,jump:.6,aircontrol:.05,dash:2,gravity:.05,damping:{x:.8,y:.8},clamp:{x:.4,y:.5}},states:{STAND:"STAND",RUN:"RUN",JUMP_UP:"JUMP_UP",JUMP_DOWN:"JUMP_DOWN",DASH:u,AIM:"AIM",RUN_JUMP_UP:"RUN_JUMP_UP",RUN_JUMP_DOWN:"RUN_JUMP_DOWN",DIE:"DIE",SLASH:l,SLASH_2:"SLASH_2",SLASH_3:"SLASH_3",SLOW_DOWN:"SLOW_DOWN",JUMP_LOAD:p,WALL:"WALL",WALL_UP:"WALL_UP",LAND:"LAND"},lockStates:["AIM",l,u,p],combos:{attack:[{key:i.j,cancel:!1,threshold:1e3,sprite:"up"},{key:i.j,cancel:!1,threshold:1e3,sprite:"down"},{key:i.j,cancel:!1,sprite:"run"}]}},x=y.states,d=x.STAND,w=x.RUN,f=x.JUMP_UP,v=x.JUMP_DOWN,m=x.DASH,b=x.AIM,g=x.RUN_JUMP_UP,S=x.RUN_JUMP_DOWN,O=x.DIE,j=x.SLASH,P=x.SLASH_2,D=x.SLASH_3,L=x.WALL,U=x.WALL_UP,k=x.LAND,A=x.JUMP_LOAD,_=x.SLOW_DOWN,N=(s={size:{w:256,h:512},time:100,refSize:57},h()(s,d,{uv:[{x:28,y:239,w:26,h:57,t:1e3},{x:0,y:239,w:28,h:57,t:1e3}]}),h()(s,w,{uv:[{x:39,y:80,w:40,h:47},{x:106,y:34,w:40,h:45},{x:0,y:80,w:39,h:47},{x:79,y:80,w:39,h:47}]}),h()(s,m,{uv:[{x:84,y:0,w:99,h:28,px:90,py:0},{x:146,y:34,w:100,h:46,px:90,py:0}],iteration:1,next:d}),h()(s,A,{uv:[{x:0,y:34,w:50,h:37}]}),h()(s,f,{uv:[{x:199,y:128,w:44,h:55},{x:99,y:183,w:44,h:56}]}),h()(s,v,{uv:[{x:173,y:239,w:33,h:64},{x:206,y:239,w:34,h:64}]}),h()(s,g,{uv:[{x:118,y:128,w:39,h:52},{x:157,y:128,w:42,h:52}]}),h()(s,S,{uv:[{x:186,y:183,w:42,h:56},{x:143,y:183,w:43,h:56}]}),h()(s,_,{uv:[{x:83,y:239,w:61,h:58}]}),h()(s,b,{uv:[{x:83,y:239,w:61,h:58,cx:57,cy:41}]}),h()(s,k,{uv:[{x:183,y:0,w:45,h:34}]}),h()(s,L,{uv:[{x:54,y:239,w:29,h:58}]}),h()(s,U,{uv:[{x:144,y:239,w:29,h:58}]}),h()(s,O,{uv:[{x:50,y:34,w:56,h:40,t:1e3},{x:0,y:0,w:84,h:18,t:1e3}],iteration:1}),h()(s,j,{uv:[{x:0,y:303,w:57,h:75,t:50,px:24},{x:57,y:303,w:118,h:95,t:50,px:31},{x:0,y:128,w:72,h:48,t:100,px:43}],iteration:1,next:d}),h()(s,P,{uv:[{x:118,y:80,w:78,h:48},{x:0,y:183,w:99,h:55}],iteration:1,next:d}),h()(s,D,{uv:[{x:72,y:128,w:46,h:51},{x:175,y:303,w:79,h:106}],iteration:1,next:d}),s),T={id:"bullet",x:0,y:0,z:.4,w:.5,h:.5,damage:10,physics:{speed:.5,recoil:.1},states:{BULLET_LOAD:"BULLET_LOAD",BULLET:"BULLET"}},z=T.states,E=z.BULLET,M=z.BULLET_LOAD,R=(r={size:{w:64,h:256},time:100,refSize:57},h()(r,E,{uv:[{x:0,y:0,w:35,h:17},{x:0,y:17,w:49,h:32}]}),h()(r,M,{uv:[{x:0,y:49,w:54,h:54,px:0,py:27},{x:0,y:103,w:38,h:39,px:0,py:19}]}),r),W={id:"fx",states:{DUST:"DUST"}},J=W.states.DUST,I=h()({size:{w:32,h:64},time:200,refSize:57},J,{uv:[{x:0,y:0,w:26,h:19},{x:0,y:19,w:26,h:14},{x:0,y:33,w:29,h:12}],iteration:1}),H={id:"monster",x:10,y:4,z:.2,w:.5,h:1,life:100,physics:{run:.1,jump:0,gravity:.05,damping:{x:0,y:0},clamp:{x:1,y:1}},states:{STAND:"STAND",RUN:"RUN",JUMP_DOWN:"JUMP_DOWN",DIE:"DIE"}},C=H.states,B=C.STAND,q=C.RUN,F=C.JUMP_DOWN,G=C.DIE,K=(a={size:{w:256,h:512},time:100,refSize:57},h()(a,B,{uv:[{x:28,y:239,w:26,h:57,t:1e3},{x:0,y:239,w:28,h:57,t:1e3}]}),h()(a,q,{uv:[{x:39,y:80,w:40,h:47},{x:106,y:34,w:40,h:45},{x:0,y:80,w:39,h:47},{x:79,y:80,w:39,h:47}]}),h()(a,F,{uv:[{x:173,y:239,w:33,h:64},{x:206,y:239,w:34,h:64}]}),h()(a,G,{uv:[{x:50,y:34,w:56,h:40},{x:0,y:0,w:84,h:18}],iteration:1}),a),X=(o={size:{w:256,h:256},refSize:64,objTypes:{CUBE:0,FLAT:1},colors:{"000":{pattern:9,objType:1},150150150:{pattern:10,objType:1},"00255":{pattern:10,objType:1,z:-1},25500:{pattern:10,objType:1},"02500":{pattern:10,objType:1},"02550":{pattern:12,objType:1,scale:{x:2,y:2},z:-.4},"02000":{pattern:13,objType:1,z:1},"01500":{pattern:14,objType:1,scale:{x:1.5,y:1.5},z:-.5},"01000":{pattern:15,objType:1},1e4:{pattern:0,scale:{x:4,y:4},objType:1}}},h()(o,0,{uv:[{x:166,y:26,w:52,h:52}]}),h()(o,1,{uv:[{x:57,y:0,w:52,h:26}]}),h()(o,2,{uv:[{x:109,y:0,w:52,h:26}]}),h()(o,3,{uv:[{x:0,y:0,w:57,h:16}]}),h()(o,4,{uv:[{x:0,y:78,w:52,h:52}]}),h()(o,5,{uv:[{x:0,y:26,w:57,h:27}]}),h()(o,6,{uv:[{x:161,y:0,w:52,h:26}]}),h()(o,7,{uv:[{x:52,y:78,w:52,h:52}]}),h()(o,8,{uv:[{x:104,y:78,w:45,h:52}]}),h()(o,9,{uv:[{x:38,y:187,w:64,h:64}]}),h()(o,10,{uv:[{x:102,y:187,w:64,h:64}]}),h()(o,11,{uv:[{x:166,y:187,w:64,h:64}]}),h()(o,12,{uv:[{x:14,y:131,w:40,h:54}]}),h()(o,13,{uv:[{x:91,y:131,w:45,h:54}]}),h()(o,14,{uv:[{x:173,y:131,w:44,h:56}]}),h()(o,15,{uv:[{x:0,y:187,w:38,h:56}]}),h()(o,16,{uv:[{x:136,y:131,w:37,h:54}]}),h()(o,17,{uv:[{x:124,y:26,w:42,h:51}]}),h()(o,18,{uv:[{x:149,y:78,w:28,h:52}]}),h()(o,19,{uv:[{x:84,y:26,w:40,h:50}]}),h()(o,20,{uv:[{x:0,y:131,w:14,h:53}]}),h()(o,21,{uv:[{x:57,y:26,w:27,h:50}]}),h()(o,22,{uv:[{x:54,y:131,w:37,h:54}]}),h()(o,23,{uv:[{x:177,y:78,w:44,h:53}]}),o);t.default={slug:"game",assets:["/textures/heros.png","/textures/fx.png","/textures/bullet.png","/textures/level1.png","/textures/rocks.png","/textures/ground.png","/textures/clouds.png","/obj/tile.obj","/obj/cube.obj","/obj/cubeTile.obj","/levels/level3.bmp"],shaders:["/camera/color.js","/camera/sprite.js","/camera/spritePhong.js","/camera/albedoPhong.js","/camera/background.js","/screen/fxaa.js","/screen/rgb.js","/screen/wave.js","/screen/blurDirection.js","/screen/pixel.js","/screen/screen.js","/screen/debug.js"],postprocess:!0,camera:{position:{x:10,y:10,z:22},target:{x:10,y:10,z:0},near:1,far:1e3,angle:40},lampes:[{type:0,position:{x:0,y:0,z:0},ambiant:[1,1,1],diffuse:[1,.9,.9],specular:[0,0,0],strength:1,brillance:200}],controls:{fullscreen:{buttonId:"fullscreen-toggle-btn"}},keyboard:{UP:i.h,DOWN:i.a,LEFT:i.d,RIGHT:i.e,SPACE:i.g,SHIFT:i.f,X:i.j,W:i.i,ENTER:i.c,ECHAP:i.b},useDepthTexture:!1,splashscreen:!1,canvas:{width:1024,height:1024},game:{types:{heros:{constants:y,sprites:N,fxs:{constants:W,sprites:I},bullets:{constants:T,sprites:R}},monster:{constants:H,sprites:K}},levels:[{name:"level 1",tilemap:{texture:"level3",tileSize:{w:1,h:1},viewBox:{w:20,h:10},sprites:X},interactives:{heros:{type:"heros",x:4,y:5,z:.1},"monster-1":{type:"monster",x:10,y:4,z:.2}}}]}}},541:function(e,t,n){var s=n(99),r=n(542);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a={insert:"head",singleton:!1};s(r,a);e.exports=r.locals||{}},542:function(e,t,n){"use strict";n.r(t);var s=n(60),r=n.n(s)()(!1);r.push([e.i,"#game {\n  text-align: center;\n}\n\n#game canvas {\n  display: block;\n  margin: 0 auto;\n  width: auto;\n  height: auto;\n  max-height: 100vh;\n  max-width: 100%;\n}\n\n#gameinfos {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 4px;\n  width: 100%;\n  text-align: left;\n}\n\nmeter {\n  width: 100px;\n  height: 1.2em;\n}\n\n#game[data-fullscreen] canvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n}\n\n#splash {\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  color: #fff;\n  transition: opacity 500ms ease-out;\n  z-index: 1;\n}\n\n#title {\n  font-size: 6em;\n  font-weight: 100;\n  text-shadow: 1px 1px 0 #000;\n  margin: 0;\n}\n\n#instructions {\n  font-size: 1.6em;\n  display: none;\n  letter-spacing: 0.1em;\n  animation: blink 1s linear infinite;\n  margin: 1em 0;\n}\n\n.commands {\n  letter-spacing: 0.2em;\n  text-transform: uppercase;\n  padding: 1em 0;\n}\n\n.command {\n  position: relative;\n  overflow: hidden;\n  font-size: 0.8em;\n  letter-spacing: 0.1em;\n  margin: 10px 0;\n}\n\n.command .key {\n  border-radius: 4px;\n  margin: 0 4px;\n  text-align: center;\n  width: calc(50% - 8px);\n  background: #444;\n  float: left;\n}\n\n.command .key.twocol {\n  width: calc(25% - 8px);\n}\n\n.command .key svg {\n  width: 8px;\n  stroke: #fff;\n  stroke-width: 2;\n  fill: none;\n}\n\n.command .desc {\n  float: left;\n  width: 50%;\n}\n\n.command .key,\n.command .desc {\n  padding: 0.4em;\n  text-shadow: 1px 1px 0 #000;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""]),t.default=r},748:function(e,t,n){"use strict";n.r(t),n.d(t,"destroy",(function(){return z}));var s=n(43),r=n.n(s),a=n(61),o=n.n(a),i=n(130),c=n(49),h=n.n(c),u=n(1),l=n.n(u),p=n(2),y=n.n(p),x=n(10),d=n.n(x),w=n(22),f=n.n(w),v=n(7),m=n.n(v),b=n(8),g=n.n(b),S=n(3),O=n.n(S),j=n(0),P=n.n(j),D=n(485),L=n(479);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=O()(e);if(t){var r=O()(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return g()(this,n)}}var _=function(e){m()(n,e);var t=A(n);function n(e,s,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;l()(this,n);var c=s.game,u=h()(s,["game"]),p=c.levels,y=h()(c,["levels"]),x=r.levels,w=h()(r,["levels"]),f=k(k({},u),{},{game:y});if(a=t.call(this,e,f,w,o,i),P()(d()(a),"callbackDeath",(function(){a.setPause(!0),a.isSplashScreen=!0,a.splash.showRestart(),a.resetGameLevel()})),a.isSplashScreen=!0,a.needReset=!1,a.splash=new L.a,a.splash.showReady(),a.currentLevel=0,p){var v=p[a.currentLevel],m=x[v.tilemap.texture];a.setupGameLevel(v,m,a.callbackDeath)}return a}return y()(n,[{key:"setKeyboardInteraction",value:function(e){f()(O()(n.prototype),"setKeyboardInteraction",this).call(this,e),this.isSplashScreen&&e.isPressedOne(this.config.keyboard.ENTER)&&(this.setPause(!1),this.splash.hide(),this.isSplashScreen=!1),e.isPressedOne(this.config.keyboard.ECHAP)&&(this.isSplashScreen=!this.isSplashScreen,this.setPause(this.isSplashScreen),this.isSplashScreen?this.splash.showPause():this.splash.hide())}}]),n}(D.a),N=n(412),T=(n(541),n(351),n(353),null),z=(t.default=o()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T=new i.a,e.next=3,T.setup(_,N.default);case 3:document.querySelector("#".concat(N.default.slug)).appendChild(T.getCanvas());case 5:case"end":return e.stop()}}),e)}))),function(){T&&T.destroy&&T.destroy()})}}]);