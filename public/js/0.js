(window.webpackJsonp=window.webpackJsonp||[]).push([[0,174],{1:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},10:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},116:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(73),h=s(118),u=function(){function t(e){n()(this,t),this.gl=e,this.objet=new o.a(e,h.a)}return a()(t,[{key:"render",value:function(t){this.gl.disable(this.gl.CULL_FACE),this.objet.render(t),this.gl.enable(this.gl.CULL_FACE)}}]),t}()},117:function(t,e,s){"use strict";var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(25),h=function(){function t(){n()(this,t),this.d=new Array(9),this.sauvegardePrecedente=[],this.empilement=0,this.init()}return a()(t,[{key:"init",value:function(){for(var t=0;t<9;t+=1)this.d[t]=0;return this.sauvegardePrecedente=[],this.empilement=0,this}},{key:"get",value:function(){return this.d}},{key:"set",value:function(t,e,s,i,n,r,a,o,h){return this.d[0]=t,this.d[1]=e,this.d[2]=s,this.d[3]=i,this.d[4]=n,this.d[5]=r,this.d[6]=a,this.d[7]=o,this.d[8]=h,this}},{key:"setFromArray",value:function(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}},{key:"setOneValue",value:function(t){for(var e=0;e<9;e+=1)this.d[e]=t[e]}},{key:"multiply",value:function(e){for(var s=new t,i=0;i<3;i+=1)for(var n=0;n<3;n+=1)for(var r=0;r<3;r+=1)s.d[3*n+i]+=this.d[3*n+r]*e.d[3*r+i];for(var a=0;a<9;a+=1)this.d[a]=s.d[a];return this}},{key:"equal",value:function(t){for(var e=0;e<9;e+=1)this.d[e]=t.d[e],this.sauvegardePrecedente[e]=t.sauvegardePrecedente[e];return this}},{key:"push",value:function(){this.empilement+=1;for(var t=0,e=9*(this.empilement-1);e<9*this.empilement;e+=1)this.sauvegardePrecedente[e]=this.d[t],t+=1;return this}},{key:"pop",value:function(){if(this.empilement>0){for(var t=0,e=9*(this.empilement-1);e<9*this.empilement;e+=1)this.d[t]=this.sauvegardePrecedente[e],this.sauvegardePrecedente[e]=null,t+=1;this.empilement-=1}return this}},{key:"identity",value:function(){return this.init(),this.d[0]=1,this.d[4]=1,this.d[8]=1,this}},{key:"transpose",value:function(){return this.setFromArray(t.transpose(this.d))}},{key:"inverse",value:function(){var t=new Array(9),e=this.getDeterminant();if(0===e)return this.identity(),null;t[0]=this.d[4]*this.d[8]-this.d[5]*this.d[7]/e,t[1]=-(this.d[1]*this.d[8]-this.d[7]*this.d[2])/e,t[2]=this.d[1]*this.d[5]-this.d[4]*this.d[2]/e,t[3]=-(this.d[3]*this.d[8]-this.d[5]*this.d[6])/e,t[4]=this.d[0]*this.d[8]-this.d[6]*this.d[2]/e,t[5]=-(this.d[0]*this.d[5]-this.d[3]*this.d[2])/e,t[6]=this.d[3]*this.d[7]-this.d[6]*this.d[4]/e,t[7]=-(this.d[0]*this.d[7]-this.d[6]*this.d[1])/e,t[8]=this.d[0]*this.d[4]-this.d[1]*this.d[3]/e;for(var s=0;s<9;s+=1)this.d[s]=t[s];return this}},{key:"getDeterminant",value:function(){return this.d[0]*(this.d[4]*this.d[8]-this.d[7]*this.d[5])+this.d[1]*(this.d[5]*this.d[6]-this.d[3]*this.d[8])+this.d[2]*(this.d[3]*this.d[7]-this.d[6]*this.d[4])}},{key:"rotate",value:function(e,s,i,n){var r=new t,a=e*(Math.PI/180),h=new o.a(s,i,n);return h.normalise(),r.d[0]=h.x*h.x*(1-Math.cos(a))+Math.cos(a),r.d[1]=h.x*h.y*(1-Math.cos(a))-h.z*Math.sin(a),r.d[2]=h.x*h.z*(1-Math.cos(a))+h.y*Math.sin(a),r.d[3]=h.x*h.y*(1-Math.cos(a))+h.z*Math.sin(a),r.d[4]=h.y*h.y*(1-Math.cos(a))+Math.cos(a),r.d[5]=h.y*h.z*(1-Math.cos(a))-h.x*Math.sin(a),r.d[6]=h.x*h.z*(1-Math.cos(a))-h.y*Math.sin(a),r.d[7]=h.y*h.z*(1-Math.cos(a))+h.x*Math.sin(a),r.d[8]=h.z*h.z*(1-Math.cos(a))+Math.cos(a),this.multiply(r),this}}],[{key:"transpose",value:function(t){for(var e=new Float32Array(9),s=0,i=0;i<3;i+=1)for(var n=0;n<3;n+=1)e[s]=t[3*n+i],s+=1;return e}}]),t}();e.a=h},118:function(t,e,s){"use strict";e.a={position:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],indices:[0,1,2,1,3,2],texture:[0,0,1,0,0,1,1,1]}},119:function(t,e){t.exports=function(t,e){if(null==t)return{};var s,i,n={},r=Object.keys(t);for(i=0;i<r.length;i++)s=r[i],e.indexOf(s)>=0||(n[s]=t[s]);return n}},130:function(t,e,s){"use strict";s.d(e,"a",(function(){return w}));var i=s(43),n=s.n(i),r=s(61),a=s.n(r),o=s(1),h=s.n(o),u=s(2),c=s.n(u),l=s(0),d=s.n(l),f=s(139),g=s(151),v=s(140),p=s(152),y=s(141),m=s(153),b=s(142),k=s(54);function x(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function E(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?x(Object(s),!0).forEach((function(e){d()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var w=function(){function t(){var e=this;h()(this,t),d()(this,"render",(function(t){e.keyboard&&(e.keyboard.start(),e.scene.setKeyboardInteraction(e.keyboard)),e.scene.update(t),e.scene.render(),e.keyboard&&e.keyboard.end()})),d()(this,"revealAfterLoaded",(function(t){t&&t.querySelectorAll("[style]").forEach((function(t){return t.removeAttribute("style")}))})),this.keyboard=null,this.mouse=null,this.scene=null,this.loop=null}var e;return c()(t,[{key:"setup",value:(e=a()(n.a.mark((function t(e,s){var i,r,a,o,h,u,c,l,x,w,T,P,j=this;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=document.body.offsetWidth,r=window.innerHeight,a={},!s){t.next=16;break}if(i=s.canvas.width,r=s.canvas.height,!s.assets){t.next=11;break}return o=new g.a,t.next=10,o.get(s.assets.map((function(t){return Object(k.getEnvPath)(t)})));case 10:a=t.sent;case 11:if(!s.shaders){t.next=16;break}return h=new v.a,t.next=15,h.get(s.shaders);case 15:a.shaders=t.sent;case 16:this.canvas=new p.a,this.canvas.resize({width:i,height:r}),u=E(E({},s),{},{support:this.canvas.getSupport()}),this.scene=new e(this.canvas.getContext(),u,a),c=document.querySelector("#".concat(s.slug)),s&&(s.keyboard&&(this.keyboard=new y.a(s.keyboard)),s.mouse&&(l=s.mouse,x=l.events,w=l.domId,T=x.reduce((function(t,e){return E(E({},t),{},d()({},"callback".concat(Object(k.capitalize)(e)),j.scene["onMouse".concat(Object(k.capitalize)(e))]))}),{}),P=w?document.querySelector("#".concat(w)):c,this.mouse=new b.a(P,T)),s.controls&&(this.controls=new m.a(c,s.controls),c.appendChild(this.controls.getDomItem()),s.controls.ranges&&this.scene.setupControls&&this.scene.setupControls({ranges:this.controls.getRanges()}))),this.revealAfterLoaded(c),this.loop=new f.a,this.loop.setCallback(this.render),this.loop.start();case 26:case"end":return t.stop()}}),t,this)}))),function(t,s){return e.apply(this,arguments)})},{key:"stop",value:function(){this.loop&&this.loop.stop(),this.mouse&&this.mouse.cancel()}},{key:"getCanvas",value:function(){return this.canvas&&this.canvas.get()}},{key:"destroy",value:function(){this.stop(),this.scene&&this.scene.destroy&&this.scene.destroy(),this.controls&&this.controls.destroy()}}]),t}()},131:function(t,e){function s(e,i){return t.exports=s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(e,i)}t.exports=s},136:function(t,e,s){"use strict";s.d(e,"a",(function(){return Q}));var i=s(0),n=s.n(i),r=s(1),a=s.n(r),o=s(2),h=s.n(o),u=function(){function t(e,s,i){a()(this,t),this.gl=e,this.texture=e.createTexture(),this.filter=i?e[i]:e.NEAREST,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}return h()(t,[{key:"get",value:function(){return this.texture}}]),t}(),c=function(){function t(e,s){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,t),this.textures={},Object.keys(s).forEach((function(t){i.textures[t]=new u(e,s[t],n[t])}))}return h()(t,[{key:"get",value:function(t){return this.textures[t]}}]),t}(),l=s(143),d=function(){function t(e,s){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a()(this,t),this.objets={},Object.keys(s).forEach((function(t){i.objets[t]=new l.a(e,s[t],n&&n[t])}))}return h()(t,[{key:"get",value:function(t){return this.objets[t]}}]),t}(),f=s(144),g=function(){function t(e,s,i){var r=this;a()(this,t),n()(this,"getAll",(function(){return r.programs})),this.programs={},Object.keys(s).forEach((function(t){var n=s[t];r.programs[t]=new f.a(e,n),-1!==n.uniforms.indexOf("resolution")&&r.programs[t].setVector("resolution",[i.width,i.height])}))}return h()(t,[{key:"setCameraMatrix",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(this.programs).forEach((function(i){e.programs[i].setMatrix("view",t.getView().get());var n=s?t.getOrtho():t.getProjection();e.programs[i].setMatrix("projection",n.get())}))}},{key:"get",value:function(t){return this.programs[t]}}]),t}(),v=s(89),p=s(86),y=s(146),m=function(){function t(e,s){var i=this;a()(this,t),n()(this,"hasAnimation",(function(t){var e=!1;return t.forEach((function(t){!e&&t.animations&&(e=!0)})),e})),this.gltfs={},Object.keys(s).forEach((function(t){s[t].skins?i.gltfs[t]=new y.a(e,s[t]):i.hasAnimation(s[t].nodes)?i.gltfs[t]=new p.a(e,s[t]):i.gltfs[t]=new v.a(e,s[t])}))}return h()(t,[{key:"get",value:function(t){return this.gltfs[t]}}]),t}(),b=function(){function t(e){var s=this;a()(this,t),n()(this,"saveData",(function(t){s.audioData=t})),n()(this,"togglePause",(function(){s.isPlaying?s.isPause?(s.audioContext.resume(),s.isPause=!1):(s.audioContext.suspend(),s.isPause=!0):(s.play(),s.isPause=!1)})),n()(this,"stop",(function(){s.clearAnalyse(),s.sourceNode&&(s.sourceNode.removeEventListener("ended",s.stop,!1),s.sourceNode.disconnect(),s.sourceNode.stop(0)),s.isPlaying=!1})),n()(this,"toggle",(function(){s.isPlaying?s.stop():s.play()})),n()(this,"clearAnalyse",(function(){s.amplitudeArray.fill(0),s.javascriptNode&&(s.analyserNode.disconnect(),s.javascriptNode.disconnect(),s.javascriptNode.removeEventListener("audioprocess",s.onAnalyse,!1))})),n()(this,"onAnalyse",(function(){s.analyserNode.getByteFrequencyData(s.amplitudeArray)})),n()(this,"onError",(function(t){})),n()(this,"setPlaybackRate",(function(t){s.playbackRate=t,s.sourceNode&&(s.sourceNode.playbackRate.value=s.playbackRate)})),n()(this,"setVolume",(function(t){s.volume=t,s.gainNode&&(s.gainNode.gain.value=s.volume)})),n()(this,"getAmplitudes",(function(){return s.amplitudeArray})),n()(this,"getFrequencyLength",(function(){return s.analyserNode.frequencyBinCount})),n()(this,"getIsPlaying",(function(){return s.isPlaying})),n()(this,"getIsPause",(function(){return s.isPause}));var i=window.AudioContext||window.webkitAudioContext;this.support=!!i;try{this.audioContext=new i}catch(t){this.support=!1}this.audioData=null,this.playbackRate=1,this.playMultiple=!1,this.isPlaying=!1,this.isPause=!0,this.isMute=!0,this.isLoop=!0,this.volume=.5,this.setup(e)}return h()(t,[{key:"setup",value:function(t){this.support&&(this.audioContext.decodeAudioData(t,this.saveData,this.onError),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.gainNode.connect(this.audioContext.destination),this.sampleSize=1024,this.javascriptNode=this.audioContext.createScriptProcessor(this.sampleSize,1,1),this.analyserNode=this.audioContext.createAnalyser(),this.amplitudeArray=new Uint8Array(this.analyserNode.frequencyBinCount))}},{key:"play",value:function(){this.audioData&&(!this.playMultiple&&this.isPlaying&&this.stop(),this.sourceNode=this.audioContext.createBufferSource(),this.sourceNode.playbackRate.value=this.playbackRate,this.sourceNode.buffer=this.audioData,this.sourceNode.loop=this.isLoop,this.sourceNode.connect(this.gainNode),this.setupAnalyse(),this.sourceNode.addEventListener("ended",this.stop,!1),this.sourceNode.start(0),this.isPlaying=!0)}},{key:"setupAnalyse",value:function(){this.sourceNode.connect(this.analyserNode),this.analyserNode.connect(this.javascriptNode),this.javascriptNode.connect(this.audioContext.destination),this.javascriptNode.addEventListener("audioprocess",this.onAnalyse,!1)}},{key:"getSupport",value:function(){return this.support}}]),t}(),k=function(){function t(e){var s=this;a()(this,t),this.audios={},Object.keys(e).forEach((function(t){s.audios[t]=new b(e[t])}))}return h()(t,[{key:"get",value:function(t){return this.audios[t]}}]),t}(),x=s(7),E=s.n(x),w=s(8),T=s.n(w),P=s(3),j=s.n(P),R=s(65),O=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a()(this,t),this.fbos=[],this.currentFbo=0;var r=null;this.fbos[0]=new R.a(e,s,i,n,r,0),this.fbos[1]=new R.a(e,s,i,n,r,1)}return h()(t,[{key:"start",value:function(){this.fbos[this.currentFbo].start()}},{key:"end",value:function(){this.fbos[this.currentFbo].end()}},{key:"swap",value:function(){this.currentFbo=0===this.currentFbo?1:0}},{key:"resize",value:function(t){this.fbos[0].resize(t),this.fbos[1].resize(t)}},{key:"getTexture",value:function(){return this.fbos[this.currentFbo].getTexture()}},{key:"getDepthTexture",value:function(){return this.fbos[this.currentFbo].getDepthTexture()}}]),t}(),M=s(116),A=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;a()(this,t),this.gl=e;var n=s.width,r=void 0===n?1024:n,o=s.height,h=void 0===o?1024:o,u=s.useDepth,c=void 0!==u&&u;this.ppb=new O(e,r,h,c),this.screen=new M.a(e),this.width=r,this.height=h,this.passCount=0,this.programs=i}return h()(t,[{key:"start",value:function(){this.ppb.start(),this.passCount=0}},{key:"end",value:function(){this.ppb.end()}},{key:"resize",value:function(t){this.ppb.resize(t)}},{key:"applyTexToProg",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=null===e;this.passCount=s?this.passCount+1:0;var i=this.passCount+1,n=s?this.ppb.getTexture().get():e;return t.setTexture(i,n,"textureMap"),t.setFloat("flipY",-1),t}},{key:"setBrightContrast",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.applyTexToProg(this.programs.brightcontrast,s);i.setFloat("brightness",t),i.setFloat("contrast",e),this.renderToPingPong(i)}},{key:"setFxaa",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.fxaa,t);this.renderToPingPong(e)}},{key:"setBloom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.applyTexToProg(this.programs.bloom,s);i.setFloat("scale",t),i.setFloat("threshold",e),this.renderToPingPong(i)}},{key:"setFxaa2",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.fxaa2,t);this.renderToPingPong(e)}},{key:"renderToPingPong",value:function(t){this.ppb.swap(),this.ppb.start(),this.screen.render(t.get()),this.ppb.end()}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.applyTexToProg(this.programs[e?"debug":"screen"],t);this.screen.render(s.get())}},{key:"renderInverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.applyTexToProg(this.programs[e?"debug":"screen"],t);s.setFloat("flipY",1),this.screen.render(s.get())}},{key:"getTexture",value:function(){return this.ppb.getTexture()}}]),t}();function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var D=function(t){E()(s,t);var e=F(s);function s(){return a()(this,s),e.apply(this,arguments)}return h()(s,[{key:"create",value:function(){for(var t=new ArrayBuffer(this.size.width*this.size.height*4),e=new Uint8Array(t),s=0,i=0;i<this.size.height;i+=1)for(var n=0;n<this.size.width;n+=1)e[s]=255*Math.random(),e[s+1]=255*Math.random(),e[s+2]=0,e[s+3]=255,s+=4;this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.height,this.size.width,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}}]),s}(s(57).a);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var S=function(t){E()(s,t);var e=_(s);function s(t,i){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,s),(n=e.call(this,t,i,r)).textures={},Object.keys(n.programs).forEach((function(t){switch(t){case"watercolor2":case"watercolor3":n.textures[t]=new D(n.gl,512,512)}})),n}return h()(s,[{key:"setDOF",value:function(t,e,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.dof,n);r.setFloat("focusDistance",s),r.setFloat("blur",e),r.setFloat("ppm",i),r.setVector("range",t),r.setTexture(2,this.ppb.getDepthTexture().get(),"depthMap"),this.renderToPingPong(r)}},{key:"mergeBloom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.mergeBloom,i);n.setFloat("gamma",e),n.setFloat("exposure",s),n.setTexture(3,t.get(),"bloomMap"),this.renderToPingPong(n)}},{key:"setKuwahara",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.kuwahara,t);this.renderToPingPong(e)}},{key:"setWatercolor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.watercolor,t);this.renderToPingPong(e)}},{key:"setWatercolor2",value:function(t,e,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.watercolor2,n);r.setFloat("gradientStep",t),r.setFloat("advectStep",e),r.setFloat("flipHeightMap",s),r.setFloat("time",i),r.setTexture(2,this.textures.watercolor2.get(),"heightMap"),this.renderToPingPong(r)}},{key:"setWatercolor3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.watercolor3,t);e.setTexture(2,this.textures.watercolor3.get(),"noiseMap"),this.renderToPingPong(e)}},{key:"setWatercolorMoving",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.watercolorMoving,i);n.setFloat("time",t),n.setVector("mouse",e),n.setFloat("scale",s),this.renderToPingPong(n)}},{key:"setSobel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.sobel,t);this.renderToPingPong(e)}},{key:"setGamma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.applyTexToProg(this.programs.gamma,e);s.setFloat("gamma",t),this.renderToPingPong(s)}},{key:"setRGB",value:function(t,e,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.rgb,n);r.setVector("center",[s,i]),r.setVector("delta",[t,e]),this.renderToPingPong(r)}},{key:"setVortex",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.vortex,i);n.setVector("center",t),n.setFloat("radius",e),n.setFloat("angle",s),this.renderToPingPong(n)}},{key:"setOil",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.applyTexToProg(this.programs.oil,e);s.setFloat("radius",t),this.renderToPingPong(s)}},{key:"setSketch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.applyTexToProg(this.programs.sketch,e);s.setFloat("delta",t),this.renderToPingPong(s)}},{key:"setPixel",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.applyTexToProg(this.programs.pixel,s);i.setVector("delta",[t,e]),this.renderToPingPong(i)}},{key:"setWave",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.wave,i);n.setFloat("time",t),n.setFloat("radius",e),n.setVector("center",s),this.renderToPingPong(n)}},{key:"setSepia",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.applyTexToProg(this.programs.sepia,e);s.setFloat("delta",t),this.renderToPingPong(s)}},{key:"setGlitch",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.glitch,i);n.setFloat("delta",e),n.setFloat("time",t),n.setFloat("speed",s),this.renderToPingPong(n)}},{key:"setGlitch2",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.glitch2,i);n.setFloat("delta",e),n.setFloat("time",t),n.setFloat("speed",s),this.renderToPingPong(n)}},{key:"setGlitch3",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.applyTexToProg(this.programs.glitch3,s);i.setFloat("delta",e),i.setFloat("time",t),this.renderToPingPong(i)}},{key:"setGlitch4",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.glitch4,i);n.setFloat("delta",e),n.setFloat("time",t),n.setFloat("rate",s),this.renderToPingPong(n)}},{key:"setSignature",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.applyTexToProg(this.programs.signature,s);i.setFloat("delta",e),i.setFloat("time",t),this.renderToPingPong(i)}},{key:"setCompose",value:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.applyTexToProg(this.programs.compose,i);n.setTexture(6,t,"ssaoMap"),n.setTexture(7,e,"shadowMap"),n.setTexture(4,s,"depthMap"),this.renderToPingPong(n)}}]),s}(A),C=s(10),U=s.n(C);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var L=function(t){E()(s,t);var e=z(s);function s(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,s),r=e.call(this,t,i,o),n()(U()(r),"setBlurIntensity",(function(t){r.blurIntensity=t})),n()(U()(r),"setBlurSize",(function(t){r.blurSize=t}));var h=i.blur||{};return r.blurSize=void 0!==h.size?h.size:.6,r.blurIntensity=void 0!==h.intensity?h.intensity:1,r}return h()(s,[{key:"setBlur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.blurOnePass,t);e.setFloat("size",this.blurSize),e.setFloat("intensity",this.blurIntensity),this.renderToPingPong(e)}}]),s}(A);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var N=function(t){E()(s,t);var e=I(s);function s(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,s),r=e.call(this,t,i,o),n()(U()(r),"setNbPass",(function(t){r.blurNbPass=t})),r}return s}(L),B=s(25),X=s(87),V=s(29);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var q=function(t){E()(s,t);var e=G(s);function s(t,i){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,s),(n=e.call(this,t,i,r)).near=i.near||1,n.far=i.far||100,n.radius=i.radius||5,n.strength=i.strength||1;var o=n.programs.ssao;return o.setFloat("radius",n.radius),o.setFloat("near",n.near),o.setFloat("far",n.far),o.setFloat("strength",n.strength),n}return h()(s,[{key:"generateSsaoSamples",value:function(t,e){for(var s=0;s<e;s+=1){var i=s/e;i=Object(X.a)(i*i,.1,1);var n=new B.a(Object(V.c)(-1,1),Object(V.c)(-1,1),Object(V.c)(0,1)).normalise().multiplyNumber(Object(V.c)(0,1)).multiplyNumber(i);this.programs[t].setVector("samples[".concat(s,"]"),n.get())}}},{key:"compute",value:function(t){var e=this.applyTexToProg(this.programs.ssao,t);e.setFloat("flipY",-1),this.renderToPingPong(e)}}]),s}(L),Y=s(22),W=s.n(Y);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=j()(t);if(e){var n=j()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return T()(this,s)}}var H=function(t){E()(s,t);var e=K(s);function s(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,s),r=e.call(this,t,i,o),n()(U()(r),"getProgram",(function(){return r.programs.shadow}));var h=r.programs.shadow;return h.setFloat("shadowEpsilon",i.epsilon||.01),h.setFloat("lighten",i.lighten||0),r}return h()(s,[{key:"start",value:function(t){W()(j()(s.prototype),"start",this).call(this);var e=this.programs.shadow;e.setTexture(2,t.getDepthTexture().get(),"shadowMap"),e.setMatrix("shadowView",t.getView().get()),e.setMatrix("shadowProjection",t.getOrtho().get()),e.setVector("posLum",t.getPosition())}}]),s}(L);function J(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function Z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?J(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Q=function(){function t(e,s,i){a()(this,t),this.gl=e,this.config=s,this.time=0;var n=this.config.canvas,r=n.width,o=n.height;if(this.containerSize={width:r,height:o},i){if(i.shaders&&(this.mngProg=new g(this.gl,i.shaders,s.canvas),s.postprocess)){var h={width:r,height:o,useDepth:this.canUseDepth()},u=this.mngProg.getAll();this.postProcess=new S(this.gl,h,u),s.postprocess.bloom&&(this.bloom=new N(this.gl,Z(Z({},h),s.postprocess.bloom),u)),s.postprocess.ssao&&(this.ssao=new q(this.gl,Z(Z(Z({},h),s.postprocess.ssao),{},{near:s.camera.near,far:s.camera.far}),u)),s.postprocess.shadow&&(this.shadow=new H(this.gl,Z(Z({},h),s.postprocess.shadow),u))}i.textures&&(this.mngTex=new c(this.gl,i.textures,s.textures)),i.objets&&(this.mngObj=new d(this.gl,i.objets,i.materials)),i.gltfs&&(this.mngGltf=new m(this.gl,i.gltfs)),i.sounds&&(this.mngSound=new k(i.sounds))}this.resizeViewport()}return h()(t,[{key:"canUseDepth",value:function(){return this.config.useDepthTexture&&this.config.support.depthTexture}},{key:"resize",value:function(t){this.containerSize=t,this.resizeViewport()}},{key:"update",value:function(t){this.time=t}},{key:"render",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"resizeViewport",value:function(){this.gl.viewport(0,0,this.containerSize.width,this.containerSize.height)}},{key:"getColorPixel",value:function(t,e){var s=new Uint8Array(4);return this.gl.readPixels(t,e,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s),s}}]),t}()},138:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=function(){function t(e,s){n()(this,t),this.gl=e;var i=Math.sqrt(s.length/4);this.size={width:i,height:i},this.texture=e.createTexture(),this.filter=e.NEAREST,this.setup(s)}return a()(t,[{key:"setup",value:function(t){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.width,this.size.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.setFilters(),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}},{key:"get",value:function(){return this.texture}}]),t}()},139:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=function(){function t(){var e=this;n()(this,t),h()(this,"start",(function(){var t=(new Date).getTime(),s=t-e.lastFrame;e.callbackNoFps&&e.callbackNoFps(),s>e.fps&&(e.callback(t-e.firstFrame),e.lastFrame=t),e.ref=window.requestAnimationFrame(e.start)})),this.fps=25,this.firstFrame=(new Date).getTime(),this.lastFrame=this.firstFrame,this.ref=null}return a()(t,[{key:"setCallback",value:function(t){this.callback=t}},{key:"setCallbackNoFps",value:function(t){this.callbackNoFps=t}},{key:"setFps",value:function(t){this.fps=t}},{key:"stop",value:function(){window.cancelAnimationFrame(this.ref)}}]),t}()},140:function(t,e,s){"use strict";var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=function(){function t(){n()(this,t),this.shaders={}}return a()(t,[{key:"get",value:function(e){var i=this,n=e.map((function(e){var i={},n=t.getInfos(e).name;try{i=s(282)("./shaders".concat(e)).then((function(t){return{name:n,js:t}}))}catch(t){}return i}));return Promise.all(n).then((function(t){return t.forEach((function(t){var e=t.name,s=t.js;i.shaders[e]=s.default})),i.shaders}))}}],[{key:"getInfos",value:function(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(".");return{name:e[0],ext:e[1].toLowerCase()}}}]),t}();e.a=o},141:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=function(){function t(e){var s=this;n()(this,t),h()(this,"onKeyPress",(function(t){void 0!==s.keysPressed[t.keyCode]&&(t.preventDefault(),s.keysPressed[t.keyCode]=!0,s.oneKeysPressed[t.keyCode]=!0)})),h()(this,"onKeyUp",(function(t){void 0!==s.keysPressed[t.keyCode]&&(t.preventDefault(),s.keysUp[t.keyCode]=!0)})),this.keys=e,this.oneKeysPressed={},this.keysPressed={},this.keysUp={},this.charges={},Object.keys(this.keys).forEach((function(t){s.keysPressed[s.keys[t]]=!1,s.keysUp[s.keys[t]]=!1,s.oneKeysPressed[s.keys[t]]=!1,s.charges[s.keys[t]]=0})),document.addEventListener("keydown",this.onKeyPress,!1),document.addEventListener("keyup",this.onKeyUp,!1)}return a()(t,[{key:"cancel",value:function(){document.removeEventListener("keydown",this.onKeyPress,!1),document.removeEventListener("keyup",this.onKeyUp,!1)}},{key:"start",value:function(){var t=this;Object.keys(this.keys).forEach((function(e){t.keysPressed[t.keys[e]]&&(t.charges[t.keys[e]]+=1)}))}},{key:"end",value:function(){var t=this;Object.keys(this.keys).forEach((function(e){t.keysPressed[t.keys[e]]&&t.keysUp[t.keys[e]]&&(t.charges[t.keys[e]]=0,t.keysPressed[t.keys[e]]=!1,t.keysUp[t.keys[e]]=!1)}))}},{key:"getCharge",value:function(t){return this.charges[t]}},{key:"resetCharge",value:function(t){this.charges[t]=0}},{key:"isPressed",value:function(t){return this.charges[t]>0}},{key:"isPressedOne",value:function(t){return 1===this.charges[t]}},{key:"isUp",value:function(t){return this.keysUp[t]}}]),t}()},142:function(t,e,s){"use strict";var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=s(29),c=function(){function t(e,s){var i=this,r=s.callbackDrag,a=s.callbackDown,o=s.callbackUp,u=s.callbackMove,c=s.callbackWheel,l=s.callbackClick;n()(this,t),h()(this,"onMove",(function(e){var s=i.computeInfos(e);i.oldPos=t.getPos(e),null!==i.callbackMove&&i.callbackMove(s),i.isDragging&&null!==i.callbackDrag&&i.callbackDrag(s)})),h()(this,"onDown",(function(e){if(i.isDragging=!0,i.startDraggingMousePos=t.getPos(e),null!==i.callbackDown){var s=i.computeInfos(e);i.callbackDown(s),i.oldPos=t.getPos(e)}})),h()(this,"onUp",(function(t){if(i.onMove(t),i.isDragging=!1,null!==i.callbackUp){var e=i.computeInfos(t);i.callbackUp(e)}})),h()(this,"onWheel",(function(t){var e=t.deltaY;null!==i.callbackWheel&&i.callbackWheel({deltaY:e})})),h()(this,"onClick",(function(t){null!==i.callbackClick&&i.callbackClick(i.computeInfos(t))})),this.div=e,this.callbackDrag=r||null,this.callbackDown=a||null,this.callbackUp=o||null,this.callbackMove=u||null,this.callbackWheel=c||null,this.callbackClick=l||null,this.isDragging=!1,this.startDraggingMousePos={x:0,y:0},this.oldPos={x:0,y:0},this.options={capture:!1,passive:!0},this.setup()}return a()(t,[{key:"setup",value:function(){this.callbackClick&&this.div.addEventListener("click",this.onClick,!1),(this.callbackDrag||this.callbackMove)&&(this.div.addEventListener("mousemove",this.onMove,this.options),this.div.addEventListener("touchmove",this.onMove,this.options)),(this.callbackDrag||this.callbackDown||this.callbackUp)&&(window.addEventListener("mouseup",this.onUp,this.options),this.div.addEventListener("mousedown",this.onDown,this.options),this.div.addEventListener("touchstart",this.onDown,this.options),this.div.addEventListener("touchend",this.onUp,this.options)),this.callbackWheel&&this.div.addEventListener("wheel",this.onWheel,this.options)}},{key:"cancel",value:function(){this.callbackClick&&this.div.removeEventListener("click",this.onClick,!1),(this.callbackDrag||this.callbackMove)&&(this.div.removeEventListener("mousemove",this.onMove,this.options),this.div.removeEventListener("touchmove",this.onMove,this.options)),this.callbackDrag&&(window.removeEventListener("mouseup",this.onUp,this.options),this.div.removeEventListener("mousedown",this.onDown,this.options),this.div.removeEventListener("touchstart",this.onDown,this.options),this.div.removeEventListener("touchend",this.onUp,this.options)),this.callbackWheel&&this.div.removeEventListener("wheel",this.onWheel,this.options)}},{key:"computeInfos",value:function(e){var s=t.getPos(e),i=this.div.getBoundingClientRect(),n=s.x-i.x,r=s.y-i.y,a={x:this.oldPos.x-s.x,y:this.oldPos.y-s.y};return{size:i,pos:{x:n,y:r},rel:{x:Object(u.b)(n,0,i.width,-1,1),y:Object(u.b)(r,0,i.height,1,-1)},relScroll:{x:e.pageX-i.left+window.scrollX,y:e.pageY-i.top+window.scrollY},relDown:{x:this.startDraggingMousePos.x-s.x,y:this.startDraggingMousePos.y-s.y},relPrevious:a,speed:Math.max(Math.abs(a.x),Math.abs(a.x))}}},{key:"get",value:function(){return this.infos}}],[{key:"getPos",value:function(t){return t.touches?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:t.clientX,y:t.clientY}}}]),t}();e.a=c},143:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));var i=s(0),n=s.n(i),r=s(48),a=s.n(r),o=s(1),h=s.n(o),u=s(2),c=s.n(u);function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={ambiant:[0,0,0],diffuse:[.5,.5,.5],specular:[1,1,1],emissive:[0,0,0],specDensity:[1],opacity:1},g=function(){function t(e,s){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=this.gl.STATIC_DRAW,this.materialProps={},this.steps=this.getSteps(s,n);var r=this.getPoints(s,n);this.stride=0,Object.entries(this.steps).forEach((function(t){null!==t[1]&&(i.stride+=t[1])})),this.vbo=this.gl.createBuffer(),this.count=r.length/this.stride,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(r),this.modeCalcul),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}return c()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo);var s=0;Object.entries(this.steps).forEach((function(i){var n=a()(i,2),r=n[0],o=n[1];void 0!==t.locations[r]&&-1!==t.locations[r]&&(e.gl.enableVertexAttribArray(t.locations[r]),e.gl.vertexAttribPointer(t.locations[r],o,e.gl.FLOAT,!1,4*e.stride,4*s)),null!==e.steps[r]&&(s+=e.steps[r])}))}},{key:"render",value:function(t){this.enable(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.drawArrays(this.modeDessin,0,this.count),this.end()}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}},{key:"getSteps",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={position:3};return t.vt.indices.length>0&&(i.texture=2),t.vn.indices.length>0&&(i.normale=3),s&&t.mat&&Object.keys(t.mat).forEach((function(i){var n=t.mat[i],r=s[n];r&&Object.keys(r).forEach((function(t){void 0===e.materialProps[t]&&(e.materialProps[t]=r[t].length)}))})),d(d({},i),this.materialProps)}},{key:"getPoints",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];return t.v.indices.forEach((function(n,r){var a=3*n;if(i.push(t.v.points[a]),i.push(t.v.points[a+1]),i.push(t.v.points[a+2]),t.vt.indices.length>0){var o=2*t.vt.indices[r];i.push(t.vt.points[o]),i.push(t.vt.points[o+1])}if(t.vn.indices.length>0){var h=3*t.vn.indices[r];i.push(t.vn.points[h]),i.push(t.vn.points[h+1]),i.push(t.vn.points[h+2])}if(s&&t.mat){var u=Object.keys(t.mat).findIndex((function(e,s){var i=Object.keys(t.mat)[s+1];return!i||r>=e&&r<i})),c=t.mat[Object.keys(t.mat)[u]];Object.keys(e.materialProps).forEach((function(t){(s[c]&&s[c][t]||f[t]).forEach((function(t){return i.push(t)}))}))}})),i}}]),t}()},144:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=function(){function t(e,s){n()(this,t),this.gl=e,this.program=this.gl.createProgram(),this.setup(s)}return a()(t,[{key:"setup",value:function(t){this.creerShader("vertex",t.vertex),this.creerShader("fragment",t.fragment),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?(this.createLocations(t),this.gl.useProgram(null)):this.gl.deleteProgram(this.program)}},{key:"creerShader",value:function(t,e){var s=this.gl.createShader("vertex"===t?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);this.gl.shaderSource(s,e),this.gl.compileShader(s),this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?(this.gl.attachShader(this.program,s),this.gl.deleteShader(s)):this.gl.deleteShader(s)}},{key:"createLocations",value:function(t){var e=this;this.program.locations={},t.uniforms.forEach((function(t){e.program.locations[t]=e.gl.getUniformLocation(e.program,t)})),t.attributes.forEach((function(t){e.program.locations[t]=e.gl.getAttribLocation(e.program,t)}))}},{key:"setProjectionView",value:function(t){this.setMatrix("projection",t.getProjection().get()),this.setMatrix("view",t.getView().get())}},{key:"setMatrix",value:function(t,e){this.gl.useProgram(this.program),16===e.length?this.gl.uniformMatrix4fv(this.program.locations[t],!1,e):this.gl.uniformMatrix3fv(this.program.locations[t],!1,e),this.gl.useProgram(null)}},{key:"setInt",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1i(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setTexture",value:function(t,e,s){this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.program.locations[s],t),this.gl.useProgram(null)}},{key:"setFloat",value:function(t,e){this.gl.useProgram(this.program),this.gl.uniform1f(this.program.locations[t],e),this.gl.useProgram(null)}},{key:"setVector",value:function(t,e){switch(this.gl.useProgram(this.program),e.length){default:case 2:this.gl.uniform2fv(this.program.locations[t],e);break;case 3:this.gl.uniform3fv(this.program.locations[t],e);break;case 4:this.gl.uniform4fv(this.program.locations[t],e)}this.gl.useProgram(null)}},{key:"enable",value:function(){this.gl.useProgram(this.program)}},{key:"disable",value:function(){this.gl.useProgram(null)}},{key:"get",value:function(){return this.program}},{key:"getLocations",value:function(){return this.program.locations}}]),t}()},145:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=function(){function t(e){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LINEAR",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;n()(this,t),h()(this,"findIndex",(function(t){var e=0,i=s.timeSteps[e];for(0===i&&(e++,i=s.timeSteps[e]);i&&t>i;)e++,i=s.timeSteps[e];s.index=e})),h()(this,"setTimes",(function(t){s.timeSteps=s.times.map((function(e){return e*t})),s.index=0,s.interpolationValue=0})),this.times=e,this.setTimes(r),this.interpolationType=i}return a()(t,[{key:"update",value:function(t){if(this.findIndex(t),0===this.index)this.interpolationValue=0;else if(this.index===this.times.length)this.interpolationValue=this.timeSteps[this.times.length-1];else{var e=this.timeSteps[this.index],s=this.timeSteps[this.index-1];this.interpolationValue=(t-s)/(e-s)}}},{key:"setSpeed",value:function(t){this.setTimes(t)}},{key:"getIndex",value:function(){return this.index}},{key:"get",value:function(){return this.interpolationValue}}]),t}()},146:function(t,e,s){"use strict";s.d(e,"a",(function(){return E}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(10),h=s.n(o),u=s(22),c=s.n(u),l=s(7),d=s.n(l),f=s(8),g=s.n(f),v=s(3),p=s.n(v),y=s(0),m=s.n(y),b=s(86),k=s(19);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=p()(t);if(e){var n=p()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return g()(this,s)}}var E=function(t){d()(s,t);var e=x(s);function s(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n()(this,s),r=e.call(this,t,i),m()(h()(r),"removeAnimations",(function(t){return t.map((function(t){var e=t;return e.children&&(e.children=r.removeAnimations(e.children)),r.removeAnim(e)}))})),m()(h()(r),"addJointsAnimations",(function(t,e){t.forEach((function(t){var s=t.animations,i=t.name,n=t.children;s&&(r.animations[i]=r.addAnimations(s,e)),n&&r.addJointsAnimations(n,e)}))})),m()(h()(r),"setProgramSkin",(function(t,e){if(void 0!==t){var s=new k.a;s.identity();var i=r.skins[t].joints;r.setProgramJoints(i,e,s)}})),m()(h()(r),"setProgramJoints",(function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach((function(t){var n=t.invMatrix,a=t.children,o=r.handleLocalTransform(t);o.multiply(s);var h=new k.a;h.identity();var u=new k.a;u.setFromArray(n),u.resetScale(),h.multiply(u),h.multiply(o),e.setMatrix("jointMat[".concat(i,"]"),h.get()),a&&r.setProgramJoints(a,e,o,i+1)}))}));var o=i.skins;return o&&(o.forEach((function(t){var e=t.joints;r.addJointsAnimations(e,a)})),r.skins=o.map((function(t){var e=t.joints;return{joints:r.removeAnimations(e)}}))),r}return a()(s,[{key:"renderNode",value:function(t,e,i){var n=this.nodes[t].skin;void 0!==n&&this.setProgramSkin(n,e),c()(p()(s.prototype),"renderNode",this).call(this,t,e,i)}}]),s}(b.a)},147:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(7),h=s.n(o),u=s(8),c=s.n(u),l=s(3),d=s.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=d()(t);if(e){var n=d()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return c()(this,s)}}var g=function(t){h()(s,t);var e=f(s);function s(){return n()(this,s),e.apply(this,arguments)}return a()(s,[{key:"create",value:function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.width,this.size.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}}]),s}(s(57).a)},148:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(7),h=s.n(o),u=s(8),c=s.n(u),l=s(3),d=s.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=d()(t);if(e){var n=d()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return c()(this,s)}}var g=function(t){h()(s,t);var e=f(s);function s(){return n()(this,s),e.apply(this,arguments)}return a()(s,[{key:"create",value:function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.DEPTH_COMPONENT,this.size.width,this.size.height,0,this.gl.DEPTH_COMPONENT,this.gl.UNSIGNED_INT,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}}]),s}(s(57).a)},151:function(t,e,s){"use strict";s(43),s(61);var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o);function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){h()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}for(var l=function(){function t(e){var s=this;n()(this,t),h()(this,"addFaceIndex",(function(t){var e=t.split("/");e[0]&&""!==e[0]&&s.obj.v.indices.push(parseInt(e[0],10)-1),e[1]&&""!==e[1]&&s.obj.vt.indices.push(parseInt(e[1],10)-1),e[2]&&""!==e[2]&&s.obj.vn.indices.push(parseInt(e[2],10)-1)})),this.obj={v:{indices:[],points:[]},vt:{indices:[],points:[]},vn:{indices:[],points:[]}},this.mat={},this.faceCount=0,this.readLines(e)}return a()(t,[{key:"readLines",value:function(t){var e=this;t.split("\n").forEach((function(t){var s=t.split(" "),i=s[0];switch(i){case"f":e.addFace(s.slice(1));break;case"v":case"vn":case"vt":e.addPoints(i,s.slice(1));break;case"usemtl":e.addNewMaterial(s.slice(1)[0])}}))}},{key:"addFace",value:function(t){t.forEach(this.addFaceIndex),this.faceCount+=1}},{key:"addPoints",value:function(t,e){var s=this;("vt"===t&&3===e.length?e.slice(0,2):e).forEach((function(e){return s.obj[t].points.push(parseFloat(e,10))}))}},{key:"addNewMaterial",value:function(t){this.mat[3*this.faceCount]=t}},{key:"get",value:function(){return c(c({},this.obj),{},{mat:this.mat})}}]),t}(),d=function(){function t(e){n()(this,t),this.materials={},this.current="",this.readLines(e)}return a()(t,[{key:"readLines",value:function(t){var e=this;t.split("\n").forEach((function(t){var s=t.split(" "),i=s[0];switch(i){case"newmtl":e.createMaterial(s.slice(1));break;case"Ns":case"Ka":case"Kd":case"Ks":case"Ke":case"Ni":case"d":case"illum":e.addInfoToMaterial(i,s.slice(1))}}))}},{key:"createMaterial",value:function(t){this.current=t,this.materials[this.current]={}}},{key:"addInfoToMaterial",value:function(t,e){var s="";switch(t){case"Ka":s="ambiant";break;case"Kd":s="diffuse";break;case"Ks":s="specular";break;case"Ke":s="emissive";break;case"Ns":s="specDensity";break;case"d":s="opacity"}""!==s&&(this.materials[this.current][s]=e.map((function(t){return parseFloat(t,10)})))}},{key:"get",value:function(){return this.materials}}]),t}(),f=s(27),g=s.n(f),v=s(49),p=s.n(v),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Uint8Array(256),b=0;b<y.length;b++)m[y.charCodeAt(b)]=b;var k=function(t,e,s,i,n){for(var r=new Float32Array(e),a=n||Float32Array.BYTES_PER_ELEMENT*i,o=0,h=0,u=0;u<s;u++){for(var c=0;c<i;c++){var l=o+c*Float32Array.BYTES_PER_ELEMENT;r[h]=t.getFloat32(l,!0),h++}o+=a}return r},x=function(t,e,s,i,n){for(var r=new Uint16Array(e),a=n||Uint16Array.BYTES_PER_ELEMENT*i,o=0,h=0,u=0;u<s;u++){for(var c=0;c<i;c++){var l=o+c*Uint16Array.BYTES_PER_ELEMENT;r[h]=t.getUint16(l,!0),h++}o+=a}return r},E=s(54);function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){h()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var P="SCALAR",j="VEC2",R="VEC3",O="VEC4",M="MAT2",A="MAT3",F="MAT4",D=function(t){switch(t){default:case P:return 1;case j:return 2;case R:return 3;case O:case M:return 4;case A:return 9;case F:return 16}},_=function(t,e,s){var i=s.bufferView,n=s.componentType,r=s.count,a=s.type,o=s.byteOffset,h=void 0===o?0:o,u=e[i],c=u.buffer,l=u.byteLength,d=u.byteOffset,f=void 0===d?0:d,g=u.byteStride,v=new DataView(t[c],f+h,l-h),p=D(a),y=function(t,e){return D(t)*e}(a,r),m=function(t){switch(t){case 5123:return x;case 5126:return k;case 5120:case 5121:case 5122:case 5125:default:return null}}(n);return m?m(v,y,r,p,g):null},S=function(t,e){var s=e.buffer,i=e.byteOffset,n=e.byteLength;return function(t,e){for(var s=new Uint8Array(e),i=0;i<e;i++)s[i]=t.getUint8(i,!0);return s}(new DataView(t[s],i,n),n)},C=function(t){switch(t){case"normal":return"normale";case"texcoord_0":return"texture";case"baseColorFactor":return"color";case"metallicFactor":return"metal";case"roughnessFactor":return"rough";case"joints_0":return"joint";case"weights_0":return"weight";default:return t}},U=["position","normale","texture","joint","weight","tangent"],z=function(t,e){var s,i={};if(t&&(i=T(T({},(s=t.pbrMetallicRoughness,Object.keys(s).reduce((function(t,e){var i=C(e);return T(T({},t),{},h()({},i,s[e]))}),[]))),{},{name:t.name}),t.normalTexture)){var n=e[t.normalTexture.index];i.normalMap=n||void 0}return Object.keys(i).length>0?i:void 0},L=function(t,e){return t.map((function(t){var s=t.attributes,i=t.indices,n=t.material,r=t.targets,a={vbos:function(t,e,s,i){var n=e[s],r={indices:T(T({},n),{},{size:D(n.type)})},a=i&&i.map((function(t){return Object.keys(t).reduce((function(s,i){var n=e[t[i]];return T(T({},s),{},h()({},i,T(T({},n),{},{size:D(n.type)})))}),{})}));return a&&(a=a.reduce((function(t,e,s){var i=Object.keys(e).reduce((function(t,i){var n=C(i.toLowerCase());return T(T({},t),{},h()({},"target".concat(n).concat(s),e[i]))}),{});return T(T({},t),i)}),{}),r=T(T({},a),r)),Object.keys(t).reduce((function(s,i){var n=C(i.toLowerCase());if(-1===U.indexOf(n))return s;var r=t[i],a=e[r];return T(T({},s),{},h()({},n,T(T({},a),{},{size:D(a.type)})))}),r)}(s,e,i,r)};return void 0!==n&&(a=T({material:n},a)),a}))},I=function t(e,s){return e.map((function(e){var i=s.findIndex((function(t){return t.id===e})),n=s.splice(i,1)[0];n.children&&(n.children=t(n.children,s));n.id;return p()(n,["id"])}))},N=function(){function t(e){n()(this,t);var s=JSON.parse(e),i=s.animations,r=s.buffers,a=s.bufferViews,o=s.accessors,h=s.skins,u=s.nodes,c=s.meshes,l=s.materials,d=s.images,f=r&&r.map((function(t){return function(t){var e,s,i,n,r,a=t.split(",")[1],o=.75*a.length,h=a.length,u=0;"="===a[a.length-1]&&(o--,"="===a[a.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(e=0;e<h;e+=4)s=m[a.charCodeAt(e)],i=m[a.charCodeAt(e+1)],n=m[a.charCodeAt(e+2)],r=m[a.charCodeAt(e+3)],l[u++]=s<<2|i>>4,l[u++]=(15&i)<<4|n>>2,l[u++]=(3&n)<<6|63&r;return c}(t.uri)})),v=o&&o.map((function(t){return T(T({},t),{},{values:_(f,a,t)})})),y=function(t,e,s,i){var n={};return t&&t.forEach((function(t){var r=t.channels,a=t.samplers;r.forEach((function(t){var r=t.target,o=t.sampler,h=a[o],u=h.input,c=h.output,l=h.interpolation,d=s[u],f=s[c],v=r.node,p=r.path,y=e[v],m=D(f.type);y[p]?m=y[p].length:y.mesh&&i[y.mesh][p]?m=i[y.mesh][p].length:"scale"===p&&(m=3);var b=Object(E.chunkArray)(f.values,m),k={path:p,times:d.values,output:b,interpolation:l};n[v]=n[v]?[].concat(g()(n[v]),[k]):[k]}))})),n}(i,u,v,c);Object.keys(y).forEach((function(t){u[t].animations=y[t]}));var b=function(t,e,s){var i=null;if(t){var n=e.map((function(t,e){return T(T({},t),{},{id:e})}));i=t.map((function(t){var e=t.inverseBindMatrices,i=t.joints,r=[];if(e){var a=s[e].values;r=Object(E.chunkArray)(a,16)}if(i){for(var o=i.map((function(t,e){return T(T({},n[t]),{},{invMatrix:r[e]})})).slice(),h=[];0!==o.length;){var u=o.shift();u.children&&(u.children=I(u.children,o)),u.id;var c=p()(u,["id"]);h.push(c)}return{joints:h}}return null})).filter((function(t){return t}))}return i}(h,u,v),k=c.map((function(t){var e=t.primitives,s=t.weights,i={primitives:L(e,v)};return s&&(i=T({weights:s},i)),i})),x=function(t,e,s,i){return t?t.map((function(t){var e=t.bufferView,n=t.mimeType,r=t.name,a=i[e];return{mimeType:n,name:r,data:S(s,a)}})):null}(d,0,f,a),w=l&&l.map((function(t){return z(t,x)}));this.data={},k&&(this.data.meshes=k),u&&(this.data.nodes=u.filter((function(t){return void 0!==t.mesh}))),b&&(this.data.skins=b),w&&(this.data.materials=w)}return a()(t,[{key:"get",value:function(){return this.data}}]),t}(),B=function(){function t(){n()(this,t),this.assets={textures:{},objets:{},materials:{},levels:{},gltfs:{},sounds:{}}}return a()(t,[{key:"get",value:function(e){var s=this,i=e.map((function(e){var s=t.getInfo(e);switch(s.ext){case"jpg":case"jpeg":case"png":case"bmp":return t.loadImage(e,s);case"obj":return t.load3dObj(e,s);case"gltf":return t.load3dGltf(e,s);case"mtl":return t.loadMaterial(e,s);case"mp3":return t.loadSound(e,s);default:return null}}));return Promise.all(i).then((function(t){return t.forEach((function(t){switch(t.info.ext){case"jpg":case"jpeg":case"png":s.assets.textures[t.info.name]=t.data;break;case"bmp":s.assets.levels[t.info.name]=t.data;break;case"obj":s.assets.objets[t.info.name]=t.data;break;case"gltf":s.assets.gltfs[t.info.name]=t.data;break;case"mtl":s.assets.materials[t.info.name]=t.data;break;case"mp3":s.assets.sounds[t.info.name]=t.data}})),s.assets}))}}],[{key:"getInfo",value:function(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(".");return{name:e[0],ext:e[1].toLowerCase()}}},{key:"loadMaterial",value:function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new d(t).get(),info:e}}))}},{key:"loadImage",value:function(t,e){return new Promise((function(s,i){var n=new Image;n.onload=function(){return s({data:n,info:e})},n.onerror=i,n.src=t}))}},{key:"loadSound",value:function(t,e){return fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return{data:t,info:e}}))}}]),t}();h()(B,"load3dObj",(function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new l(t).get(),info:e}}))})),h()(B,"load3dGltf",(function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new N(t).get(),info:e}}))}));e.a=B},152:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=function(){function t(e){n()(this,t),this.gl=t.checkWebGl(e),this.support={webgl:!1,depthTexture:!1},this.gl&&(this.support.webgl=!0,this.gl.enable(this.gl.DEPTH_TEST),this.gl.clearDepth(1),this.gl.depthFunc(this.gl.LESS),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor(0,0,0,0),this.support.depthTexture=!!this.gl.getExtension("WEBGL_depth_texture"),this.support.drawBuffers=!!this.gl.getExtension("WEBGL_draw_buffers")||!!this.gl.getExtension("GL_EXT_draw_buffers")||!!this.gl.getExtension("EXT_draw_buffers"))}return a()(t,null,[{key:"checkWebGl",value:function(t){for(var e,s=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<s.length;i+=1){try{e=t.getContext(s[i],{preserveDrawingBuffer:!0})}catch(t){}if(e)break}return e}}]),a()(t,[{key:"get",value:function(){return this.gl}},{key:"getSupport",value:function(){return this.support}}]),t}(),c=function(){function t(){var e=this;n()(this,t),h()(this,"resize",(function(t){e.canvas.setAttribute("width",t.width),e.canvas.setAttribute("height",t.height)})),this.canvas=document.createElement("canvas"),this.context=new u(this.canvas)}return a()(t,[{key:"get",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context.get()}},{key:"getSupport",value:function(){return this.context.getSupport()}}]),t}()},153:function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(0),h=s.n(o),u=function(){function t(e){var s=this;n()(this,t),h()(this,"enter",(function(){s.support&&(s.isFullscreen=!0,s.domItem.requestFullscreen?s.domItem.requestFullscreen():s.domItem.msRequestFullscreen?s.domItem.msRequestFullscreen():s.domItem.mozRequestFullScreen?s.domItem.mozRequestFullScreen():s.domItem.webkitRequestFullscreen&&s.domItem.webkitRequestFullscreen())})),h()(this,"exit",(function(){s.support&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())})),h()(this,"listen",(function(){s.support&&(document.exitFullscreen?document.addEventListener("fullscreenchange",s.onChange,!1):document.msExitFullscreen?document.addEventListener("MSFullscreenChange",s.onChange,!1):document.mozCancelFullScreen?document.addEventListener("mozfullscreenchange",s.onChange,!1):document.webkitExitFullscreen&&document.addEventListener("webkitfullscreenchange",s.onChange,!1))})),h()(this,"onChange",(function(){s.domItem&&(s.isOnFullscreen()?(s.domItem.setAttribute("data-fullscreen",!0),s.isFullscreen=!0):(s.domItem.removeAttribute("data-fullscreen"),s.isFullscreen=!1))})),h()(this,"isOnFullscreen",(function(){return!!document.fullscreenElement})),h()(this,"toggle",(function(){s.isFullscreen?s.exit():s.enter()})),h()(this,"getButton",(function(){return s.button})),this.domItem=e,this.isFullscreen=!1,this.support=!!(document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen),this.button=document.createElement("button"),this.button.id="fullscreen-toggle-btn",this.button.innerHTML='\n<svg viewbox="0 0 100 100">\n  <path d="M 0 40 L 0 0 L 40 0 L 40 10 L 10 10 L 10 40 Z"></path>\n  <path d="M 60 100 L 100 100 L 100 60 L 90 60 L 90 90 L 60 90 Z"></path>\n</svg>\n    ',this.button.addEventListener("click",this.toggle,!1),this.listen()}return a()(t,[{key:"destroy",value:function(){this.button&&this.button.removeEventListener("click",this.toggle,!1),this.support&&(document.exitFullscreen?document.removeEventListener("fullscreenchange",this.onExit,!1):document.msExitFullscreen?document.removeEventListener("MSFullscreenChange",this.onExit,!1):document.mozCancelFullScreen?document.removeEventListener("mozfullscreenchange",this.onExit,!1):document.webkitExitFullscreen&&document.removeEventListener("webkitfullscreenchange",this.onExit,!1))}},{key:"get",value:function(){return this.isFullscreen}},{key:"getSupport",value:function(){return this.support}}]),t}();function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){h()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d=function(){function t(e,s){var i=this;n()(this,t),h()(this,"getDomItem",(function(){return i.controlsDomItem})),h()(this,"getRanges",(function(){return i.ranges})),this.controlsDomItem=document.createElement("div"),this.controlsDomItem.id="controls",this.controlsDomItem.style.opacity=0;var r=s.fullscreen,a=s.ranges;a&&(this.ranges=Object.keys(a).reduce((function(t,e){var s=a[e],n=s.min,r=void 0===n?0:n,o=s.max,u=void 0===o?100:o,c=s.value,d=void 0===c?0:c,f=document.createElement("input");return f.setAttribute("type","range"),f.setAttribute("id",e),f.setAttribute("min",r),f.setAttribute("max",u),f.setAttribute("value",d),i.controlsDomItem.appendChild(f),l(l({},t),{},h()({},e,{id:e,min:r,max:u,value:d,dom:f}))}),{})),r&&(this.fullscreen=new u(e),this.controlsDomItem.appendChild(this.fullscreen.getButton()))}return a()(t,[{key:"destroy",value:function(){this.fullscreen&&this.fullscreen.destroy()}}]),t}()},19:function(t,e,s){"use strict";var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(53),h=s(25),u=s(117),c=function(){function t(){n()(this,t),this.d=new Array(16),this.sauvegardePrecedente=[],this.empilement=0,this.init()}return a()(t,[{key:"init",value:function(){return this.reset(),this.sauvegardePrecedente=[],this.empilement=0,this}},{key:"reset",value:function(){for(var t=0;t<16;t+=1)this.d[t]=0;return this}},{key:"get",value:function(){return this.d}},{key:"setRaw",value:function(t){this.d=t}},{key:"set",value:function(t,e,s,i,n,r,a,o,h,u,c,l,d,f,g,v){return this.d[0]=t,this.d[1]=e,this.d[2]=s,this.d[3]=i,this.d[4]=n,this.d[5]=r,this.d[6]=a,this.d[7]=o,this.d[8]=h,this.d[9]=u,this.d[10]=c,this.d[11]=l,this.d[12]=d,this.d[13]=f,this.d[14]=g,this.d[15]=v,this}},{key:"setFromArray",value:function(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},{key:"getMatrice3x3",value:function(){var t=new u.a;return t.set(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10]),t}},{key:"multiplyArray",value:function(e){var s=new t;return s.setFromArray(e),this.multiply(s)}},{key:"multiply",value:function(e){for(var s=new t,i=0;i<4;i+=1)for(var n=0;n<4;n+=1)for(var r=0;r<4;r+=1)s.d[4*n+i]+=this.d[4*n+r]*e.d[4*r+i];return this.d=s.d,this}},{key:"equal",value:function(t){for(var e=0;e<16;e+=1)this.d[e]=t.d[e],this.sauvegardePrecedente[e]=t.sauvegardePrecedente[e];return this}},{key:"push",value:function(){this.empilement+=1;for(var t=0,e=16*(this.empilement-1);e<16*this.empilement;e+=1)this.sauvegardePrecedente[e]=this.d[t],t+=1;return this}},{key:"pop",value:function(){if(this.empilement>0){for(var t=0,e=16*(this.empilement-1);e<16*this.empilement;e+=1)this.d[t]=this.sauvegardePrecedente[e],this.sauvegardePrecedente[e]=null,t+=1;this.empilement-=1}return this}},{key:"translate",value:function(e,s,i){var n=new t;return n.identity(),n.d[12]=e,n.d[13]=s,n.d[14]=i,this.multiply(n),this}},{key:"scale",value:function(e,s,i){var n=new t;return n.d[0]=e,n.d[5]=void 0===s?e:s,n.d[10]=void 0===i?e:i,n.d[15]=1,this.multiply(n),this}},{key:"resetScale",value:function(){return this.d[0]=1,this.d[5]=1,this.d[10]=1,this}},{key:"resetTranslate",value:function(){return this.d[12]=0,this.d[13]=0,this.d[14]=0,this}},{key:"rotate",value:function(e,s,i,n){var r=new t,a=e*(Math.PI/180),o=new h.a(s,i,n);return o.normalise(),r.d[0]=o.d[0]*o.d[0]*(1-Math.cos(a))+Math.cos(a),r.d[1]=o.d[0]*o.d[1]*(1-Math.cos(a))-o.d[2]*Math.sin(a),r.d[2]=o.d[0]*o.d[2]*(1-Math.cos(a))+o.d[1]*Math.sin(a),r.d[4]=o.d[0]*o.d[1]*(1-Math.cos(a))+o.d[2]*Math.sin(a),r.d[5]=o.d[1]*o.d[1]*(1-Math.cos(a))+Math.cos(a),r.d[6]=o.d[1]*o.d[2]*(1-Math.cos(a))-o.d[0]*Math.sin(a),r.d[8]=o.d[0]*o.d[2]*(1-Math.cos(a))-o.d[1]*Math.sin(a),r.d[9]=o.d[1]*o.d[2]*(1-Math.cos(a))+o.d[0]*Math.sin(a),r.d[10]=o.d[2]*o.d[2]*(1-Math.cos(a))+Math.cos(a),r.d[15]=1,this.multiply(r),this}},{key:"identity",value:function(){return this.init(),this.d[0]=1,this.d[5]=1,this.d[10]=1,this.d[15]=1,this}},{key:"perspective",value:function(t,e,s,i){var n=t*(Math.PI/180),r=1/Math.tan(n/2),a=1/(s-i);return this.set(r/e,0,0,0,0,r,0,0,0,0,(s+i)*a,-1,0,0,s*i*a*2,0),this}},{key:"ortho",value:function(t,e,s,i,n,r){return this.set(2/(e-t),0,0,0,0,2/(i-s),0,0,0,0,-2/(r-n),0,-(e+t)/(e-t),-(i+s)/(i-s),-(r+n)/(r-n),1),this}},{key:"lookAt",value:function(t,e,s,i,n,r,a,h,u){var c,l,d,f,g,v,p,y,m,b,k=t,x=e,E=s,w=a,T=h,P=u,j=i,R=n,O=r;return Math.abs(k-j)<o.a&&Math.abs(x-R)<o.a&&Math.abs(E-O)<o.a?(this.identity(),this):(p=k-j,y=x-R,m=E-O,c=T*(m*=b=1/Math.sqrt(p*p+y*y+m*m))-P*(y*=b),l=P*(p*=b)-w*m,d=w*y-T*p,(b=Math.sqrt(c*c+l*l+d*d))?(c*=b=1/b,l*=b,d*=b):(c=0,l=0,d=0),f=y*d-m*l,g=m*c-p*d,v=p*l-y*c,(b=Math.sqrt(f*f+g*g+v*v))?(f*=b=1/b,g*=b,v*=b):(f=0,g=0,v=0),this.set(c,f,p,0,l,g,y,0,d,v,m,0,-(c*k+l*x+d*E),-(f*k+g*x+v*E),-(p*k+y*x+m*E),1),this)}},{key:"transpose",value:function(){return this.setFromArray(t.transpose(this.d))}},{key:"inverse",value:function(){var e=t.getCofacteur(this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15]),s=t.getCofacteur(this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15]),i=t.getCofacteur(this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15]),n=t.getCofacteur(this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14]),r=this.d[0]*e-this.d[1]*s+this.d[2]*i-this.d[3]*n,a=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15]),o=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15]),h=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15]),u=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14]),c=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[5],this.d[6],this.d[7],this.d[13],this.d[14],this.d[15]),l=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[4],this.d[6],this.d[7],this.d[12],this.d[14],this.d[15]),d=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[4],this.d[5],this.d[7],this.d[12],this.d[13],this.d[15]),f=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[12],this.d[13],this.d[14]),g=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11]),v=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11]),p=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11]),y=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10]),m=1/r;return this.d[0]=m*e,this.d[1]=-m*a,this.d[2]=m*c,this.d[3]=-m*g,this.d[4]=-m*s,this.d[5]=m*o,this.d[6]=-m*l,this.d[7]=m*v,this.d[8]=m*i,this.d[9]=-m*h,this.d[10]=m*d,this.d[11]=-m*p,this.d[12]=-m*n,this.d[13]=m*u,this.d[14]=-m*f,this.d[15]=m*y,this}},{key:"getDeterminant",value:function(){return this.d[0]*t.getCofacteur(this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15])-this.d[1]*t.getCofacteur(this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15])+this.d[2]*t.getCofacteur(this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15])-this.d[3]*t.getCofacteur(this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14])}}],[{key:"transpose",value:function(t){for(var e=new Float32Array(16),s=0,i=0;i<4;i+=1)for(var n=0;n<4;n+=1)e[s]=t[4*n+i],s+=1;return e}},{key:"getCofacteur",value:function(t,e,s,i,n,r,a,o,h){return t*(n*h-r*o)-e*(i*h-r*a)+s*(i*o-n*a)}}]),t}();e.a=c},2:function(t,e){function s(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}},22:function(t,e,s){var i=s(283);function n(e,s,r){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=n=Reflect.get:t.exports=n=function(t,e,s){var n=i(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(s):r.value}},n(e,s,r||e)}t.exports=n},25:function(t,e,s){"use strict";var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(29),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n()(this,t),this.d=[0,0,0],this.set(e,s,i)}return a()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"set",value:function(t,e,s){return null!==t&&(this.d[0]=t),null!==e?this.d[1]=e:null!==t&&(this.d[1]=t),null!==s?this.d[2]=s:null!==t&&(this.d[2]=t),this}},{key:"setX",value:function(t){this.d[0]=t}},{key:"setY",value:function(t){this.d[1]=t}},{key:"setZ",value:function(t){this.d[2]=t}},{key:"addXYZ",value:function(t,e,s){return this.d[0]+=t,this.d[1]+=e,this.d[2]+=s,this}},{key:"addX",value:function(t){return this.d[0]+=t,this}},{key:"addY",value:function(t){return this.d[1]+=t,this}},{key:"addZ",value:function(t){return this.d[2]+=t,this}},{key:"multiplyX",value:function(t){return this.d[0]*=t,this}},{key:"multiplyY",value:function(t){return this.d[1]*=t,this}},{key:"multiplyZ",value:function(t){return this.d[2]*=t,this}},{key:"limiter",value:function(t){var e=this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2];if(e>t*t&&e>0){var s=t/Math.sqrt(e);this.d[0]*=s,this.d[1]*=s,this.d[2]*=s}return this}},{key:"cross",value:function(e){return new t(this.d[1]*e.d[2]-this.d[2]*e.d[1],this.d[2]*e.d[0]-this.d[0]*e.d[2],this.d[0]*e.d[1]-this.d[1]*e.d[0])}},{key:"dot",value:function(t){return this.d[0]*t.d[0]+this.d[1]*t.d[1]+this.d[2]*t.d[2]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2])}},{key:"directionVers",value:function(t){return this.d[0]=t.d[0]-this.d[0],this.d[1]=t.d[1]-this.d[1],this.d[2]=t.d[2]-this.d[2],this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this}},{key:"multiplyMatrix",value:function(t){return this.set(t.d[0]*this.d[0]+t.d[1]*this.d[1]+t.d[2]*this.d[2],t.d[3]*this.d[0]+t.d[4]*this.d[1]+t.d[5]*this.d[2],t.d[6]*this.d[0]+t.d[7]*this.d[1]+t.d[8]*this.d[2]),this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2]))}},{key:"angleDegree",value:function(t){var e=this.dot(t)/(this.length()*t.length());return 180*Math.acos(e)/Math.PI*-Object(o.d)(this.d[0]*t.d[1]+this.d[1]*t.d[0])}},{key:"computeNormal",value:function(e,s,i){var n=new t,r=new t,a=new t;return r.equal(e.minus(this)),a.equal(s.minus(this)),i?n.equal(a.cross(r)):n.equal(r.cross(a)),n.normalise(),n}}],[{key:"getBarycentre",value:function(t,e,s,i){var n=(e.d[2]-s.d[2])*(t.d[0]-s.d[0])+(s.d[0]-e.d[0])*(t.d[2]-s.d[2]),r=((e.d[2]-s.d[2])*(i[0]-s.d[0])+(s.d[0]-e.d[0])*(i[1]-s.d[2]))/n,a=((s.d[2]-t.d[2])*(i[0]-s.d[0])+(t.d[0]-s.d[0])*(i[1]-s.d[2]))/n,o=1-r-a;return r*t.d[1]+a*e.d[1]+o*s.d[1]}},{key:"lerp",value:function(e,s,i){var n=e.d[0],r=e.d[1],a=e.d[2];return new t(n+i*(s.d[0]-n),r+i*(s.d[1]-r),a+i*(s.d[2]-a))}}]),t}();e.a=h},27:function(t,e,s){var i=s(279),n=s(280),r=s(113),a=s(281);t.exports=function(t){return i(t)||n(t)||r(t)||a()}},279:function(t,e,s){var i=s(114);t.exports=function(t){if(Array.isArray(t))return i(t)}},280:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},281:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},282:function(t,e,s){var i={"./shaders/camera/albedo":[200,78],"./shaders/camera/albedo.js":[200,78],"./shaders/camera/albedoPhong":[201,40],"./shaders/camera/albedoPhong.js":[201,40],"./shaders/camera/background":[202,79],"./shaders/camera/background.js":[202,79],"./shaders/camera/basicFrag":[192,80],"./shaders/camera/basicFrag.js":[192,80],"./shaders/camera/basicVertex":[193,81],"./shaders/camera/basicVertex.js":[193,81],"./shaders/camera/basique3d":[203,21],"./shaders/camera/basique3d.js":[203,21],"./shaders/camera/bone":[204,82],"./shaders/camera/bone.js":[204,82],"./shaders/camera/buffers":[205,17],"./shaders/camera/buffers.js":[205,17],"./shaders/camera/color":[206,42],"./shaders/camera/color.js":[206,42],"./shaders/camera/deform":[207,22],"./shaders/camera/deform.js":[207,22],"./shaders/camera/emissive":[208,83],"./shaders/camera/emissive.js":[208,83],"./shaders/camera/frequency":[209,43],"./shaders/camera/frequency.js":[209,43],"./shaders/camera/frequencyCircle":[210,44],"./shaders/camera/frequencyCircle.js":[210,44],"./shaders/camera/frequencyGrid":[211,45],"./shaders/camera/frequencyGrid.js":[211,45],"./shaders/camera/gltf":[212,13],"./shaders/camera/gltf.js":[212,13],"./shaders/camera/morph":[213,84],"./shaders/camera/morph.js":[213,84],"./shaders/camera/normale":[214,85],"./shaders/camera/normale.js":[214,85],"./shaders/camera/normaleMatrix":[215,86],"./shaders/camera/normaleMatrix.js":[215,86],"./shaders/camera/normalmapping":[216,87],"./shaders/camera/normalmapping.js":[216,87],"./shaders/camera/paysage":[217,10],"./shaders/camera/paysage.js":[217,10],"./shaders/camera/phong":[218,46],"./shaders/camera/phong.js":[218,46],"./shaders/camera/road":[219,23],"./shaders/camera/road.js":[219,23],"./shaders/camera/roadmountain":[220,24],"./shaders/camera/roadmountain.js":[220,24],"./shaders/camera/selected":[221,88],"./shaders/camera/selected.js":[221,88],"./shaders/camera/shadow":[222,47],"./shaders/camera/shadow.js":[222,47],"./shaders/camera/signature":[223,48],"./shaders/camera/signature.js":[223,48],"./shaders/camera/skin":[224,89],"./shaders/camera/skin.js":[224,89],"./shaders/camera/skinMat":[225,49],"./shaders/camera/skinMat.js":[225,49],"./shaders/camera/sprite":[226,50],"./shaders/camera/sprite.js":[226,50],"./shaders/camera/spritePhong":[227,25],"./shaders/camera/spritePhong.js":[227,25],"./shaders/camera/texture":[228,90],"./shaders/camera/texture.js":[228,90],"./shaders/camera/update":[229,41],"./shaders/camera/update.js":[229,41],"./shaders/particules/pass1":[230,91],"./shaders/particules/pass1.js":[230,91],"./shaders/particules/pass1Morph":[231,92],"./shaders/particules/pass1Morph.js":[231,92],"./shaders/particules/pass2":[232,93],"./shaders/particules/pass2.js":[232,93],"./shaders/particules/pass2Camera":[233,94],"./shaders/particules/pass2Camera.js":[233,94],"./shaders/screen/basicVertex":[186,95],"./shaders/screen/basicVertex.js":[186,95],"./shaders/screen/bloom":[234,51],"./shaders/screen/bloom.js":[234,51],"./shaders/screen/blur":[235,26],"./shaders/screen/blur.js":[235,26],"./shaders/screen/blurDirection":[236,27],"./shaders/screen/blurDirection.js":[236,27],"./shaders/screen/blurMultiPass":[237,28],"./shaders/screen/blurMultiPass.js":[237,28],"./shaders/screen/blurOnePass":[238,29],"./shaders/screen/blurOnePass.js":[238,29],"./shaders/screen/blurRadial":[239,30],"./shaders/screen/blurRadial.js":[239,30],"./shaders/screen/brightcontrast":[240,52],"./shaders/screen/brightcontrast.js":[240,52],"./shaders/screen/compose":[241,53],"./shaders/screen/compose.js":[241,53],"./shaders/screen/debug":[242,96],"./shaders/screen/debug.js":[242,96],"./shaders/screen/diffuse":[243,31],"./shaders/screen/diffuse.js":[243,31],"./shaders/screen/dof":[244,32],"./shaders/screen/dof.js":[244,32],"./shaders/screen/fxaa":[245,54],"./shaders/screen/fxaa.js":[245,54],"./shaders/screen/fxaa2":[246,55],"./shaders/screen/fxaa2.js":[246,55],"./shaders/screen/gamma":[247,56],"./shaders/screen/gamma.js":[247,56],"./shaders/screen/glitch":[248,33],"./shaders/screen/glitch.js":[248,33],"./shaders/screen/glitch2":[249,34],"./shaders/screen/glitch2.js":[249,34],"./shaders/screen/glitch3":[250,57],"./shaders/screen/glitch3.js":[250,57],"./shaders/screen/glitch4":[251,58],"./shaders/screen/glitch4.js":[251,58],"./shaders/screen/kuwahara":[252,59],"./shaders/screen/kuwahara.js":[252,59],"./shaders/screen/landscape":[253,11],"./shaders/screen/landscape.js":[253,11],"./shaders/screen/line":[254,97],"./shaders/screen/line.js":[254,97],"./shaders/screen/mergeBloom":[255,60],"./shaders/screen/mergeBloom.js":[255,60],"./shaders/screen/oil":[256,61],"./shaders/screen/oil.js":[256,61],"./shaders/screen/pixel":[257,62],"./shaders/screen/pixel.js":[257,62],"./shaders/screen/point":[258,98],"./shaders/screen/point.js":[258,98],"./shaders/screen/rgb":[259,63],"./shaders/screen/rgb.js":[259,63],"./shaders/screen/screen":[260,64],"./shaders/screen/screen.js":[260,64],"./shaders/screen/sepia":[261,65],"./shaders/screen/sepia.js":[261,65],"./shaders/screen/shader":[262,14],"./shaders/screen/shader.js":[262,14],"./shaders/screen/signature":[263,35],"./shaders/screen/signature.js":[263,35],"./shaders/screen/sketch":[264,66],"./shaders/screen/sketch.js":[264,66],"./shaders/screen/sobel":[265,67],"./shaders/screen/sobel.js":[265,67],"./shaders/screen/specular":[266,68],"./shaders/screen/specular.js":[266,68],"./shaders/screen/ssao":[268,36],"./shaders/screen/ssao-chapman":[267,69],"./shaders/screen/ssao-chapman.js":[267,69],"./shaders/screen/ssao.js":[268,36],"./shaders/screen/vortex":[269,70],"./shaders/screen/vortex.js":[269,70],"./shaders/screen/watercolor":[270,71],"./shaders/screen/watercolor.js":[270,71],"./shaders/screen/watercolor2":[271,72],"./shaders/screen/watercolor2.js":[271,72],"./shaders/screen/watercolor3":[272,73],"./shaders/screen/watercolor3.js":[272,73],"./shaders/screen/watercolorMoving":[273,74],"./shaders/screen/watercolorMoving.js":[273,74],"./shaders/screen/wave":[274,75],"./shaders/screen/wave.js":[274,75],"./shaders/sky/getClouds":[199,99],"./shaders/sky/getClouds.js":[199,99],"./shaders/sky/getSunSky":[198,100],"./shaders/sky/getSunSky.js":[198,100],"./shaders/sky/roadSky":[275,18],"./shaders/sky/roadSky.js":[275,18],"./shaders/sky/skyWithFloor":[276,37],"./shaders/sky/skyWithFloor.js":[276,37],"./shaders/sky/sunset":[277,76],"./shaders/sky/sunset.js":[277,76],"./shaders/sky/tunnel":[278,77],"./shaders/sky/tunnel.js":[278,77],"./shaders/utils":[101,2],"./shaders/utils/":[101,2],"./shaders/utils/blur":[189,101],"./shaders/utils/blur.js":[189,101],"./shaders/utils/index":[101,2],"./shaders/utils/index.js":[101,2],"./shaders/utils/light":[187,102],"./shaders/utils/light.js":[187,102],"./shaders/utils/noise":[191,39],"./shaders/utils/noise.js":[191,39],"./shaders/utils/pbr":[190,38],"./shaders/utils/pbr.js":[190,38],"./shaders/utils/random":[188,103],"./shaders/utils/random.js":[188,103],"./shaders/utils/roadDistortion":[196,104],"./shaders/utils/roadDistortion.js":[196,104],"./shaders/utils/shadow":[195,105],"./shaders/utils/shadow.js":[195,105],"./shaders/utils/shapes":[197,19],"./shaders/utils/shapes.js":[197,19],"./shaders/utils/toon":[194,106],"./shaders/utils/toon.js":[194,106]};function n(t){if(!s.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],n=e[0];return s.e(e[1]).then((function(){return s(n)}))}n.keys=function(){return Object.keys(i)},n.id=282,t.exports=n},283:function(t,e,s){var i=s(3);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},284:function(t,e){function s(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=s=function(t){return typeof t}:t.exports=s=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(e)}t.exports=s},285:function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},29:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return r})),s.d(e,"d",(function(){return a}));var i=function(t){return Math.PI*t/180},n=function(t,e){return Math.random()*(e-t)+t},r=function(t,e,s,i,n){var r=i+(t-e)*(n-i)/(s-e);return r<Math.min(i,n)&&(r=Math.min(i,n)),r>Math.max(i,n)&&(r=Math.max(i,n)),r},a=function(t){return 0===t?0:t>0?1:-1}},3:function(t,e){function s(e){return t.exports=s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(e)}t.exports=s},35:function(t,e,s){"use strict";var i=s(48),n=s.n(i),r=s(1),a=s.n(r),o=s(2),h=s.n(o),u=s(25),c=s(19),l=s(53),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;a()(this,t),this.x=e,this.y=s,this.z=i,this.w=n}return h()(t,[{key:"set",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}},{key:"setFromAxeAndAngle",value:function(t,e){var s=n()(t,3),i=s[0],r=s[1],a=s[2];return this.x=i,this.y=r,this.z=a,this.w=e,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"approx",value:function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e&&Math.abs(this.w-t.w)<=e}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"multiplyArray",value:function(t){var e=this.x,s=this.y,i=this.z,n=this.w,r=t[0],a=t[1],o=t[2],h=t[3];return this.x=e*h+n*r+s*o-i*a,this.y=s*h+n*a+i*r-e*o,this.z=i*h+n*o+e*a-s*r,this.w=n*h-e*r-s*a-i*o,this}},{key:"multiply",value:function(t){var e=this.x,s=this.y,i=this.z,n=this.w,r=t.x,a=t.y,o=t.z,h=t.w;return this.x=e*h+n*r+s*o-i*a,this.y=s*h+n*a+i*r-e*o,this.z=i*h+n*o+e*a-s*r,this.w=n*h-e*r-s*a-i*o,this}},{key:"multiplyVector",value:function(t){var e=this.w*t.x+this.y*t.z-this.z*t.y,s=this.w*t.y+this.z*t.x-this.x*t.z,i=this.w*t.z+this.x*t.y-this.y*t.x,n=-this.x*t.x-this.y*t.y-this.z*t.z,r=e*this.w+n*-this.x+s*-this.z-i*-this.y,a=s*this.w+n*-this.y+i*-this.x-e*-this.z,o=i*this.w+n*-this.z+e*-this.y-s*-this.x;return new u.a(r,a,o)}},{key:"normalize",value:function(){var t=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;return 0!==t&&1!==t&&(t=1/Math.sqrt(t),this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:"rotateX",value:function(t){var e=.5*t,s=this.x,i=this.y,n=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=s*o+r*a,this.y=i*o+n*a,this.z=n*o-i*a,this.w=r*o-s*a,this}},{key:"rotateY",value:function(t){var e=.5*t,s=this.x,i=this.y,n=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=s*o-n*a,this.y=i*o+r*a,this.z=n*o+s*a,this.w=r*o-i*a,this}},{key:"rotateZ",value:function(t){var e=.5*t,s=this.x,i=this.y,n=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=s*o+i*a,this.y=i*o-s*a,this.z=n*o+r*a,this.w=r*o-n*a,this}},{key:"scale",value:function(t){var e=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;return 0===e?this:1===e?(this.x*=t,this.y*=t,this.z*=t,this.w*=t,this):(e=t/Math.sqrt(e),this.x*=e,this.y*=e,this.z*=e,this.w*=e,this)}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"slerp",value:function(t,e,s){var i,n,r,a,o,h=t.x,u=t.y,c=t.z,d=t.w,f=e.x,g=e.y,v=e.z,p=e.w;return(n=h*f+u*g+c*v+d*p)<0&&(n=-n,f=-f,g=-g,v=-v,p=-p),1-n>l.a?(i=Math.acos(n),r=Math.sin(i),a=Math.sin((1-s)*i)/r,o=Math.sin(s*i)/r):(a=1-s,o=s),this.x=a*h+o*f,this.y=a*u+o*g,this.z=a*c+o*v,this.w=a*d+o*p,this}},{key:"toMatrix4",value:function(){var t=this.w*this.w,e=this.x*this.x,s=this.y*this.y,i=this.z*this.z,n=1/(e+s+i+t),r=(e-s-i+t)*n,a=(-e+s-i+t)*n,o=(-e-s+i+t)*n,h=this.x*this.y,u=this.z*this.w,l=2*(h+u)*n,d=2*(h-u)*n,f=2*((h=this.x*this.z)-(u=this.y*this.w))*n,g=2*(h+u)*n,v=2*((h=this.y*this.z)+(u=this.x*this.w))*n,p=2*(h-u)*n;return(new c.a).set(r,l,f,0,d,a,v,0,g,p,o,0,0,0,0,1)}},{key:"setFromMat3",value:function(t){var e=t.get(),s=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],h=e[6],u=e[7],c=e[8];return this.w=.5*Math.sqrt(Math.max(0,1+s+a+c)),this.x=.5*Math.sqrt(Math.max(0,1+s-a-c)),this.y=.5*Math.sqrt(Math.max(0,1-s+a-c)),this.z=.5*Math.sqrt(Math.max(0,1-s-a+c)),this.x*=Math.sign(o-u),this.y*=Math.sign(h-n),this.z*=Math.sign(i-r),this}},{key:"get",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return this.z}},{key:"getW",value:function(){return this.w}}],[{key:"slerpArray",value:function(e,s,i){var n=new t(e[0],e[1],e[2],e[3]),r=new t(s[0],s[1],s[2],s[3]);return new t(0,0,0,1).slerp(n,r,i)}}]),t}();e.a=d},46:function(t,e,s){var i=s(131),n=s(285);function r(e,s,a){return n()?t.exports=r=Reflect.construct:t.exports=r=function(t,e,s){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return s&&i(r,s.prototype),r},r.apply(null,arguments)}t.exports=r},49:function(t,e,s){var i=s(119);t.exports=function(t,e){if(null==t)return{};var s,n,r=i(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)s=a[n],e.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}},53:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var i=1e-6},54:function(t,e,s){"use strict";s.r(e),s.d(e,"chunkArray",(function(){return i})),s.d(e,"capitalize",(function(){return n})),s.d(e,"getEnvPath",(function(){return r}));var i=function(t,e){return Array.from({length:Math.ceil(t.length/e)},(function(s,i){return t.slice(i*e,i*e+e)}))},n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},r=function(t){return"".concat("/public").concat(t)}},57:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64;n()(this,t),this.gl=e,this.size={width:s,height:i},this.texture=e.createTexture(),this.filter=e.NEAREST,this.setup()}return a()(t,[{key:"setup",value:function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.create(),this.setFilters(),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"create",value:function(){for(var t=new ArrayBuffer(this.size.width*this.size.height),e=new Uint8Array(t),s=0,i=0;i<this.size.height;i+=1)for(var n=0;n<this.size.width;n+=1)e[s]=255*Math.random(),s+=1;this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.ALPHA,this.size.width,this.size.height,0,this.gl.ALPHA,this.gl.UNSIGNED_BYTE,e)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}},{key:"get",value:function(){return this.texture}},{key:"setFiltre",value:function(t){this.filter=t}}]),t}()},65:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var i=s(1),n=s.n(i),r=s(2),a=s.n(r),o=s(147),h=s(148),u=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n()(this,t),this.gl=e,this.buffer=this.gl.createFramebuffer(),this.buffer.width=s,this.buffer.height=i,this.clearColor=[0,0,0,0],this.setup(r,a,o)}return a()(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer);var i=null!==e?e.COLOR_ATTACHMENT0_WEBGL+s:this.gl.COLOR_ATTACHMENT0;this.texture=new o.a(this.gl,this.buffer.width,this.buffer.height),this.texture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,i,this.gl.TEXTURE_2D,this.texture.get(),0),t&&(this.depthTexture=new h.a(this.gl,this.buffer.width,this.buffer.height),this.depthTexture.setup(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.get(),0)),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"resize",value:function(t){this.buffer.width=t.width,this.buffer.height=t.height,this.setup()}},{key:"start",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this.gl.viewport(0,0,this.buffer.width,this.buffer.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"end",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"get",value:function(){return this.buffer}},{key:"getTexture",value:function(){return this.texture}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setClearColor",value:function(t,e,s,i){this.clearColor=[t,e,s,i]}}]),t}()},7:function(t,e,s){var i=s(131);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},73:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));var i=s(1),n=s.n(i),r=s(7),a=s.n(r),o=s(8),h=s.n(o),u=s(3),c=s.n(u),l=s(88);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=c()(t);if(e){var n=c()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return h()(this,s)}}var f=function(t,e){return Object.keys(e).reduce((function(s,i){var n,r,a,o,h=e[i];switch(i){default:case"position":case"next":case"previous":case"normale":case"color":r="VEC3",a=3,n=t.FLOAT,o=new Float32Array(h);break;case"texture":r="VEC2",a=2,n=t.FLOAT,o=new Float32Array(h);break;case"indices":r="SCALAR",a=1,n=t.UNSIGNED_SHORT,o=new Uint16Array(h);break;case"side":r="FLOAT",a=1,n=t.FLOAT,o=new Float32Array(h)}return s[i]={locationKey:i,type:r,values:o,count:h.length/a,componentType:n,size:a},s}),{})},g=function(t){a()(s,t);var e=d(s);function s(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n()(this,s);var a=f(t,i);return e.call(this,t,a,r)}return s}(l.a)},8:function(t,e,s){var i=s(284),n=s(10);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?n(t):e}},86:function(t,e,s){"use strict";s.d(e,"a",(function(){return A}));var i=s(48),n=s.n(i),r=s(46),a=s.n(r),o=s(27),h=s.n(o),u=s(49),c=s.n(u),l=s(1),d=s.n(l),f=s(10),g=s.n(f),v=s(7),p=s.n(v),y=s(8),m=s.n(y),b=s(3),k=s.n(b),x=s(0),E=s.n(x),w=s(89),T=s(35),P=s(19),j=s(145),R=s(87),O=s(29);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=k()(t);if(e){var n=k()(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return m()(this,s)}}var A=function(t){p()(s,t);var e=M(s);function s(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d()(this,s),r=e.call(this,t,i),E()(g()(r),"removeAnim",(function(t){t.animations;return c()(t,["animations"])})),E()(g()(r),"addAnimations",(function(t,e){var s={};return t.forEach((function(t){var i=t.path,n=t.times,o=t.output,u=t.interpolation,c=null!==e?o[e]:o[0];"rotation"===i&&(c=a()(T.a,h()(c)).toMatrix4()),r.animationInterval[1]=Math.max.apply(Math,h()(n).concat([r.animationInterval[1]])),s[i]={output:o,sample:new j.a(n,u,r.speedAnimation),customStep:e,value:c}})),s})),E()(g()(r),"getAnimationInterval",(function(t){var e=0;return t.forEach((function(t){var s=t.animations;s&&s.forEach((function(t){var s=t.times;e=Math.max.apply(Math,h()(s).concat([e]))}))})),[0,e]})),E()(g()(r),"update",(function(t){var e=t-r.lastFrame;e>r.animationInterval[1]*r.speedAnimation&&(r.lastFrame=t),r.updateAnimations(e)})),E()(g()(r),"updateAnimations",(function(t){Object.keys(r.animations).forEach((function(e){var s=r.animations[e];Object.keys(s).forEach((function(e){s[e]="rotation"===e?r.updateQuat(s[e],t):r.updateVector(s[e],t)}))}))})),E()(g()(r),"updateVector",(function(t,e){var s=t,i=s.sample,r=s.customStep,a=s.output;if(null===r){i.update(e);var o=i.getIndex();if(0===o){var h=n()(a,1);s.value=h[0]}else if(o>a.length-1)s.value=a[a.length-1];else{var u=a[o-1],c=a[o],l=i.get();s.value=u.map((function(t,e){return Object(R.a)(l,t,c[e])}))}}else s.value=a[r];return s})),E()(g()(r),"updateQuat",(function(t,e){var s=t,i=s.sample,n=s.customStep,r=s.output;if(null===n){i.update(e);var o=i.getIndex();if(0===o)s.value=a()(T.a,h()(r[0])).toMatrix4();else if(o>r.length-1)s.value=a()(T.a,h()(r[r.length-1])).toMatrix4();else{var u=r[o-1],c=r[o],l=i.get();s.value=T.a.slerpArray(u,c,l).toMatrix4()}}else s.value=a()(T.a,h()(r[n])).toMatrix4();return s})),E()(g()(r),"handleLocalTransform",(function(t){var e=t.translation,s=t.rotation,i=t.scale,n=t.matrix,a=t.name,o=r.animations[a],u=o&&o.rotation||null,c=o&&o.translation||null,l=o&&o.scale||null,d=new P.a;return d.identity(),(i||l)&&d.scale.apply(d,h()(r.getVector(i,l))),(s||u)&&d.multiply(r.getRotationMat(s,u)),(e||c)&&d.translate.apply(d,h()(r.getVector(e,c))),n&&d.multiplyArray(n),d})),E()(g()(r),"setAnimationStep",(function(t,e,s){var i=r.animations[t][e],n=i.output.length,a=Object(O.b)(s,0,1,0,n-1);i.customStep=Math.round(a)})),E()(g()(r),"setAnimationSpeed",(function(t,e,s){r.animations[t][e].sample.setSpeed(s)})),E()(g()(r),"getVector",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:t})),E()(g()(r),"getRotationMat",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:a()(T.a,h()(t)).toMatrix4()}));var u=i.nodes;return r.speedAnimation=2e3,r.animationInterval=[0,0],r.animations=u.reduce((function(t,e){var s=e.animations,i=e.name;return s&&(t[i]=r.addAnimations(s,o)),t}),{}),r.nodes=u.reduce((function(t,e){return t[e.name]=r.removeAnim(e),t}),{}),r.lastFrame=0,r}return s}(w.a)},87:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var i=function(t,e,s){return(1-t)*e+t*s}},88:function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));var i=s(0),n=s.n(i),r=s(1),a=s.n(r),o=s(2),h=s.n(o),u=function(){function t(e,s){a()(this,t),this.gl=e,s&&this.create(s)}return h()(t,[{key:"create",value:function(t){var e=t.locationKey,s=t.type,i=t.values,n=t.count,r=t.componentType,a=t.size,o=t.modeCalcul,h="SCALAR"!==s?this.gl.ARRAY_BUFFER:this.gl.ELEMENT_ARRAY_BUFFER;this.vbo=this.gl.createBuffer(),this.gl.bindBuffer(h,this.vbo),this.gl.bufferData(h,i,o),this.gl.bindBuffer(h,null),this.size=a,this.count=n,this.componentType=r,this.bufferType=h,this.locationKey=e}},{key:"enable",value:function(t){var e=this.locationKey,s=this.vbo,i=this.componentType,n=this.size,r=this.bufferType;if("indices"===e)this.gl.bindBuffer(r,s);else{var a=t.locations[e];void 0!==a&&-1!==a&&(this.gl.bindBuffer(r,s),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,n,i,!1,0,0))}}},{key:"start",value:function(t){this.gl.useProgram(t)}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"update",value:function(t){this.gl.bindBuffer(this.bufferType,this.vbo),this.gl.bufferSubData(this.bufferType,0,new Float32Array(t)),this.gl.bindBuffer(this.bufferType,null)}},{key:"render",value:function(t,e){"indices"===this.locationKey?this.gl.drawElements(e,this.count,this.componentType,0):this.gl.drawArrays(e,0,this.count)}},{key:"getCount",value:function(){return this.count}}]),t}();function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){n()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d=function(){function t(e,s){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a()(this,t),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=n?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW,this.vbos=Object.keys(s).reduce((function(t,n){return t[n]=new u(e,l({locationKey:n,modeCalcul:i.modeCalcul},s[n])),t}),{})}return h()(t,[{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),Object.keys(this.vbos).forEach((function(s){e.vbos[s].enable(t)}))}},{key:"update",value:function(t){var e=this;Object.keys(t).forEach((function(s){e.vbos[s].update(t[s])}))}},{key:"render",value:function(t){this.enable(t);var e=this.vbos.indices||this.vbos.position||this.vbos.texture;e.render(t,this.modeDessin),e.end()}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}}]),t}()},89:function(t,e,s){"use strict";s.d(e,"a",(function(){return k}));var i=s(46),n=s.n(i),r=s(27),a=s.n(r),o=s(1),h=s.n(o),u=s(2),c=s.n(u),l=s(0),d=s.n(l),f=s(88),g=s(138),v=function(){function t(e,s){var i=s.vbos,n=s.material,r=void 0===n?{}:n;h()(this,t),this.material=r,this.objet=new f.a(e,i),r.normalMap&&(this.normalMap=new g.a(e,r.normalMap.data))}return c()(t,[{key:"render",value:function(t){var e=this.material,s=e.color,i=e.metal,n=e.rough,r=e.ao;t.setVector("color",s||[1,1,1,1]),t.setFloat("metal",void 0!==i?i:0),t.setFloat("rough",void 0!==n?n:.5),t.setFloat("ao",void 0!==r?r:1),this.objet.render(t.get())}},{key:"setModeDessin",value:function(t){this.objet.setModeDessin(t)}},{key:"setModeCalcul",value:function(t){this.objet.setModeCalcul(t)}}]),t}(),p=s(35),y=s(19);function m(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(Object(s),!0).forEach((function(e){d()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var k=function(){function t(e,s){var i=this;h()(this,t),d()(this,"formatPrimitives",(function(t,e){return e.map((function(e){var s=e.vbos,i=e.material;return new v(t,{vbos:s,material:i})}))})),d()(this,"handleLocalTransform",(function(t){var e=t.translation,s=t.rotation,i=t.scale,r=t.matrix,o=new y.a;return o.identity(),i&&o.scale.apply(o,a()(i)),s&&o.multiply(n()(p.a,a()(s)).toMatrix4()),e&&o.translate.apply(o,a()(e)),r&&o.multiplyArray(r),o}));var r=s.nodes,o=s.meshes,u=s.materials;this.meshes=o.map((function(t){var s=t.primitives,n=t.name,r=void 0===n?"":n,a=t.weights,o=s.map((function(t){return void 0!==t.material?b(b({},t),{},{material:u[t.material]}):t}));return{name:r,primitives:i.formatPrimitives(e,o),weights:a}})),this.nodes=r}return c()(t,[{key:"render",value:function(t,e){var s=this;Object.keys(this.nodes).forEach((function(i){s.renderNode(i,t,e)}))}},{key:"renderNode",value:function(t,e,s){var i=this.nodes[t],n=i.mesh,r=this.handleLocalTransform(i);r.multiply(s),e.setMatrix("model",r.get()),r.resetTranslate();var a=r.getMatrice3x3();a.inverse(),a.transpose(),e.setMatrix("normalMatrix",a.get()),this.meshes[n].primitives.forEach((function(t){return t.render(e)}))}}]),t}()}}]);