(self.webpackChunkdovotori_portfolio=self.webpackChunkdovotori_portfolio||[]).push([[1473,8983],{35918:(t,e,i)=>{"use strict";i.d(e,{Z:()=>x});var n=i(69100),s=i.n(n),r=i(319),a=i.n(r),o=i(34575),h=i.n(o),u=i(93913),c=i.n(u),l=i(59713),d=i.n(l),f=i(35115),v=i(91215),p=function(){function t(e,i){var n=this,s=i.vbos,r=i.material,a=void 0===r?{}:r;h()(this,t),d()(this,"addInstancing",(function(t,e){n.vbos.addInstancingVbos(t,e)})),this.material=a,this.vbos=new f.Z(e,s),a.normalMap&&(this.normalMap=new v.Z(e,a.normalMap.data))}return c()(t,[{key:"render",value:function(t){var e=this.material,i=e.color,n=e.metal,s=e.rough,r=e.ao;t.setVector("color",i||[1,1,1,1]),t.setFloat("metal",void 0!==n?n:0),t.setFloat("rough",void 0!==s?s:.5),t.setFloat("ao",void 0!==r?r:1),this.vbos.render(t.get())}},{key:"setModeDessin",value:function(t){this.vbos.setModeDessin(t)}},{key:"setModeCalcul",value:function(t){this.vbos.setModeCalcul(t)}}]),t}(),g=i(17968),y=i(21969);function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){d()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var x=function(){function t(e,i){var n=this;h()(this,t),d()(this,"formatPrimitives",(function(t,e){return e.map((function(e){var i=e.vbos,n=e.material;return new p(t,{vbos:i,material:n})}))})),d()(this,"renderNodesAndChildren",(function(t,e,i){Object.keys(t).forEach((function(s){var r=t[s];n.renderNodeAndChildren(r,e,i)}))})),d()(this,"renderNodeAndChildren",(function(t,e,i){var s;s=n.setNodeModel(t,e,i),n.renderNode(t,e),t.children&&n.renderNodesAndChildren(t.children,e,s)})),d()(this,"setNodeModel",(function(t,e,i){var s=n.handleLocalTransform(t);s.multiply(i),e.setMatrix("model",s.get());var r=s.getMatrice3x3();return r.inverse(),r.transpose(),e.setMatrix("normalMatrix",r.get()),s})),d()(this,"handleLocalTransform",(function(t){var e=t.translation,i=t.rotation,n=t.scale,r=t.matrix,o=new y.Z;return o.identity(),n&&o.scale.apply(o,a()(n)),i&&o.multiply(s()(g.Z,a()(i)).toMatrix4()),e&&o.translate.apply(o,a()(e)),r&&o.multiplyArray(r),o}));var r=i.nodes,o=i.meshes,u=i.materials;this.meshes=o.map((function(t){var i=t.primitives,s=t.name,r=void 0===s?"":s,a=t.weights,o=i.map((function(t){return void 0!==t.material?k(k({},t),{},{material:u[t.material]}):t}));return{name:r,primitives:n.formatPrimitives(e,o),weights:a}})),this.nodes=r}return c()(t,[{key:"addInstancingVbos",value:function(t,e){var i=this;Object.keys(this.nodes).forEach((function(n){var s=i.nodes[n].mesh;i.meshes[s].primitives.forEach((function(i){return i.addInstancing(t,e)}))}))}},{key:"render",value:function(t,e){this.renderNodesAndChildren(this.nodes,t,e)}},{key:"renderOnly",value:function(t,e,i){var n=this;t.forEach((function(t){var s=n.nodes[t];n.renderNodeAndChildren(s,e,i)}))}},{key:"renderExcept",value:function(t,e,i){var n=this;Object.keys(this.nodes).forEach((function(s){if(-1===t.indexOf(s)){var r=n.nodes[s];n.renderNodeAndChildren(r,e,i)}}))}},{key:"renderNode",value:function(t,e){if(void 0!==t.mesh){var i=t.mesh;this.meshes[i].primitives.forEach((function(t){return t.render(e)}))}}}]),t}()},14129:(t,e,i)=>{"use strict";i.d(e,{Z:()=>j});var n=i(63038),s=i.n(n),r=i(6479),a=i.n(r),o=i(69100),h=i.n(o),u=i(319),c=i.n(u),l=i(34575),d=i.n(l),f=i(81506),v=i.n(f),p=i(2205),g=i.n(p),y=i(78585),m=i.n(y),k=i(29754),x=i.n(k),T=i(59713),b=i.n(T),P=i(35918),E=i(17968),w=i(21969),R=i(29686),M=i(41178),A=i(68763);function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){b()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=x()(t);if(e){var s=x()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return m()(this,i)}}var j=function(t){g()(i,t);var e=D(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d()(this,i),r=e.call(this,t,n),b()(v()(r),"addAllAnimations",(function(t,e){return Object.keys(t).reduce((function(i,n){var s=i,a=t[n],o=a.animations,h=a.name,u=a.children;return o&&(s[h]=r.addAnimations(o,e)),u&&(s=S(S({},i),r.addAllAnimations(u,e))),s}),{})})),b()(v()(r),"addAnimations",(function(t,e){var i={};return t.forEach((function(t){var n=t.path,s=t.times,a=t.output,o=t.interpolation,u=null!==e?a[e]:a[0];"rotation"===n&&(u=h()(E.Z,c()(u)).toMatrix4()),r.animationInterval[1]=Math.max.apply(Math,c()(s).concat([r.animationInterval[1]])),i[n]={output:a,sample:new R.Z(s,o,r.speedAnimation),customStep:e,value:u}})),i})),b()(v()(r),"removeNodesAnimations",(function(t){return Object.keys(t).reduce((function(e,i){var n=e,s=t[i];return n[s.name]=r.removeNodeAnim(s),s.children&&(n=S(S({},n),r.removeNodesAnimations(s.children))),e}),{})})),b()(v()(r),"removeNodeAnim",(function(t){t.animations;return a()(t,["animations"])})),b()(v()(r),"getAnimationInterval",(function(t){var e=0;return t.forEach((function(t){var i=t.animations;i&&i.forEach((function(t){var i=t.times;e=Math.max.apply(Math,c()(i).concat([e]))}))})),[0,e]})),b()(v()(r),"update",(function(t){var e=t-r.lastFrame;e>r.animationInterval[1]*r.speedAnimation&&(r.lastFrame=t),r.updateAnimations(e)})),b()(v()(r),"updateAnimations",(function(t){Object.keys(r.animations).forEach((function(e){var i=r.animations[e];Object.keys(i).forEach((function(e){i[e]="rotation"===e?r.updateQuat(i[e],t):r.updateVector(i[e],t)}))}))})),b()(v()(r),"updateVector",(function(t,e){var i=t,n=i.sample,r=i.customStep,a=i.output;if(null===r){n.update(e);var o=n.getIndex();if(0===o){var h=s()(a,1);i.value=h[0]}else if(o>a.length-1)i.value=a[a.length-1];else{var u=a[o-1],c=a[o],l=n.get();i.value=u.map((function(t,e){return(0,M.t7)(l,t,c[e])}))}}else i.value=a[r];return i})),b()(v()(r),"updateQuat",(function(t,e){var i=t,n=i.sample,s=i.customStep,r=i.output;if(null===s){n.update(e);var a=n.getIndex();if(0===a)i.value=h()(E.Z,c()(r[0])).toMatrix4();else if(a>r.length-1)i.value=h()(E.Z,c()(r[r.length-1])).toMatrix4();else{var o=r[a-1],u=r[a],l=n.get();i.value=E.Z.slerpArray(o,u,l).toMatrix4()}}else i.value=h()(E.Z,c()(r[s])).toMatrix4();return i})),b()(v()(r),"handleLocalTransform",(function(t){var e=t.translation,i=t.rotation,n=t.scale,s=t.matrix,a=t.name,o=r.animations[a],h=o&&o.rotation||null,u=o&&o.translation||null,l=o&&o.scale||null,d=new w.Z;return d.identity(),(n||l)&&d.scale.apply(d,c()(r.getVector(n,l))),(i||h)&&d.multiply(r.getRotationMat(i,h)),(e||u)&&d.translate.apply(d,c()(r.getVector(e,u))),s&&d.multiplyArray(s),d})),b()(v()(r),"setAnimationStep",(function(t,e,i){var n=r.animations[t][e],s=n.output.length,a=(0,A.Yp)(i,0,1,0,s-1);n.customStep=Math.round(a)})),b()(v()(r),"setAnimationSpeed",(function(t,e,i){r.animations[t][e].sample.setSpeed(i)})),b()(v()(r),"getVector",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:t})),b()(v()(r),"getRotationMat",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.value?e.value:h()(E.Z,c()(t)).toMatrix4()}));var u=n.nodes;return r.speedAnimation=2e3,r.animationInterval=[0,0],r.animations=r.addAllAnimations(u,o),r.nodes=r.removeNodesAnimations(u),r.lastFrame=0,r}return i}(P.Z)},41517:(t,e,i)=>{"use strict";i.d(e,{Z:()=>b});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(81506),h=i.n(o),u=i(16525),c=i.n(u),l=i(2205),d=i.n(l),f=i(78585),v=i.n(f),p=i(29754),g=i.n(p),y=i(59713),m=i.n(y),k=i(14129),x=i(21969);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g()(t);if(e){var s=g()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return v()(this,i)}}var b=function(t){d()(i,t);var e=T(i);function i(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s()(this,i),r=e.call(this,t,n),m()(h()(r),"removeAnimations",(function(t){return t.map((function(t){var e=t;return e.children&&(e.children=r.removeAnimations(e.children)),r.removeAnim(e)}))})),m()(h()(r),"addJointsAnimations",(function(t,e){t.forEach((function(t){var i=t.animations,n=t.name,s=t.children;i&&(r.animations[n]=r.addAnimations(i,e)),s&&r.addJointsAnimations(s,e)}))})),m()(h()(r),"setProgramSkin",(function(t,e){if(void 0!==t){var i=new x.Z;i.identity();var n=r.skins[t].joints;r.setProgramJoints(n,e,i)}})),m()(h()(r),"setProgramJoints",(function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach((function(t){var s=t.invMatrix,a=t.children,o=r.handleLocalTransform(t);o.multiply(i);var h=new x.Z;h.identity();var u=new x.Z;u.setFromArray(s),u.resetScale(),h.multiply(u),h.multiply(o),e.setMatrix("jointMat[".concat(n,"]"),h.get()),a&&r.setProgramJoints(a,e,o,n+1)}))}));var o=n.skins;return o&&(o.forEach((function(t){var e=t.joints;r.addJointsAnimations(e,a)})),r.skins=o.map((function(t){var e=t.joints;return{joints:r.removeAnimations(e)}}))),r}return a()(i,[{key:"renderNode",value:function(t,e,n){var s=t.skin;void 0!==s&&this.setProgramSkin(s,e),c()(g()(i.prototype),"renderNode",this).call(this,t,e,n)}}]),i}(k.Z)},1336:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(59713),h=i.n(o),u=function(){function t(e){var i=this;s()(this,t),h()(this,"saveData",(function(t){i.audioData=t})),h()(this,"togglePause",(function(){i.isPlaying?i.isPause?(i.audioContext.resume(),i.isPause=!1):(i.audioContext.suspend(),i.isPause=!0):(i.play(),i.isPause=!1)})),h()(this,"stop",(function(){i.clearAnalyse(),i.sourceNode&&(i.sourceNode.removeEventListener("ended",i.stop,!1),i.sourceNode.disconnect(),i.sourceNode.stop(0)),i.isPlaying=!1})),h()(this,"toggle",(function(){i.isPlaying?i.stop():i.play()})),h()(this,"clearAnalyse",(function(){i.amplitudeArray.fill(0),i.javascriptNode&&(i.analyserNode.disconnect(),i.javascriptNode.disconnect(),i.javascriptNode.removeEventListener("audioprocess",i.onAnalyse,!1))})),h()(this,"onAnalyse",(function(){i.analyserNode.getByteFrequencyData(i.amplitudeArray)})),h()(this,"onError",(function(t){})),h()(this,"setPlaybackRate",(function(t){i.playbackRate=t,i.sourceNode&&(i.sourceNode.playbackRate.value=i.playbackRate)})),h()(this,"setVolume",(function(t){i.volume=t,i.gainNode&&(i.gainNode.gain.value=i.volume)})),h()(this,"getAmplitudes",(function(){return i.amplitudeArray})),h()(this,"getFrequencyLength",(function(){return i.analyserNode.frequencyBinCount})),h()(this,"getIsPlaying",(function(){return i.isPlaying})),h()(this,"getIsPause",(function(){return i.isPause}));var n=window.AudioContext||window.webkitAudioContext;this.support=!!n;try{this.audioContext=new n}catch(t){this.support=!1}this.audioData=null,this.playbackRate=1,this.playMultiple=!1,this.isPlaying=!1,this.isPause=!0,this.isMute=!0,this.isLoop=!0,this.volume=.5,this.setup(e)}return a()(t,[{key:"setup",value:function(t){this.support&&(this.audioContext.decodeAudioData(t,this.saveData,this.onError),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.gainNode.connect(this.audioContext.destination),this.sampleSize=1024,this.javascriptNode=this.audioContext.createScriptProcessor(this.sampleSize,1,1),this.analyserNode=this.audioContext.createAnalyser(),this.amplitudeArray=new Uint8Array(this.analyserNode.frequencyBinCount))}},{key:"play",value:function(){this.audioData&&(!this.playMultiple&&this.isPlaying&&this.stop(),this.sourceNode=this.audioContext.createBufferSource(),this.sourceNode.playbackRate.value=this.playbackRate,this.sourceNode.buffer=this.audioData,this.sourceNode.loop=this.isLoop,this.sourceNode.connect(this.gainNode),this.setupAnalyse(),this.sourceNode.addEventListener("ended",this.stop,!1),this.sourceNode.start(0),this.isPlaying=!0)}},{key:"setupAnalyse",value:function(){this.sourceNode.connect(this.analyserNode),this.analyserNode.connect(this.javascriptNode),this.javascriptNode.connect(this.audioContext.destination),this.javascriptNode.addEventListener("audioprocess",this.onAnalyse,!1)}},{key:"getSupport",value:function(){return this.support}}]),t}()},60760:(t,e,i)=>{"use strict";i(34575),i(93913),i(59713)},55534:(t,e,i)=>{"use strict";i(34575),i(93913),i(59713)},92613:(t,e,i)=>{"use strict";i(34575),i(93913),i(59713)},41262:(t,e,i)=>{"use strict";i(34575),i(93913),i(59713)},32970:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(59713),h=i.n(o),u=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s()(this,t),h()(this,"reset",(function(){i.sprite={uv:{x:0,y:0,w:1,h:1},size:{w:1,h:1}},i.step=0})),this.states=e,this.step=0,this.oldStep=this.step,this.nbSteps=1,this.timeout=this.states.time,this.lastFrame=null,this.sprite={uv:{x:0,y:0,w:1,h:1},size:{w:1,h:1}},this.uv=null,this.iteration=null,this.nextState=null,this.currentState=null,this.callbackEndOfAnimation=n,this.scale=1}return a()(t,[{key:"set",value:function(t){void 0!==t&&this.currentState!==t&&(this.currentState=t,this.reload(t))}},{key:"reload",value:function(t){var e=this.states[t];this.uv=e.uv,this.setUV(0),this.nbSteps=this.uv.length,1===this.nbSteps?this.lastFrame=null:(this.step=0,this.timeout=this.uv[this.step].t||this.states.time||100,this.iteration=e.iteration||null,this.nextState=e.next,this.lastFrame=(new Date).getTime())}},{key:"update",value:function(){if(this.oldStep=this.step,null!==this.lastFrame){var t=(new Date).getTime();t-this.lastFrame>this.timeout&&(this.step<this.nbSteps-1?this.nexStep():this.endOfLoop(),this.setUV(this.step),this.lastFrame=t)}}},{key:"nexStep",value:function(){this.step+=1,this.timeout=this.uv[this.step].t||this.states.time||100}},{key:"endOfLoop",value:function(){1===this.iteration?(this.callbackEndOfAnimation&&this.callbackEndOfAnimation(this.currentState,this.nextState),null!==this.nextState||void 0!==this.nextState?this.set(this.nextState):this.lastFrame=null):this.step=0}},{key:"get",value:function(){return{x:this.sprite.uv.x,y:this.sprite.uv.y,texW:this.states.size.w,texH:this.states.size.h,w:this.sprite.uv.w,h:this.sprite.uv.h,px:this.sprite.uv.px||-1,py:this.sprite.uv.py||-1,refSize:this.states.refSize}}},{key:"setUV",value:function(t){this.sprite.uv={x:this.uv[t].x||0,y:this.uv[t].y||0,w:this.uv[t].w||1,h:this.uv[t].h||1,px:this.uv[t].px,py:this.uv[t].py}}},{key:"getStatus",value:function(){return this.currentState}},{key:"getStep",value:function(){return this.step}},{key:"isNewStep",value:function(){return this.step!==this.oldStep}},{key:"getRelSize",value:function(){var t=this.states.refSize,e=this.sprite.uv,i=e.w/t,n=e.h/t,s=void 0!==e.px?-e.px/t:null,r=void 0!==e.py?-e.py/t:null;return{w:i*=this.scale,h:n*=this.scale,px:s=null!==s?s*this.scale:null,py:r=null!==r?r*this.scale:null}}},{key:"setScale",value:function(t){this.scale=t}},{key:"getScale",value:function(){return this.scale}},{key:"getState",value:function(){return this.currentState}}]),t}()},36188:(t,e,i)=>{"use strict";i(87757),i(48926);var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(59713),h=i.n(o);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){h()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}for(var l=function(){function t(e){var i=this;s()(this,t),h()(this,"addFaceIndex",(function(t){var e=t.split("/");e[0]&&""!==e[0]&&i.obj.v.indices.push(parseInt(e[0],10)-1),e[1]&&""!==e[1]&&i.obj.vt.indices.push(parseInt(e[1],10)-1),e[2]&&""!==e[2]&&i.obj.vn.indices.push(parseInt(e[2],10)-1)})),this.obj={v:{indices:[],points:[]},vt:{indices:[],points:[]},vn:{indices:[],points:[]}},this.mat={},this.faceCount=0,this.readLines(e)}return a()(t,[{key:"readLines",value:function(t){var e=this;t.split("\n").forEach((function(t){var i=t.split(" "),n=i[0];switch(n){case"f":e.addFace(i.slice(1));break;case"v":case"vn":case"vt":e.addPoints(n,i.slice(1));break;case"usemtl":e.addNewMaterial(i.slice(1)[0])}}))}},{key:"addFace",value:function(t){t.forEach(this.addFaceIndex),this.faceCount+=1}},{key:"addPoints",value:function(t,e){var i=this;("vt"===t&&3===e.length?e.slice(0,2):e).forEach((function(e){return i.obj[t].points.push(parseFloat(e,10))}))}},{key:"addNewMaterial",value:function(t){this.mat[3*this.faceCount]=t}},{key:"get",value:function(){return c(c({},this.obj),{},{mat:this.mat})}}]),t}(),d=function(){function t(e){s()(this,t),this.materials={},this.current="",this.readLines(e)}return a()(t,[{key:"readLines",value:function(t){var e=this;t.split("\n").forEach((function(t){var i=t.split(" "),n=i[0];switch(n){case"newmtl":e.createMaterial(i.slice(1));break;case"Ns":case"Ka":case"Kd":case"Ks":case"Ke":case"Ni":case"d":case"illum":e.addInfoToMaterial(n,i.slice(1))}}))}},{key:"createMaterial",value:function(t){this.current=t,this.materials[this.current]={}}},{key:"addInfoToMaterial",value:function(t,e){var i="";switch(t){case"Ka":i="ambiant";break;case"Kd":i="diffuse";break;case"Ks":i="specular";break;case"Ke":i="emissive";break;case"Ns":i="specDensity";break;case"d":i="opacity"}""!==i&&(this.materials[this.current][i]=e.map((function(t){return parseFloat(t,10)})))}},{key:"get",value:function(){return this.materials}}]),t}(),f=i(319),v=i.n(f),p=i(6479),g=i.n(p),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Uint8Array(256),k=0;k<y.length;k++)m[y.charCodeAt(k)]=k;var x=function(t,e,i,n,s){for(var r=new Float32Array(e),a=s||Float32Array.BYTES_PER_ELEMENT*n,o=0,h=0,u=0;u<i;u++){for(var c=0;c<n;c++){var l=o+c*Float32Array.BYTES_PER_ELEMENT;r[h]=t.getFloat32(l,!0),h++}o+=a}return r},T=function(t,e,i,n,s){for(var r=new Uint16Array(e),a=s||Uint16Array.BYTES_PER_ELEMENT*n,o=0,h=0,u=0;u<i;u++){for(var c=0;c<n;c++){var l=o+c*Uint16Array.BYTES_PER_ELEMENT;r[h]=t.getUint16(l,!0),h++}o+=a}return r},b=i(8983);function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){h()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var w="SCALAR",R="VEC2",M="VEC3",A="VEC4",O="MAT2",S="MAT3",D="MAT4",j=function(t){switch(t){default:case w:return 1;case R:return 2;case M:return 3;case A:case O:return 4;case S:return 9;case D:return 16}},F=function(t,e,i){var n=i.bufferView,s=i.componentType,r=i.count,a=i.type,o=i.byteOffset,h=void 0===o?0:o,u=e[n],c=u.buffer,l=u.byteLength,d=u.byteOffset,f=void 0===d?0:d,v=u.byteStride,p=new DataView(t[c],f+h,l-h),g=j(a),y=function(t,e){return j(t)*e}(a,r),m=function(t){switch(t){case 5123:return T;case 5126:return x;case 5120:case 5121:case 5122:case 5125:default:return null}}(s);return m?m(p,y,r,g,v):null},z=function(t,e){var i=e.buffer,n=e.byteOffset,s=e.byteLength;return function(t,e){for(var i=new Uint8Array(e),n=0;n<e;n++)i[n]=t.getUint8(n,!0);return i}(new DataView(t[i],n,s),s)},N=function(t){switch(t){case"normal":return"normale";case"texcoord_0":return"texture";case"baseColorFactor":return"color";case"metallicFactor":return"metal";case"roughnessFactor":return"rough";case"joints_0":return"joint";case"weights_0":return"weight";default:return t}},_=["position","normale","texture","joint","weight","tangent"],I=function(t,e){var i,n={};if(t&&(n=E(E({},(i=t.pbrMetallicRoughness,Object.keys(i).reduce((function(t,e){var n=N(e);return E(E({},t),{},h()({},n,i[e]))}),[]))),{},{name:t.name}),t.normalTexture)){var s=e[t.normalTexture.index];n.normalMap=s||void 0}return Object.keys(n).length>0?n:void 0},C=function(t,e){return t.map((function(t){var i=t.attributes,n=t.indices,s=t.material,r=t.targets,a={vbos:function(t,e,i,n){var s=e[i],r={indices:E(E({},s),{},{size:j(s.type)})},a=n&&n.map((function(t){return Object.keys(t).reduce((function(i,n){var s=e[t[n]];return E(E({},i),{},h()({},n,E(E({},s),{},{size:j(s.type)})))}),{})}));return a&&(a=a.reduce((function(t,e,i){var n=Object.keys(e).reduce((function(t,n){var s=N(n.toLowerCase());return E(E({},t),{},h()({},"target".concat(s).concat(i),e[n]))}),{});return E(E({},t),n)}),{}),r=E(E({},a),r)),Object.keys(t).reduce((function(i,n){var s=N(n.toLowerCase());if(-1===_.indexOf(s))return i;var r=t[n],a=e[r];return E(E({},i),{},h()({},s,E(E({},a),{},{size:j(a.type)})))}),r)}(i,e,n,r)};return void 0!==s&&(a=E({material:s},a)),a}))},U=function t(e,i){return e.map((function(e){var n=i.findIndex((function(t){return t.id===e})),s=i.splice(n,1)[0];s.children&&(s.children=t(s.children,i));s.id;return g()(s,["id"])}))},Z=function t(e,i){var n=e.children;if(n){var s=n.map((function(e){return t(i[e],i)}));return E(E({},e),{},{children:s})}return e},X=function(t){var e={};return t.forEach((function(t){var i=t.children;return i&&i.forEach((function(t){e[t]=!0}))})),t.map((function(e){return Z(e,t)})).filter((function(t,i){return void 0===e[i]}))},L=function t(e){return e.reduce((function(e,i){var n=i.name,s=i.children;return e[n]=i,s&&t(s),e}),{})},V=function(){function t(e){s()(this,t);var i=JSON.parse(e),n=i.animations,r=i.buffers,a=i.bufferViews,o=i.accessors,h=i.skins,u=i.nodes,c=i.meshes,l=i.materials,d=i.images,f=r&&r.map((function(t){return function(t){var e,i,n,s,r,a=t.split(",")[1],o=.75*a.length,h=a.length,u=0;"="===a[a.length-1]&&(o--,"="===a[a.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(e=0;e<h;e+=4)i=m[a.charCodeAt(e)],n=m[a.charCodeAt(e+1)],s=m[a.charCodeAt(e+2)],r=m[a.charCodeAt(e+3)],l[u++]=i<<2|n>>4,l[u++]=(15&n)<<4|s>>2,l[u++]=(3&s)<<6|63&r;return c}(t.uri)})),p=o&&o.map((function(t){return E(E({},t),{},{values:F(f,a,t)})})),y=function(t,e,i,n){var s={};return t&&t.forEach((function(t){var r=t.channels,a=t.samplers;r.forEach((function(t){var r=t.target,o=t.sampler,h=a[o],u=h.input,c=h.output,l=h.interpolation,d=i[u],f=i[c],p=r.node,g=r.path,y=e[p],m=j(f.type);y[g]?m=y[g].length:y.mesh&&n[y.mesh][g]?m=n[y.mesh][g].length:"scale"===g&&(m=3);var k=(0,b.chunkArray)(f.values,m),x={path:g,times:d.values,output:k,interpolation:l};s[p]=s[p]?[].concat(v()(s[p]),[x]):[x]}))})),s}(n,u,p,c);Object.keys(y).forEach((function(t){u[t].animations=y[t]}));var k=function(t,e,i){var n=null;if(t){var s=e.map((function(t,e){return E(E({},t),{},{id:e})}));n=t.map((function(t){var e=t.inverseBindMatrices,n=t.joints,r=[];if(e){var a=i[e].values;r=(0,b.chunkArray)(a,16)}if(n){for(var o=n.map((function(t,e){return E(E({},s[t]),{},{invMatrix:r[e]})})).slice(),h=[];0!==o.length;){var u=o.shift();u.children&&(u.children=U(u.children,o)),u.id;var c=g()(u,["id"]);h.push(c)}return{joints:h}}return null})).filter((function(t){return t}))}return n}(h,u,p),x=c.map((function(t){var e=t.primitives,i=t.weights,n={primitives:C(e,p)};return i&&(n=E({weights:i},n)),n})),T=function(t,e,i,n){return t?t.map((function(t){var e=t.bufferView,s=t.mimeType,r=t.name,a=n[e];return{mimeType:s,name:r,data:z(i,a)}})):null}(d,0,f,a),P=l&&l.map((function(t){return I(t,T)})),w=X(u);w=L(w),this.data={},x&&(this.data.meshes=x),w&&(this.data.nodes=w),k&&(this.data.skins=k),P&&(this.data.materials=P)}return a()(t,[{key:"get",value:function(){return this.data}}]),t}(),B=function(){function t(){s()(this,t),this.assets={textures:{},objets:{},materials:{},levels:{},gltfs:{},sounds:{}}}return a()(t,[{key:"get",value:function(e){var i=this,n=e.map((function(e){var i=t.getInfo(e);switch(i.ext){case"jpg":case"jpeg":case"png":case"bmp":return t.loadImage(e,i);case"obj":return t.load3dObj(e,i);case"gltf":return t.load3dGltf(e,i);case"mtl":return t.loadMaterial(e,i);case"mp3":return t.loadSound(e,i);default:return null}}));return Promise.all(n).then((function(t){return t.forEach((function(t){switch(t.info.ext){case"jpg":case"jpeg":case"png":i.assets.textures[t.info.name]=t.data;break;case"bmp":i.assets.levels[t.info.name]=t.data;break;case"obj":i.assets.objets[t.info.name]=t.data;break;case"gltf":i.assets.gltfs[t.info.name]=t.data;break;case"mtl":i.assets.materials[t.info.name]=t.data;break;case"mp3":i.assets.sounds[t.info.name]=t.data}})),i.assets}))}}],[{key:"getInfo",value:function(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(".");return{name:e[0],ext:e[1].toLowerCase()}}},{key:"loadMaterial",value:function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new d(t).get(),info:e}}))}},{key:"loadImage",value:function(t,e){return new Promise((function(i,n){var s=new Image;s.onload=function(){return i({data:s,info:e})},s.onerror=n,s.src=t}))}},{key:"loadSound",value:function(t,e){return fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return{data:t,info:e}}))}}]),t}();h()(B,"load3dObj",(function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new l(t).get(),info:e}}))})),h()(B,"load3dGltf",(function(t,e){return fetch(t).then((function(t){return t.text()})).then((function(t){return{data:new V(t).get(),info:e}}))}))},7071:(t,e,i)=>{"use strict";i(34575),i(93913)},79475:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(25773);const h=function(){function t(){s()(this,t),this.d=new Array(9),this.sauvegardePrecedente=[],this.empilement=0,this.init()}return a()(t,[{key:"init",value:function(){for(var t=0;t<9;t+=1)this.d[t]=0;return this.sauvegardePrecedente=[],this.empilement=0,this}},{key:"get",value:function(){return this.d}},{key:"set",value:function(t,e,i,n,s,r,a,o,h){return this.d[0]=t,this.d[1]=e,this.d[2]=i,this.d[3]=n,this.d[4]=s,this.d[5]=r,this.d[6]=a,this.d[7]=o,this.d[8]=h,this}},{key:"setFromArray",value:function(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}},{key:"setOneValue",value:function(t){for(var e=0;e<9;e+=1)this.d[e]=t[e]}},{key:"multiply",value:function(e){for(var i=new t,n=0;n<3;n+=1)for(var s=0;s<3;s+=1)for(var r=0;r<3;r+=1)i.d[3*s+n]+=this.d[3*s+r]*e.d[3*r+n];for(var a=0;a<9;a+=1)this.d[a]=i.d[a];return this}},{key:"equal",value:function(t){for(var e=0;e<9;e+=1)this.d[e]=t.d[e],this.sauvegardePrecedente[e]=t.sauvegardePrecedente[e];return this}},{key:"push",value:function(){this.empilement+=1;for(var t=0,e=9*(this.empilement-1);e<9*this.empilement;e+=1)this.sauvegardePrecedente[e]=this.d[t],t+=1;return this}},{key:"pop",value:function(){if(this.empilement>0){for(var t=0,e=9*(this.empilement-1);e<9*this.empilement;e+=1)this.d[t]=this.sauvegardePrecedente[e],this.sauvegardePrecedente[e]=null,t+=1;this.empilement-=1}return this}},{key:"identity",value:function(){return this.init(),this.d[0]=1,this.d[4]=1,this.d[8]=1,this}},{key:"transpose",value:function(){return this.setFromArray(t.transpose(this.d))}},{key:"inverse",value:function(){var t=new Array(9),e=this.getDeterminant();if(0===e)return this.identity(),null;t[0]=this.d[4]*this.d[8]-this.d[5]*this.d[7]/e,t[1]=-(this.d[1]*this.d[8]-this.d[7]*this.d[2])/e,t[2]=this.d[1]*this.d[5]-this.d[4]*this.d[2]/e,t[3]=-(this.d[3]*this.d[8]-this.d[5]*this.d[6])/e,t[4]=this.d[0]*this.d[8]-this.d[6]*this.d[2]/e,t[5]=-(this.d[0]*this.d[5]-this.d[3]*this.d[2])/e,t[6]=this.d[3]*this.d[7]-this.d[6]*this.d[4]/e,t[7]=-(this.d[0]*this.d[7]-this.d[6]*this.d[1])/e,t[8]=this.d[0]*this.d[4]-this.d[1]*this.d[3]/e;for(var i=0;i<9;i+=1)this.d[i]=t[i];return this}},{key:"getDeterminant",value:function(){return this.d[0]*(this.d[4]*this.d[8]-this.d[7]*this.d[5])+this.d[1]*(this.d[5]*this.d[6]-this.d[3]*this.d[8])+this.d[2]*(this.d[3]*this.d[7]-this.d[6]*this.d[4])}},{key:"rotate",value:function(e,i,n,s){var r=new t,a=e*(Math.PI/180),h=new o.Z(i,n,s);return h.normalise(),r.d[0]=h.x*h.x*(1-Math.cos(a))+Math.cos(a),r.d[1]=h.x*h.y*(1-Math.cos(a))-h.z*Math.sin(a),r.d[2]=h.x*h.z*(1-Math.cos(a))+h.y*Math.sin(a),r.d[3]=h.x*h.y*(1-Math.cos(a))+h.z*Math.sin(a),r.d[4]=h.y*h.y*(1-Math.cos(a))+Math.cos(a),r.d[5]=h.y*h.z*(1-Math.cos(a))-h.x*Math.sin(a),r.d[6]=h.x*h.z*(1-Math.cos(a))-h.y*Math.sin(a),r.d[7]=h.y*h.z*(1-Math.cos(a))+h.x*Math.sin(a),r.d[8]=h.z*h.z*(1-Math.cos(a))+Math.cos(a),this.multiply(r),this}}],[{key:"transpose",value:function(t){for(var e=new Float32Array(9),i=0,n=0;n<3;n+=1)for(var s=0;s<3;s+=1)e[i]=t[3*s+n],i+=1;return e}}]),t}()},21969:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(39966),h=i(25773),u=i(79475);const c=function(){function t(){s()(this,t),this.d=new Array(16),this.sauvegardePrecedente=[],this.empilement=0,this.init()}return a()(t,[{key:"init",value:function(){return this.reset(),this.sauvegardePrecedente=[],this.empilement=0,this}},{key:"reset",value:function(){for(var t=0;t<16;t+=1)this.d[t]=0;return this}},{key:"get",value:function(){return this.d}},{key:"setRaw",value:function(t){this.d=t}},{key:"set",value:function(t,e,i,n,s,r,a,o,h,u,c,l,d,f,v,p){return this.d[0]=t,this.d[1]=e,this.d[2]=i,this.d[3]=n,this.d[4]=s,this.d[5]=r,this.d[6]=a,this.d[7]=o,this.d[8]=h,this.d[9]=u,this.d[10]=c,this.d[11]=l,this.d[12]=d,this.d[13]=f,this.d[14]=v,this.d[15]=p,this}},{key:"setFromArray",value:function(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},{key:"getMatrice3x3",value:function(){var t=new u.Z;return t.set(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10]),t}},{key:"multiplyArray",value:function(e){var i=new t;return i.setFromArray(e),this.multiply(i)}},{key:"multiply",value:function(e){for(var i=new t,n=0;n<4;n+=1)for(var s=0;s<4;s+=1)for(var r=0;r<4;r+=1)i.d[4*s+n]+=this.d[4*s+r]*e.d[4*r+n];return this.d=i.d,this}},{key:"equal",value:function(t){for(var e=0;e<16;e+=1)this.d[e]=t.d[e],this.sauvegardePrecedente[e]=t.sauvegardePrecedente[e];return this}},{key:"push",value:function(){this.empilement+=1;for(var t=0,e=16*(this.empilement-1);e<16*this.empilement;e+=1)this.sauvegardePrecedente[e]=this.d[t],t+=1;return this}},{key:"pop",value:function(){if(this.empilement>0){for(var t=0,e=16*(this.empilement-1);e<16*this.empilement;e+=1)this.d[t]=this.sauvegardePrecedente[e],this.sauvegardePrecedente[e]=null,t+=1;this.empilement-=1}return this}},{key:"translate",value:function(e,i,n){var s=new t;return s.identity(),s.d[12]=e,s.d[13]=i,s.d[14]=n,this.multiply(s),this}},{key:"scale",value:function(e,i,n){var s=new t;return s.d[0]=e,s.d[5]=void 0===i?e:i,s.d[10]=void 0===n?e:n,s.d[15]=1,this.multiply(s),this}},{key:"resetScale",value:function(){return this.d[0]=1,this.d[5]=1,this.d[10]=1,this}},{key:"resetTranslate",value:function(){return this.d[12]=0,this.d[13]=0,this.d[14]=0,this}},{key:"rotate",value:function(e,i,n,s){var r=new t,a=e*(Math.PI/180),o=new h.Z(i,n,s);return o.normalise(),r.d[0]=o.d[0]*o.d[0]*(1-Math.cos(a))+Math.cos(a),r.d[1]=o.d[0]*o.d[1]*(1-Math.cos(a))-o.d[2]*Math.sin(a),r.d[2]=o.d[0]*o.d[2]*(1-Math.cos(a))+o.d[1]*Math.sin(a),r.d[4]=o.d[0]*o.d[1]*(1-Math.cos(a))+o.d[2]*Math.sin(a),r.d[5]=o.d[1]*o.d[1]*(1-Math.cos(a))+Math.cos(a),r.d[6]=o.d[1]*o.d[2]*(1-Math.cos(a))-o.d[0]*Math.sin(a),r.d[8]=o.d[0]*o.d[2]*(1-Math.cos(a))-o.d[1]*Math.sin(a),r.d[9]=o.d[1]*o.d[2]*(1-Math.cos(a))+o.d[0]*Math.sin(a),r.d[10]=o.d[2]*o.d[2]*(1-Math.cos(a))+Math.cos(a),r.d[15]=1,this.multiply(r),this}},{key:"identity",value:function(){return this.init(),this.d[0]=1,this.d[5]=1,this.d[10]=1,this.d[15]=1,this}},{key:"perspective",value:function(t,e,i,n){var s=t*(Math.PI/180),r=1/Math.tan(s/2),a=1/(i-n);return this.set(r/e,0,0,0,0,r,0,0,0,0,(i+n)*a,-1,0,0,i*n*a*2,0),this}},{key:"ortho",value:function(t,e,i,n,s,r){return this.set(2/(e-t),0,0,0,0,2/(n-i),0,0,0,0,-2/(r-s),0,-(e+t)/(e-t),-(n+i)/(n-i),-(r+s)/(r-s),1),this}},{key:"lookAt",value:function(t,e,i,n,s,r,a,h,u){var c,l,d,f,v,p,g,y,m,k,x=t,T=e,b=i,P=a,E=h,w=u,R=n,M=s,A=r;return Math.abs(x-R)<o.I&&Math.abs(T-M)<o.I&&Math.abs(b-A)<o.I?(this.identity(),this):(g=x-R,y=T-M,m=b-A,c=E*(m*=k=1/Math.sqrt(g*g+y*y+m*m))-w*(y*=k),l=w*(g*=k)-P*m,d=P*y-E*g,(k=Math.sqrt(c*c+l*l+d*d))?(c*=k=1/k,l*=k,d*=k):(c=0,l=0,d=0),f=y*d-m*l,v=m*c-g*d,p=g*l-y*c,(k=Math.sqrt(f*f+v*v+p*p))?(f*=k=1/k,v*=k,p*=k):(f=0,v=0,p=0),this.set(c,f,g,0,l,v,y,0,d,p,m,0,-(c*x+l*T+d*b),-(f*x+v*T+p*b),-(g*x+y*T+m*b),1),this)}},{key:"transpose",value:function(){return this.setFromArray(t.transpose(this.d))}},{key:"inverse",value:function(){var e=t.getCofacteur(this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15]),i=t.getCofacteur(this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15]),n=t.getCofacteur(this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15]),s=t.getCofacteur(this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14]),r=this.d[0]*e-this.d[1]*i+this.d[2]*n-this.d[3]*s,a=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15]),o=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15]),h=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15]),u=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14]),c=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[5],this.d[6],this.d[7],this.d[13],this.d[14],this.d[15]),l=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[4],this.d[6],this.d[7],this.d[12],this.d[14],this.d[15]),d=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[4],this.d[5],this.d[7],this.d[12],this.d[13],this.d[15]),f=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[12],this.d[13],this.d[14]),v=t.getCofacteur(this.d[1],this.d[2],this.d[3],this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11]),p=t.getCofacteur(this.d[0],this.d[2],this.d[3],this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11]),g=t.getCofacteur(this.d[0],this.d[1],this.d[3],this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11]),y=t.getCofacteur(this.d[0],this.d[1],this.d[2],this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10]),m=1/r;return this.d[0]=m*e,this.d[1]=-m*a,this.d[2]=m*c,this.d[3]=-m*v,this.d[4]=-m*i,this.d[5]=m*o,this.d[6]=-m*l,this.d[7]=m*p,this.d[8]=m*n,this.d[9]=-m*h,this.d[10]=m*d,this.d[11]=-m*g,this.d[12]=-m*s,this.d[13]=m*u,this.d[14]=-m*f,this.d[15]=m*y,this}},{key:"getDeterminant",value:function(){return this.d[0]*t.getCofacteur(this.d[5],this.d[6],this.d[7],this.d[9],this.d[10],this.d[11],this.d[13],this.d[14],this.d[15])-this.d[1]*t.getCofacteur(this.d[4],this.d[6],this.d[7],this.d[8],this.d[10],this.d[11],this.d[12],this.d[14],this.d[15])+this.d[2]*t.getCofacteur(this.d[4],this.d[5],this.d[7],this.d[8],this.d[9],this.d[11],this.d[12],this.d[13],this.d[15])-this.d[3]*t.getCofacteur(this.d[4],this.d[5],this.d[6],this.d[8],this.d[9],this.d[10],this.d[12],this.d[13],this.d[14])}}],[{key:"transpose",value:function(t){for(var e=new Float32Array(16),i=0,n=0;n<4;n+=1)for(var s=0;s<4;s+=1)e[i]=t[4*s+n],i+=1;return e}},{key:"getCofacteur",value:function(t,e,i,n,s,r,a,o,h){return t*(s*h-r*o)-e*(n*h-r*a)+i*(n*o-s*a)}}]),t}()},17968:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(63038),s=i.n(n),r=i(34575),a=i.n(r),o=i(93913),h=i.n(o),u=i(25773),c=i(21969),l=i(39966);const d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;a()(this,t),this.x=e,this.y=i,this.z=n,this.w=s}return h()(t,[{key:"set",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}},{key:"setFromAxeAndAngle",value:function(t,e){var i=s()(t,3),n=i[0],r=i[1],a=i[2];return this.x=n,this.y=r,this.z=a,this.w=e,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"approx",value:function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e&&Math.abs(this.w-t.w)<=e}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"multiplyArray",value:function(t){var e=this.x,i=this.y,n=this.z,s=this.w,r=t[0],a=t[1],o=t[2],h=t[3];return this.x=e*h+s*r+i*o-n*a,this.y=i*h+s*a+n*r-e*o,this.z=n*h+s*o+e*a-i*r,this.w=s*h-e*r-i*a-n*o,this}},{key:"multiply",value:function(t){var e=this.x,i=this.y,n=this.z,s=this.w,r=t.x,a=t.y,o=t.z,h=t.w;return this.x=e*h+s*r+i*o-n*a,this.y=i*h+s*a+n*r-e*o,this.z=n*h+s*o+e*a-i*r,this.w=s*h-e*r-i*a-n*o,this}},{key:"multiplyVector",value:function(t){var e=this.w*t.x+this.y*t.z-this.z*t.y,i=this.w*t.y+this.z*t.x-this.x*t.z,n=this.w*t.z+this.x*t.y-this.y*t.x,s=-this.x*t.x-this.y*t.y-this.z*t.z,r=e*this.w+s*-this.x+i*-this.z-n*-this.y,a=i*this.w+s*-this.y+n*-this.x-e*-this.z,o=n*this.w+s*-this.z+e*-this.y-i*-this.x;return new u.Z(r,a,o)}},{key:"normalize",value:function(){var t=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;return 0!==t&&1!==t&&(t=1/Math.sqrt(t),this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:"rotateX",value:function(t){var e=.5*t,i=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=i*o+r*a,this.y=n*o+s*a,this.z=s*o-n*a,this.w=r*o-i*a,this}},{key:"rotateY",value:function(t){var e=.5*t,i=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=i*o-s*a,this.y=n*o+r*a,this.z=s*o+i*a,this.w=r*o-n*a,this}},{key:"rotateZ",value:function(t){var e=.5*t,i=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(e),o=Math.cos(e);return this.x=i*o+n*a,this.y=n*o-i*a,this.z=s*o+r*a,this.w=r*o-s*a,this}},{key:"scale",value:function(t){var e=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;return 0===e?this:1===e?(this.x*=t,this.y*=t,this.z*=t,this.w*=t,this):(e=t/Math.sqrt(e),this.x*=e,this.y*=e,this.z*=e,this.w*=e,this)}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"slerp",value:function(t,e,i){var n,s,r,a,o,h=t.x,u=t.y,c=t.z,d=t.w,f=e.x,v=e.y,p=e.z,g=e.w;return(s=h*f+u*v+c*p+d*g)<0&&(s=-s,f=-f,v=-v,p=-p,g=-g),1-s>l.I?(n=Math.acos(s),r=Math.sin(n),a=Math.sin((1-i)*n)/r,o=Math.sin(i*n)/r):(a=1-i,o=i),this.x=a*h+o*f,this.y=a*u+o*v,this.z=a*c+o*p,this.w=a*d+o*g,this}},{key:"toMatrix4",value:function(){var t=this.w*this.w,e=this.x*this.x,i=this.y*this.y,n=this.z*this.z,s=1/(e+i+n+t),r=(e-i-n+t)*s,a=(-e+i-n+t)*s,o=(-e-i+n+t)*s,h=this.x*this.y,u=this.z*this.w,l=2*(h+u)*s,d=2*(h-u)*s,f=2*((h=this.x*this.z)-(u=this.y*this.w))*s,v=2*(h+u)*s,p=2*((h=this.y*this.z)+(u=this.x*this.w))*s,g=2*(h-u)*s;return(new c.Z).set(r,l,f,0,d,a,p,0,v,g,o,0,0,0,0,1)}},{key:"setFromMat3",value:function(t){var e=t.get(),i=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],h=e[6],u=e[7],c=e[8];return this.w=.5*Math.sqrt(Math.max(0,1+i+a+c)),this.x=.5*Math.sqrt(Math.max(0,1+i-a-c)),this.y=.5*Math.sqrt(Math.max(0,1-i+a-c)),this.z=.5*Math.sqrt(Math.max(0,1-i-a+c)),this.x*=Math.sign(o-u),this.y*=Math.sign(h-s),this.z*=Math.sign(n-r),this}},{key:"get",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return this.z}},{key:"getW",value:function(){return this.w}}],[{key:"slerpArray",value:function(e,i,n){var s=new t(e[0],e[1],e[2],e[3]),r=new t(i[0],i[1],i[2],i[3]);return new t(0,0,0,1).slerp(s,r,n)}}]),t}()},29686:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(59713),h=i.n(o),u=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LINEAR",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;s()(this,t),h()(this,"findIndex",(function(t){var e=0,n=i.timeSteps[e];for(0===n&&(e++,n=i.timeSteps[e]);n&&t>n;)e++,n=i.timeSteps[e];i.index=e})),h()(this,"setTimes",(function(t){i.timeSteps=i.times.map((function(e){return e*t})),i.index=0,i.interpolationValue=0})),this.times=e,this.setTimes(r),this.interpolationType=n}return a()(t,[{key:"update",value:function(t){if(this.findIndex(t),0===this.index)this.interpolationValue=0;else if(this.index===this.times.length)this.interpolationValue=this.timeSteps[this.times.length-1];else{var e=this.timeSteps[this.index],i=this.timeSteps[this.index-1];this.interpolationValue=(t-i)/(e-i)}}},{key:"setSpeed",value:function(t){this.setTimes(t)}},{key:"getIndex",value:function(){return this.index}},{key:"get",value:function(){return this.interpolationValue}}]),t}()},47313:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04;s()(this,t),this.value=e,this.target=e,this.sampling=i,this.threshold=1e-6}return a()(t,[{key:"update",value:function(){Math.abs(this.value-this.target)>this.threshold?this.value+=(this.target-this.value)*this.sampling:this.value=this.target}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t){this.target=t}},{key:"setDirect",value:function(t){this.value=t}}]),t}()},25773:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(68763);const h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s()(this,t),this.d=[0,0,0],this.set(e,i,n)}return a()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"set",value:function(t,e,i){return null!==t&&(this.d[0]=t),null!==e?this.d[1]=e:null!==t&&(this.d[1]=t),null!==i?this.d[2]=i:null!==t&&(this.d[2]=t),this}},{key:"setX",value:function(t){this.d[0]=t}},{key:"setY",value:function(t){this.d[1]=t}},{key:"setZ",value:function(t){this.d[2]=t}},{key:"addXYZ",value:function(t,e,i){return this.d[0]+=t,this.d[1]+=e,this.d[2]+=i,this}},{key:"addX",value:function(t){return this.d[0]+=t,this}},{key:"addY",value:function(t){return this.d[1]+=t,this}},{key:"addZ",value:function(t){return this.d[2]+=t,this}},{key:"multiplyX",value:function(t){return this.d[0]*=t,this}},{key:"multiplyY",value:function(t){return this.d[1]*=t,this}},{key:"multiplyZ",value:function(t){return this.d[2]*=t,this}},{key:"limiter",value:function(t){var e=this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2];if(e>t*t&&e>0){var i=t/Math.sqrt(e);this.d[0]*=i,this.d[1]*=i,this.d[2]*=i}return this}},{key:"cross",value:function(e){return new t(this.d[1]*e.d[2]-this.d[2]*e.d[1],this.d[2]*e.d[0]-this.d[0]*e.d[2],this.d[0]*e.d[1]-this.d[1]*e.d[0])}},{key:"dot",value:function(t){return this.d[0]*t.d[0]+this.d[1]*t.d[1]+this.d[2]*t.d[2]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2])}},{key:"directionVers",value:function(t){return this.d[0]=t.d[0]-this.d[0],this.d[1]=t.d[1]-this.d[1],this.d[2]=t.d[2]-this.d[2],this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this}},{key:"multiplyMatrix",value:function(t){return this.set(t.d[0]*this.d[0]+t.d[1]*this.d[1]+t.d[2]*this.d[2],t.d[3]*this.d[0]+t.d[4]*this.d[1]+t.d[5]*this.d[2],t.d[6]*this.d[0]+t.d[7]*this.d[1]+t.d[8]*this.d[2]),this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this}},{key:"fract",value:function(){return this.d[0]=(0,o.ZI)(this.d[0]),this.d[1]=(0,o.ZI)(this.d[1]),this.d[2]=(0,o.ZI)(this.d[2]),this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2]))}},{key:"angleDegree",value:function(t){var e=this.dot(t)/(this.length()*t.length());return 180*Math.acos(e)/Math.PI*-(0,o.mK)(this.d[0]*t.d[1]+this.d[1]*t.d[0])}},{key:"computeNormal",value:function(e,i,n){var s=new t,r=new t,a=new t;return r.equal(e.minus(this)),a.equal(i.minus(this)),n?s.equal(a.cross(r)):s.equal(r.cross(a)),s.normalise(),s}}],[{key:"getBarycentre",value:function(t,e,i,n){var s=(e.d[2]-i.d[2])*(t.d[0]-i.d[0])+(i.d[0]-e.d[0])*(t.d[2]-i.d[2]),r=((e.d[2]-i.d[2])*(n[0]-i.d[0])+(i.d[0]-e.d[0])*(n[1]-i.d[2]))/s,a=((i.d[2]-t.d[2])*(n[0]-i.d[0])+(t.d[0]-i.d[0])*(n[1]-i.d[2]))/s,o=1-r-a;return r*t.d[1]+a*e.d[1]+o*i.d[1]}},{key:"lerp",value:function(e,i,n){var s=e.d[0],r=e.d[1],a=e.d[2];return new t(s+n*(i.d[0]-s),r+n*(i.d[1]-r),a+n*(i.d[2]-a))}}]),t}()},66605:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r);const o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s()(this,t),this.d=[0,0,0,0],this.set(e,i,n,r)}return a()(t,[{key:"normalise",value:function(){var t=this.length();return 0!==t&&(this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t),this}},{key:"get",value:function(){return this.d}},{key:"getX",value:function(){return this.d[0]}},{key:"getY",value:function(){return this.d[1]}},{key:"getZ",value:function(){return this.d[2]}},{key:"getW",value:function(){return this.d[3]}},{key:"length",value:function(){return Math.sqrt(this.d[0]*this.d[0]+this.d[1]*this.d[1]+this.d[2]*this.d[2]+this.d[3]*this.d[3])}},{key:"set",value:function(t,e,i,n){return null!=t&&(this.d[0]=t),null!=e?this.d[1]=e:null!=t&&(this.d[1]=t),null!=i?this.d[2]=i:null!=t&&(this.d[2]=t),null!=n?this.d[3]=n:null!=t&&(this.d[3]=t),this}},{key:"equal",value:function(t){return this.d=[t.d[0],t.d[1],t.d[2],t.d[3]],this}},{key:"add",value:function(t){return this.d[0]+=t.d[0],this.d[1]+=t.d[1],this.d[2]+=t.d[2],this.d[3]+=t.d[3],this}},{key:"addNumber",value:function(t){return this.d[0]+=t,this.d[1]+=t,this.d[2]+=t,this.d[3]+=t,this}},{key:"minus",value:function(t){return this.d[0]-=t.d[0],this.d[1]-=t.d[1],this.d[2]-=t.d[2],this.d[3]-=t.d[3],this}},{key:"minusNumber",value:function(t){return this.d[0]-=t,this.d[1]-=t,this.d[2]-=t,this.d[3]-=t,this}},{key:"multiplyNumber",value:function(t){return this.d[0]*=t,this.d[1]*=t,this.d[2]*=t,this.d[3]*=t,this}},{key:"multiplyMatrix",value:function(t){var e=this.d[0],i=this.d[1],n=this.d[2],s=this.d[3];return this.d[0]=t.d[0]*e+t.d[4]*i+t.d[8]*n+t.d[12]*s,this.d[1]=t.d[1]*e+t.d[5]*i+t.d[9]*n+t.d[13]*s,this.d[2]=t.d[2]*e+t.d[6]*i+t.d[10]*n+t.d[14]*s,this.d[3]=t.d[3]*e+t.d[7]*i+t.d[11]*n+t.d[15]*s,this}},{key:"multiply",value:function(t){return this.d[0]*=t.d[0],this.d[1]*=t.d[1],this.d[2]*=t.d[2],this.d[3]*=t.d[3],this}},{key:"divideNumber",value:function(t){return this.d[0]/=t,this.d[1]/=t,this.d[2]/=t,this.d[3]/=t,this}},{key:"divide",value:function(t){return this.d[0]/=t.d[0],this.d[1]/=t.d[1],this.d[2]/=t.d[2],this.d[3]/=t.d[3],this}},{key:"distance",value:function(t){return Math.sqrt((t.d[0]-this.d[0])*(t.d[0]-this.d[0])+(t.d[1]-this.d[1])*(t.d[1]-this.d[1])+(t.d[2]-this.d[2])*(t.d[2]-this.d[2])+(t.d[3]-this.d[3])*(t.d[3]-this.d[3]))}}]),t}()},22322:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(21969),h=function(){function t(){s()(this,t),this.model=new o.Z,this.model.identity(),this.selected=!1}return a()(t,[{key:"setProgram",value:function(t){t.setMatrix("model",this.model.get())}},{key:"setProgramSpecifics",value:function(t){t.setInt("selected",this.selected),t.setVector("color",[1,1,1,1])}},{key:"render",value:function(t,e){this.setProgram(e),this.setProgramSpecifics(e),t.enable(e.get()),t.render(e.get())}},{key:"renderColor",value:function(t,e){this.setProgram(e),e.setInt("selected",this.selected),e.setVector("color",[1,1,1,1]),t.enable(e.get()),t.render(e.get())}},{key:"update",value:function(){this.model.identity()}},{key:"setDraggingInfos",value:function(t){this.angle.x.addToSpeed(.1*t.relPrevious.x),this.angle.y.addToSpeed(-.1*t.relPrevious.y)}},{key:"setSelected",value:function(t){this.selected=255===t[0]&&255===t[1]&&255===t[2],this.size.set(this.selected?1.1:1)}},{key:"setLightPos",value:function(t){this.lightPos=t}},{key:"reset",value:function(){this.model.identity()}},{key:"setRotate",value:function(t,e,i,n){this.model.rotate(t,e,i,n)}},{key:"setTranslate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.model.translate(t,e,i)}},{key:"setScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.model.scale(t,e,i)}}]),t}()},65510:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(2205),h=i.n(o),u=i(78585),c=i.n(u),l=i(29754),d=i.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}var v=function(t){h()(i,t);var e=f(i);function i(){var t;return s()(this,i),(t=e.call(this)).color=[255,255,255,1],t}return a()(i,[{key:"render",value:function(t,e){this.setProgram(e),e.setInt("selected",this.selected),e.setVector("color",[this.color[0]/255,this.color[1]/255,this.color[2]/255,this.color[3]]),t.enable(e.get()),t.render(e.get())}},{key:"setColor",value:function(t,e,i,n){this.color=[t,e,i,n]}}]),i}(i(22322).Z)},548:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(80602),h=i(21969);const u={position:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],texture:[1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]};var c=function(){function t(e){s()(this,t),this.gl=e,this.objet=new o.Z(this.gl,u),this.model=new h.Z,this.model.identity()}return a()(t,[{key:"render",value:function(t){t.setMatrix("model",this.model.get()),this.objet.render(t.get())}},{key:"update",value:function(t,e){this.model.identity().scale(e.getX(),e.getY(),e.getZ()).translate(t.getX(),t.getY(),t.getZ())}},{key:"getModel",value:function(){return this.model}}]),t}()},97882:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(2205),h=i.n(o),u=i(78585),c=i.n(u),l=i(29754),d=i.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}var v=function(t){h()(i,t);var e=f(i);function i(){var t;return s()(this,i),(t=e.call(this)).sprite={x:0,y:0,texW:1,texH:1,w:1,h:1},t.tint=[1,1,1],t.inverseColor=!1,t}return a()(i,[{key:"setProgramSpecifics",value:function(t){t.setVector("spriteUV",[this.sprite.x,this.sprite.y]),t.setVector("spriteGrid",[this.sprite.texW,this.sprite.texH]),t.setVector("spriteSize",[this.sprite.w,this.sprite.h]),t.setVector("spritePivot",[this.sprite.px,this.sprite.py]),t.setFloat("spriteRefSize",this.sprite.refSize),t.setVector("tint",this.tint),t.setInt("inverseColor",this.inverseColor?1:0)}},{key:"setTint",value:function(t,e,i){this.tint=[t,e,i]}},{key:"setInverseColor",value:function(t){this.inverseColor=t}},{key:"setSprite",value:function(t){this.sprite=t}}]),i}(i(22322).Z)},46566:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(2205),h=i.n(o),u=i(78585),c=i.n(u),l=i(29754),d=i.n(l),f=i(22322),v=i(79475);function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}var y=function(t){h()(i,t);var e=g(i);function i(){var t;return s()(this,i),(t=e.call(this)).sprite={x:0,y:0,texW:1,texH:1,w:1,h:1},t}return a()(i,[{key:"setProgramSpecifics",value:function(t){t.setVector("spriteUV",[this.sprite.x,this.sprite.y]),t.setVector("spriteGrid",[this.sprite.texW,this.sprite.texH]),t.setVector("spriteSize",[this.sprite.w,this.sprite.h]),t.setFloat("spriteRefSize",this.sprite.refSize)}},{key:"setSprite",value:function(t){this.sprite=t}}]),i}(function(t){h()(i,t);var e=p(i);function i(){var t;return s()(this,i),(t=e.call(this)).normalMatrix=new v.Z,t}return a()(i,[{key:"setNormalMatrix",value:function(t){this.normalMatrix.equal(this.model.getMatrice3x3()),this.normalMatrix.inverse(),this.normalMatrix.transpose(),t.setMatrix("normalMatrix",this.normalMatrix.get())}}]),i}(f.Z))},31073:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={position:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],indices:[0,1,2,1,3,2],texture:[0,0,1,0,0,1,1,1]}},20748:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Q});var n=i(59713),s=i.n(n),r=i(34575),a=i.n(r),o=i(93913),h=i.n(o),u=function(){function t(e,i,n){a()(this,t),this.gl=e,this.texture=e.createTexture(),this.filter=n?e[n]:e.NEAREST,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}return h()(t,[{key:"get",value:function(){return this.texture}}]),t}(),c=function(){function t(e,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,t),this.textures={},Object.keys(i).forEach((function(t){n.textures[t]=new u(e,i[t],s[t])}))}return h()(t,[{key:"get",value:function(t){return this.textures[t]}}]),t}(),l=i(70751),d=function(){function t(e,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a()(this,t),this.objets={},Object.keys(i).forEach((function(t){n.objets[t]=new l.Z(e,i[t],s&&s[t])}))}return h()(t,[{key:"get",value:function(t){return this.objets[t]}}]),t}(),f=i(77211),v=function(){function t(e,i,n){var r=this;a()(this,t),s()(this,"getAll",(function(){return r.programs})),this.programs={},Object.keys(i).forEach((function(t){var s=i[t];r.programs[t]=new f.Z(e,s),-1!==s.uniforms.indexOf("resolution")&&r.programs[t].setVector("resolution",[n.width,n.height])}))}return h()(t,[{key:"setCameraMatrix",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(this.programs).forEach((function(n){e.programs[n].setMatrix("view",t.getView().get());var s=i?t.getOrtho():t.getProjection();e.programs[n].setMatrix("projection",s.get())}))}},{key:"get",value:function(t){return this.programs[t]}}]),t}(),p=i(35918),g=i(14129),y=i(41517),m=function(){function t(e,i){var n=this;a()(this,t),s()(this,"hasAnimation",(function(t){var e=!1;return Object.keys(t).forEach((function(i){var n=t[i];!e&&n.animations&&(e=!0)})),e})),this.gltfs={},Object.keys(i).forEach((function(t){i[t].skins?n.gltfs[t]=new y.Z(e,i[t]):n.hasAnimation(i[t].nodes)?n.gltfs[t]=new g.Z(e,i[t]):n.gltfs[t]=new p.Z(e,i[t])}))}return h()(t,[{key:"get",value:function(t){return this.gltfs[t]}}]),t}(),k=i(1336),x=function(){function t(e){var i=this;a()(this,t),this.audios={},Object.keys(e).forEach((function(t){i.audios[t]=new k.Z(e[t])}))}return h()(t,[{key:"get",value:function(t){return this.audios[t]}}]),t}(),T=i(2205),b=i.n(T),P=i(78585),E=i.n(P),w=i(29754),R=i.n(w),M=i(77626),A=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a()(this,t),this.fbos=[],this.currentFbo=0;var r=null;this.fbos[0]=new M.Z(e,i,n,s,r,0),this.fbos[1]=new M.Z(e,i,n,s,r,1)}return h()(t,[{key:"start",value:function(){this.fbos[this.currentFbo].start()}},{key:"end",value:function(){this.fbos[this.currentFbo].end()}},{key:"swap",value:function(){this.currentFbo=0===this.currentFbo?1:0}},{key:"resize",value:function(t){this.fbos[0].resize(t),this.fbos[1].resize(t)}},{key:"getTexture",value:function(){return this.fbos[this.currentFbo].getTexture()}},{key:"getDepthTexture",value:function(){return this.fbos[this.currentFbo].getDepthTexture()}}]),t}(),O=i(21200),S=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;a()(this,t),this.gl=e;var s=i.width,r=void 0===s?1024:s,o=i.height,h=void 0===o?1024:o,u=i.useDepth,c=void 0!==u&&u;this.ppb=new A(e,r,h,c),this.screen=new O.Z(e),this.width=r,this.height=h,this.passCount=0,this.programs=n}return h()(t,[{key:"start",value:function(){this.ppb.start(),this.passCount=0}},{key:"end",value:function(){this.ppb.end()}},{key:"resize",value:function(t){this.ppb.resize(t)}},{key:"applyTexToProg",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null===e;this.passCount=i?this.passCount+1:0;var n=this.passCount+1,s=i?this.ppb.getTexture().get():e;return t.setTexture(n,s,"textureMap"),t.setFloat("flipY",-1),t}},{key:"setBrightContrast",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.applyTexToProg(this.programs.brightcontrast,i);n.setFloat("brightness",t),n.setFloat("contrast",e),this.renderToPingPong(n)}},{key:"setFxaa",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.fxaa,t);this.renderToPingPong(e)}},{key:"setFxaa2",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.fxaa2,t);this.renderToPingPong(e)}},{key:"renderToPingPong",value:function(t){this.ppb.swap(),this.ppb.start(),this.screen.render(t.get()),this.ppb.end()}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.applyTexToProg(this.programs[e?"debug":"screen"],t);this.screen.render(i.get())}},{key:"renderInverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.applyTexToProg(this.programs[e?"debug":"screen"],t);i.setFloat("flipY",1),this.screen.render(i.get())}},{key:"getTexture",value:function(){return this.ppb.getTexture()}}]),t}();function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var j=function(t){b()(i,t);var e=D(i);function i(){return a()(this,i),e.apply(this,arguments)}return h()(i,[{key:"create",value:function(){for(var t=new ArrayBuffer(this.size.width*this.size.height*4),e=new Uint8Array(t),i=0,n=0;n<this.size.height;n+=1)for(var s=0;s<this.size.width;s+=1)e[i]=255*Math.random(),e[i+1]=255*Math.random(),e[i+2]=0,e[i+3]=255,i+=4;this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.height,this.size.width,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}}]),i}(i(72710).Z);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var z=function(t){b()(i,t);var e=F(i);function i(t,n){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,i),(s=e.call(this,t,n,r)).textures={},Object.keys(s.programs).forEach((function(t){switch(t){case"watercolor2":case"watercolor3":s.textures[t]=new j(s.gl,512,512)}})),s}return h()(i,[{key:"setDOF",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.dof,s);r.setFloat("focusDistance",i),r.setFloat("blur",e),r.setFloat("ppm",n),r.setVector("range",t),r.setTexture(2,this.ppb.getDepthTexture().get(),"depthMap"),this.renderToPingPong(r)}},{key:"mergeBloom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.mergeBloom,n);s.setFloat("gamma",e),s.setFloat("exposure",i),s.setTexture(3,t.get(),"bloomMap"),this.renderToPingPong(s)}},{key:"setKuwahara",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.kuwahara,t);this.renderToPingPong(e)}},{key:"setWatercolor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.watercolor,t);this.renderToPingPong(e)}},{key:"setWatercolor2",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.watercolor2,s);r.setFloat("gradientStep",t),r.setFloat("advectStep",e),r.setFloat("flipHeightMap",i),r.setFloat("time",n),r.setTexture(2,this.textures.watercolor2.get(),"heightMap"),this.renderToPingPong(r)}},{key:"setWatercolor3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.watercolor3,t);e.setTexture(2,this.textures.watercolor3.get(),"noiseMap"),this.renderToPingPong(e)}},{key:"setWatercolorMoving",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.watercolorMoving,n);s.setFloat("time",t),s.setVector("mouse",e),s.setFloat("scale",i),this.renderToPingPong(s)}},{key:"setSobel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.sobel,t);this.renderToPingPong(e)}},{key:"setGamma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.applyTexToProg(this.programs.gamma,e);i.setFloat("gamma",t),this.renderToPingPong(i)}},{key:"setRGB",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.applyTexToProg(this.programs.rgb,s);r.setVector("center",[i,n]),r.setVector("delta",[t,e]),this.renderToPingPong(r)}},{key:"setVortex",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.vortex,n);s.setVector("center",t),s.setFloat("radius",e),s.setFloat("angle",i),this.renderToPingPong(s)}},{key:"setOil",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.applyTexToProg(this.programs.oil,e);i.setFloat("radius",t),this.renderToPingPong(i)}},{key:"setSketch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.applyTexToProg(this.programs.sketch,e);i.setFloat("delta",t),this.renderToPingPong(i)}},{key:"setPixel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.applyTexToProg(this.programs.pixel,i);n.setVector("delta",[t,e]),this.renderToPingPong(n)}},{key:"setWave",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.wave,n);s.setFloat("time",t),s.setFloat("radius",e),s.setVector("center",i),this.renderToPingPong(s)}},{key:"setSepia",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.applyTexToProg(this.programs.sepia,e);i.setFloat("delta",t),this.renderToPingPong(i)}},{key:"setGlitch",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.glitch,n);s.setFloat("delta",e),s.setFloat("time",t),s.setFloat("speed",i),this.renderToPingPong(s)}},{key:"setGlitch2",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.glitch2,n);s.setFloat("delta",e),s.setFloat("time",t),s.setFloat("speed",i),this.renderToPingPong(s)}},{key:"setGlitch3",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.applyTexToProg(this.programs.glitch3,i);n.setFloat("delta",e),n.setFloat("time",t),this.renderToPingPong(n)}},{key:"setGlitch4",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.glitch4,n);s.setFloat("delta",e),s.setFloat("time",t),s.setFloat("rate",i),this.renderToPingPong(s)}},{key:"setSignature",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.applyTexToProg(this.programs.signature,i);n.setFloat("delta",e),n.setFloat("time",t),this.renderToPingPong(n)}},{key:"setCompose",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.applyTexToProg(this.programs.compose,n);s.setTexture(6,t,"ssaoMap"),s.setTexture(7,e,"shadowMap"),s.setTexture(4,i,"depthMap"),this.renderToPingPong(s)}},{key:"setComposeShadow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.applyTexToProg(this.programs.composeShadow,e);i.setTexture(4,t,"shadowMap"),this.renderToPingPong(i)}}]),i}(S),N=i(81506),_=i.n(N),I=i(16525),C=i.n(I);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var Z=function(t){b()(i,t);var e=U(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,i),r=e.call(this,t,n,o),s()(_()(r),"setBlurIntensity",(function(t){r.blurIntensity=t})),s()(_()(r),"setBlurSize",(function(t){r.blurSize=t}));var h=n.blur||{};return r.blurSize=void 0!==h.size?h.size:.6,r.blurIntensity=void 0!==h.intensity?h.intensity:1,r}return h()(i,[{key:"setBlur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.blurOnePass,t);e.setFloat("size",this.blurSize),e.setFloat("intensity",this.blurIntensity),this.renderToPingPong(e)}}]),i}(S);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var L=function(t){b()(i,t);var e=X(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,i),r=e.call(this,t,n,o),s()(_()(r),"setNbPass",(function(t){r.blurNbPass=t})),r.scale=void 0!==n.scale?n.scale:1,r.threshold=void 0!==n.threshold?n.threshold:.1,r}return h()(i,[{key:"end",value:function(){C()(R()(i.prototype),"end",this).call(this),this.process()}},{key:"process",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.applyTexToProg(this.programs.bloom,t);e.setFloat("scale",this.scale),e.setFloat("threshold",this.threshold),this.renderToPingPong(e),this.setBlur()}}]),i}(Z),V=i(25773),B=i(41178),G=i(68763);function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var Y=function(t){b()(i,t);var e=q(i);function i(t,n){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,i),(s=e.call(this,t,n,r)).near=n.near||1,s.far=n.far||100,s.radius=n.radius||5,s.strength=n.strength||1;var o=s.programs.ssao;return o.setFloat("radius",s.radius),o.setFloat("near",s.near),o.setFloat("far",s.far),o.setFloat("strength",s.strength),s}return h()(i,[{key:"generateSsaoSamples",value:function(t,e){for(var i=0;i<e;i+=1){var n=i/e;n=(0,B.t7)(n*n,.1,1);var s=new V.Z((0,G.MX)(-1,1),(0,G.MX)(-1,1),(0,G.MX)(0,1)).normalise().multiplyNumber((0,G.MX)(0,1)).multiplyNumber(n);this.programs[t].setVector("samples[".concat(i,"]"),s.get())}}},{key:"compute",value:function(t){var e=this.applyTexToProg(this.programs.ssao,t);e.setFloat("flipY",-1),this.renderToPingPong(e)}}]),i}(Z);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R()(t);if(e){var s=R()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return E()(this,i)}}var K=function(t){b()(i,t);var e=W(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,i),r=e.call(this,t,n,o),s()(_()(r),"getProgram",(function(){return r.programs.shadow}));var h=r.programs.shadow;return h.setFloat("shadowEpsilon",n.epsilon||.01),h.setFloat("lighten",n.lighten||0),r}return h()(i,[{key:"start",value:function(t){var e=this.programs.shadow;t.setShadowProgram(e),C()(R()(i.prototype),"start",this).call(this)}}]),i}(Z);function H(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function J(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?H(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):H(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Q=function(){function t(e,i,n){a()(this,t),this.gl=e,this.config=i,this.time=0;var s=this.config.canvas,r=s.width,o=s.height;if(this.containerSize={width:r,height:o},n){if(n.shaders&&(this.mngProg=new v(this.gl,n.shaders,i.canvas),i.postprocess)){var h={width:r,height:o,useDepth:this.canUseDepth()},u=this.mngProg.getAll();this.postProcess=new z(this.gl,h,u),i.postprocess.bloom&&(this.bloom=new L(this.gl,J(J({},h),i.postprocess.bloom),u)),i.postprocess.ssao&&(this.ssao=new Y(this.gl,J(J(J({},h),i.postprocess.ssao),{},{near:i.camera.near,far:i.camera.far}),u)),i.postprocess.shadow&&(this.shadow=new K(this.gl,J(J({},h),i.postprocess.shadow),u))}n.textures&&(this.mngTex=new c(this.gl,n.textures,i.textures)),n.objets&&(this.mngObj=new d(this.gl,n.objets,n.materials)),n.gltfs&&(this.mngGltf=new m(this.gl,n.gltfs)),n.sounds&&(this.mngSound=new x(n.sounds))}this.resizeViewport()}return h()(t,[{key:"canUseDepth",value:function(){return this.config.useDepthTexture&&this.config.support.depthTexture||!1}},{key:"resize",value:function(t){this.containerSize=t,this.resizeViewport()}},{key:"update",value:function(t){this.time=t}},{key:"render",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"resizeViewport",value:function(){this.gl.viewport(0,0,this.containerSize.width,this.containerSize.height)}},{key:"getColorPixel",value:function(t,e){var i=new Uint8Array(4);return this.gl.readPixels(t,e,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i),i}}]),t}()},3022:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(16525),h=i.n(o),u=i(2205),c=i.n(u),l=i(78585),d=i.n(l),f=i(29754),v=i.n(f),p=i(20748),g=i(66160);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return d()(this,i)}}var m=function(t){c()(i,t);var e=y(i);function i(t,n,r){var a;return s()(this,i),(a=e.call(this,t,n,r)).camera=new g.Z(n.camera),a.camera.perspective(a.containerSize.width,a.containerSize.height),a}return a()(i,[{key:"resize",value:function(t){h()(v()(i.prototype),"resize",this).call(this,t),this.camera.perspective(this.containerSize.width,this.containerSize.height)}},{key:"update",value:function(t){h()(v()(i.prototype),"update",this).call(this,t),this.camera.update(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}}]),i}(p.Z)},22255:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(16525),h=i.n(o),u=i(2205),c=i.n(u),l=i(78585),d=i.n(l),f=i(29754),v=i.n(f),p=i(3022),g=i(27278);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return d()(this,i)}}var m=function(t){c()(i,t);var e=y(i);function i(t,n,r){var a;s()(this,i);var o=(a=e.call(this,t,n,r)).canUseDepth(),h=n.canvas,u=h.width,c=h.height;a.lampes=n.lampes&&n.lampes.map((function(t){return new g.Z(a.gl,t,u,c,o)}))||[];var l=a.mngProg.getAll();return Object.keys(l).forEach((function(t){var e=l[t];e.getLocations().numLights&&a.setLampeInfos(e)})),a}return a()(i,[{key:"renderReperes",value:function(){var t=this;this.lampes.forEach((function(e){return e.renderRepere(t.camera)}))}},{key:"randomLampesPositions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lampes.forEach((function(n,s){(null===i||null!==i&&s===i)&&n.move(t.time*e,s)}))}},{key:"setLampeInfos",value:function(t){var e=this;t.setVector("posEye",this.camera.getPosition()),t.setInt("numLights",this.lampes.length),this.config.lampes.forEach((function(i,n){var s=i.type,r=i.ambiant,a=i.diffuse,o=i.specular,h=i.brillance,u=i.radius,c=i.direction,l=i.strength;t.setInt("lights[".concat(n,"].type"),s),t.setVector("lights[".concat(n,"].position"),e.lampes[n].getPosition()),t.setVector("lights[".concat(n,"].ambiant"),r),t.setVector("lights[".concat(n,"].diffuse"),a),t.setVector("lights[".concat(n,"].specular"),o),h&&t.setFloat("lights[".concat(n,"].brillance"),h),u&&t.setFloat("lights[".concat(n,"].radius"),u),c&&t.setVector("lights[".concat(n,"].direction"),c),t.setFloat("lights[".concat(n,"].strength"),l||1)}))}},{key:"render",value:function(){h()(v()(i.prototype),"render",this).call(this),"function"==typeof this.renderBasiqueForLampeDepth&&this.renderBasiqueForLampeDepth(),this.mngProg.setCameraMatrix(this.camera,!!this.config.camera.ortho)}},{key:"getLampe",value:function(t){return this.lampes[t]?this.lampes[t]:null}}]),i}(p.Z)},72710:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64;s()(this,t),this.gl=e,this.size={width:i,height:n},this.texture=e.createTexture(),this.filter=e.NEAREST,this.setup()}return a()(t,[{key:"setup",value:function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.create(),this.setFilters(),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"create",value:function(){for(var t=new ArrayBuffer(this.size.width*this.size.height),e=new Uint8Array(t),i=0,n=0;n<this.size.height;n+=1)for(var s=0;s<this.size.width;s+=1)e[i]=255*Math.random(),i+=1;this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.ALPHA,this.size.width,this.size.height,0,this.gl.ALPHA,this.gl.UNSIGNED_BYTE,e)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}},{key:"get",value:function(){return this.texture}},{key:"setFiltre",value:function(t){this.filter=t}}]),t}()},91215:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=function(){function t(e,i){s()(this,t),this.gl=e;var n=Math.sqrt(i.length/4);this.size={width:n,height:n},this.texture=e.createTexture(),this.filter=e.NEAREST,this.setup(i)}return a()(t,[{key:"setup",value:function(t){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.width,this.size.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.setFilters(),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.filter),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT)}},{key:"get",value:function(){return this.texture}}]),t}()},17045:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(2205),h=i.n(o),u=i(78585),c=i.n(u),l=i(29754),d=i.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}var v=function(t){h()(i,t);var e=f(i);function i(){return s()(this,i),e.apply(this,arguments)}return a()(i,[{key:"create",value:function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.DEPTH_COMPONENT,this.size.width,this.size.height,0,this.gl.DEPTH_COMPONENT,this.gl.UNSIGNED_INT,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}}]),i}(i(72710).Z)},83495:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(2205),h=i.n(o),u=i(78585),c=i.n(u),l=i(29754),d=i.n(l);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d()(t);if(e){var s=d()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return c()(this,i)}}var v=function(t){h()(i,t);var e=f(i);function i(){return s()(this,i),e.apply(this,arguments)}return a()(i,[{key:"create",value:function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.width,this.size.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null)}},{key:"setFilters",value:function(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)}}]),i}(i(72710).Z)},41178:(t,e,i)=>{"use strict";i.d(e,{t7:()=>n});var n=function(t,e,i){return(1-t)*e+t*i}},8983:(t,e,i)=>{"use strict";i.d(e,{chunkArray:()=>n});var n=function(t,e){return Array.from({length:Math.ceil(t.length/e)},(function(i,n){return t.slice(n*e,n*e+e)}))}},68763:(t,e,i)=>{"use strict";i.d(e,{MX:()=>n,Yp:()=>s,mK:()=>r,ZI:()=>a});var n=function(t,e){return Math.random()*(e-t)+t},s=function(t,e,i,n,s){var r=n+(t-e)*(s-n)/(i-e);return r<Math.min(n,s)&&(r=Math.min(n,s)),r>Math.max(n,s)&&(r=Math.max(n,s)),r},r=function(t){return 0===t?0:t>0?1:-1},a=function(t){return t-Math.floor(t)}},35115:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(34575),s=i.n(n),r=i(93913),a=i.n(r),o=i(59713),h=i.n(o),u=function(){function t(e,i){s()(this,t),this.gl=e,i&&this.create(i),this.extension=e.getExtension("ANGLE_instanced_arrays")}return a()(t,[{key:"create",value:function(t){var e=t.locationKey,i=t.type,n=t.values,s=t.count,r=t.componentType,a=t.size,o=t.modeCalcul,h=t.isInstancing,u=void 0!==h&&h,c="SCALAR"!==i?this.gl.ARRAY_BUFFER:this.gl.ELEMENT_ARRAY_BUFFER;this.vbo=this.gl.createBuffer(),this.gl.bindBuffer(c,this.vbo),this.gl.bufferData(c,n,o),this.gl.bindBuffer(c,null),this.size=a,this.count=s,this.componentType=r,this.bufferType=c,this.locationKey=e,this.isInstancing=u}},{key:"enable",value:function(t){var e=this.locationKey,i=this.vbo,n=this.componentType,s=this.size,r=this.bufferType,a=this.isInstancing,o=void 0!==a&&a;if("indices"===e)this.gl.bindBuffer(r,i);else{var h=t.locations[e];void 0!==h&&-1!==h&&(this.gl.bindBuffer(r,i),this.gl.enableVertexAttribArray(h),this.gl.vertexAttribPointer(h,s,n,!1,0,0),o&&this.extension.vertexAttribDivisorANGLE(h,1))}}},{key:"start",value:function(t){this.gl.useProgram(t)}},{key:"end",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.useProgram(null)}},{key:"update",value:function(t){this.gl.bindBuffer(this.bufferType,this.vbo),this.gl.bufferSubData(this.bufferType,0,new Float32Array(t)),this.gl.bindBuffer(this.bufferType,null)}},{key:"render",value:function(t,e){"indices"===this.locationKey?this.gl.drawElements(e,this.count,this.componentType,0):this.gl.drawArrays(e,0,this.count)}},{key:"renderInstancing",value:function(t,e,i){"indices"===this.locationKey?this.extension.drawElementsInstancedANGLE(e,this.count,this.gl.UNSIGNED_SHORT,0,i):this.extension.drawArraysInstancedANGLE(e,0,this.count,i)}},{key:"getCount",value:function(){return this.count}}]),t}();function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){h()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d=function(){function t(e,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s()(this,t),h()(this,"getActiveVbo",(function(){return n.vbos.indices||n.vbos.position||n.vbos.texture})),this.gl=e,this.modeDessin=this.gl.TRIANGLES,this.modeCalcul=r?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW,this.vbos=Object.keys(i).reduce((function(t,s){return t[s]=new u(e,l({locationKey:s,modeCalcul:n.modeCalcul},i[s])),t}),{}),this.instanceCount=-1}return a()(t,[{key:"addInstancingVbos",value:function(t,e){var i=this,n=Object.keys(e).reduce((function(t,n){return t[n]=new u(i.gl,l({locationKey:n,modeCalcul:i.modeCalcul,isInstancing:!0},e[n])),t}),{});this.vbos=l(l({},this.vbos),n),this.instanceCount=t}},{key:"enable",value:function(t){var e=this;this.gl.useProgram(t),Object.keys(this.vbos).forEach((function(i){e.vbos[i].enable(t)}))}},{key:"update",value:function(t){var e=this;Object.keys(t).forEach((function(i){e.vbos[i].update(t[i])}))}},{key:"render",value:function(t){this.enable(t);var e=this.getActiveVbo();-1!==this.instanceCount?e.renderInstancing(t,this.modeDessin,this.instanceCount):e.render(t,this.modeDessin),e.end()}},{key:"setModeDessin",value:function(t){this.modeDessin=t}},{key:"setModeCalcul",value:function(t){this.modeCalcul=t}}]),t}()}}]);