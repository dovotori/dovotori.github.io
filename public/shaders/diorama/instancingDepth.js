import fragment from"../camera/basicFrag";import{funcInstancing}from"../utils/instancing";import{getNaturalHeight,locations}from"../utils/terrain";const vertex=`\nattribute vec3 position;\nattribute vec3 normale;\nattribute vec3 offset;\nattribute float size;\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float waterLevel;\n\n${getNaturalHeight}\n${funcInstancing}\n\nvarying vec3 fragNormale;\n\nvoid main() {\n  vec3 fixedPos = getFixedPosition(offset);\n  if (fixedPos.y < waterLevel) {\n    fixedPos = vec3(0.0, 100.0, 0.0); // we hide it\n  }\n  fragNormale = normale;\n  vec4 terrainPos = getTerrainPosition(fixedPos, position);\n  gl_Position = projection * view * terrainPos;\n}\n`;export default{vertex,fragment,attributes:["position","normale","offset","size"],uniforms:["projection","model","view","waterLevel"].concat(locations)};